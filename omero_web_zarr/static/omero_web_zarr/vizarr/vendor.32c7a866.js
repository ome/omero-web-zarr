var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,a=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,s=(e,t)=>{for(var n in t||(t={}))i.call(t,n)&&a(e,n,t[n]);if(r)for(var n of r(t))o.call(t,n)&&a(e,n,t[n]);return e},l=(e,r)=>t(e,n(r)),u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var f={exports:{}},h={},d=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;function m(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var g=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,r,i=m(e),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))p.call(n,a)&&(i[a]=n[a]);if(d){r=d(n);for(var s=0;s<r.length;s++)v.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i},y=g,x=60103,b=60106;
/** @license React v17.0.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */h.Fragment=60107,h.StrictMode=60108,h.Profiler=60114;var _=60109,w=60110,k=60112;h.Suspense=60113;var S=60115,E=60116;if("function"==typeof Symbol&&Symbol.for){var P=Symbol.for;x=P("react.element"),b=P("react.portal"),h.Fragment=P("react.fragment"),h.StrictMode=P("react.strict_mode"),h.Profiler=P("react.profiler"),_=P("react.provider"),w=P("react.context"),k=P("react.forward_ref"),h.Suspense=P("react.suspense"),S=P("react.memo"),E=P("react.lazy")}var C="function"==typeof Symbol&&Symbol.iterator;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T={};function M(e,t,n){this.props=e,this.context=t,this.refs=T,this.updater=n||O}function R(){}function I(e,t,n){this.props=e,this.context=t,this.refs=T,this.updater=n||O}M.prototype.isReactComponent={},M.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(A(85));this.updater.enqueueSetState(this,e,t,"setState")},M.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},R.prototype=M.prototype;var L=I.prototype=new R;L.constructor=I,y(L,M.prototype),L.isPureReactComponent=!0;var j={current:null},D=Object.prototype.hasOwnProperty,N={key:!0,ref:!0,__self:!0,__source:!0};function F(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)D.call(t,r)&&!N.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:x,type:e,key:o,ref:a,props:i,_owner:j.current}}function z(e){return"object"==typeof e&&null!==e&&e.$$typeof===x}var B=/\/+/g;function V(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function U(e,t,n,r,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case x:case b:a=!0}}if(a)return i=i(a=e),e=""===r?"."+V(a,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace(B,"$&/")+"/"),U(i,t,n,"",(function(e){return e}))):null!=i&&(z(i)&&(i=function(e,t){return{$$typeof:x,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(B,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=""===r?".":r+":",Array.isArray(e))for(var s=0;s<e.length;s++){var l=r+V(o=e[s],s);a+=U(o,t,n,l,i)}else if("function"==typeof(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=C&&e[C]||e["@@iterator"])?e:null}(e)))for(e=l.call(e),s=0;!(o=e.next()).done;)a+=U(o=o.value,t,n,l=r+V(o,s++),i);else if("object"===o)throw t=""+e,Error(A(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return a}function W(e,t,n){if(null==e)return e;var r=[],i=0;return U(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function G(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var H={current:null};function q(){var e=H.current;if(null===e)throw Error(A(321));return e}var $={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:j,IsSomeRendererActing:{current:!1},assign:y};h.Children={map:W,forEach:function(e,t,n){W(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return W(e,(function(){t++})),t},toArray:function(e){return W(e,(function(e){return e}))||[]},only:function(e){if(!z(e))throw Error(A(143));return e}},h.Component=M,h.PureComponent=I,h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,h.cloneElement=function(e,t,n){if(null==e)throw Error(A(267,e));var r=y({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=j.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)D.call(t,l)&&!N.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==s?s[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:x,type:e.type,key:i,ref:o,props:r,_owner:a}},h.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:w,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:_,_context:e},e.Consumer=e},h.createElement=F,h.createFactory=function(e){var t=F.bind(null,e);return t.type=e,t},h.createRef=function(){return{current:null}},h.forwardRef=function(e){return{$$typeof:k,render:e}},h.isValidElement=z,h.lazy=function(e){return{$$typeof:E,_payload:{_status:-1,_result:e},_init:G}},h.memo=function(e,t){return{$$typeof:S,type:e,compare:void 0===t?null:t}},h.useCallback=function(e,t){return q().useCallback(e,t)},h.useContext=function(e,t){return q().useContext(e,t)},h.useDebugValue=function(){},h.useEffect=function(e,t){return q().useEffect(e,t)},h.useImperativeHandle=function(e,t,n){return q().useImperativeHandle(e,t,n)},h.useLayoutEffect=function(e,t){return q().useLayoutEffect(e,t)},h.useMemo=function(e,t){return q().useMemo(e,t)},h.useReducer=function(e,t,n){return q().useReducer(e,t,n)},h.useRef=function(e){return q().useRef(e)},h.useState=function(e){return q().useState(e)},h.version="17.0.1",f.exports=h;var X=f.exports,Y={exports:{}},Z={},K={exports:{}},Q={};
/** @license React v0.20.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){var t,n,r,i;if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var l=null,u=null,c=function(){if(null!==l)try{var t=e.unstable_now();l(!0,t),l=null}catch(n){throw setTimeout(c,0),n}};t=function(e){null!==l?setTimeout(t,0,e):(l=e,setTimeout(c,0))},n=function(e,t){u=setTimeout(e,t)},r=function(){clearTimeout(u)},e.unstable_shouldYield=function(){return!1},i=e.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,h=window.clearTimeout;if("undefined"!=typeof console){var d=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof d&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var p=!1,v=null,m=-1,g=5,y=0;e.unstable_shouldYield=function(){return e.unstable_now()>=y},i=function(){},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,b=x.port2;x.port1.onmessage=function(){if(null!==v){var t=e.unstable_now();y=t+g;try{v(!0,t)?b.postMessage(null):(p=!1,v=null)}catch(n){throw b.postMessage(null),n}}else p=!1},t=function(e){v=e,p||(p=!0,b.postMessage(null))},n=function(t,n){m=f((function(){t(e.unstable_now())}),n)},r=function(){h(m),m=-1}}function _(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<S(i,t)))break e;e[r]=t,e[n]=i,n=r}}function w(e){return void 0===(e=e[0])?null:e}function k(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,l=e[s];if(void 0!==a&&0>S(a,n))void 0!==l&&0>S(l,a)?(e[r]=l,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==l&&0>S(l,n)))break e;e[r]=l,e[s]=n,r=s}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var E=[],P=[],C=1,A=null,O=3,T=!1,M=!1,R=!1;function I(e){for(var t=w(P);null!==t;){if(null===t.callback)k(P);else{if(!(t.startTime<=e))break;k(P),t.sortIndex=t.expirationTime,_(E,t)}t=w(P)}}function L(e){if(R=!1,I(e),!M)if(null!==w(E))M=!0,t(j);else{var r=w(P);null!==r&&n(L,r.startTime-e)}}function j(t,i){M=!1,R&&(R=!1,r()),T=!0;var o=O;try{for(I(i),A=w(E);null!==A&&(!(A.expirationTime>i)||t&&!e.unstable_shouldYield());){var a=A.callback;if("function"==typeof a){A.callback=null,O=A.priorityLevel;var s=a(A.expirationTime<=i);i=e.unstable_now(),"function"==typeof s?A.callback=s:A===w(E)&&k(E),I(i)}else k(E);A=w(E)}if(null!==A)var l=!0;else{var u=w(P);null!==u&&n(L,u.startTime-i),l=!1}return l}finally{A=null,O=o,T=!1}}var D=i;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){M||T||(M=!0,t(j))},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return w(E)},e.unstable_next=function(e){switch(O){case 1:case 2:case 3:var t=3;break;default:t=O}var n=O;O=t;try{return e()}finally{O=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=D,e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=O;O=e;try{return t()}finally{O=n}},e.unstable_scheduleCallback=function(i,o,a){var s=e.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?s+a:s:a=s,i){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return i={id:C++,callback:o,priorityLevel:i,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>s?(i.sortIndex=a,_(P,i),null===w(E)&&i===w(P)&&(R?r():R=!0,n(L,a-s))):(i.sortIndex=l,_(E,i),M||T||(M=!0,t(j))),i},e.unstable_wrapCallback=function(e){var t=O;return function(){var n=O;O=t;try{return e.apply(this,arguments)}finally{O=n}}}}(Q),K.exports=Q;
/** @license React v17.0.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var J=f.exports,ee=g,te=K.exports;function ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!J)throw Error(ne(227));var re=new Set,ie={};function oe(e,t){ae(e,t),ae(e+"Capture",t)}function ae(e,t){for(ie[e]=t,e=0;e<t.length;e++)re.add(t[e])}var se=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),le=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ue=Object.prototype.hasOwnProperty,ce={},fe={};function he(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var de={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){de[e]=new he(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];de[t]=new he(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){de[e]=new he(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){de[e]=new he(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){de[e]=new he(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){de[e]=new he(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){de[e]=new he(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){de[e]=new he(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){de[e]=new he(e,5,!1,e.toLowerCase(),null,!1,!1)}));var pe=/[\-:]([a-z])/g;function ve(e){return e[1].toUpperCase()}function me(e,t,n,r){var i=de.hasOwnProperty(t)?de[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!ue.call(fe,e)||!ue.call(ce,e)&&(le.test(e)?fe[e]=!0:(ce[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(pe,ve);de[t]=new he(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(pe,ve);de[t]=new he(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(pe,ve);de[t]=new he(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){de[e]=new he(e,1,!1,e.toLowerCase(),null,!1,!1)})),de.xlinkHref=new he("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){de[e]=new he(e,1,!1,e.toLowerCase(),null,!0,!0)}));var ge=J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ye=60103,xe=60106,be=60107,_e=60108,we=60114,ke=60109,Se=60110,Ee=60112,Pe=60113,Ce=60120,Ae=60115,Oe=60116,Te=60121,Me=60128,Re=60129,Ie=60130,Le=60131;if("function"==typeof Symbol&&Symbol.for){var je=Symbol.for;ye=je("react.element"),xe=je("react.portal"),be=je("react.fragment"),_e=je("react.strict_mode"),we=je("react.profiler"),ke=je("react.provider"),Se=je("react.context"),Ee=je("react.forward_ref"),Pe=je("react.suspense"),Ce=je("react.suspense_list"),Ae=je("react.memo"),Oe=je("react.lazy"),Te=je("react.block"),je("react.scope"),Me=je("react.opaque.id"),Re=je("react.debug_trace_mode"),Ie=je("react.offscreen"),Le=je("react.legacy_hidden")}var De,Ne="function"==typeof Symbol&&Symbol.iterator;function Fe(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Ne&&e[Ne]||e["@@iterator"])?e:null}function ze(e){if(void 0===De)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);De=t&&t[1]||""}return"\n"+De+e}var Be=!1;function Ve(e,t){if(!e||Be)return"";Be=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"==typeof l.stack){for(var i=l.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{Be=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ze(e):""}function Ue(e){switch(e.tag){case 5:return ze(e.type);case 16:return ze("Lazy");case 13:return ze("Suspense");case 19:return ze("SuspenseList");case 0:case 2:case 15:return e=Ve(e.type,!1);case 11:return e=Ve(e.type.render,!1);case 22:return e=Ve(e.type._render,!1);case 1:return e=Ve(e.type,!0);default:return""}}function We(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case be:return"Fragment";case xe:return"Portal";case we:return"Profiler";case _e:return"StrictMode";case Pe:return"Suspense";case Ce:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Se:return(e.displayName||"Context")+".Consumer";case ke:return(e._context.displayName||"Context")+".Provider";case Ee:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case Ae:return We(e.type);case Te:return We(e._render);case Oe:t=e._payload,e=e._init;try{return We(e(t))}catch(n){}}return null}function Ge(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function He(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function qe(e){e._valueTracker||(e._valueTracker=function(e){var t=He(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=He(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Xe(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Ye(e,t){var n=t.checked;return ee({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ze(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Ge(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ke(e,t){null!=(t=t.checked)&&me(e,"checked",t,!1)}function Qe(e,t){Ke(e,t);var n=Ge(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?et(e,t.type,n):t.hasOwnProperty("defaultValue")&&et(e,t.type,Ge(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Je(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function et(e,t,n){"number"===t&&Xe(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function tt(e,t){return e=ee({children:void 0},t),(t=function(e){var t="";return J.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function nt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ge(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function rt(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(ne(91));return ee({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function it(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(ne(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(ne(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Ge(n)}}function ot(e,t){var n=Ge(t.value),r=Ge(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function at(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var st="http://www.w3.org/1999/xhtml",lt="http://www.w3.org/2000/svg";function ut(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ut(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ft,ht,dt=(ht=function(e,t){if(e.namespaceURI!==lt||"innerHTML"in e)e.innerHTML=t;else{for((ft=ft||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ft.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ht(e,t)}))}:ht);function pt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var vt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mt=["Webkit","ms","Moz","O"];function gt(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||vt.hasOwnProperty(e)&&vt[e]?(""+t).trim():t+"px"}function yt(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=gt(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(vt).forEach((function(e){mt.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),vt[t]=vt[e]}))}));var xt=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bt(e,t){if(t){if(xt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(ne(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(ne(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(ne(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(ne(62))}}function _t(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function wt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var kt=null,St=null,Et=null;function Pt(e){if(e=Zi(e)){if("function"!=typeof kt)throw Error(ne(280));var t=e.stateNode;t&&(t=Qi(t),kt(e.stateNode,e.type,t))}}function Ct(e){St?Et?Et.push(e):Et=[e]:St=e}function At(){if(St){var e=St,t=Et;if(Et=St=null,Pt(e),t)for(e=0;e<t.length;e++)Pt(t[e])}}function Ot(e,t){return e(t)}function Tt(e,t,n,r,i){return e(t,n,r,i)}function Mt(){}var Rt=Ot,It=!1,Lt=!1;function jt(){null===St&&null===Et||(Mt(),At())}function Dt(e,t){var n=e.stateNode;if(null===n)return null;var r=Qi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(ne(231,t,typeof n));return n}var Nt=!1;if(se)try{var Ft={};Object.defineProperty(Ft,"passive",{get:function(){Nt=!0}}),window.addEventListener("test",Ft,Ft),window.removeEventListener("test",Ft,Ft)}catch(ht){Nt=!1}function zt(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Bt=!1,Vt=null,Ut=!1,Wt=null,Gt={onError:function(e){Bt=!0,Vt=e}};function Ht(e,t,n,r,i,o,a,s,l){Bt=!1,Vt=null,zt.apply(Gt,arguments)}function qt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $t(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xt(e){if(qt(e)!==e)throw Error(ne(188))}function Yt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=qt(e)))throw Error(ne(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Xt(i),e;if(o===r)return Xt(i),t;o=o.sibling}throw Error(ne(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(3!==n.tag)throw Error(ne(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Zt(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var Kt,Qt,Jt,en,tn=!1,nn=[],rn=null,on=null,an=null,sn=new Map,ln=new Map,un=[],cn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fn(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function hn(e,t){switch(e){case"focusin":case"focusout":rn=null;break;case"dragenter":case"dragleave":on=null;break;case"mouseover":case"mouseout":an=null;break;case"pointerover":case"pointerout":sn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ln.delete(t.pointerId)}}function dn(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=fn(t,n,r,i,o),null!==t&&(null!==(t=Zi(t))&&Qt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function pn(e){var t=Yi(e.target);if(null!==t){var n=qt(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$t(n)))return e.blockedOn=t,void en(e.lanePriority,(function(){te.unstable_runWithPriority(e.priority,(function(){Jt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function vn(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Zi(n))&&Qt(t),e.blockedOn=n,!1;t.shift()}return!0}function mn(e,t,n){vn(e)&&n.delete(t)}function gn(){for(tn=!1;0<nn.length;){var e=nn[0];if(null!==e.blockedOn){null!==(e=Zi(e.blockedOn))&&Kt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&nn.shift()}null!==rn&&vn(rn)&&(rn=null),null!==on&&vn(on)&&(on=null),null!==an&&vn(an)&&(an=null),sn.forEach(mn),ln.forEach(mn)}function yn(e,t){e.blockedOn===t&&(e.blockedOn=null,tn||(tn=!0,te.unstable_scheduleCallback(te.unstable_NormalPriority,gn)))}function xn(e){function t(t){return yn(t,e)}if(0<nn.length){yn(nn[0],e);for(var n=1;n<nn.length;n++){var r=nn[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==rn&&yn(rn,e),null!==on&&yn(on,e),null!==an&&yn(an,e),sn.forEach(t),ln.forEach(t),n=0;n<un.length;n++)(r=un[n]).blockedOn===e&&(r.blockedOn=null);for(;0<un.length&&null===(n=un[0]).blockedOn;)pn(n),null===n.blockedOn&&un.shift()}function bn(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _n={animationend:bn("Animation","AnimationEnd"),animationiteration:bn("Animation","AnimationIteration"),animationstart:bn("Animation","AnimationStart"),transitionend:bn("Transition","TransitionEnd")},wn={},kn={};function Sn(e){if(wn[e])return wn[e];if(!_n[e])return e;var t,n=_n[e];for(t in n)if(n.hasOwnProperty(t)&&t in kn)return wn[e]=n[t];return e}se&&(kn=document.createElement("div").style,"AnimationEvent"in window||(delete _n.animationend.animation,delete _n.animationiteration.animation,delete _n.animationstart.animation),"TransitionEvent"in window||delete _n.transitionend.transition);var En=Sn("animationend"),Pn=Sn("animationiteration"),Cn=Sn("animationstart"),An=Sn("transitionend"),On=new Map,Tn=new Map,Mn=["abort","abort",En,"animationEnd",Pn,"animationIteration",Cn,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",An,"transitionEnd","waiting","waiting"];function Rn(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Tn.set(r,t),On.set(r,i),oe(i,[r])}}(0,te.unstable_now)();var In=8;function Ln(e){if(0!=(1&e))return In=15,1;if(0!=(2&e))return In=14,2;if(0!=(4&e))return In=13,4;var t=24&e;return 0!==t?(In=12,t):0!=(32&e)?(In=11,32):0!==(t=192&e)?(In=10,t):0!=(256&e)?(In=9,256):0!==(t=3584&e)?(In=8,t):0!=(4096&e)?(In=7,4096):0!==(t=4186112&e)?(In=6,t):0!==(t=62914560&e)?(In=5,t):67108864&e?(In=4,67108864):0!=(134217728&e)?(In=3,134217728):0!==(t=805306368&e)?(In=2,t):0!=(1073741824&e)?(In=1,1073741824):(In=8,e)}function jn(e,t){var n=e.pendingLanes;if(0===n)return In=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=In=15;else if(0!==(o=134217727&n)){var l=o&~a;0!==l?(r=Ln(l),i=In):0!==(s&=o)&&(r=Ln(s),i=In)}else 0!==(o=n&~a)?(r=Ln(o),i=In):0!==s&&(r=Ln(s),i=In);if(0===r)return 0;if(r=n&((0>(r=31-Vn(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&a)){if(Ln(t),i<=In)return t;In=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Vn(t)),r|=e[n],t&=~i;return r}function Dn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Nn(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Fn(24&~t))?Nn(10,t):e;case 10:return 0===(e=Fn(192&~t))?Nn(8,t):e;case 8:return 0===(e=Fn(3584&~t))&&(0===(e=Fn(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Fn(805306368&~t))&&(t=268435456),t}throw Error(ne(358,e))}function Fn(e){return e&-e}function zn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bn(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Vn(t)]=n}var Vn=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Un(e)/Wn|0)|0},Un=Math.log,Wn=Math.LN2;var Gn=te.unstable_UserBlockingPriority,Hn=te.unstable_runWithPriority,qn=!0;function $n(e,t,n,r){It||Mt();var i=Yn,o=It;It=!0;try{Tt(i,e,t,n,r)}finally{(It=o)||jt()}}function Xn(e,t,n,r){Hn(Gn,Yn.bind(null,e,t,n,r))}function Yn(e,t,n,r){var i;if(qn)if((i=0==(4&t))&&0<nn.length&&-1<cn.indexOf(e))e=fn(null,e,t,n,r),nn.push(e);else{var o=Zn(e,t,n,r);if(null===o)i&&hn(e,r);else{if(i){if(-1<cn.indexOf(e))return e=fn(o,e,t,n,r),void nn.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return rn=dn(rn,e,t,n,r,i),!0;case"dragenter":return on=dn(on,e,t,n,r,i),!0;case"mouseover":return an=dn(an,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return sn.set(o,dn(sn.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ln.set(o,dn(ln.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;hn(e,r)}Ai(e,t,r,null,n)}}}function Zn(e,t,n,r){var i=wt(r);if(null!==(i=Yi(i))){var o=qt(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=$t(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Ai(e,t,r,i,n),null}var Kn=null,Qn=null,Jn=null;function er(){if(Jn)return Jn;var e,t,n=Qn,r=n.length,i="value"in Kn?Kn.value:Kn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Jn=i.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nr(){return!0}function rr(){return!1}function ir(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nr:rr,this.isPropagationStopped=rr,this}return ee(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nr)},persist:function(){},isPersistent:nr}),t}var or,ar,sr,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ur=ir(lr),cr=ee({},lr,{view:0,detail:0}),fr=ir(cr),hr=ee({},cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&"mousemove"===e.type?(or=e.screenX-sr.screenX,ar=e.screenY-sr.screenY):ar=or=0,sr=e),or)},movementY:function(e){return"movementY"in e?e.movementY:ar}}),dr=ir(hr),pr=ir(ee({},hr,{dataTransfer:0})),vr=ir(ee({},cr,{relatedTarget:0})),mr=ir(ee({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),gr=ir(ee({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),yr=ir(ee({},lr,{data:0})),xr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},br={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_r[e])&&!!t[e]}function kr(){return wr}var Sr=ir(ee({},cr,{key:function(e){if(e.key){var t=xr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?br[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Er=ir(ee({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pr=ir(ee({},cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr})),Cr=ir(ee({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ar=ir(ee({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Or=[9,13,27,32],Tr=se&&"CompositionEvent"in window,Mr=null;se&&"documentMode"in document&&(Mr=document.documentMode);var Rr=se&&"TextEvent"in window&&!Mr,Ir=se&&(!Tr||Mr&&8<Mr&&11>=Mr),Lr=String.fromCharCode(32),jr=!1;function Dr(e,t){switch(e){case"keyup":return-1!==Or.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Fr=!1;var zr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Br(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zr[e.type]:"textarea"===t}function Vr(e,t,n,r){Ct(r),0<(t=Ti(t,"onChange")).length&&(n=new ur("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ur=null,Wr=null;function Gr(e){wi(e,0)}function Hr(e){if($e(Ki(e)))return e}function qr(e,t){if("change"===e)return t}var $r=!1;if(se){var Xr;if(se){var Yr="oninput"in document;if(!Yr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Yr="function"==typeof Zr.oninput}Xr=Yr}else Xr=!1;$r=Xr&&(!document.documentMode||9<document.documentMode)}function Kr(){Ur&&(Ur.detachEvent("onpropertychange",Qr),Wr=Ur=null)}function Qr(e){if("value"===e.propertyName&&Hr(Wr)){var t=[];if(Vr(t,Wr,e,wt(e)),e=Gr,It)e(t);else{It=!0;try{Ot(e,t)}finally{It=!1,jt()}}}}function Jr(e,t,n){"focusin"===e?(Kr(),Wr=n,(Ur=t).attachEvent("onpropertychange",Qr)):"focusout"===e&&Kr()}function ei(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Hr(Wr)}function ti(e,t){if("click"===e)return Hr(t)}function ni(e,t){if("input"===e||"change"===e)return Hr(t)}var ri="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ii=Object.prototype.hasOwnProperty;function oi(e,t){if(ri(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ii.call(t,n[r])||!ri(e[n[r]],t[n[r]]))return!1;return!0}function ai(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function si(e,t){var n,r=ai(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ai(r)}}function li(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?li(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ui(){for(var e=window,t=Xe();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Xe((e=t.contentWindow).document)}return t}function ci(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var fi=se&&"documentMode"in document&&11>=document.documentMode,hi=null,di=null,pi=null,vi=!1;function mi(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vi||null==hi||hi!==Xe(r)||("selectionStart"in(r=hi)&&ci(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},pi&&oi(pi,r)||(pi=r,0<(r=Ti(di,"onSelect")).length&&(t=new ur("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=hi)))}Rn("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Rn("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Rn(Mn,2);for(var gi="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),yi=0;yi<gi.length;yi++)Tn.set(gi[yi],0);ae("onMouseEnter",["mouseout","mouseover"]),ae("onMouseLeave",["mouseout","mouseover"]),ae("onPointerEnter",["pointerout","pointerover"]),ae("onPointerLeave",["pointerout","pointerover"]),oe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oe("onBeforeInput",["compositionend","keypress","textInput","paste"]),oe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bi=new Set("cancel close invalid load scroll toggle".split(" ").concat(xi));function _i(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,s,l){if(Ht.apply(this,arguments),Bt){if(!Bt)throw Error(ne(198));var u=Vt;Bt=!1,Vt=null,Ut||(Ut=!0,Wt=u)}}(r,t,void 0,e),e.currentTarget=null}function wi(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;_i(i,s,u),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;_i(i,s,u),o=l}}}if(Ut)throw e=Wt,Ut=!1,Wt=null,e}function ki(e,t){var n=Ji(t),r=e+"__bubble";n.has(r)||(Ci(t,e,2,!1),n.add(r))}var Si="_reactListening"+Math.random().toString(36).slice(2);function Ei(e){e[Si]||(e[Si]=!0,re.forEach((function(t){bi.has(t)||Pi(t,!1,e,null),Pi(t,!0,e,null)})))}function Pi(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&bi.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=Ji(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Ci(o,e,i,t),a.add(s))}function Ci(e,t,n,r){var i=Tn.get(t);switch(void 0===i?2:i){case 0:i=$n;break;case 1:i=Xn;break;default:i=Yn}n=i.bind(null,t,n,e),i=void 0,!Nt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ai(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=Yi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Lt)return e(t,n);Lt=!0;try{Rt(e,t,n)}finally{Lt=!1,jt()}}((function(){var r=o,i=wt(n),a=[];e:{var s=On.get(e);if(void 0!==s){var l=ur,u=e;switch(e){case"keypress":if(0===tr(n))break e;case"keydown":case"keyup":l=Sr;break;case"focusin":u="focus",l=vr;break;case"focusout":u="blur",l=vr;break;case"beforeblur":case"afterblur":l=vr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=dr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pr;break;case En:case Pn:case Cn:l=mr;break;case An:l=Cr;break;case"scroll":l=fr;break;case"wheel":l=Ar;break;case"copy":case"cut":case"paste":l=gr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Er}var c=0!=(4&t),f=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Dt(p,h))&&c.push(Oi(p,v,d)))),f)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,i),a.push({event:s,listeners:c}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(u=n.relatedTarget||n.fromElement)||!Yi(u)&&!u[$i])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?Yi(u):null)&&(u!==(f=qt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=dr,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Er,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==l?s:Ki(l),d=null==u?s:Ki(u),(s=new c(v,p+"leave",l,n,i)).target=f,s.relatedTarget=d,v=null,Yi(i)===r&&((c=new c(h,p+"enter",u,n,i)).target=d,c.relatedTarget=f,v=c),f=v,l&&u)e:{for(h=u,p=0,d=c=l;d;d=Mi(d))p++;for(d=0,v=h;v;v=Mi(v))d++;for(;0<p-d;)c=Mi(c),p--;for(;0<d-p;)h=Mi(h),d--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Mi(c),h=Mi(h)}c=null}else c=null;null!==l&&Ri(a,s,l,c,!1),null!==u&&null!==f&&Ri(a,f,u,c,!0)}if("select"===(l=(s=r?Ki(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=qr;else if(Br(s))if($r)m=ni;else{m=ei;var g=Jr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ti);switch(m&&(m=m(e,r))?Vr(a,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&et(s,"number",s.value)),g=r?Ki(r):window,e){case"focusin":(Br(g)||"true"===g.contentEditable)&&(hi=g,di=r,pi=null);break;case"focusout":pi=di=hi=null;break;case"mousedown":vi=!0;break;case"contextmenu":case"mouseup":case"dragend":vi=!1,mi(a,n,i);break;case"selectionchange":if(fi)break;case"keydown":case"keyup":mi(a,n,i)}var y;if(Tr)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Fr?Dr(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Ir&&"ko"!==n.locale&&(Fr||"onCompositionStart"!==x?"onCompositionEnd"===x&&Fr&&(y=er()):(Qn="value"in(Kn=i)?Kn.value:Kn.textContent,Fr=!0)),0<(g=Ti(r,x)).length&&(x=new yr(x,e,null,n,i),a.push({event:x,listeners:g}),y?x.data=y:null!==(y=Nr(n))&&(x.data=y))),(y=Rr?function(e,t){switch(e){case"compositionend":return Nr(t);case"keypress":return 32!==t.which?null:(jr=!0,Lr);case"textInput":return(e=t.data)===Lr&&jr?null:e;default:return null}}(e,n):function(e,t){if(Fr)return"compositionend"===e||!Tr&&Dr(e,t)?(e=er(),Jn=Qn=Kn=null,Fr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ir&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Ti(r,"onBeforeInput")).length&&(i=new yr("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}wi(a,t)}))}function Oi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ti(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Dt(e,n))&&r.unshift(Oi(e,o,i)),null!=(o=Dt(e,t))&&r.push(Oi(e,o,i))),e=e.return}return r}function Mi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ri(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Dt(n,o))&&a.unshift(Oi(n,l,s)):i||null!=(l=Dt(n,o))&&a.push(Oi(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Ii(){}var Li=null,ji=null;function Di(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ni(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Fi="function"==typeof setTimeout?setTimeout:void 0,zi="function"==typeof clearTimeout?clearTimeout:void 0;function Bi(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Vi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Wi=0;var Gi=Math.random().toString(36).slice(2),Hi="__reactFiber$"+Gi,qi="__reactProps$"+Gi,$i="__reactContainer$"+Gi,Xi="__reactEvents$"+Gi;function Yi(e){var t=e[Hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[$i]||n[Hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ui(e);null!==e;){if(n=e[Hi])return n;e=Ui(e)}return t}n=(e=n).parentNode}return null}function Zi(e){return!(e=e[Hi]||e[$i])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ki(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(ne(33))}function Qi(e){return e[qi]||null}function Ji(e){var t=e[Xi];return void 0===t&&(t=e[Xi]=new Set),t}var eo=[],to=-1;function no(e){return{current:e}}function ro(e){0>to||(e.current=eo[to],eo[to]=null,to--)}function io(e,t){to++,eo[to]=e.current,e.current=t}var oo={},ao=no(oo),so=no(!1),lo=oo;function uo(e,t){var n=e.type.contextTypes;if(!n)return oo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function co(e){return null!=(e=e.childContextTypes)}function fo(){ro(so),ro(ao)}function ho(e,t,n){if(ao.current!==oo)throw Error(ne(168));io(ao,t),io(so,n)}function po(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(ne(108,We(t)||"Unknown",i));return ee({},n,r)}function vo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||oo,lo=ao.current,io(ao,e),io(so,so.current),!0}function mo(e,t,n){var r=e.stateNode;if(!r)throw Error(ne(169));n?(e=po(e,t,lo),r.__reactInternalMemoizedMergedChildContext=e,ro(so),ro(ao),io(ao,e)):ro(so),io(so,n)}var go=null,yo=null,xo=te.unstable_runWithPriority,bo=te.unstable_scheduleCallback,_o=te.unstable_cancelCallback,wo=te.unstable_shouldYield,ko=te.unstable_requestPaint,So=te.unstable_now,Eo=te.unstable_getCurrentPriorityLevel,Po=te.unstable_ImmediatePriority,Co=te.unstable_UserBlockingPriority,Ao=te.unstable_NormalPriority,Oo=te.unstable_LowPriority,To=te.unstable_IdlePriority,Mo={},Ro=void 0!==ko?ko:function(){},Io=null,Lo=null,jo=!1,Do=So(),No=1e4>Do?So:function(){return So()-Do};function Fo(){switch(Eo()){case Po:return 99;case Co:return 98;case Ao:return 97;case Oo:return 96;case To:return 95;default:throw Error(ne(332))}}function zo(e){switch(e){case 99:return Po;case 98:return Co;case 97:return Ao;case 96:return Oo;case 95:return To;default:throw Error(ne(332))}}function Bo(e,t){return e=zo(e),xo(e,t)}function Vo(e,t,n){return e=zo(e),bo(e,t,n)}function Uo(){if(null!==Lo){var e=Lo;Lo=null,_o(e)}Wo()}function Wo(){if(!jo&&null!==Io){jo=!0;var e=0;try{var t=Io;Bo(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Io=null}catch(n){throw null!==Io&&(Io=Io.slice(e+1)),bo(Po,Uo),n}finally{jo=!1}}}var Go=ge.ReactCurrentBatchConfig;function Ho(e,t){if(e&&e.defaultProps){for(var n in t=ee({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var qo=no(null),$o=null,Xo=null,Yo=null;function Zo(){Yo=Xo=$o=null}function Ko(e){var t=qo.current;ro(qo),e.type._context._currentValue=t}function Qo(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function Jo(e,t){$o=e,Yo=Xo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Ts=!0),e.firstContext=null)}function ea(e,t){if(Yo!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Yo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Xo){if(null===$o)throw Error(ne(308));Xo=t,$o.dependencies={lanes:0,firstContext:t,responders:null}}else Xo=Xo.next=t;return e._currentValue}var ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function oa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function aa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sa(e,t,n,r){var i=e.updateQueue;ta=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=e.alternate;if(null!==c){var f=(c=c.updateQueue).lastBaseUpdate;f!==a&&(null===f?c.firstBaseUpdate=u:f.next=u,c.lastBaseUpdate=l)}}if(null!==o){for(f=i.baseState,a=0,c=u=l=null;;){s=o.lane;var h=o.eventTime;if((r&s)===s){null!==c&&(c=c.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var d=e,p=o;switch(s=t,h=n,p.tag){case 1:if("function"==typeof(d=p.payload)){f=d.call(h,f,s);break e}f=d;break e;case 3:d.flags=-4097&d.flags|64;case 0:if(null==(s="function"==typeof(d=p.payload)?d.call(h,f,s):d))break e;f=ee({},f,s);break e;case 2:ta=!0}}null!==o.callback&&(e.flags|=32,null===(s=i.effects)?i.effects=[o]:s.push(o))}else h={eventTime:h,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=h,l=f):c=c.next=h,a|=s;if(null===(o=o.next)){if(null===(s=i.shared.pending))break;o=s.next,s.next=null,i.lastBaseUpdate=s,i.shared.pending=null}}null===c&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,Ll|=a,e.lanes=a,e.memoizedState=f}}function la(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(ne(191,i));i.call(r)}}}var ua=(new J.Component).refs;function ca(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:ee({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fa={isMounted:function(e){return!!(e=e._reactInternals)&&qt(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ou(),i=au(e),o=ia(r,i);o.payload=t,null!=n&&(o.callback=n),oa(e,o),su(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ou(),i=au(e),o=ia(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),oa(e,o),su(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ou(),r=au(e),i=ia(n,r);i.tag=2,null!=t&&(i.callback=t),oa(e,i),su(e,r,n)}};function ha(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!oi(n,r)||!oi(i,o))}function da(e,t,n){var r=!1,i=oo,o=t.contextType;return"object"==typeof o&&null!==o?o=ea(o):(i=co(t)?lo:ao.current,o=(r=null!=(r=t.contextTypes))?uo(e,i):oo),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=fa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function pa(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fa.enqueueReplaceState(t,t.state,null)}function va(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ua,na(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=ea(o):(o=co(t)?lo:ao.current,i.context=uo(e,o)),sa(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(ca(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&fa.enqueueReplaceState(i,i.state,null),sa(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var ma=Array.isArray;function ga(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===ua&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(ne(284));if(!n._owner)throw Error(ne(290,e))}return e}function ya(e,t){if("textarea"!==e.type)throw Error(ne(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function xa(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=zu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Wu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=ga(e,t,n),r.return=e,r):((r=Bu(n.type,n.key,n.props,null,e.mode,r)).ref=ga(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function c(e,t,n,r,o){return null===t||7!==t.tag?((t=Vu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Wu(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ye:return(n=Bu(t.type,t.key,t.props,null,e.mode,n)).ref=ga(e,null,t),n.return=e,n;case xe:return(t=Gu(t,e.mode,n)).return=e,t}if(ma(t)||Fe(t))return(t=Vu(t,e.mode,n,null)).return=e,t;ya(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ye:return n.key===i?n.type===be?c(e,t,n.props.children,r,i):l(e,t,n,r):null;case xe:return n.key===i?u(e,t,n,r):null}if(ma(n)||Fe(n))return null!==i?null:c(e,t,n,r,null);ya(e,n)}return null}function d(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ye:return e=e.get(null===r.key?n:r.key)||null,r.type===be?c(t,e,r.props.children,i,r.key):l(t,e,r,i);case xe:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ma(r)||Fe(r))return c(t,e=e.get(n)||null,r,i,null);ya(t,r)}return null}return function(s,l,u,c){var p="object"==typeof u&&null!==u&&u.type===be&&null===u.key;p&&(u=u.props.children);var v="object"==typeof u&&null!==u;if(v)switch(u.$$typeof){case ye:e:{for(v=u.key,p=l;null!==p;){if(p.key===v){switch(p.tag){case 7:if(u.type===be){n(s,p.sibling),(l=i(p,u.props.children)).return=s,s=l;break e}break;default:if(p.elementType===u.type){n(s,p.sibling),(l=i(p,u.props)).ref=ga(s,p,u),l.return=s,s=l;break e}}n(s,p);break}t(s,p),p=p.sibling}u.type===be?((l=Vu(u.props.children,s.mode,c,u.key)).return=s,s=l):((c=Bu(u.type,u.key,u.props,null,s.mode,c)).ref=ga(s,l,u),c.return=s,s=c)}return a(s);case xe:e:{for(p=u.key;null!==l;){if(l.key===p){if(4===l.tag&&l.stateNode.containerInfo===u.containerInfo&&l.stateNode.implementation===u.implementation){n(s,l.sibling),(l=i(l,u.children||[])).return=s,s=l;break e}n(s,l);break}t(s,l),l=l.sibling}(l=Gu(u,s.mode,c)).return=s,s=l}return a(s)}if("string"==typeof u||"number"==typeof u)return u=""+u,null!==l&&6===l.tag?(n(s,l.sibling),(l=i(l,u)).return=s,s=l):(n(s,l),(l=Wu(u,s.mode,c)).return=s,s=l),a(s);if(ma(u))return function(i,a,s,l){for(var u=null,c=null,p=a,v=a=0,m=null;null!==p&&v<s.length;v++){p.index>v?(m=p,p=null):m=p.sibling;var g=h(i,p,s[v],l);if(null===g){null===p&&(p=m);break}e&&p&&null===g.alternate&&t(i,p),a=o(g,a,v),null===c?u=g:c.sibling=g,c=g,p=m}if(v===s.length)return n(i,p),u;if(null===p){for(;v<s.length;v++)null!==(p=f(i,s[v],l))&&(a=o(p,a,v),null===c?u=p:c.sibling=p,c=p);return u}for(p=r(i,p);v<s.length;v++)null!==(m=d(p,i,v,s[v],l))&&(e&&null!==m.alternate&&p.delete(null===m.key?v:m.key),a=o(m,a,v),null===c?u=m:c.sibling=m,c=m);return e&&p.forEach((function(e){return t(i,e)})),u}(s,l,u,c);if(Fe(u))return function(i,a,s,l){var u=Fe(s);if("function"!=typeof u)throw Error(ne(150));if(null==(s=u.call(s)))throw Error(ne(151));for(var c=u=null,p=a,v=a=0,m=null,g=s.next();null!==p&&!g.done;v++,g=s.next()){p.index>v?(m=p,p=null):m=p.sibling;var y=h(i,p,g.value,l);if(null===y){null===p&&(p=m);break}e&&p&&null===y.alternate&&t(i,p),a=o(y,a,v),null===c?u=y:c.sibling=y,c=y,p=m}if(g.done)return n(i,p),u;if(null===p){for(;!g.done;v++,g=s.next())null!==(g=f(i,g.value,l))&&(a=o(g,a,v),null===c?u=g:c.sibling=g,c=g);return u}for(p=r(i,p);!g.done;v++,g=s.next())null!==(g=d(p,i,v,g.value,l))&&(e&&null!==g.alternate&&p.delete(null===g.key?v:g.key),a=o(g,a,v),null===c?u=g:c.sibling=g,c=g);return e&&p.forEach((function(e){return t(i,e)})),u}(s,l,u,c);if(v&&ya(s,u),void 0===u&&!p)switch(s.tag){case 1:case 22:case 0:case 11:case 15:throw Error(ne(152,We(s.type)||"Component"))}return n(s,l)}}var ba=xa(!0),_a=xa(!1),wa={},ka=no(wa),Sa=no(wa),Ea=no(wa);function Pa(e){if(e===wa)throw Error(ne(174));return e}function Ca(e,t){switch(io(Ea,t),io(Sa,e),io(ka,wa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ct(null,"");break;default:t=ct(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ro(ka),io(ka,t)}function Aa(){ro(ka),ro(Sa),ro(Ea)}function Oa(e){Pa(Ea.current);var t=Pa(ka.current),n=ct(t,e.type);t!==n&&(io(Sa,e),io(ka,n))}function Ta(e){Sa.current===e&&(ro(ka),ro(Sa))}var Ma=no(0);function Ra(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ia=null,La=null,ja=!1;function Da(e,t){var n=Nu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Na(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Fa(e){if(ja){var t=La;if(t){var n=t;if(!Na(e,t)){if(!(t=Vi(n.nextSibling))||!Na(e,t))return e.flags=-1025&e.flags|2,ja=!1,void(Ia=e);Da(Ia,n)}Ia=e,La=Vi(t.firstChild)}else e.flags=-1025&e.flags|2,ja=!1,Ia=e}}function za(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ia=e}function Ba(e){if(e!==Ia)return!1;if(!ja)return za(e),ja=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ni(t,e.memoizedProps))for(t=La;t;)Da(e,t),t=Vi(t.nextSibling);if(za(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(ne(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){La=Vi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}La=null}}else La=Ia?Vi(e.stateNode.nextSibling):null;return!0}function Va(){La=Ia=null,ja=!1}var Ua=[];function Wa(){for(var e=0;e<Ua.length;e++)Ua[e]._workInProgressVersionPrimary=null;Ua.length=0}var Ga=ge.ReactCurrentDispatcher,Ha=ge.ReactCurrentBatchConfig,qa=0,$a=null,Xa=null,Ya=null,Za=!1,Ka=!1;function Qa(){throw Error(ne(321))}function Ja(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ri(e[n],t[n]))return!1;return!0}function es(e,t,n,r,i,o){if(qa=o,$a=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ga.current=null===e||null===e.memoizedState?Ps:Cs,e=n(r,i),Ka){o=0;do{if(Ka=!1,!(25>o))throw Error(ne(301));o+=1,Ya=Xa=null,t.updateQueue=null,Ga.current=As,e=n(r,i)}while(Ka)}if(Ga.current=Es,t=null!==Xa&&null!==Xa.next,qa=0,Ya=Xa=$a=null,Za=!1,t)throw Error(ne(300));return e}function ts(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ya?$a.memoizedState=Ya=e:Ya=Ya.next=e,Ya}function ns(){if(null===Xa){var e=$a.alternate;e=null!==e?e.memoizedState:null}else e=Xa.next;var t=null===Ya?$a.memoizedState:Ya.next;if(null!==t)Ya=t,Xa=e;else{if(null===e)throw Error(ne(310));e={memoizedState:(Xa=e).memoizedState,baseState:Xa.baseState,baseQueue:Xa.baseQueue,queue:Xa.queue,next:null},null===Ya?$a.memoizedState=Ya=e:Ya=Ya.next=e}return Ya}function rs(e,t){return"function"==typeof t?t(e):t}function is(e){var t=ns(),n=t.queue;if(null===n)throw Error(ne(311));n.lastRenderedReducer=e;var r=Xa,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=a=o=null,l=i;do{var u=l.lane;if((qa&u)===u)null!==s&&(s=s.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===e?l.eagerState:e(r,l.action);else{var c={lane:u,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===s?(a=s=c,o=r):s=s.next=c,$a.lanes|=u,Ll|=u}l=l.next}while(null!==l&&l!==i);null===s?o=r:s.next=a,ri(r,t.memoizedState)||(Ts=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function os(e){var t=ns(),n=t.queue;if(null===n)throw Error(ne(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ri(o,t.memoizedState)||(Ts=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function as(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(qa&e)===e)&&(t._workInProgressVersionPrimary=r,Ua.push(t))),e)return n(t._source);throw Ua.push(t),Error(ne(350))}function ss(e,t,n,r){var i=Pl;if(null===i)throw Error(ne(349));var o=t._getVersion,a=o(t._source),s=Ga.current,l=s.useState((function(){return as(i,t,n)})),u=l[1],c=l[0];l=Ya;var f=e.memoizedState,h=f.refs,d=h.getSnapshot,p=f.source;f=f.subscribe;var v=$a;return e.memoizedState={refs:h,source:t,subscribe:r},s.useEffect((function(){h.getSnapshot=n,h.setSnapshot=u;var e=o(t._source);if(!ri(a,e)){e=n(t._source),ri(c,e)||(u(e),e=au(v),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,s=e;0<s;){var l=31-Vn(s),f=1<<l;r[l]|=e,s&=~f}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=h.getSnapshot,n=h.setSnapshot;try{n(e(t._source));var r=au(v);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),ri(d,n)&&ri(p,t)&&ri(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:rs,lastRenderedState:c}).dispatch=u=Ss.bind(null,$a,e),l.queue=e,l.baseQueue=null,c=as(i,t,n),l.memoizedState=l.baseState=c),c}function ls(e,t,n){return ss(ns(),e,t,n)}function us(e){var t=ts();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:rs,lastRenderedState:e}).dispatch=Ss.bind(null,$a,e),[t.memoizedState,e]}function cs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=$a.updateQueue)?(t={lastEffect:null},$a.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function fs(e){return e={current:e},ts().memoizedState=e}function hs(){return ns().memoizedState}function ds(e,t,n,r){var i=ts();$a.flags|=e,i.memoizedState=cs(1|t,n,void 0,void 0===r?null:r)}function ps(e,t,n,r){var i=ns();r=void 0===r?null:r;var o=void 0;if(null!==Xa){var a=Xa.memoizedState;if(o=a.destroy,null!==r&&Ja(r,a.deps))return void cs(t,n,o,r)}$a.flags|=e,i.memoizedState=cs(1|t,n,o,r)}function vs(e,t){return ds(516,4,e,t)}function ms(e,t){return ps(516,4,e,t)}function gs(e,t){return ps(4,2,e,t)}function ys(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function xs(e,t,n){return n=null!=n?n.concat([e]):null,ps(4,2,ys.bind(null,t,e),n)}function bs(){}function _s(e,t){var n=ns();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ja(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ws(e,t){var n=ns();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ja(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ks(e,t){var n=Fo();Bo(98>n?98:n,(function(){e(!0)})),Bo(97<n?97:n,(function(){var n=Ha.transition;Ha.transition=1;try{e(!1),t()}finally{Ha.transition=n}}))}function Ss(e,t,n){var r=ou(),i=au(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===$a||null!==a&&a===$a)Ka=Za=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,l=a(s,n);if(o.eagerReducer=a,o.eagerState=l,ri(l,s))return}catch(u){}su(e,i,r)}}var Es={readContext:ea,useCallback:Qa,useContext:Qa,useEffect:Qa,useImperativeHandle:Qa,useLayoutEffect:Qa,useMemo:Qa,useReducer:Qa,useRef:Qa,useState:Qa,useDebugValue:Qa,useDeferredValue:Qa,useTransition:Qa,useMutableSource:Qa,useOpaqueIdentifier:Qa,unstable_isNewReconciler:!1},Ps={readContext:ea,useCallback:function(e,t){return ts().memoizedState=[e,void 0===t?null:t],e},useContext:ea,useEffect:vs,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ds(4,2,ys.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ds(4,2,e,t)},useMemo:function(e,t){var n=ts();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ts();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ss.bind(null,$a,e),[r.memoizedState,e]},useRef:fs,useState:us,useDebugValue:bs,useDeferredValue:function(e){var t=us(e),n=t[0],r=t[1];return vs((function(){var t=Ha.transition;Ha.transition=1;try{r(e)}finally{Ha.transition=t}}),[e]),n},useTransition:function(){var e=us(!1),t=e[0];return fs(e=ks.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ts();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},ss(r,e,t,n)},useOpaqueIdentifier:function(){if(ja){var e=!1,t=function(e){return{$$typeof:Me,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Wi++).toString(36))),Error(ne(355))})),n=us(t)[1];return 0==(2&$a.mode)&&($a.flags|=516,cs(5,(function(){n("r:"+(Wi++).toString(36))}),void 0,null)),t}return us(t="r:"+(Wi++).toString(36)),t},unstable_isNewReconciler:!1},Cs={readContext:ea,useCallback:_s,useContext:ea,useEffect:ms,useImperativeHandle:xs,useLayoutEffect:gs,useMemo:ws,useReducer:is,useRef:hs,useState:function(){return is(rs)},useDebugValue:bs,useDeferredValue:function(e){var t=is(rs),n=t[0],r=t[1];return ms((function(){var t=Ha.transition;Ha.transition=1;try{r(e)}finally{Ha.transition=t}}),[e]),n},useTransition:function(){var e=is(rs)[0];return[hs().current,e]},useMutableSource:ls,useOpaqueIdentifier:function(){return is(rs)[0]},unstable_isNewReconciler:!1},As={readContext:ea,useCallback:_s,useContext:ea,useEffect:ms,useImperativeHandle:xs,useLayoutEffect:gs,useMemo:ws,useReducer:os,useRef:hs,useState:function(){return os(rs)},useDebugValue:bs,useDeferredValue:function(e){var t=os(rs),n=t[0],r=t[1];return ms((function(){var t=Ha.transition;Ha.transition=1;try{r(e)}finally{Ha.transition=t}}),[e]),n},useTransition:function(){var e=os(rs)[0];return[hs().current,e]},useMutableSource:ls,useOpaqueIdentifier:function(){return os(rs)[0]},unstable_isNewReconciler:!1},Os=ge.ReactCurrentOwner,Ts=!1;function Ms(e,t,n,r){t.child=null===e?_a(t,null,n,r):ba(t,e.child,n,r)}function Rs(e,t,n,r,i){n=n.render;var o=t.ref;return Jo(t,i),r=es(e,t,n,r,o,i),null===e||Ts?(t.flags|=1,Ms(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Qs(e,t,i))}function Is(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||Fu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Bu(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ls(e,t,a,r,i,o))}return a=e.child,0==(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:oi)(i,r)&&e.ref===t.ref)?Qs(e,t,o):(t.flags|=1,(e=zu(a,r)).ref=t.ref,e.return=t,t.child=e)}function Ls(e,t,n,r,i,o){if(null!==e&&oi(e.memoizedProps,r)&&e.ref===t.ref){if(Ts=!1,0==(o&i))return t.lanes=e.lanes,Qs(e,t,o);0!=(16384&e.flags)&&(Ts=!0)}return Ns(e,t,n,r,o)}function js(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},vu(t,n);else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},vu(t,e),null;t.memoizedState={baseLanes:0},vu(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,vu(t,r);return Ms(e,t,i,n),t.child}function Ds(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ns(e,t,n,r,i){var o=co(n)?lo:ao.current;return o=uo(t,o),Jo(t,i),n=es(e,t,n,r,o,i),null===e||Ts?(t.flags|=1,Ms(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Qs(e,t,i))}function Fs(e,t,n,r,i){if(co(n)){var o=!0;vo(t)}else o=!1;if(Jo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),da(t,n,r),va(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"==typeof u&&null!==u?u=ea(u):u=uo(t,u=co(n)?lo:ao.current);var c=n.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&pa(t,a,r,u),ta=!1;var h=t.memoizedState;a.state=h,sa(t,r,a,i),l=t.memoizedState,s!==r||h!==l||so.current||ta?("function"==typeof c&&(ca(t,n,c,r),l=t.memoizedState),(s=ta||ha(t,n,s,r,h,l,u))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4)):("function"==typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,ra(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Ho(t.type,s),a.props=u,f=t.pendingProps,h=a.context,"object"==typeof(l=n.contextType)&&null!==l?l=ea(l):l=uo(t,l=co(n)?lo:ao.current);var d=n.getDerivedStateFromProps;(c="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==f||h!==l)&&pa(t,a,r,l),ta=!1,h=t.memoizedState,a.state=h,sa(t,r,a,i);var p=t.memoizedState;s!==f||h!==p||so.current||ta?("function"==typeof d&&(ca(t,n,d,r),p=t.memoizedState),(u=ta||ha(t,n,u,r,h,p,l))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return zs(e,t,n,r,o,i)}function zs(e,t,n,r,i,o){Ds(e,t);var a=0!=(64&t.flags);if(!r&&!a)return i&&mo(t,n,!1),Qs(e,t,o);r=t.stateNode,Os.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ba(t,e.child,null,o),t.child=ba(t,null,s,o)):Ms(e,t,s,o),t.memoizedState=r.state,i&&mo(t,n,!0),t.child}function Bs(e){var t=e.stateNode;t.pendingContext?ho(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ho(0,t.context,!1),Ca(e,t.containerInfo)}var Vs,Us,Ws,Gs={dehydrated:null,retryLane:0};function Hs(e,t,n){var r,i=t.pendingProps,o=Ma.current,a=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),io(Ma,1&o),null===e?(void 0!==i.fallback&&Fa(t),e=i.children,o=i.fallback,a?(e=qs(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Gs,e):"number"==typeof i.unstable_expectedLoadTime?(e=qs(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Gs,t.lanes=33554432,e):((n=Uu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=Xs(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Gs,i):(n=$s(e,t,i.children,n),t.memoizedState=null,n))}function qs(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Uu(t,i,0,null),n=Vu(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function $s(e,t,n,r){var i=e.child;return e=i.sibling,n=zu(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Xs(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0==(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=zu(a,s),null!==e?r=zu(e,r):(r=Vu(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Ys(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Qo(e.return,t)}function Zs(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function Ks(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ms(e,t,r.children,n),0!=(2&(r=Ma.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ys(e,n);else if(19===e.tag)Ys(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(io(Ma,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ra(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Zs(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ra(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Zs(t,!0,n,null,o,t.lastEffect);break;case"together":Zs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Qs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(ne(153));if(null!==t.child){for(n=zu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function Js(e,t){if(!ja)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function el(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return co(t.type)&&fo(),null;case 3:return Aa(),ro(so),ro(ao),Wa(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ba(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ta(t);var i=Pa(Ea.current);if(n=t.type,null!==e&&null!=t.stateNode)Us(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(ne(166));return null}if(e=Pa(ka.current),Ba(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Hi]=t,r[qi]=o,n){case"dialog":ki("cancel",r),ki("close",r);break;case"iframe":case"object":case"embed":ki("load",r);break;case"video":case"audio":for(e=0;e<xi.length;e++)ki(xi[e],r);break;case"source":ki("error",r);break;case"img":case"image":case"link":ki("error",r),ki("load",r);break;case"details":ki("toggle",r);break;case"input":Ze(r,o),ki("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ki("invalid",r);break;case"textarea":it(r,o),ki("invalid",r)}for(var a in bt(n,o),e=null,o)o.hasOwnProperty(a)&&(i=o[a],"children"===a?"string"==typeof i?r.textContent!==i&&(e=["children",i]):"number"==typeof i&&r.textContent!==""+i&&(e=["children",""+i]):ie.hasOwnProperty(a)&&null!=i&&"onScroll"===a&&ki("scroll",r));switch(n){case"input":qe(r),Je(r,o,!0);break;case"textarea":qe(r),at(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Ii)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(a=9===i.nodeType?i:i.ownerDocument,e===st&&(e=ut(n)),e===st?"script"===n?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),"select"===n&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Hi]=t,e[qi]=r,Vs(e,t),t.stateNode=e,a=_t(n,r),n){case"dialog":ki("cancel",e),ki("close",e),i=r;break;case"iframe":case"object":case"embed":ki("load",e),i=r;break;case"video":case"audio":for(i=0;i<xi.length;i++)ki(xi[i],e);i=r;break;case"source":ki("error",e),i=r;break;case"img":case"image":case"link":ki("error",e),ki("load",e),i=r;break;case"details":ki("toggle",e),i=r;break;case"input":Ze(e,r),i=Ye(e,r),ki("invalid",e);break;case"option":i=tt(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ee({},r,{value:void 0}),ki("invalid",e);break;case"textarea":it(e,r),i=rt(e,r),ki("invalid",e);break;default:i=r}bt(n,i);var s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];"style"===o?yt(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&dt(e,l):"children"===o?"string"==typeof l?("textarea"!==n||""!==l)&&pt(e,l):"number"==typeof l&&pt(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(ie.hasOwnProperty(o)?null!=l&&"onScroll"===o&&ki("scroll",e):null!=l&&me(e,o,l,a))}switch(n){case"input":qe(e),Je(e,r,!1);break;case"textarea":qe(e),at(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Ge(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?nt(e,!!r.multiple,o,!1):null!=r.defaultValue&&nt(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Ii)}Di(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ws(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(ne(166));n=Pa(Ea.current),Pa(ka.current),Ba(t)?(r=t.stateNode,n=t.memoizedProps,r[Hi]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Hi]=t,t.stateNode=r)}return null;case 13:return ro(Ma),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ba(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Ma.current)?0===Ml&&(Ml=3):(0!==Ml&&3!==Ml||(Ml=4),null===Pl||0==(134217727&Ll)&&0==(134217727&jl)||fu(Pl,Al))),(r||n)&&(t.flags|=4),null);case 4:return Aa(),null===e&&Ei(t.stateNode.containerInfo),null;case 10:return Ko(t),null;case 17:return co(t.type)&&fo(),null;case 19:if(ro(Ma),null===(r=t.memoizedState))return null;if(o=0!=(64&t.flags),null===(a=r.rendering))if(o)Js(r,!1);else{if(0!==Ml||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(a=Ra(e))){for(t.flags|=64,Js(r,!1),null!==(o=a.updateQueue)&&(t.updateQueue=o,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(a=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return io(Ma,1&Ma.current|2),t.child}e=e.sibling}null!==r.tail&&No()>zl&&(t.flags|=64,o=!0,Js(r,!1),t.lanes=33554432)}else{if(!o)if(null!==(e=Ra(a))){if(t.flags|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Js(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!ja)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*No()-r.renderingStartTime>zl&&1073741824!==n&&(t.flags|=64,o=!0,Js(r,!1),t.lanes=33554432);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=r.last)?n.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=No(),n.sibling=null,t=Ma.current,io(Ma,o?1&t|2:1&t),n):null;case 23:case 24:return mu(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(ne(156,t.tag))}function tl(e){switch(e.tag){case 1:co(e.type)&&fo();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Aa(),ro(so),ro(ao),Wa(),0!=(64&(t=e.flags)))throw Error(ne(285));return e.flags=-4097&t|64,e;case 5:return Ta(e),null;case 13:return ro(Ma),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ro(Ma),null;case 4:return Aa(),null;case 10:return Ko(e),null;case 23:case 24:return mu(),null;default:return null}}function nl(e,t){try{var n="",r=t;do{n+=Ue(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function rl(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Vs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Us=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Pa(ka.current);var o,a=null;switch(n){case"input":i=Ye(e,i),r=Ye(e,r),a=[];break;case"option":i=tt(e,i),r=tt(e,r),a=[];break;case"select":i=ee({},i,{value:void 0}),r=ee({},r,{value:void 0}),a=[];break;case"textarea":i=rt(e,i),r=rt(e,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Ii)}for(u in bt(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var s=i[u];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(ie.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(s=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==s&&(null!=l||null!=s))if("style"===u)if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(a||(a=[]),a.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,s=s?s.__html:void 0,null!=l&&s!==l&&(a=a||[]).push(u,l)):"children"===u?"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(ie.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&ki("scroll",e),a||s===l||(a=[])):"object"==typeof l&&null!==l&&l.$$typeof===Me?l.toString():(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ws=function(e,t,n,r){n!==r&&(t.flags|=4)};var il="function"==typeof WeakMap?WeakMap:Map;function ol(e,t,n){(n=ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Gl=r),rl(0,t)},n}function al(e,t,n){(n=ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return rl(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this),rl(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var sl="function"==typeof WeakSet?WeakSet:Set;function ll(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(n){Iu(e,n)}else t.current=null}function ul(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ho(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Bi(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(ne(163))}function cl(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Tu(n,e),Ou(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ho(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&la(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}la(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Di(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xn(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(ne(163))}function fl(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=gt("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function hl(e,t){if(yo&&"function"==typeof yo.onCommitFiberUnmount)try{yo.onCommitFiberUnmount(go,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Tu(t,n);else{r=t;try{i()}catch(o){Iu(r,o)}}n=n.next}while(n!==e)}break;case 1:if(ll(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Iu(t,o)}break;case 5:ll(t);break;case 4:yl(e,t)}}function dl(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function pl(e){return 5===e.tag||3===e.tag||4===e.tag}function vl(e){e:{for(var t=e.return;null!==t;){if(pl(t))break e;t=t.return}throw Error(ne(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(ne(161))}16&n.flags&&(pt(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||pl(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?ml(e,n,t):gl(e,n,t)}function ml(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Ii));else if(4!==r&&null!==(e=e.child))for(ml(e,t,n),e=e.sibling;null!==e;)ml(e,t,n),e=e.sibling}function gl(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function yl(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(ne(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var a=e,s=i,l=s;;)if(hl(a,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===s)break e;for(;null===l.sibling;){if(null===l.return||l.return===s)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}r?(a=n,s=i.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(hl(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function xl(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[qi]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ke(n,r),_t(e,i),t=_t(e,r),i=0;i<o.length;i+=2){var a=o[i],s=o[i+1];"style"===a?yt(n,s):"dangerouslySetInnerHTML"===a?dt(n,s):"children"===a?pt(n,s):me(n,a,s,t)}switch(e){case"input":Qe(n,r);break;case"textarea":ot(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?nt(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?nt(n,!!r.multiple,r.defaultValue,!0):nt(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(ne(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xn(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Fl=No(),fl(t.child,!0)),void bl(t);case 19:return void bl(t);case 17:return;case 23:case 24:return void fl(t,null!==t.memoizedState)}throw Error(ne(163))}function bl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new sl),t.forEach((function(t){var r=ju.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function _l(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var wl=Math.ceil,kl=ge.ReactCurrentDispatcher,Sl=ge.ReactCurrentOwner,El=0,Pl=null,Cl=null,Al=0,Ol=0,Tl=no(0),Ml=0,Rl=null,Il=0,Ll=0,jl=0,Dl=0,Nl=null,Fl=0,zl=1/0;function Bl(){zl=No()+500}var Vl,Ul=null,Wl=!1,Gl=null,Hl=null,ql=!1,$l=null,Xl=90,Yl=[],Zl=[],Kl=null,Ql=0,Jl=null,eu=-1,tu=0,nu=0,ru=null,iu=!1;function ou(){return 0!=(48&El)?No():-1!==eu?eu:eu=No()}function au(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Fo()?1:2;if(0===tu&&(tu=Il),0!==Go.transition){0!==nu&&(nu=null!==Nl?Nl.pendingLanes:0),e=tu;var t=4186112&~nu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Fo(),0!=(4&El)&&98===e?e=Nn(12,tu):e=Nn(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),tu),e}function su(e,t,n){if(50<Ql)throw Ql=0,Jl=null,Error(ne(185));if(null===(e=lu(e,t)))return null;Bn(e,t,n),e===Pl&&(jl|=t,4===Ml&&fu(e,Al));var r=Fo();1===t?0!=(8&El)&&0==(48&El)?hu(e):(uu(e,n),0===El&&(Bl(),Uo())):(0==(4&El)||98!==r&&99!==r||(null===Kl?Kl=new Set([e]):Kl.add(e)),uu(e,n)),Nl=e}function lu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function uu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Vn(a),l=1<<s,u=o[s];if(-1===u){if(0==(l&r)||0!=(l&i)){u=t,Ln(l);var c=In;o[s]=10<=c?u+250:6<=c?u+5e3:-1}}else u<=t&&(e.expiredLanes|=l);a&=~l}if(r=jn(e,e===Pl?Al:0),t=In,0===r)null!==n&&(n!==Mo&&_o(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mo&&_o(n)}15===t?(n=hu.bind(null,e),null===Io?(Io=[n],Lo=bo(Po,Wo)):Io.push(n),n=Mo):14===t?n=Vo(99,hu.bind(null,e)):n=Vo(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(ne(358,e))}}(t),cu.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function cu(e){if(eu=-1,nu=tu=0,0!=(48&El))throw Error(ne(327));var t=e.callbackNode;if(Au()&&e.callbackNode!==t)return null;var n=jn(e,e===Pl?Al:0);if(0===n)return null;var r=n,i=El;El|=16;var o=xu();for(Pl===e&&Al===r||(Bl(),gu(e,r));;)try{wu();break}catch(s){yu(e,s)}if(Zo(),kl.current=o,El=i,null!==Cl?r=0:(Pl=null,Al=0,r=Ml),0!=(Il&jl))gu(e,0);else if(0!==r){if(2===r&&(El|=64,e.hydrate&&(e.hydrate=!1,Bi(e.containerInfo)),0!==(n=Dn(e))&&(r=bu(e,n))),1===r)throw t=Rl,gu(e,0),fu(e,n),uu(e,No()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(ne(345));case 2:Eu(e);break;case 3:if(fu(e,n),(62914560&n)===n&&10<(r=Fl+500-No())){if(0!==jn(e,0))break;if(((i=e.suspendedLanes)&n)!==n){ou(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Fi(Eu.bind(null,e),r);break}Eu(e);break;case 4:if(fu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-Vn(n);o=1<<a,(a=r[a])>i&&(i=a),n&=~o}if(n=i,10<(n=(120>(n=No()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*wl(n/1960))-n)){e.timeoutHandle=Fi(Eu.bind(null,e),n);break}Eu(e);break;case 5:Eu(e);break;default:throw Error(ne(329))}}return uu(e,No()),e.callbackNode===t?cu.bind(null,e):null}function fu(e,t){for(t&=~Dl,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vn(t),r=1<<n;e[n]=-1,t&=~r}}function hu(e){if(0!=(48&El))throw Error(ne(327));if(Au(),e===Pl&&0!=(e.expiredLanes&Al)){var t=Al,n=bu(e,t);0!=(Il&jl)&&(n=bu(e,t=jn(e,t)))}else n=bu(e,t=jn(e,0));if(0!==e.tag&&2===n&&(El|=64,e.hydrate&&(e.hydrate=!1,Bi(e.containerInfo)),0!==(t=Dn(e))&&(n=bu(e,t))),1===n)throw n=Rl,gu(e,0),fu(e,t),uu(e,No()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Eu(e),uu(e,No()),null}function du(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(Bl(),Uo())}}function pu(e,t){var n=El;El&=-2,El|=8;try{return e(t)}finally{0===(El=n)&&(Bl(),Uo())}}function vu(e,t){io(Tl,Ol),Ol|=t,Il|=t}function mu(){Ol=Tl.current,ro(Tl)}function gu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,zi(n)),null!==Cl)for(n=Cl.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&fo();break;case 3:Aa(),ro(so),ro(ao),Wa();break;case 5:Ta(r);break;case 4:Aa();break;case 13:case 19:ro(Ma);break;case 10:Ko(r);break;case 23:case 24:mu()}n=n.return}Pl=e,Cl=zu(e.current,null),Al=Ol=Il=t,Ml=0,Rl=null,Dl=jl=Ll=0}function yu(e,t){for(;;){var n=Cl;try{if(Zo(),Ga.current=Es,Za){for(var r=$a.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Za=!1}if(qa=0,Ya=Xa=$a=null,Ka=!1,Sl.current=null,null===n||null===n.return){Ml=1,Rl=t,Cl=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=Al,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l;if(0==(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!=(1&Ma.current),h=a;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var m=h.updateQueue;if(null===m){var g=new Set;g.add(u),h.updateQueue=g}else m.add(u);if(0==(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=ia(-1,1);y.tag=2,oa(s,y)}s.lanes|=1;break e}l=void 0,s=t;var x=o.pingCache;if(null===x?(x=o.pingCache=new il,l=new Set,x.set(u,l)):void 0===(l=x.get(u))&&(l=new Set,x.set(u,l)),!l.has(s)){l.add(s);var b=Lu.bind(null,o,u,s);u.then(b,b)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);l=Error((We(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ml&&(Ml=2),l=nl(l,s),h=a;do{switch(h.tag){case 3:o=l,h.flags|=4096,t&=-t,h.lanes|=t,aa(h,ol(0,o,t));break e;case 1:o=l;var _=h.type,w=h.stateNode;if(0==(64&h.flags)&&("function"==typeof _.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===Hl||!Hl.has(w)))){h.flags|=4096,t&=-t,h.lanes|=t,aa(h,al(h,o,t));break e}}h=h.return}while(null!==h)}Su(n)}catch(k){t=k,Cl===n&&null!==n&&(Cl=n=n.return);continue}break}}function xu(){var e=kl.current;return kl.current=Es,null===e?Es:e}function bu(e,t){var n=El;El|=16;var r=xu();for(Pl===e&&Al===t||gu(e,t);;)try{_u();break}catch(i){yu(e,i)}if(Zo(),El=n,kl.current=r,null!==Cl)throw Error(ne(261));return Pl=null,Al=0,Ml}function _u(){for(;null!==Cl;)ku(Cl)}function wu(){for(;null!==Cl&&!wo();)ku(Cl)}function ku(e){var t=Vl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?Su(e):Cl=t,Sl.current=null}function Su(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=el(n,t,Ol)))return void(Cl=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Ol)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=tl(t)))return n.flags&=2047,void(Cl=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Cl=t);Cl=t=e}while(null!==t);0===Ml&&(Ml=5)}function Eu(e){var t=Fo();return Bo(99,Pu.bind(null,e,t)),null}function Pu(e,t){do{Au()}while(null!==$l);if(0!=(48&El))throw Error(ne(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ne(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,s=e.expirationTimes;0<o;){var l=31-Vn(o),u=1<<l;i[l]=0,a[l]=-1,s[l]=-1,o&=~u}if(null!==Kl&&0==(24&r)&&Kl.has(e)&&Kl.delete(e),e===Pl&&(Cl=Pl=null,Al=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=El,El|=32,Sl.current=null,Li=qn,ci(a=ui())){if("selectionStart"in a)s={start:a.selectionStart,end:a.selectionEnd};else e:if(s=(s=a.ownerDocument)&&s.defaultView||window,(u=s.getSelection&&s.getSelection())&&0!==u.rangeCount){s=u.anchorNode,o=u.anchorOffset,l=u.focusNode,u=u.focusOffset;try{s.nodeType,l.nodeType}catch(E){s=null;break e}var c=0,f=-1,h=-1,d=0,p=0,v=a,m=null;t:for(;;){for(var g;v!==s||0!==o&&3!==v.nodeType||(f=c+o),v!==l||0!==u&&3!==v.nodeType||(h=c+u),3===v.nodeType&&(c+=v.nodeValue.length),null!==(g=v.firstChild);)m=v,v=g;for(;;){if(v===a)break t;if(m===s&&++d===o&&(f=c),m===l&&++p===u&&(h=c),null!==(g=v.nextSibling))break;m=(v=m).parentNode}v=g}s=-1===f||-1===h?null:{start:f,end:h}}else s=null;s=s||{start:0,end:0}}else s=null;ji={focusedElem:a,selectionRange:s},qn=!1,ru=null,iu=!1,Ul=r;do{try{Cu()}catch(E){if(null===Ul)throw Error(ne(330));Iu(Ul,E),Ul=Ul.nextEffect}}while(null!==Ul);ru=null,Ul=r;do{try{for(a=e;null!==Ul;){var y=Ul.flags;if(16&y&&pt(Ul.stateNode,""),128&y){var x=Ul.alternate;if(null!==x){var b=x.ref;null!==b&&("function"==typeof b?b(null):b.current=null)}}switch(1038&y){case 2:vl(Ul),Ul.flags&=-3;break;case 6:vl(Ul),Ul.flags&=-3,xl(Ul.alternate,Ul);break;case 1024:Ul.flags&=-1025;break;case 1028:Ul.flags&=-1025,xl(Ul.alternate,Ul);break;case 4:xl(Ul.alternate,Ul);break;case 8:yl(a,s=Ul);var _=s.alternate;dl(s),null!==_&&dl(_)}Ul=Ul.nextEffect}}catch(E){if(null===Ul)throw Error(ne(330));Iu(Ul,E),Ul=Ul.nextEffect}}while(null!==Ul);if(b=ji,x=ui(),y=b.focusedElem,a=b.selectionRange,x!==y&&y&&y.ownerDocument&&li(y.ownerDocument.documentElement,y)){null!==a&&ci(y)&&(x=a.start,void 0===(b=a.end)&&(b=x),"selectionStart"in y?(y.selectionStart=x,y.selectionEnd=Math.min(b,y.value.length)):(b=(x=y.ownerDocument||document)&&x.defaultView||window).getSelection&&(b=b.getSelection(),s=y.textContent.length,_=Math.min(a.start,s),a=void 0===a.end?_:Math.min(a.end,s),!b.extend&&_>a&&(s=a,a=_,_=s),s=si(y,_),o=si(y,a),s&&o&&(1!==b.rangeCount||b.anchorNode!==s.node||b.anchorOffset!==s.offset||b.focusNode!==o.node||b.focusOffset!==o.offset)&&((x=x.createRange()).setStart(s.node,s.offset),b.removeAllRanges(),_>a?(b.addRange(x),b.extend(o.node,o.offset)):(x.setEnd(o.node,o.offset),b.addRange(x))))),x=[];for(b=y;b=b.parentNode;)1===b.nodeType&&x.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"==typeof y.focus&&y.focus(),y=0;y<x.length;y++)(b=x[y]).element.scrollLeft=b.left,b.element.scrollTop=b.top}qn=!!Li,ji=Li=null,e.current=n,Ul=r;do{try{for(y=e;null!==Ul;){var w=Ul.flags;if(36&w&&cl(y,Ul.alternate,Ul),128&w){x=void 0;var k=Ul.ref;if(null!==k){var S=Ul.stateNode;switch(Ul.tag){case 5:x=S;break;default:x=S}"function"==typeof k?k(x):k.current=x}}Ul=Ul.nextEffect}}catch(E){if(null===Ul)throw Error(ne(330));Iu(Ul,E),Ul=Ul.nextEffect}}while(null!==Ul);Ul=null,Ro(),El=i}else e.current=n;if(ql)ql=!1,$l=e,Xl=t;else for(Ul=r;null!==Ul;)t=Ul.nextEffect,Ul.nextEffect=null,8&Ul.flags&&((w=Ul).sibling=null,w.stateNode=null),Ul=t;if(0===(r=e.pendingLanes)&&(Hl=null),1===r?e===Jl?Ql++:(Ql=0,Jl=e):Ql=0,n=n.stateNode,yo&&"function"==typeof yo.onCommitFiberRoot)try{yo.onCommitFiberRoot(go,n,void 0,64==(64&n.current.flags))}catch(E){}if(uu(e,No()),Wl)throw Wl=!1,e=Gl,Gl=null,e;return 0!=(8&El)||Uo(),null}function Cu(){for(;null!==Ul;){var e=Ul.alternate;iu||null===ru||(0!=(8&Ul.flags)?Zt(Ul,ru)&&(iu=!0):13===Ul.tag&&_l(e,Ul)&&Zt(Ul,ru)&&(iu=!0));var t=Ul.flags;0!=(256&t)&&ul(e,Ul),0==(512&t)||ql||(ql=!0,Vo(97,(function(){return Au(),null}))),Ul=Ul.nextEffect}}function Au(){if(90!==Xl){var e=97<Xl?97:Xl;return Xl=90,Bo(e,Mu)}return!1}function Ou(e,t){Yl.push(t,e),ql||(ql=!0,Vo(97,(function(){return Au(),null})))}function Tu(e,t){Zl.push(t,e),ql||(ql=!0,Vo(97,(function(){return Au(),null})))}function Mu(){if(null===$l)return!1;var e=$l;if($l=null,0!=(48&El))throw Error(ne(331));var t=El;El|=32;var n=Zl;Zl=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"==typeof a)try{a()}catch(l){if(null===o)throw Error(ne(330));Iu(o,l)}}for(n=Yl,Yl=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var s=i.create;i.destroy=s()}catch(l){if(null===o)throw Error(ne(330));Iu(o,l)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return El=t,Uo(),!0}function Ru(e,t,n){oa(e,t=ol(0,t=nl(n,t),1)),t=ou(),null!==(e=lu(e,1))&&(Bn(e,1,t),uu(e,t))}function Iu(e,t){if(3===e.tag)Ru(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Ru(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){var i=al(n,e=nl(t,e),1);if(oa(n,i),i=ou(),null!==(n=lu(n,1)))Bn(n,1,i),uu(n,i);else if("function"==typeof r.componentDidCatch&&(null===Hl||!Hl.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function Lu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ou(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Al&n)===n&&(4===Ml||3===Ml&&(62914560&Al)===Al&&500>No()-Fl?gu(e,0):Dl|=n),uu(e,t)}function ju(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Fo()?1:2:(0===tu&&(tu=Il),0===(t=Fn(62914560&~tu))&&(t=4194304))),n=ou(),null!==(e=lu(e,t))&&(Bn(e,t,n),uu(e,n))}function Du(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Nu(e,t,n,r){return new Du(e,t,n,r)}function Fu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zu(e,t){var n=e.alternate;return null===n?((n=Nu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Bu(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)Fu(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case be:return Vu(n.children,i,o,t);case Re:a=8,i|=16;break;case _e:a=8,i|=1;break;case we:return(e=Nu(12,n,t,8|i)).elementType=we,e.type=we,e.lanes=o,e;case Pe:return(e=Nu(13,n,t,i)).type=Pe,e.elementType=Pe,e.lanes=o,e;case Ce:return(e=Nu(19,n,t,i)).elementType=Ce,e.lanes=o,e;case Ie:return Uu(n,i,o,t);case Le:return(e=Nu(24,n,t,i)).elementType=Le,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case ke:a=10;break e;case Se:a=9;break e;case Ee:a=11;break e;case Ae:a=14;break e;case Oe:a=16,r=null;break e;case Te:a=22;break e}throw Error(ne(130,null==e?e:typeof e,""))}return(t=Nu(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Vu(e,t,n,r){return(e=Nu(7,e,r,t)).lanes=n,e}function Uu(e,t,n,r){return(e=Nu(23,e,r,t)).elementType=Ie,e.lanes=n,e}function Wu(e,t,n){return(e=Nu(6,e,null,t)).lanes=n,e}function Gu(e,t,n){return(t=Nu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zn(0),this.expirationTimes=zn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zn(0),this.mutableSourceEagerHydrationData=null}function qu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:xe,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function $u(e,t,n,r){var i=t.current,o=ou(),a=au(i);e:if(n){t:{if(qt(n=n._reactInternals)!==n||1!==n.tag)throw Error(ne(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(co(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(ne(171))}if(1===n.tag){var l=n.type;if(co(l)){n=po(n,l,s);break e}}n=s}else n=oo;return null===t.context?t.context=n:t.pendingContext=n,(t=ia(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),oa(i,t),su(i,a,o),a}function Xu(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Yu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Zu(e,t){Yu(e,t),(e=e.alternate)&&Yu(e,t)}function Ku(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Hu(e,t,null!=n&&!0===n.hydrate),t=Nu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,na(t),e[$i]=n.current,Ei(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=Xu(a);s.call(e)}}$u(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Ku(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var l=i;i=function(){var e=Xu(a);l.call(e)}}pu((function(){$u(t,a,e,i)}))}return Xu(a)}function ec(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qu(t))throw Error(ne(200));return qu(e,t,null,n)}Vl=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||so.current)Ts=!0;else{if(0==(n&r)){switch(Ts=!1,t.tag){case 3:Bs(t),Va();break;case 5:Oa(t);break;case 1:co(t.type)&&vo(t);break;case 4:Ca(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;io(qo,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Hs(e,t,n):(io(Ma,1&Ma.current),null!==(t=Qs(e,t,n))?t.sibling:null);io(Ma,1&Ma.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return Ks(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),io(Ma,Ma.current),r)break;return null;case 23:case 24:return t.lanes=0,js(e,t,n)}return Qs(e,t,n)}Ts=0!=(16384&e.flags)}else Ts=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=uo(t,ao.current),Jo(t,n),i=es(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,co(r)){var o=!0;vo(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,na(t);var a=r.getDerivedStateFromProps;"function"==typeof a&&ca(t,r,a,e),i.updater=fa,t.stateNode=i,i._reactInternals=t,va(t,r,e,n),t=zs(null,t,r,!0,o,n)}else t.tag=0,Ms(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"==typeof e)return Fu(e)?1:0;if(null!=e){if((e=e.$$typeof)===Ee)return 11;if(e===Ae)return 14}return 2}(i),e=Ho(i,e),o){case 0:t=Ns(null,t,i,e,n);break e;case 1:t=Fs(null,t,i,e,n);break e;case 11:t=Rs(null,t,i,e,n);break e;case 14:t=Is(null,t,i,Ho(i.type,e),r,n);break e}throw Error(ne(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ns(e,t,r,i=t.elementType===r?i:Ho(r,i),n);case 1:return r=t.type,i=t.pendingProps,Fs(e,t,r,i=t.elementType===r?i:Ho(r,i),n);case 3:if(Bs(t),r=t.updateQueue,null===e||null===r)throw Error(ne(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ra(e,t),sa(t,r,null,n),(r=t.memoizedState.element)===i)Va(),t=Qs(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(La=Vi(t.stateNode.containerInfo.firstChild),Ia=t,o=ja=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],Ua.push(o);for(n=_a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ms(e,t,r,n),Va();t=t.child}return t;case 5:return Oa(t),null===e&&Fa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,Ni(r,i)?a=null:null!==o&&Ni(r,o)&&(t.flags|=16),Ds(e,t),Ms(e,t,a,n),t.child;case 6:return null===e&&Fa(t),null;case 13:return Hs(e,t,n);case 4:return Ca(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ba(t,null,r,n):Ms(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Rs(e,t,r,i=t.elementType===r?i:Ho(r,i),n);case 7:return Ms(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ms(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value;var s=t.type._context;if(io(qo,s._currentValue),s._currentValue=o,null!==a)if(s=a.value,0===(o=ri(s,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(a.children===i.children&&!so.current){t=Qs(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var u=l.firstContext;null!==u;){if(u.context===r&&0!=(u.observedBits&o)){1===s.tag&&((u=ia(-1,n&-n)).tag=2,oa(s,u)),s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Qo(s.return,n),l.lanes|=n;break}u=u.next}}else a=10===s.tag&&s.type===t.type?null:s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}Ms(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,Jo(t,n),r=r(i=ea(i,o.unstable_observedBits)),t.flags|=1,Ms(e,t,r,n),t.child;case 14:return o=Ho(i=t.type,t.pendingProps),Is(e,t,i,o=Ho(i.type,o),r,n);case 15:return Ls(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ho(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,co(r)?(e=!0,vo(t)):e=!1,Jo(t,n),da(t,r,i),va(t,r,i,n),zs(null,t,r,!0,e,n);case 19:return Ks(e,t,n);case 23:case 24:return js(e,t,n)}throw Error(ne(156,t.tag))},Ku.prototype.render=function(e){$u(e,this._internalRoot,null,null)},Ku.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;$u(null,e,null,(function(){t[$i]=null}))},Kt=function(e){13===e.tag&&(su(e,4,ou()),Zu(e,4))},Qt=function(e){13===e.tag&&(su(e,67108864,ou()),Zu(e,67108864))},Jt=function(e){if(13===e.tag){var t=ou(),n=au(e);su(e,n,t),Zu(e,n)}},en=function(e,t){return t()},kt=function(e,t,n){switch(t){case"input":if(Qe(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Qi(r);if(!i)throw Error(ne(90));$e(r),Qe(r,i)}}}break;case"textarea":ot(e,n);break;case"select":null!=(t=n.value)&&nt(e,!!n.multiple,t,!1)}},Ot=du,Tt=function(e,t,n,r,i){var o=El;El|=4;try{return Bo(98,e.bind(null,t,n,r,i))}finally{0===(El=o)&&(Bl(),Uo())}},Mt=function(){0==(49&El)&&(function(){if(null!==Kl){var e=Kl;Kl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,uu(e,No())}))}Uo()}(),Au())},Rt=function(e,t){var n=El;El|=2;try{return e(t)}finally{0===(El=n)&&(Bl(),Uo())}};var tc={Events:[Zi,Ki,Qi,Ct,At,Au,{current:!1}]},nc={findFiberByHostInstance:Yi,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ge.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Yt(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{go=ic.inject(rc),yo=ic}catch(ht){}}Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,Z.createPortal=ec,Z.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(ne(188));throw Error(ne(268,Object.keys(e)))}return e=null===(e=Yt(t))?null:e.stateNode},Z.flushSync=function(e,t){var n=El;if(0!=(48&n))return e(t);El|=1;try{if(e)return Bo(99,e.bind(null,t))}finally{El=n,Uo()}},Z.hydrate=function(e,t,n){if(!Qu(t))throw Error(ne(200));return Ju(null,e,t,!0,n)},Z.render=function(e,t,n){if(!Qu(t))throw Error(ne(200));return Ju(null,e,t,!1,n)},Z.unmountComponentAtNode=function(e){if(!Qu(e))throw Error(ne(40));return!!e._reactRootContainer&&(pu((function(){Ju(null,null,e,!1,(function(){e._reactRootContainer=null,e[$i]=null}))})),!0)},Z.unstable_batchedUpdates=du,Z.unstable_createPortal=function(e,t){return ec(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},Z.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qu(n))throw Error(ne(200));if(null==e||void 0===e._reactInternals)throw Error(ne(38));return Ju(e,t,n,!1,r)},Z.version="17.0.1",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),Y.exports=Z;var oc=Y.exports,ac=Object.defineProperty,sc=Object.defineProperties,lc=Object.getOwnPropertyDescriptors,uc=Object.getOwnPropertySymbols,cc=Object.prototype.hasOwnProperty,fc=Object.prototype.propertyIsEnumerable,hc=(e,t,n)=>t in e?ac(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const dc=e=>"init"in e,pc=Symbol(),vc=Symbol(),mc=(e,t)=>{const n={l:t,v:0,a:new WeakMap,m:new WeakMap,p:new Map};if(e)for(const[r,i]of e){const e={v:i,r:0,d:new Map};0,n.a.set(r,e)}return n},gc=(e,t)=>e.a.get(t),yc=(e,t,n)=>{const r=gc(e,t);return[((e,t)=>sc(e,lc(t)))(((e,t)=>{for(var n in t||(t={}))cc.call(t,n)&&hc(e,n,t[n]);if(uc)for(var n of uc(t))fc.call(t,n)&&hc(e,n,t[n]);return e})({r:0},r),{d:n?new Map(Array.from(n).map((t=>{var n,r;return[t,null!=(r=null==(n=gc(e,t))?void 0:n.r)?r:0]}))):(null==r?void 0:r.d)||new Map}),(null==r?void 0:r.d)||new Map]},xc=(e,t,n,r,i)=>{var o,a;const[s,l]=yc(e,t,r);i&&!(null==(o=s.p)?void 0:o[pc](i))||(null==(a=s.c)||a.call(s),delete s.e,delete s.p,delete s.c,delete s.i,"v"in s&&Object.is(s.v,n)||(s.v=n,++s.r),Tc(e,t,s,r&&l))},bc=(e,t,n,r,i)=>{var o,a;const[s,l]=yc(e,t,r);i&&!(null==(o=s.p)?void 0:o[pc](i))||(null==(a=s.c)||a.call(s),delete s.p,delete s.c,delete s.i,s.e=n,Tc(e,t,s,l))},_c=(e,t,n,r)=>{var i,o;const[a,s]=yc(e,t,r);if(!(null==(i=a.p)?void 0:i[pc](n))){if(null==(o=a.c)||o.call(a),(e=>!!e[vc])(n))a.p=n,delete a.c;else{const e=(e=>{let t;const n=new Promise(((n,r)=>{t=n,e.then(n,r)}));return n[pc]=t=>t===n||t===e,n[vc]=t,n})(n);a.p=e,a.c=e[vc]}Tc(e,t,a,s)}},wc=(e,t,n)=>{const[r]=yc(e,t);n?r.w=n:delete r.w,Tc(e,t,r)},kc=(e,t,n)=>{if(!n){const n=gc(e,t);if(n&&(n.d.forEach(((n,r)=>{if(r!==t){const t=gc(e,r);!t||t.e||t.p||t.r!==t.i||kc(e,r,!0)}})),Array.from(n.d.entries()).every((([t,n])=>{const r=gc(e,t);return r&&!r.e&&!r.p&&r.r!==r.i&&r.r===n}))))return n}let r,i,o;const a=new Set;try{const n=t.read((n=>{if(a.add(n),n!==t){const t=kc(e,n);if(t.e)throw t.e;if(t.p)throw t.p;return t.v}const r=gc(e,n);if(r){if(r.p)throw r.p;return r.v}if(dc(n))return n.init;throw new Error("no atom init")}));n instanceof Promise?i=n.then((n=>{xc(e,t,n,a,i),Mc(e)})).catch((n=>{if(n instanceof Promise)return((e,t,n)=>{n.finally((()=>{kc(e,t,!0)}))})(e,t,n),n;bc(e,t,n instanceof Error?n:new Error(n),a,i),Mc(e)})):o=n}catch(s){s instanceof Promise?i=s:r=s instanceof Error?s:new Error(s)}return r?bc(e,t,r,a):i?_c(e,t,i,a):xc(e,t,o,a),gc(e,t)},Sc=(e,t)=>!t.l.size&&(!t.d.size||1===t.d.size&&t.d.has(e)),Ec=(e,t)=>{const n=e.m.get(t);null==n||n.d.forEach((n=>{n!==t&&(((e,t)=>{const[n]=yc(e,t);n.i=n.r,Tc(e,t,n)})(e,n),Ec(e,n))}))},Pc=(e,t,n)=>{var r;const i=null==(r=gc(e,t))?void 0:r.w;if(i)return void i.then((()=>{Pc(e,t,n),Mc(e)}));const o=t.write((t=>{const n=kc(e,t);if(n.e)throw n.e;if(n.p)throw n.p;if("v"in n)return n.v;throw new Error("no value found")}),((n,r)=>{if(n===t){if(!dc(n))throw new Error("no atom init");if(r instanceof Promise){const i=r.then((t=>{xc(e,n,t),Ec(e,n),Mc(e)})).catch((n=>{bc(e,t,n instanceof Error?n:new Error(n)),Mc(e)}));_c(e,t,i)}else xc(e,n,r);Ec(e,n)}else Pc(e,n,r);Mc(e)}),n);if(o instanceof Promise){const n=o.finally((()=>{wc(e,t),Mc(e)}));wc(e,t,n)}},Cc=(e,t,n)=>{Pc(e,t,n),Mc(e)},Ac=(e,t,n)=>{kc(e,t).d.forEach(((n,r)=>{if(r!==t){const n=e.m.get(r);n?n.d.add(t):Ac(e,r,t)}}));const r={d:new Set(n&&[n]),l:new Set,u:void 0};if(e.m.set(t,r),(e=>!!e.write)(t)&&t.onMount){const n=n=>Cc(e,t,n);r.u=t.onMount(n)}return r},Oc=(e,t)=>{var n;const r=null==(n=e.m.get(t))?void 0:n.u;r&&r(),e.m.delete(t);const i=gc(e,t);i&&i.d.forEach(((n,r)=>{if(r!==t){const n=e.m.get(r);n&&(n.d.delete(t),Sc(r,n)&&Oc(e,r))}}))},Tc=(e,t,n,r)=>{const i=!e.a.has(t);e.a.set(t,n),e.l&&e.l(t,i),++e.v,e.p.has(t)||e.p.set(t,r)},Mc=e=>{const t=Array.from(e.p);e.p.clear(),t.forEach((([t,n])=>{const r=gc(e,t);r&&n&&((e,t,n,r)=>{const i=new Set(n.d.keys());r.forEach(((n,r)=>{if(i.has(r))return void i.delete(r);const o=e.m.get(r);o&&(o.d.delete(t),Sc(r,o)&&Oc(e,r))})),i.forEach((n=>{const r=e.m.get(n);r?r.d.add(t):Ac(e,n,t)}))})(e,t,r,n);const i=e.m.get(t);null==i||i.l.forEach((e=>e()))}))},Rc=(e,t,n)=>{const r=((e,t)=>{let n=e.m.get(t);return n||(n=Ac(e,t)),Mc(e),n})(e,t).l;return r.add(n),()=>{r.delete(n),((e,t)=>{const n=e.m.get(t);n&&Sc(t,n)&&Oc(e,t),Mc(e)})(e,t)}},Ic=Symbol(),Lc=Symbol(),jc=(e,t)=>({[Ic]:e,[Lc]:t}),Dc=(e,t,n)=>{const r=f.exports.useRef(0),i=e[Lc](e[Ic]),[o,a]=f.exports.useState((()=>[e,t,n,i,t(e[Ic])]));let s=o[4];return o[0]!==e||o[1]!==t||o[2]!==n?(s=t(e[Ic]),a([e,t,n,i,s])):i!==o[3]&&i!==r.current&&(s=t(e[Ic]),Object.is(s,o[4])||a([e,t,n,i,s])),f.exports.useEffect((()=>{let i=!1;const o=()=>{if(!i)try{const i=t(e[Ic]),o=e[Lc](e[Ic]);r.current=o,a((r=>r[0]!==e||r[1]!==t||r[2]!==n||Object.is(r[4],i)?r:[r[0],r[1],r[2],o,i]))}catch(o){a((e=>[...e]))}},s=n(e[Ic],o);return o(),()=>{i=!0,s()}}),[e,t,n]),s},Nc=e=>{const t=mc(e);return[jc(t,(()=>t.v)),(e,n)=>Cc(t,e,n),()=>Mc(t)]},Fc=new Map,zc=e=>(Fc.has(e)||Fc.set(e,f.exports.createContext(Nc())),Fc.get(e)),Bc=({initialValues:e,scope:t,children:n})=>{const r=f.exports.useRef(null);null===r.current&&(r.current=Nc(e));const i=zc(t);return f.exports.createElement(i.Provider,{value:r.current},n)};let Vc=0;function Uc(e,t){const n="atom"+ ++Vc,r={toString:()=>n};return"function"==typeof e?r.read=e:(r.init=e,r.read=e=>e(r),r.write=(e,t,n)=>{t(r,"function"==typeof n?n(e(r)):n)}),t&&(r.write=t),r}function Wc(e){const t=f.exports.useCallback((t=>{const n=((e,t)=>kc(e,t))(t,e);if(n.e)throw n.e;if(n.p)throw n.p;if(n.w)throw n.w;if("v"in n)return n.v;throw new Error("no atom value")}),[e]),n=f.exports.useCallback(((t,n)=>Rc(t,e,n)),[e]),r=zc(e.scope),[i,o,a]=f.exports.useContext(r),s=Dc(i,t,n);f.exports.useEffect((()=>{a()}));const l=f.exports.useCallback((t=>{if(!(e=>!!e.write)(e))throw new Error("not writable atom");o(e,t)}),[o,e]);return f.exports.useDebugValue(s),[s,l]}function Gc(){return(Gc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Hc(e){return(Hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qc(e){return e&&"object"===Hc(e)&&e.constructor===Object}function $c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?Gc({},e):e;return qc(e)&&qc(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(qc(t[i])&&i in e?r[i]=$c(e[i],t[i],n):r[i]=t[i])})),r}var Xc={exports:{}};function Yc(){}function Zc(){}Zc.resetWarningCache=Yc;Xc.exports=function(){function e(e,t,n,r,i,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Zc,resetWarningCache:Yc};return n.PropTypes=n,n}();var Kc=Xc.exports;function Qc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jc(e){for(var t="https://material-ui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}var ef={exports:{}},tf={},nf="function"==typeof Symbol&&Symbol.for,rf=nf?Symbol.for("react.element"):60103,of=nf?Symbol.for("react.portal"):60106,af=nf?Symbol.for("react.fragment"):60107,sf=nf?Symbol.for("react.strict_mode"):60108,lf=nf?Symbol.for("react.profiler"):60114,uf=nf?Symbol.for("react.provider"):60109,cf=nf?Symbol.for("react.context"):60110,ff=nf?Symbol.for("react.async_mode"):60111,hf=nf?Symbol.for("react.concurrent_mode"):60111,df=nf?Symbol.for("react.forward_ref"):60112,pf=nf?Symbol.for("react.suspense"):60113,vf=nf?Symbol.for("react.suspense_list"):60120,mf=nf?Symbol.for("react.memo"):60115,gf=nf?Symbol.for("react.lazy"):60116,yf=nf?Symbol.for("react.block"):60121,xf=nf?Symbol.for("react.fundamental"):60117,bf=nf?Symbol.for("react.responder"):60118,_f=nf?Symbol.for("react.scope"):60119;function wf(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case rf:switch(e=e.type){case ff:case hf:case af:case lf:case sf:case pf:return e;default:switch(e=e&&e.$$typeof){case cf:case df:case gf:case mf:case uf:return e;default:return t}}case of:return t}}}function kf(e){return wf(e)===hf}tf.AsyncMode=ff,tf.ConcurrentMode=hf,tf.ContextConsumer=cf,tf.ContextProvider=uf,tf.Element=rf,tf.ForwardRef=df,tf.Fragment=af,tf.Lazy=gf,tf.Memo=mf,tf.Portal=of,tf.Profiler=lf,tf.StrictMode=sf,tf.Suspense=pf,tf.isAsyncMode=function(e){return kf(e)||wf(e)===ff},tf.isConcurrentMode=kf,tf.isContextConsumer=function(e){return wf(e)===cf},tf.isContextProvider=function(e){return wf(e)===uf},tf.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===rf},tf.isForwardRef=function(e){return wf(e)===df},tf.isFragment=function(e){return wf(e)===af},tf.isLazy=function(e){return wf(e)===gf},tf.isMemo=function(e){return wf(e)===mf},tf.isPortal=function(e){return wf(e)===of},tf.isProfiler=function(e){return wf(e)===lf},tf.isStrictMode=function(e){return wf(e)===sf},tf.isSuspense=function(e){return wf(e)===pf},tf.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===af||e===hf||e===lf||e===sf||e===pf||e===vf||"object"==typeof e&&null!==e&&(e.$$typeof===gf||e.$$typeof===mf||e.$$typeof===uf||e.$$typeof===cf||e.$$typeof===df||e.$$typeof===xf||e.$$typeof===bf||e.$$typeof===_f||e.$$typeof===yf)},tf.typeOf=wf,ef.exports=tf;var Sf="function"==typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",Ef=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];function Pf(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var i,o=t.props[n];for(i in o)void 0===r[i]&&(r[i]=o[i]);return r}var Cf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Af="object"===("undefined"==typeof window?"undefined":Cf(window))&&"object"===("undefined"==typeof document?"undefined":Cf(document))&&9===document.nodeType;function Of(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tf(e,t,n){return t&&Of(e.prototype,t),n&&Of(e,n),e}function Mf(e,t){return(Mf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rf(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Mf(e,t)}function If(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lf(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var jf={}.constructor;function Df(e){if(null==e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(Df);if(e.constructor!==jf)return e;var t={};for(var n in e)t[n]=Df(e[n]);return t}function Nf(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,i=Df(t),o=r.plugins.onCreateRule(e,i,n);return o||(e[0],null)}var Ff=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},zf=function(e,t){if(void 0===t&&(t=!1),!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=", "),n+=Ff(e[r]," ");else n=Ff(e,", ");return t||"!important"!==e[e.length-1]||(n+=" !important"),n};function Bf(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function Vf(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var i=n.indent,o=void 0===i?0:i,a=t.fallbacks;if(e&&o++,a)if(Array.isArray(a))for(var s=0;s<a.length;s++){var l=a[s];for(var u in l){var c=l[u];null!=c&&(r&&(r+="\n"),r+=""+Bf(u+": "+zf(c)+";",o))}}else for(var f in a){var h=a[f];null!=h&&(r&&(r+="\n"),r+=""+Bf(f+": "+zf(h)+";",o))}for(var d in t){var p=t[d];null!=p&&"fallbacks"!==d&&(r&&(r+="\n"),r+=""+Bf(d+": "+zf(p)+";",o))}return(r||n.allowEmpty)&&e?(r&&(r="\n"+r+"\n"),Bf(e+" {"+r,--o)+Bf("}",o)):r}var Uf=/([[\].#*$><+~=|^:(),"'`\s])/g,Wf="undefined"!=typeof CSS&&CSS.escape,Gf=function(e){return Wf?Wf(e):e.replace(Uf,"\\$1")},Hf=function(){function e(e,t,n){this.type="style",this.key=void 0,this.isProcessed=!1,this.style=void 0,this.renderer=void 0,this.renderable=void 0,this.options=void 0;var r=n.sheet,i=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:i&&(this.renderer=new i)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var i=t;n&&!1===n.process||(i=this.options.jss.plugins.onChangeValue(t,e,this));var o=null==i||!1===i,a=e in this.style;if(o&&!a&&!r)return this;var s=o&&a;if(s?delete this.style[e]:this.style[e]=i,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,i),this;var l=this.options.sheet;return l&&l.attached,this},e}(),qf=function(e){function t(t,n,r){var i;(i=e.call(this,t,n,r)||this).selectorText=void 0,i.id=void 0,i.renderable=void 0;var o=r.selector,a=r.scoped,s=r.sheet,l=r.generateId;return o?i.selectorText=o:!1!==a&&(i.id=l(If(If(i)),s),i.selectorText="."+Gf(i.id)),i}Rf(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!=typeof n?e[t]=n:Array.isArray(n)&&(e[t]=zf(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Gc({},e,{allowEmpty:!0}):e;return Vf(this.selectorText,this.style,n)},Tf(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(Hf),$f={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new qf(e,t,n)}},Xf={indent:1,children:!0},Yf=/@([\w-]+)/,Zf=function(){function e(e,t,n){this.type="conditional",this.at=void 0,this.key=void 0,this.query=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e;var r=e.match(Yf);for(var i in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new xh(Gc({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.toString=function(e){if(void 0===e&&(e=Xf),null==e.indent&&(e.indent=Xf.indent),null==e.children&&(e.children=Xf.children),!1===e.children)return this.query+" {}";var t=this.rules.toString(e);return t?this.query+" {\n"+t+"\n}":""},e}(),Kf=/@media|@supports\s+/,Qf={onCreateRule:function(e,t,n){return Kf.test(e)?new Zf(e,t,n):null}},Jf={indent:1,children:!0},eh=/@keyframes\s+([\w-]+)/,th=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.key=void 0,this.name=void 0,this.id=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0;var r=e.match(eh);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var i=n.scoped,o=n.sheet,a=n.generateId;for(var s in this.id=!1===i?this.name:Gf(a(this,o)),this.rules=new xh(Gc({},n,{parent:this})),t)this.rules.add(s,t[s],Gc({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){if(void 0===e&&(e=Jf),null==e.indent&&(e.indent=Jf.indent),null==e.children&&(e.children=Jf.children),!1===e.children)return this.at+" "+this.id+" {}";var t=this.rules.toString(e);return t&&(t="\n"+t+"\n"),this.at+" "+this.id+" {"+t+"}"},e}(),nh=/@keyframes\s+/,rh=/\$([\w-]+)/g,ih=function(e,t){return"string"==typeof e?e.replace(rh,(function(e,n){return n in t?t[n]:e})):e},oh=function(e,t,n){var r=e[t],i=ih(r,n);i!==r&&(e[t]=i)},ah={onCreateRule:function(e,t,n){return"string"==typeof e&&nh.test(e)?new th(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&oh(e,"animation-name",n.keyframes),"animation"in e&&oh(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return ih(e,r.keyframes);default:return e}}},sh=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).renderable=void 0,t}return Rf(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Gc({},e,{allowEmpty:!0}):e;return Vf(this.key,this.style,n)},t}(Hf),lh={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new sh(e,t,n):null}},uh=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.style)){for(var t="",n=0;n<this.style.length;n++)t+=Vf(this.at,this.style[n]),this.style[n+1]&&(t+="\n");return t}return Vf(this.at,this.style,e)},e}(),ch=/@font-face/,fh={onCreateRule:function(e,t,n){return ch.test(e)?new uh(e,t,n):null}},hh=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return Vf(this.key,this.style,e)},e}(),dh={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new hh(e,t,n):null}},ph=function(){function e(e,t,n){this.type="simple",this.key=void 0,this.value=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),vh={"@charset":!0,"@import":!0,"@namespace":!0},mh=[$f,Qf,ah,lh,fh,dh,{onCreateRule:function(e,t,n){return e in vh?new ph(e,t,n):null}}],gh={process:!0},yh={force:!0,process:!0},xh=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=void 0,this.classes=void 0,this.keyframes=void 0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,i=r.parent,o=r.sheet,a=r.jss,s=r.Renderer,l=r.generateId,u=r.scoped,c=Gc({classes:this.classes,parent:i,sheet:o,jss:a,Renderer:s,generateId:l,scoped:u,name:e,keyframes:this.keyframes,selector:void 0},n),f=e;e in this.raw&&(f=e+"-d"+this.counter++),this.raw[f]=t,f in this.classes&&(c.selector="."+Gf(this.classes[f]));var h=Nf(f,t,c);if(!h)return null;this.register(h);var d=void 0===c.index?this.index.length:c.index;return this.index.splice(d,0,h),h},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof qf?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof th&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof qf?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof th&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"==typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.map[e],t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=gh);var i=this.options,o=i.jss.plugins,a=i.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var s=t,l=s.style;if(o.onUpdate(n,t,a,r),r.process&&l&&l!==s.style){for(var u in o.onProcessStyle(s.style,s,a),s.style){var c=s.style[u];c!==l[u]&&s.prop(u,c,yh)}for(var f in l){var h=s.style[f],d=l[f];null==h&&h!==d&&s.prop(f,null,yh)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,i=0;i<this.index.length;i++){var o=this.index[i].toString(e);(o||r)&&(t&&(t+="\n"),t+=o)}return t},e}(),bh=function(){function e(e,t){for(var n in this.options=void 0,this.deployed=void 0,this.attached=void 0,this.rules=void 0,this.renderer=void 0,this.classes=void 0,this.keyframes=void 0,this.queue=void 0,this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Gc({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new xh(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(e,t,n);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var i=this.addRule(r,e[r],t);i&&n.push(i)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"==typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),_h=function(){function e(){this.plugins={internal:[],external:[]},this.registry=void 0}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var i=this.registry.onCreateRule[r](e,t,n);if(i)return i}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,i=0;i<this.registry.onChangeValue.length;i++)r=this.registry.onChangeValue[i](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),wh=new(function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=Lf(t,["attached"]),i="",o=0;o<this.registry.length;o++){var a=this.registry[o];null!=n&&a.attached!==n||(i&&(i+="\n"),i+=a.toString(r))}return i},Tf(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}()),kh="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),Sh="2f1acc6c3a606b082e5eef5e54414ffb";null==kh[Sh]&&(kh[Sh]=0);var Eh=kh[Sh]++,Ph=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var i="",o="";return r&&(r.options.classNamePrefix&&(o=r.options.classNamePrefix),null!=r.options.jss.id&&(i=String(r.options.jss.id))),e.minify?""+(o||"c")+Eh+i+t:o+n.key+"-"+Eh+(i?"-"+i:"")+"-"+t}},Ch=function(e){var t;return function(){return t||(t=e()),t}},Ah=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},Oh=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=zf(n,!0),"!important"===n[n.length-1]))return e.style.setProperty(t,r,"important"),!0;e.attributeStyleMap?e.attributeStyleMap.set(t,r):e.style.setProperty(t,r)}catch(i){return!1}return!0},Th=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},Mh=function(e,t){return e.selectorText=t,e.selectorText===t},Rh=Ch((function(){return document.querySelector("head")}));function Ih(e){var t=wh.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if((n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e))&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"==typeof r){var i=function(e){for(var t=Rh(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}var Lh=Ch((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),jh=function(e,t,n){try{if("insertRule"in e)e.insertRule(t,n);else if("appendRule"in e){e.appendRule(t)}}catch(r){return!1}return e.cssRules[n]},Dh=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},Nh=function(){function e(e){this.getPropertyValue=Ah,this.setProperty=Oh,this.removeProperty=Th,this.setSelector=Mh,this.element=void 0,this.sheet=void 0,this.hasInsertedRules=!1,this.cssRules=[],e&&wh.add(e),this.sheet=e;var t,n=this.sheet?this.sheet.options:{},r=n.media,i=n.meta,o=n.element;this.element=o||((t=document.createElement("style")).textContent="\n",t),this.element.setAttribute("data-jss",""),r&&this.element.setAttribute("media",r),i&&this.element.setAttribute("data-meta",i);var a=Lh();a&&this.element.setAttribute("nonce",a)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=Ih(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"==typeof n.nodeType){var i=n,o=i.parentNode;o&&o.insertBefore(e,i.nextSibling)}else Rh().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,i=n;if("conditional"===e.type||"keyframes"===e.type){var o=Dh(n,t);if(!1===(i=jh(n,r.toString({children:!1}),o)))return!1;this.refCssRule(e,o,i)}return this.insertRules(r.rules,i),i}var a=e.toString();if(!a)return!1;var s=Dh(n,t),l=jh(n,a,s);return!1!==l&&(this.hasInsertedRules=!0,this.refCssRule(e,s,l),l)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof bh&&(this.cssRules[t]=n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),Fh=0,zh=function(){function e(e){this.id=Fh++,this.version="10.5.1",this.plugins=new _h,this.options={id:{minify:!1},createGenerateId:Ph,Renderer:Af?Nh:null,plugins:[]},this.generateId=Ph({minify:!1});for(var t=0;t<mh.length;t++)this.plugins.use(mh[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=Gc({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!=typeof n&&(n=0===wh.index?0:wh.index+1);var r=new bh(e,Gc({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),wh.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"==typeof e)return this.createRule(void 0,e,t);var r=Gc({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var i=Nf(e,t,r);return i&&this.plugins.onProcessRule(i),i},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}();function Bh(e){var t=null;for(var n in e){var r=e[n],i=typeof r;if("function"===i)t||(t={}),t[n]=r;else if("object"===i&&null!==r&&!Array.isArray(r)){var o=Bh(r);o&&(t||(t={}),t[n]=o)}}return t}
/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */var Vh="object"==typeof CSS&&null!=CSS&&"number"in CSS,Uh=function(e){return new zh(e)};Uh();var Wh=Date.now(),Gh="fnValues"+Wh,Hh="fnStyle"+ ++Wh,qh="@global",$h=function(){function e(e,t,n){for(var r in this.type="global",this.at=qh,this.rules=void 0,this.options=void 0,this.key=void 0,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new xh(Gc({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(){return this.rules.toString()},e}(),Xh=function(){function e(e,t,n){this.type="global",this.at=qh,this.options=void 0,this.rule=void 0,this.isProcessed=!1,this.key=void 0,this.key=e,this.options=n;var r=e.substr("@global ".length);this.rule=n.jss.createRule(r,t,Gc({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),Yh=/\s*,\s*/g;function Zh(e,t){for(var n=e.split(Yh),r="",i=0;i<n.length;i++)r+=t+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}function Kh(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===qh)return new $h(e,t,n);if("@"===e[0]&&"@global "===e.substr(0,"@global ".length))return new Xh(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),!1===n.scoped&&(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,r=e.style,i=r?r[qh]:null;if(i){for(var o in i)t.addRule(o,i[o],Gc({},n,{selector:Zh(o,e.selector)}));delete r[qh]}}(e,t),function(e,t){var n=e.options,r=e.style;for(var i in r)if("@"===i[0]&&i.substr(0,qh.length)===qh){var o=Zh(i.substr(qh.length),e.selector);t.addRule(o,r[i],Gc({},n,{selector:o})),delete r[i]}}(e,t))}}}var Qh=/\s*,\s*/g,Jh=/&/g,ed=/\$([\w-]+)/g;function td(){function e(e,t){return function(n,r){var i=e.getRule(r)||t&&t.getRule(r);return i?(i=i).selector:r}}function t(e,t){for(var n=t.split(Qh),r=e.split(Qh),i="",o=0;o<n.length;o++)for(var a=n[o],s=0;s<r.length;s++){var l=r[s];i&&(i+=", "),i+=-1!==l.indexOf("&")?l.replace(Jh,a):a+" "+l}return i}function n(e,t,n){if(n)return Gc({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var i=Gc({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete i.name,i}return{onProcessStyle:function(r,i,o){if("style"!==i.type)return r;var a,s,l=i,u=l.options.parent;for(var c in r){var f=-1!==c.indexOf("&"),h="@"===c[0];if(f||h){if(a=n(l,u,a),f){var d=t(c,l.selector);s||(s=e(u,o)),d=d.replace(ed,s),u.addRule(d,r[c],Gc({},a,{selector:d}))}else h&&u.addRule(c,{},a).addRule(l.key,r[c],{selector:l.selector});delete r[c]}}return r}}}var nd=/[A-Z]/g,rd=/^ms-/,id={};function od(e){return"-"+e.toLowerCase()}function ad(e){if(id.hasOwnProperty(e))return id[e];var t=e.replace(nd,od);return id[e]=rd.test(t)?"-"+t:t}function sd(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:ad(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(sd):t.fallbacks=sd(e.fallbacks)),t}var ld=Vh&&CSS?CSS.px:"px",ud=Vh&&CSS?CSS.ms:"ms",cd=Vh&&CSS?CSS.percent:"%";function fd(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var i in e)r[i]=e[i],r[i.replace(t,n)]=e[i];return r}var hd=fd({"animation-delay":ud,"animation-duration":ud,"background-position":ld,"background-position-x":ld,"background-position-y":ld,"background-size":ld,border:ld,"border-bottom":ld,"border-bottom-left-radius":ld,"border-bottom-right-radius":ld,"border-bottom-width":ld,"border-left":ld,"border-left-width":ld,"border-radius":ld,"border-right":ld,"border-right-width":ld,"border-top":ld,"border-top-left-radius":ld,"border-top-right-radius":ld,"border-top-width":ld,"border-width":ld,"border-block":ld,"border-block-end":ld,"border-block-end-width":ld,"border-block-start":ld,"border-block-start-width":ld,"border-block-width":ld,"border-inline":ld,"border-inline-end":ld,"border-inline-end-width":ld,"border-inline-start":ld,"border-inline-start-width":ld,"border-inline-width":ld,"border-start-start-radius":ld,"border-start-end-radius":ld,"border-end-start-radius":ld,"border-end-end-radius":ld,margin:ld,"margin-bottom":ld,"margin-left":ld,"margin-right":ld,"margin-top":ld,"margin-block":ld,"margin-block-end":ld,"margin-block-start":ld,"margin-inline":ld,"margin-inline-end":ld,"margin-inline-start":ld,padding:ld,"padding-bottom":ld,"padding-left":ld,"padding-right":ld,"padding-top":ld,"padding-block":ld,"padding-block-end":ld,"padding-block-start":ld,"padding-inline":ld,"padding-inline-end":ld,"padding-inline-start":ld,"mask-position-x":ld,"mask-position-y":ld,"mask-size":ld,height:ld,width:ld,"min-height":ld,"max-height":ld,"min-width":ld,"max-width":ld,bottom:ld,left:ld,top:ld,right:ld,inset:ld,"inset-block":ld,"inset-block-end":ld,"inset-block-start":ld,"inset-inline":ld,"inset-inline-end":ld,"inset-inline-start":ld,"box-shadow":ld,"text-shadow":ld,"column-gap":ld,"column-rule":ld,"column-rule-width":ld,"column-width":ld,"font-size":ld,"font-size-delta":ld,"letter-spacing":ld,"text-decoration-thickness":ld,"text-indent":ld,"text-stroke":ld,"text-stroke-width":ld,"word-spacing":ld,motion:ld,"motion-offset":ld,outline:ld,"outline-offset":ld,"outline-width":ld,perspective:ld,"perspective-origin-x":cd,"perspective-origin-y":cd,"transform-origin":cd,"transform-origin-x":cd,"transform-origin-y":cd,"transform-origin-z":cd,"transition-delay":ud,"transition-duration":ud,"vertical-align":ld,"flex-basis":ld,"shape-margin":ld,size:ld,gap:ld,grid:ld,"grid-gap":ld,"row-gap":ld,"grid-row-gap":ld,"grid-column-gap":ld,"grid-template-rows":ld,"grid-template-columns":ld,"grid-auto-rows":ld,"grid-auto-columns":ld,"box-shadow-x":ld,"box-shadow-y":ld,"box-shadow-blur":ld,"box-shadow-spread":ld,"font-line-height":ld,"text-shadow-x":ld,"text-shadow-y":ld,"text-shadow-blur":ld});function dd(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=dd(e,t[r],n);else if("object"==typeof t)if("fallbacks"===e)for(var i in t)t[i]=dd(i,t[i],n);else for(var o in t)t[o]=dd(e+"-"+o,t[o],n);else if("number"==typeof t&&!Number.isNaN(t)){var a=n[e]||hd[e];return!a||0===t&&a===ld?t.toString():"function"==typeof a?a(t).toString():""+t+a}return t}function pd(e){void 0===e&&(e={});var t=fd(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=dd(r,e[r],t);return e},onChangeValue:function(e,n){return dd(n,e,t)}}}function vd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function md(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function gd(e,t){if(e){if("string"==typeof e)return vd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vd(e,t):void 0}}function yd(e){return function(e){if(Array.isArray(e))return vd(e)}(e)||md(e)||gd(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var xd="",bd="",_d="",wd="",kd=Af&&"ontouchstart"in document.documentElement;if(Af){var Sd={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Ed=document.createElement("p").style;for(var Pd in Sd)if(Pd+"Transform"in Ed){xd=Pd,bd=Sd[Pd];break}"Webkit"===xd&&"msHyphens"in Ed&&(xd="ms",bd=Sd.ms,wd="edge"),"Webkit"===xd&&"-apple-trailing-word"in Ed&&(_d="apple")}var Cd=xd,Ad=bd,Od=_d,Td=wd,Md=kd;var Rd={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===Cd?"-webkit-"+e:Ad+e)}},Id={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===Cd?Ad+"print-"+e:e)}},Ld=/[-\s]+(.)?/g;function jd(e,t){return t?t.toUpperCase():""}function Dd(e){return e.replace(Ld,jd)}function Nd(e){return Dd("-"+e)}var Fd,zd={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===Cd){var n="mask-image";if(Dd(n)in t)return e;if(Cd+Nd(n)in t)return Ad+e}return e}},Bd={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==Od||Md?e:Ad+e)}},Vd={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:Ad+e)}},Ud={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:Ad+e)}},Wd={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===Cd||"ms"===Cd&&"edge"!==Td?Ad+e:e)}},Gd={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===Cd||"ms"===Cd||"apple"===Od?Ad+e:e)}},Hd={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===Cd?"WebkitColumn"+Nd(e)in t&&Ad+"column-"+e:"Moz"===Cd&&("page"+Nd(e)in t&&"page-"+e))}},qd={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===Cd)return e;var n=e.replace("-inline","");return Cd+Nd(n)in t&&Ad+n}},$d={supportedProperty:function(e,t){return Dd(e)in t&&e}},Xd={supportedProperty:function(e,t){var n=Nd(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:Cd+n in t?Ad+e:"Webkit"!==Cd&&"Webkit"+n in t&&"-webkit-"+e}},Yd={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===Cd?""+Ad+e:e)}},Zd={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===Cd?Ad+"scroll-chaining":e)}},Kd={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Qd={supportedProperty:function(e,t){var n=Kd[e];return!!n&&(Cd+Nd(n)in t&&Ad+n)}},Jd={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},ep=Object.keys(Jd),tp=function(e){return Ad+e},np=[Rd,Id,zd,Bd,Vd,Ud,Wd,Gd,Hd,qd,$d,Xd,Yd,Zd,Qd,{supportedProperty:function(e,t,n){var r=n.multiple;if(ep.indexOf(e)>-1){var i=Jd[e];if(!Array.isArray(i))return Cd+Nd(i)in t&&Ad+i;if(!r)return!1;for(var o=0;o<i.length;o++)if(!(Cd+Nd(i[0])in t))return!1;return i.map(tp)}return!1}}],rp=np.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),ip=np.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,yd(t.noPrefill)),e}),[]),op={};if(Af){Fd=document.createElement("p");var ap=window.getComputedStyle(document.documentElement,"");for(var sp in ap)isNaN(sp)||(op[ap[sp]]=ap[sp]);ip.forEach((function(e){return delete op[e]}))}function lp(e,t){if(void 0===t&&(t={}),!Fd)return e;if(null!=op[e])return op[e];"transition"!==e&&"transform"!==e||(t[e]=e in Fd.style);for(var n=0;n<rp.length&&(op[e]=rp[n](e,Fd.style,t),!op[e]);n++);try{Fd.style[e]=""}catch(r){return!1}return op[e]}var up,cp={},fp={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},hp=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function dp(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?lp(t):", "+lp(n);return r||(t||n)}function pp(e,t){var n=t;if(!up||"content"===e)return t;if("string"!=typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=cp[r])return cp[r];try{up.style[e]=n}catch(i){return cp[r]=!1,!1}if(fp[e])n=n.replace(hp,dp);else if(""===up.style[e]&&("-ms-flex"===(n=Ad+n)&&(up.style[e]="-ms-flexbox"),up.style[e]=n,""===up.style[e]))return cp[r]=!1,!1;return up.style[e]="",cp[r]=n,cp[r]}function vp(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var i=!1,o=lp(n);o&&o!==n&&(i=!0);var a=!1,s=pp(o,zf(r));s&&s!==r&&(a=!0),(i||a)&&(i&&delete t[n],t[o||n]=s||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===Cd?e:"@"+Ad+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return pp(t,zf(e))||e}}}function mp(e,t){if(null==e)return{};var n,r,i=Lf(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function gp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;if(e.Component,!n)return t;var r=Gc({},t);return Object.keys(n).forEach((function(e){n[e]&&(r[e]="".concat(t[e]," ").concat(n[e]))})),r}Af&&(up=document.createElement("p"));var yp=function(e,t,n,r){var i=e.get(t);i||(i=new Map,e.set(t,i)),i.set(n,r)},xp=function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},bp=function(e,t,n){e.get(t).delete(n)},_p=X.createContext(null);function wp(){return X.useContext(_p)}var kp,Sp=Uh({plugins:[{onCreateRule:function(e,t,n){if("function"!=typeof t)return null;var r=Nf(e,{},n);return r[Hh]=t,r},onProcessStyle:function(e,t){if(Gh in t||Hh in t)return e;var n={};for(var r in e){var i=e[r];"function"==typeof i&&(delete e[r],n[r]=i)}return t[Gh]=n,e},onUpdate:function(e,t,n,r){var i=t,o=i[Hh];o&&(i.style=o(e)||{});var a=i[Gh];if(a)for(var s in a)i.prop(s,a[s](e),r)}},Kh(),td(),{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=sd(e[t]);return e}return sd(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=ad(t);return t===r?e:(n.prop(r,e),null)}},pd(),"undefined"==typeof window?null:vp(),(kp=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length},{onProcessStyle:function(e,t){if("style"!==t.type)return e;for(var n={},r=Object.keys(e).sort(kp),i=0;i<r.length;i++)n[r[i]]=e[r[i]];return n}})]}),Ep={disableGeneration:!1,generateClassName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,i=void 0===r?"jss":r,o=e.seed,a=void 0===o?"":o,s=""===a?"":"".concat(a,"-"),l=0,u=function(){return l+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==Ef.indexOf(e.key))return"Mui-".concat(e.key);var o="".concat(s).concat(r,"-").concat(e.key);return t.options.theme[Sf]&&""===a?"".concat(o,"-").concat(u()):o}return"".concat(s).concat(i).concat(u())}}(),jss:Sp,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},Pp=X.createContext(Ep),Cp=-1e9;function Ap(){return Cp+=1}var Op={};function Tp(e){var t="function"==typeof e;return{create:function(n,r){var i;try{i=t?e(n):e}catch(s){throw s}if(!r||!n.overrides||!n.overrides[r])return i;var o=n.overrides[r],a=Gc({},i);return Object.keys(o).forEach((function(e){a[e]=$c(a[e],o[e])})),a},options:{}}}function Mp(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var i=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,i=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,i=!0),i&&(r.cacheClasses.value=gp({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}function Rp(e,t){var n=e.state,r=e.theme,i=e.stylesOptions,o=e.stylesCreator,a=e.name;if(!i.disableGeneration){var s=xp(i.sheetsManager,o,r);s||(s={refs:0,staticSheet:null,dynamicStyles:null},yp(i.sheetsManager,o,r,s));var l=Gc({},o.options,i,{theme:r,flip:"boolean"==typeof i.flip?i.flip:"rtl"===r.direction});l.generateId=l.serverGenerateClassName||l.generateClassName;var u=i.sheetsRegistry;if(0===s.refs){var c;i.sheetsCache&&(c=xp(i.sheetsCache,o,r));var f=o.create(r,a);c||((c=i.jss.createStyleSheet(f,Gc({link:!1},l))).attach(),i.sheetsCache&&yp(i.sheetsCache,o,r,c)),u&&u.add(c),s.staticSheet=c,s.dynamicStyles=Bh(f)}if(s.dynamicStyles){var h=i.jss.createStyleSheet(s.dynamicStyles,Gc({link:!0},l));h.update(t),h.attach(),n.dynamicSheet=h,n.classes=gp({baseClasses:s.staticSheet.classes,newClasses:h.classes}),u&&u.add(h)}else n.classes=s.staticSheet.classes;s.refs+=1}}function Ip(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function Lp(e){var t=e.state,n=e.theme,r=e.stylesOptions,i=e.stylesCreator;if(!r.disableGeneration){var o=xp(r.sheetsManager,i,n);o.refs-=1;var a=r.sheetsRegistry;0===o.refs&&(bp(r.sheetsManager,i,n),r.jss.removeStyleSheet(o.staticSheet),a&&a.remove(o.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),a&&a.remove(t.dynamicSheet))}}function jp(e,t){var n,r=X.useRef([]),i=X.useMemo((function(){return{}}),t);r.current!==i&&(r.current=i,n=e()),X.useEffect((function(){return function(){n&&n()}}),[i])}function Dp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,r=t.classNamePrefix,i=t.Component,o=t.defaultTheme,a=void 0===o?Op:o,s=mp(t,["name","classNamePrefix","Component","defaultTheme"]),l=Tp(e),u=n||r||"makeStyles";l.options={index:Ap(),name:n,meta:u,classNamePrefix:u};var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=wp()||a,r=Gc({},X.useContext(Pp),s),o=X.useRef(),u=X.useRef();jp((function(){var i={name:n,state:{},stylesCreator:l,stylesOptions:r,theme:t};return Rp(i,e),u.current=!1,o.current=i,function(){Lp(i)}}),[t,l]),X.useEffect((function(){u.current&&Ip(o.current,e),u.current=!0}));var c=Mp(o.current,e.classes,i);return c};return c}function Np(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fp(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Fp(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function zp(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Fp(e))&&(r&&(r+=" "),r+=t);return r}var Bp=ef.exports,Vp={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Up={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Wp={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Gp={};function Hp(e){return Bp.isMemo(e)?Wp:Gp[e.$$typeof]||Vp}Gp[Bp.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Gp[Bp.Memo]=Wp;var qp=Object.defineProperty,$p=Object.getOwnPropertyNames,Xp=Object.getOwnPropertySymbols,Yp=Object.getOwnPropertyDescriptor,Zp=Object.getPrototypeOf,Kp=Object.prototype;var Qp=function e(t,n,r){if("string"!=typeof n){if(Kp){var i=Zp(n);i&&i!==Kp&&e(t,i,r)}var o=$p(n);Xp&&(o=o.concat(Xp(n)));for(var a=Hp(t),s=Hp(n),l=0;l<o.length;++l){var u=o[l];if(!(Up[u]||r&&r[u]||s&&s[u]||a&&a[u])){var c=Yp(n,u);try{qp(t,u,c)}catch(f){}}}}return t};function Jp(e){var t=e.children,n=e.theme,r=wp(),i=X.useMemo((function(){var e=null===r?n:function(e,t){return"function"==typeof t?t(e):Gc({},e,t)}(r,n);return null!=e&&(e[Sf]=null!==r),e}),[n,r]);return X.createElement(_p.Provider,{value:i},t)}var ev=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=t.defaultTheme,i=t.withTheme,o=void 0!==i&&i,a=t.name,s=mp(t,["defaultTheme","withTheme","name"]),l=a,u=Dp(e,Gc({defaultTheme:r,Component:n,name:a||n.displayName,classNamePrefix:l},s)),c=X.forwardRef((function(e,t){e.classes;var i,s=e.innerRef,l=mp(e,["classes","innerRef"]),c=u(Gc({},n.defaultProps,e)),f=l;return("string"==typeof a||o)&&(i=wp()||r,a&&(f=Pf({theme:i,name:a,props:l})),o&&!f.theme&&(f.theme=i)),X.createElement(n,Gc({ref:s||t,classes:c},f))}));return Qp(c,n),c}};function tv(e){const t=zc(e.scope),[,n]=f.exports.useContext(t);return f.exports.useCallback((t=>n(e,t)),[n,e])}function nv(e){return Wc(e)[0]}function rv(e,t){let n=null;const r=new Map,i=i=>{let o;if(void 0===t)o=r.get(i);else for(let[e,n]of r)if(t(e,i)){o=n;break}if(void 0!==o){if(!(null==n?void 0:n(o[1],i)))return o[0];r.delete(i)}const a=e(i);return r.set(i,[a,Date.now()]),a};return i.remove=e=>{if(void 0===t)r.delete(e);else for(let[n]of r)if(t(n,e)){r.delete(n);break}},i.setShouldRemove=e=>{if(n=e,n)for(let[t,i]of r)n(i[1],t)&&r.delete(t)},i}const iv=(e,t)=>{const[n,...r]=t,i=e.get(n);if(i)return r.length?iv(i[0],r):i[1]},ov=(e,t,n)=>{const[r,...i]=t;let o=e.get(r);o||(o=[new WeakMap],e.set(r,o)),i.length?ov(o[0],i,n):o[1]=n},av=new WeakMap,sv=e=>!!e.write;function lv(e,t){const n=t?[e,t]:[e],r=iv(av,n);if(r)return r;let i,o;const a=n=>{let r=[],a=[];return n(e).forEach(((n,s)=>{const l=t?t(n):s;a[s]=l;const u=(e=>{const t=null==o?void 0:o.indexOf(e);if(void 0!==t&&-1!==t)return null==i?void 0:i[t]})(l);if(u)return void(r[s]=u);const c=t=>{const n=null==o?void 0:o.indexOf(l);if(void 0===n||-1===n)throw new Error("index not found");return t(e)[n]},f=sv(e)?Uc(c,((t,n,r)=>{const i=null==o?void 0:o.indexOf(l);if(void 0===i||-1===i)throw new Error("index not found");const a=t(e),s="function"==typeof r?r(a[i]):r;n(e,[...a.slice(0,i),s,...a.slice(i+1)])})):Uc(c);f.scope=e.scope,r[s]=f})),o=a,i&&i.length===r.length&&i.every(((e,t)=>e===r[t]))?i:i=r},s=sv(e)?Uc(a,((t,n,r)=>{const i=t(s).indexOf(r);if(i>=0){const r=t(e);n(e,[...r.slice(0,i),...r.slice(i+1)])}})):Uc(a);return s.scope=e.scope,ov(av,n,s),s}var uv=Object.defineProperty,cv=Object.defineProperties,fv=Object.getOwnPropertyDescriptors,hv=Object.getOwnPropertySymbols,dv=Object.prototype.hasOwnProperty,pv=Object.prototype.propertyIsEnumerable,vv=(e,t,n)=>t in e?uv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const mv=new WeakMap;function gv(e){const t=Array.isArray(e)&&iv(mv,e);if(t)return t;const n=yv(e),r=Uc((t=>{const r=[],i=n.map(((e,n)=>{try{return t(e)}catch(i){if(!(i instanceof Promise))throw i;r[n]=i}}));if(r.length)throw Promise.all(r);return xv(e,i)})),i=n[0].scope;return r.scope=i,function(e,t){e&&!t.every((t=>t.scope===e))&&console.warn("Different scopes were found for atoms supplied to waitForAll. This is unsupported and will result in unexpected behavior.")}(i,n),Array.isArray(e)&&ov(mv,e,r),r}const yv=e=>Array.isArray(e)?e:Object.getOwnPropertyNames(e).map((t=>e[t])),xv=(e,t)=>Array.isArray(e)?t:Object.getOwnPropertyNames(e).reduce(((e,n,r)=>((e,t)=>cv(e,fv(t)))(((e,t)=>{for(var n in t||(t={}))dv.call(t,n)&&vv(e,n,t[n]);if(hv)for(var n of hv(t))pv.call(t,n)&&vv(e,n,t[n]);return e})({},e),{[n]:t[r]})),{});function bv(e,t){if(!e)throw new Error(t||"loader assertion failed.")}var _v={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},wv=_v.global||_v.self||_v.window,kv="object"!==("undefined"==typeof process?"undefined":Hc(process))||"[object process]"!==String(process)||process.browser,Sv="undefined"!=typeof process&&process.version&&process.version.match(/v([0-9]*)/),Ev=Sv&&parseFloat(Sv[1])||0,Pv={exports:{}};!function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(M){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),a=new A(r||[]);return o._invoke=function(e,t,n){var r=f;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var l=c(e,t,n);if("normal"===l.type){if(r=n.done?p:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=p,n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(M){return{type:"throw",arg:M}}}e.wrap=u;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function g(){}function y(){}var x={};x[o]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(O([])));_&&_!==n&&r.call(_,o)&&(x=_);var w=y.prototype=m.prototype=Object.create(x);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,a,s){var l=c(e[i],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=c(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function O(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:T}}function T(){return{value:t,done:!0}}return g.prototype=w.constructor=y,y.constructor=g,g.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(S.prototype),S.prototype[a]=function(){return this},e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(w),l(w,s,"Generator"),w[o]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=O,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(Pv.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}}();var Cv=Pv.exports;function Av(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function Ov(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Av(o,r,i,a,s,"next",e)}function s(e){Av(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Tv(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=n||new Set;if(e){if(Mv(e))r.add(e);else if(Mv(e.buffer))r.add(e.buffer);else if(ArrayBuffer.isView(e));else if(t&&"object"===Hc(e))for(var i in e)Tv(e[i],t,r)}else;return void 0===n?Array.from(r):[]}function Mv(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&e instanceof MessagePort||("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}function Rv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2.3.12";bv(e,"no loader provided");var n=e.version;t&&n&&(t=Iv(t),n=Iv(n))}function Iv(e){var t=e.split(".").map(Number);return{major:t[0],minor:t[1]}}function Lv(e){this.wrapped=e}function jv(e){return new Lv(e)}function Dv(e){var t,n;function r(t,n){try{var o=e[t](n),a=o.value,s=a instanceof Lv;Promise.resolve(s?a.wrapped:a).then((function(e){s?r("return"===t?"return":"next",e):i(o.done?"return":"normal",e)}),(function(e){r("throw",e)}))}catch(l){i("throw",l)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function Nv(e){return function(){return new Dv(e.apply(this,arguments))}}function Fv(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}"function"==typeof Symbol&&Symbol.asyncIterator&&(Dv.prototype[Symbol.asyncIterator]=function(){return this}),Dv.prototype.next=function(e){return this._invoke("next",e)},Dv.prototype.throw=function(e){return this._invoke("throw",e)},Dv.prototype.return=function(e){return this._invoke("return",e)};var zv=new Map;var Bv=0;function Vv(e){var t=e.data;(0,e.resolve)(t)}var Uv=function(){function e(t){var n=t.source,r=t.name,i=void 0===r?"web-worker-".concat(Bv++):r,o=t.onMessage;Np(this,e);var a=function(e){if(bv("string"==typeof e,"worker source"),e.startsWith("url(")&&e.endsWith(")")){var t=e.match(/^url\((.*)\)$/)[1];if(t&&!t.startsWith("http"))return t;e=function(e){return"try {\n  importScripts('".concat(e,"');\n} catch (error) {\n  console.error(error);\n}")}(t)}var n=zv.get(e);if(!n){var r=new Blob([e],{type:"application/javascript"});n=URL.createObjectURL(r),zv.set(e,n)}return n}(n);this.worker=new Worker(a,{name:i}),this.name=i,this.onMessage=o||Vv}var t;return Tf(e,[{key:"process",value:(t=Ov(Cv.mark((function e(t){var n=this;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){n.worker.onmessage=function(t){n.onMessage({worker:n.worker,data:t.data,resolve:e,reject:r})},n.worker.onerror=function(e){var t="".concat(n.name,": WorkerThread.process() failed");e.message&&(t+=" ".concat(e.message," ").concat(e.filename,":").concat(e.lineno,":").concat(e.colno));var i=new Error(t);console.error(e),r(i)};var i=Tv(t);n.worker.postMessage(t,i)})));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"destroy",value:function(){this.worker.terminate(),this.worker=null}}]),e}(),Wv=function(){function e(t){var n=t.source,r=t.name,i=void 0===r?"unnamed":r,o=t.maxConcurrency,a=void 0===o?1:o,s=t.onMessage,l=t.onDebug,u=void 0===l?function(){}:l,c=t.reuseWorkers,f=void 0===c||c;Np(this,e),this.source=n,this.name=i,this.maxConcurrency=a,this.onMessage=s,this.onDebug=u,this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.reuseWorkers=f}var t;return Tf(e,[{key:"destroy",value:function(){this.idleQueue.forEach((function(e){return e.destroy()})),this.isDestroyed=!0}},{key:"process",value:function(e,t){var n=this;return new Promise((function(r,i){n.jobQueue.push({data:e,jobName:t,resolve:r,reject:i}),n._startQueuedJob()}))}},{key:"_startQueuedJob",value:(t=Ov(Cv.mark((function e(){var t,n;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.jobQueue.length){e.next=2;break}return e.abrupt("return");case 2:if(t=this._getAvailableWorker()){e.next=5;break}return e.abrupt("return");case 5:return n=this.jobQueue.shift(),this.onDebug({message:"processing",worker:t.name,job:n.jobName,backlog:this.jobQueue.length}),e.prev=7,e.t0=n,e.next=11,t.process(n.data);case 11:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=18;break;case 15:e.prev=15,e.t2=e.catch(7),n.reject(e.t2);case 18:return e.prev=18,this._onWorkerDone(t),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[7,15,18,21]])}))),function(){return t.apply(this,arguments)})},{key:"_onWorkerDone",value:function(e){this.isDestroyed?e.destroy():(this.reuseWorkers?this.idleQueue.push(e):(e.destroy(),this.count--),this._startQueuedJob())}},{key:"_getAvailableWorker",value:function(){if(this.idleQueue.length>0)return this.idleQueue.shift();if(this.count<this.maxConcurrency){this.count++;var e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Uv({source:this.source,onMessage:this.onMessage,name:e})}return null}}]),e}(),Gv=function(){function e(t){var n=t.maxConcurrency,r=void 0===n?5:n,i=t.onMessage,o=void 0===i?null:i,a=t.onDebug,s=void 0===a?function(){}:a,l=t.reuseWorkers,u=void 0===l||l;Np(this,e),this.maxConcurrency=r,this.onMessage=o,this.onDebug=s,this.workerPools=new Map,this.reuseWorkers=u}var t;return Tf(e,null,[{key:"isSupported",value:function(){return"undefined"!=typeof Worker}}]),Tf(e,[{key:"setProps",value:function(e){"maxConcurrency"in e&&(this.maxConcurrency=e.maxConcurrency),"onDebug"in e&&(this.onDebug=e.onDebug),"reuseWorkers"in e&&(this.reuseWorkers=e.reuseWorkers)}},{key:"destroy",value:function(){this.workerPools.forEach((function(e){return e.destroy()}))}},{key:"process",value:(t=Ov(Cv.mark((function e(t,n,r){var i;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._getWorkerPool(t,n),e.abrupt("return",i.process(r));case 2:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"_getWorkerPool",value:function(e,t){var n=this.workerPools.get(t);return n||(n=new Wv({source:e,name:t,onMessage:Hv.bind(null,this.onMessage),maxConcurrency:this.maxConcurrency,onDebug:this.onDebug,reuseWorkers:this.reuseWorkers}),this.workerPools.set(t,n)),n}}]),e}();function Hv(e,t){var n=t.worker,r=t.data,i=t.resolve,o=t.reject;if(e)e({worker:n,data:r,resolve:i,reject:o});else switch(r.type){case"done":i(r.result);break;case"error":o(r.message)}}var qv=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:{}});function $v(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Xv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xv(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Xv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yv(e){if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.buffer;if("string"==typeof e){var t=e;return(new TextEncoder).encode(t).buffer}return e&&"object"===Hc(e)&&e._toArrayBuffer?e._toArrayBuffer():bv(!1)}function Zv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t.map((function(e){return e instanceof ArrayBuffer?new Uint8Array(e):e})),o=i.reduce((function(e,t){return e+t.byteLength}),0),a=new Uint8Array(o),s=0,l=$v(i);try{for(l.s();!(r=l.n()).done;){var u=r.value;a.set(u,s),s+=u.byteLength}}catch(c){l.e(c)}finally{l.f()}return a.buffer}var Kv={};function Qv(e){for(var t in Kv)if(e.startsWith(t)){var n=Kv[t];e=e.replace(t,n)}return e.startsWith("http://")||e.startsWith("https://")||(e="".concat("").concat(e)),e}function Jv(e){return em.apply(this,arguments)}function em(){return(em=Ov(Cv.mark((function e(t){var n,r,i,o,a,s,l,u,c;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=[],i=!0,o=!1,e.prev=4,s=Fv(t);case 6:return e.next=8,s.next();case 8:return l=e.sent,i=l.done,e.next=12,l.value;case 12:if(u=e.sent,i){e.next=19;break}"string"==typeof(c=u)?r.push(c):n.push(c);case 16:i=!0,e.next=6;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(4),o=!0,a=e.t0;case 25:if(e.prev=25,e.prev=26,i||null==s.return){e.next=30;break}return e.next=30,s.return();case 30:if(e.prev=30,!o){e.next=33;break}throw a;case 33:return e.finish(30);case 34:return e.finish(25);case 35:if(!(r.length>0)){e.next=38;break}return bv(0===n.length),e.abrupt("return",r.join(""));case 38:return e.abrupt("return",Zv.apply(void 0,n));case 39:case"end":return e.stop()}}),e,null,[[4,21,25,35],[26,,30,34]])})))).apply(this,arguments)}function tm(){var e;if("undefined"!=typeof window&&window.performance)e=window.performance.now();else if("undefined"!=typeof process&&process.hrtime){var t=process.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}var nm=function(){function e(t,n){Np(this,e),this.name=t,this.type=n,this.sampleSize=1,this.reset()}return Tf(e,[{key:"setSampleSize",value:function(e){return this.sampleSize=e,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(e){return this._count+=e,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(e){return this._count-=e,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=tm(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(tm()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),e}(),rm=function(){function e(t){var n=t.id,r=t.stats;Np(this,e),this.id=n,this.stats={},this._initializeStats(r),Object.seal(this)}return Tf(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:e,type:t})}},{key:"reset",value:function(){for(var e in this.stats)this.stats[e].reset();return this}},{key:"forEach",value:function(e){for(var t in this.stats)e(this.stats[t])}},{key:"getTable",value:function(){var e={};return this.forEach((function(t){e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}})),e}},{key:"_initializeStats",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach((function(t){return e._getOrCreate(t)}))}},{key:"_getOrCreate",value:function(e){if(!e||!e.name)return null;var t=e.name,n=e.type;return this.stats[t]||(this.stats[t]=e instanceof nm?e:new nm(t,n)),this.stats[t]}},{key:"size",get:function(){return Object.keys(this.stats).length}}]),e}();function im(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function om(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?im(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):im(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var am={id:"request-scheduler",throttleRequests:!0,maxRequests:6},sm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Np(this,e),this.props=om(om({},am),t),this.requestQueue=[],this.activeRequestCount=0,this.requestMap=new Map,this.stats=new rm({id:t.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever"),this._deferredUpdate=null}return Tf(e,[{key:"scheduleRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return 0};if(!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has(e))return this.requestMap.get(e);var n={handle:e,getPriority:t},r=new Promise((function(e){return n.resolve=e,n}));return this.requestQueue.push(n),this.requestMap.set(e,r),this._issueNewRequests(),r}},{key:"_issueRequest",value:function(e){var t=this,n=e.handle,r=e.resolve,i=!1,o=function(){i||(i=!0,t.requestMap.delete(n),t.activeRequestCount--,t._issueNewRequests())};return this.activeRequestCount++,r?r({done:o}):Promise.resolve({done:o})}},{key:"_issueNewRequests",value:function(){var e=this;this._deferredUpdate||(this._deferredUpdate=setTimeout((function(){return e._issueNewRequestsAsync()}),0))}},{key:"_issueNewRequestsAsync",value:function(){this._deferredUpdate=null;var e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==e){this._updateAllRequests();for(var t=0;t<e;++t)if(this.requestQueue.length>0){var n=this.requestQueue.shift();this._issueRequest(n)}}}},{key:"_updateAllRequests",value:function(){for(var e=this.requestQueue,t=0;t<e.length;++t){var n=e[t];this._updateRequest(n)||(e.splice(t,1),this.requestMap.delete(n.handle),t--)}e.sort((function(e,t){return e.priority-t.priority}))}},{key:"_updateRequest",value:function(e){return e.priority=e.getPriority(e.handle),!(e.priority<0)||(e.resolve(null),!1)}}]),e}(),lm=function(e){return"function"==typeof e},um=function(e){return null!==e&&"object"===Hc(e)},cm=function(e){return um(e)&&e.constructor==={}.constructor},fm=function(e){return e&&"function"==typeof e[Symbol.iterator]},hm=function(e){return e&&"function"==typeof e[Symbol.asyncIterator]},dm=function(e){return"undefined"!=typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json},pm=function(e){return"undefined"!=typeof Blob&&e instanceof Blob},vm=function(e){return function(e){return"undefined"!=typeof ReadableStream&&e instanceof ReadableStream||um(e)&&lm(e.tee)&&lm(e.cancel)&&lm(e.getReader)}(e)||function(e){return um(e)&&lm(e.read)&&lm(e.pipe)&&function(e){return"boolean"==typeof e}(e.readable)}(e)},mm=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,gm=/^([-\w.]+\/[-\w.+]+)/;function ym(e){if("string"!=typeof e)return"";var t=e.match(mm);return t?t[1]:""}var xm=/\?.*/;function bm(e){if(dm(e)){var t=function(e){if("string"!=typeof e)return"";var t=e.match(gm);return t?t[1]:e}(e.headers.get("content-type")),n=ym(e.url);return{url:wm(e.url||""),type:t||n||null}}return pm(e)?{url:wm(e.name||""),type:e.type||""}:"string"==typeof e?{url:wm(e),type:ym(e)}:{url:"",type:""}}function _m(e){return dm(e)?e.headers["content-length"]||-1:pm(e)?e.size:"string"==typeof e?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}function wm(e){return e.replace(xm,"")}function km(e){return Sm.apply(this,arguments)}function Sm(){return(Sm=Ov(Cv.mark((function e(t){var n,r,i,o,a,s,l;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!dm(t)){e.next=2;break}return e.abrupt("return",t);case 2:return n={},(r=_m(t))>=0&&(n["content-length"]=String(r)),i=bm(t),o=i.url,(a=i.type)&&(n["content-type"]=a),e.next=9,Om(t);case 9:return(s=e.sent)&&(n["x-first-bytes"]=s),"string"==typeof t&&(t=(new TextEncoder).encode(t)),l=new Response(t,{headers:n}),Object.defineProperty(l,"url",{value:o}),e.abrupt("return",l);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Em(e){return Pm.apply(this,arguments)}function Pm(){return(Pm=Ov(Cv.mark((function e(t){var n;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=5;break}return e.next=3,Cm(t);case 3:throw n=e.sent,new Error(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cm(e){return Am.apply(this,arguments)}function Am(){return(Am=Ov(Cv.mark((function e(t){var n,r,i;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): "),e.prev=1,r=t.headers.get("Content-Type"),i=t.statusText,!r.includes("application/json")){e.next=11;break}return e.t0=i,e.t1=" ",e.next=9,t.text();case 9:e.t2=e.sent,i=e.t0+=e.t1.concat.call(e.t1,e.t2);case 11:n=(n+=i).length>60?"".concat(n.slice(60),"..."):n,e.next=17;break;case 15:e.prev=15,e.t3=e.catch(1);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function Om(e){return Tm.apply(this,arguments)}function Tm(){return(Tm=Ov(Cv.mark((function e(t){var n,r,i,o;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=5,"string"!=typeof t){e.next=3;break}return e.abrupt("return","data:,".concat(t.slice(0,n)));case 3:if(!(t instanceof Blob)){e.next=8;break}return r=t.slice(0,5),e.next=7,new Promise((function(e){var t=new FileReader;t.onload=function(t){return e(t.target&&t.target.result)},t.readAsDataURL(r)}));case 7:return e.abrupt("return",e.sent);case 8:if(!(t instanceof ArrayBuffer)){e.next=12;break}return i=t.slice(0,n),o=Mm(i),e.abrupt("return","data:base64,".concat(o));case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mm(e){for(var t="",n=new Uint8Array(e),r=0;r<n.byteLength;r++)t+=String.fromCharCode(n[r]);return btoa(t)}function Rm(e){return Im.apply(this,arguments)}function Im(){return(Im=Ov(Cv.mark((function e(t){var n;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): "),e.prev=1,!t.headers.get("Content-Type").includes("application/json")){e.next=10;break}return e.t0=n,e.next=7,t.text();case 7:n=e.t0+=e.sent,e.next=11;break;case 10:n+=t.statusText;case 11:e.next=16;break;case 13:return e.prev=13,e.t1=e.catch(1),e.abrupt("return",n);case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function Lm(e){return jm.apply(this,arguments)}function jm(){return(jm=Ov(Cv.mark((function e(t){var n,r,i=arguments;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{},"string"==typeof t){e.next=5;break}return e.next=4,km(t);case 4:return e.abrupt("return",e.sent);case 5:return t=Qv(t),e.next=8,fetch(t,n);case 8:if((r=e.sent).ok||!n.throws){e.next=15;break}return e.t0=Error,e.next=13,Rm(r);case 13:throw e.t1=e.sent,new e.t0(e.t1);case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Dm=function(){function e(){Np(this,e)}return Tf(e,[{key:"log",value:function(){return function(e){}}},{key:"info",value:function(){return function(e){}}},{key:"warn",value:function(){return function(e){}}},{key:"error",value:function(){return function(e){}}}]),e}();function Nm(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Fm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fm(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Fm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zm(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vm={baseUri:"",fetch:null,CDN:"https://unpkg.com/@loaders.gl",worker:!0,log:new(function(){function e(){Np(this,e),this.console=console}return Tf(e,[{key:"log",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.console.log).bind.apply(e,[this.console].concat(n))}},{key:"info",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.console.info).bind.apply(e,[this.console].concat(n))}},{key:"warn",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.console.warn).bind.apply(e,[this.console].concat(n))}},{key:"error",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.console.error).bind.apply(e,[this.console].concat(n))}}]),e}()),metadata:!1,transforms:[],reuseWorkers:!0},Um={dataType:"(no longer used)",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"},Wm=function(){wv.loaders=wv.loaders||{};var e=wv.loaders;return e._state=e._state||{},e._state},Gm=function(){var e=Wm();return e.globalOptions=e.globalOptions||Bm({},Vm),e.globalOptions};function Hm(e,t,n,r){return n=n||[],function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console;$m(e,null,n,Vm,Um,t);var r,i=Nm(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=e&&e[o.id]||{},s=o.options&&o.options[o.id]||{},l=o.defaultOptions&&o.defaultOptions[o.id]||{};$m(a,o.id,n,s,l,t)}}catch(u){i.e(u)}finally{i.f()}}(e,n=Array.isArray(n)?n:[n]),function(e,t,n){var r=Bm({},e.options||{});null===r.log&&(r.log=new Dm);return Ym(r,Gm()),Ym(r,t),function(e,t){t&&!e.baseUri&&(e.baseUri=t)}(r,n),r}(t,e,r)}function qm(e,t){var n=Gm(),r=e.fetch||n.fetch;return"function"==typeof r?r:um(r)?function(e){return Lm(e,r)}:t&&t.fetch?t.fetch:function(t){return Lm(t,e)}}function $m(e,t,n,r,i,o){var a=t||"Top level",s=t?"".concat(t,"."):"";for(var l in e){var u=!t&&um(e[l]);if(!(l in r))if(l in i)n.warn("".concat(a," loader option '").concat(s).concat(l,"' deprecated, use '").concat(i[l],"'"));else if(!u){var c=Xm(l,o);n.warn("".concat(a," loader option '").concat(s).concat(l,"' not recognized. ").concat(c))}}}function Xm(e,t){var n,r=e.toLowerCase(),i="",o=Nm(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;for(var s in a.options){if(e===s)return"Did you mean '".concat(a.id,".").concat(s,"'?");var l=s.toLowerCase();(r.startsWith(l)||l.startsWith(r))&&(i=i||"Did you mean '".concat(a.id,".").concat(s,"'?"))}}}catch(u){o.e(u)}finally{o.f()}return i}function Ym(e,t){for(var n in t)if(n in t){var r=t[n];cm(r)&&cm(e[n])?e[n]=Bm(Bm({},e[n]),t[n]):e[n]=t[n]}}function Zm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Km(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zm(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qm(e){if(!e)return!1;Array.isArray(e)&&(e=e[0]);var t=e.parseTextSync||e.parseSync||e.parse||e.parseStream||e.parseInBatches,n=e.options&&e.options[e.id];return t=t||n&&n.workerUrl}function Jm(e){var t;return bv(e,"null loader"),bv(Qm(e),"invalid loader"),Array.isArray(e)&&(t=e[1],e=Km(Km({},e=e[0]),{},{options:Km(Km({},e.options),t)})),e.extension&&(e.extensions=e.extensions||e.extension,delete e.extension),Array.isArray(e.extensions)||(e.extensions=[e.extensions]),bv(e.extensions&&e.extensions.length>0&&e.extensions[0]),(e.parseTextSync||e.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}function eg(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return tg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tg(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function tg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ng=function(){var e=Wm();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function rg(){return ng()}var ig=Cv.mark(og);function og(e){var t,n,r,i,o,a,s,l=arguments;return Cv.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:t=l.length>1&&void 0!==l[1]?l[1]:{},n=t.chunkSize,r=void 0===n?262144:n,i=0,o=new TextEncoder;case 4:if(!(i<e.length)){u.next=12;break}return a=Math.min(e.length-i,r),s=e.slice(i,i+a),i+=a,u.next=10,o.encode(s);case 10:u.next=4;break;case 12:case"end":return u.stop()}}),ig)}var ag=Cv.mark(sg);function sg(e){var t,n,r,i,o,a,s,l=arguments;return Cv.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:t=l.length>1&&void 0!==l[1]?l[1]:{},n=t.chunkSize,r=void 0===n?262144:n,i=0;case 3:if(!(i<e.byteLength)){u.next=14;break}return o=Math.min(e.byteLength-i,r),a=new ArrayBuffer(o),s=new Uint8Array(e,i,o),new Uint8Array(a).set(s),i+=o,u.next=12,a;case 12:u.next=3;break;case 14:case"end":return u.stop()}}),ag)}function lg(e){return ug.apply(this,arguments)}function ug(){return(ug=Nv(Cv.mark((function e(t){var n,r,i,o,a,s=arguments;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=s.length>1&&void 0!==s[1]?s[1]:{},r=n.chunkSize||1048576,i=0;case 3:if(!(i<t.size)){e.next=13;break}return o=i+r,e.next=7,jv(cg(t,i,o));case 7:return a=e.sent,i=o,e.next=11,a;case 11:e.next=3;break;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cg(e,t,n){return fg.apply(this,arguments)}function fg(){return(fg=Ov(Cv.mark((function e(t,n,r){return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,i){var o=t.slice(n,r),a=new FileReader;a.onload=function(t){return e(t.target&&t.target.result)},a.onerror=function(e){return i(e)},a.readAsArrayBuffer(o)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hg(e){if(kv||Ev>=10){if("function"==typeof e[Symbol.asyncIterator])return function(e){return dg.apply(this,arguments)}(e);if("function"==typeof e.getIterator)return e.getIterator()}return kv?function(e){return pg.apply(this,arguments)}(e):function(e){return vg.apply(this,arguments)}(e)}function dg(){return(dg=Nv(Cv.mark((function e(t){var n,r,i,o,a,s,l;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,r=!1,e.prev=2,o=Fv(t);case 4:return e.next=6,jv(o.next());case 6:return a=e.sent,n=a.done,e.next=10,jv(a.value);case 10:if(s=e.sent,n){e.next=18;break}return l=s,e.next=15,Yv(l);case 15:n=!0,e.next=4;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(2),r=!0,i=e.t0;case 24:if(e.prev=24,e.prev=25,n||null==o.return){e.next=29;break}return e.next=29,jv(o.return());case 29:if(e.prev=29,!r){e.next=32;break}throw i;case 32:return e.finish(29);case 33:return e.finish(24);case 34:case"end":return e.stop()}}),e,null,[[2,20,24,34],[25,,29,33]])})))).apply(this,arguments)}function pg(){return(pg=Nv(Cv.mark((function e(t){var n,r,i,o;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.getReader(),e.prev=1;case 2:return e.next=5,jv(n.read());case 5:if(r=e.sent,i=r.done,o=r.value,!i){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,Yv(o);case 12:e.next=2;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),n.releaseLock();case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function vg(){return(vg=Nv(Cv.mark((function e(t){var n;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jv(t);case 2:t=e.sent;case 3:if(null===(n=t.read())){e.next=9;break}return e.next=8,Yv(n);case 8:return e.abrupt("continue",3);case 9:if(!t._readableState.ended){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,jv(mg(t));case 13:e.next=3;break;case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mg(e){return gg.apply(this,arguments)}function gg(){return(gg=Ov(Cv.mark((function e(t){return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.once("readable",e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e?og(e,t):e instanceof ArrayBuffer?sg(e,t):pm(e)?lg(e,t):vm(e)?hg(e):dm(e)?hg(e.body):bv(!1)}var xg="Cannot convert supplied data type";function bg(e,t){if(t.text&&"string"==typeof e)return e;if(e instanceof ArrayBuffer){var n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)||(o=e)&&"object"===Hc(o)&&o.isBuffer){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);var r=e.buffer,i=e.byteLength||e.length;return 0===e.byteOffset&&i===r.byteLength||(r=r.slice(e.byteOffset,e.byteOffset+i)),r}var o;throw new Error(xg)}function _g(e,t){return wg.apply(this,arguments)}function wg(){return(wg=Ov(Cv.mark((function e(t,n){var r,i;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t instanceof ArrayBuffer||ArrayBuffer.isView(t),"string"!=typeof t&&!r){e.next=3;break}return e.abrupt("return",bg(t,n));case 3:if(!pm(t)){e.next=7;break}return e.next=6,km(t);case 6:t=e.sent;case 7:if(!dm(t)){e.next=21;break}return i=t,e.next=11,Em(i);case 11:if(!n.binary){e.next=17;break}return e.next=14,i.arrayBuffer();case 14:e.t0=e.sent,e.next=20;break;case 17:return e.next=19,i.text();case 19:e.t0=e.sent;case 20:return e.abrupt("return",e.t0);case 21:if(vm(t)&&(t=yg(t)),!fm(t)&&!hm(t)){e.next=24;break}return e.abrupt("return",Jv(t));case 24:throw new Error(xg);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kg(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Eg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n||(e=Sg({fetch:qm(t||{},e)},e),Array.isArray(e.loaders)||(e.loaders=null),e)}function Pg(e,t){if(!t&&e&&!Array.isArray(e))return e;var n;if(e&&(n=Array.isArray(e)?e:[e]),t&&t.loaders){var r=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[].concat(yd(n),yd(r)):r}return n&&n.length?n:null}function Cg(e,t,n,r){if(!Gv.isSupported())return!1;var i=n&&n[e.id];return!!("local"===n.worker&&i&&i.localWorkerUrl||n.worker&&i&&i.workerUrl)&&(!e.useWorker||e.useWorker(n))}function Ag(e,t,n,r){var i=(n||{}).worker,o=n&&n[e.id]||{},a="local"===i?o.localWorkerUrl:o.workerUrl,s="url(".concat(a,")"),l=e.name,u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};e.maxConcurrency&&(t.maxConcurrency=e.maxConcurrency);e.onDebug&&(t.onDebug=e.onDebug);"reuseWorkers"in e&&(t.reuseWorkers=e.reuseWorkers);Og||(Og=new Gv({onMessage:Tg}));return Og.setProps(t),Og}(n);n=JSON.parse(JSON.stringify(n));var c="2.3.12"!==e.version?"(core version ".concat("2.3.12",")"):"";return u.process(s,"".concat(l,"-worker@").concat(e.version).concat(c),{arraybuffer:Yv(t),options:n,source:"loaders.gl@".concat("2.3.12"),type:"parse"})}var Og=null;function Tg(e){return Mg.apply(this,arguments)}function Mg(){return(Mg=Ov(Cv.mark((function e(t){var n,r,i,o,a;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.worker,r=t.data,i=t.resolve,o=t.reject,e.t0=r.type,e.next="done"===e.t0?4:"parse"===e.t0?6:"error"===e.t0?17:19;break;case 4:return i(r.result),e.abrupt("break",19);case 6:return e.prev=6,e.next=9,Xg(r.arraybuffer,r.options,r.url);case 9:a=e.sent,n.postMessage({type:"parse-done",id:r.id,result:a},Tv(a)),e.next=16;break;case 13:e.prev=13,e.t1=e.catch(6),n.postMessage({type:"parse-error",id:r.id,message:e.t1.message});case 16:return e.abrupt("break",19);case 17:return o(r.message),e.abrupt("break",19);case 19:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}function Rg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ig(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rg(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lg(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return jg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jg(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function jg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Dg=/\.([^.]+)$/;function Ng(e){return Fg.apply(this,arguments)}function Fg(){return(Fg=Ov(Cv.mark((function e(t){var n,r,i,o,a=arguments;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:[],r=a.length>2&&void 0!==a[2]?a[2]:{},i=a.length>3&&void 0!==a[3]?a[3]:{},!(o=zg(t,n,Ig(Ig({},r),{},{nothrow:!0}),i))){e.next=6;break}return e.abrupt("return",o);case 6:if(!pm(t)){e.next=11;break}return e.next=9,cg(t,0,10);case 9:t=e.sent,o=zg(t,n,r,i);case 11:if(o||r.nothrow){e.next=13;break}throw new Error(Bg(t));case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t&&!Array.isArray(t))return Jm(t);Vg(t=[].concat(yd(t||[]),yd(rg())));var i=bm(e),o=i.url,a=i.type,s=Ug(t,o||r.url);if(!(s=(s=s||Wg(t,a))||Gg(t,e))&&!n.nothrow)throw new Error(Bg(e));return s}function Bg(e){var t=bm(e),n=t.url,r=t.type,i="No valid loader found";return e&&(i+=' data: "'.concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return $g(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer)return $g(e,0,t);return""}(e),'", contentType: "').concat(r,'"')),n&&(i+=" url: ".concat(n)),i}function Vg(e){var t,n=Lg(e);try{for(n.s();!(t=n.n()).done;){Jm(t.value)}}catch(r){n.e(r)}finally{n.f()}}function Ug(e,t){var n=t&&t.match(Dg),r=n&&n[1];return r&&function(e,t){t=t.toLowerCase();var n,r=Lg(e);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,a=Lg(o.extensions);try{for(a.s();!(i=a.n()).done;){if(i.value.toLowerCase()===t)return o}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e,r)}function Wg(e,t){var n,r=Lg(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.mimeTypes&&i.mimeTypes.includes(t))return i;if(t==="application/x.".concat(i.id))return i}}catch(o){r.e(o)}finally{r.f()}return null}function Gg(e,t){if(!t)return null;var n,r=Lg(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("string"==typeof t){if(Hg(t,i))return i}else if(ArrayBuffer.isView(t)){if(qg(t.buffer,t.byteOffset,i))return i}else if(t instanceof ArrayBuffer){if(qg(t,0,i))return i}}}catch(o){r.e(o)}finally{r.f()}return null}function Hg(e,t){return t.testText&&t.testText(e)}function qg(e,t,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((function(r){return function(e,t,n,r){if(r instanceof ArrayBuffer)return function(e,t,n){if(n=n||e.byteLength,e.byteLength<n||t.byteLength<n)return!1;for(var r=new Uint8Array(e),i=new Uint8Array(t),o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(r,e,r.byteLength);switch(Hc(r)){case"function":return r(e,n);case"string":return r===$g(e,t,r.length);default:return!1}}(e,t,n,r)}))}function $g(e,t,n){if(e.byteLength<t+n)return"";for(var r=new DataView(e),i="",o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(t+o));return i}function Xg(e,t,n,r){return Yg.apply(this,arguments)}function Yg(){return(Yg=Ov(Cv.mark((function e(t,n,r,i){var o,a,s,l;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bv(!i||"string"!=typeof i,"parse no longer accepts final url"),!n||Array.isArray(n)||Qm(n)||(i=r,r=n,n=null),e.next=4,t;case 4:return t=e.sent,r=r||{},o=bm(t),a=o.url,s=Pg(n,i),e.next=10,Ng(t,s,r);case 10:if(l=e.sent){e.next=13;break}return e.abrupt("return",null);case 13:return r=Hm(r,l,s,a),i=Eg({url:a,parse:Xg,loaders:s},r,i),e.next=17,Zg(l,t,r,i);case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zg(e,t,n,r){return Kg.apply(this,arguments)}function Kg(){return(Kg=Ov(Cv.mark((function e(t,n,r,i){return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rv(t),e.next=3,_g(n,t);case 3:if(n=e.sent,!t.parseTextSync||"string"!=typeof n){e.next=7;break}return r.dataType="text",e.abrupt("return",t.parseTextSync(n,r,i,t));case 7:if(!Cg(t,0,r)){e.next=11;break}return e.next=10,Ag(t,n,r);case 10:return e.abrupt("return",e.sent);case 11:if(!t.parseText||"string"!=typeof n){e.next=15;break}return e.next=14,t.parseText(n,r,i,t);case 14:return e.abrupt("return",e.sent);case 15:if(!t.parse){e.next=19;break}return e.next=18,t.parse(n,r,i,t);case 18:return e.abrupt("return",e.sent);case 19:return bv(!t.parseSync),e.abrupt("return",bv(!1));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qg(e,t,n){return Jg.apply(this,arguments)}function Jg(){return(Jg=Ov(Cv.mark((function e(t,n,r){var i,o;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(n)||Qm(n)||(r=n,n=null),i=qm(r||{}),o=t,"string"!=typeof t){e.next=9;break}return e.next=6,i(t);case 6:o=e.sent,e.next=10;break;case 9:t=null;case 10:if(!pm(t)){e.next=15;break}return e.next=13,i(t);case 13:o=e.sent,t=null;case 15:return e.next=17,Xg(o,n,r);case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ey(e,t){if(!e)throw new Error(t)}var ty={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},ny=ty.global||ty.self||ty.window,ry="object"!==("undefined"==typeof process?"undefined":Hc(process))||"[object process]"!==String(process)||process.browser,iy="undefined"!=typeof process&&process.version&&process.version.match(/v([0-9]*)/);iy&&parseFloat(iy[1]);var oy=ny._parseImageNode,ay="undefined"!=typeof Image,sy="undefined"!=typeof ImageBitmap,ly=Boolean(oy),uy=!!ry||ly;function cy(e){var t=function(e){if("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap)return"imagebitmap";if("undefined"!=typeof Image&&e instanceof Image)return"image";if(e&&"object"===Hc(e)&&e.data&&e.width&&e.height)return"data";return null}(e);if(!t)throw new Error("Not an image");return t}function fy(e){switch(cy(e)){case"data":return e;case"image":case"imagebitmap":var t=document.createElement("canvas"),n=t.getContext("2d");if(n)return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height);default:return ey(!1)}}var hy=/^data:image\/svg\+xml/,dy=/\.svg((\?|#).*)?$/;function py(e){return e&&(hy.test(e)||dy.test(e))}function vy(e,t){if(py(t)){var n=(new TextDecoder).decode(e);return"data:image/svg+xml;base64,".concat(btoa(n))}return my(e,t)}function my(e,t){if(py(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}function gy(e,t,n){return yy.apply(this,arguments)}function yy(){return(yy=Ov(Cv.mark((function e(t,n,r){var i,o,a;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vy(t,r),o=self.URL||self.webkitURL,a="string"!=typeof i&&o.createObjectURL(i),e.prev=3,e.next=6,xy(a||i,n);case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,a&&o.revokeObjectURL(a),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[3,,7,10]])})))).apply(this,arguments)}function xy(e,t){return by.apply(this,arguments)}function by(){return(by=Ov(Cv.mark((function e(t,n){var r;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=new Image).src=t,!(n.image&&n.image.decode&&r.decode)){e.next=6;break}return e.next=5,r.decode();case 5:return e.abrupt("return",r);case 6:return e.next=8,new Promise((function(e,n){try{r.onload=function(){return e(r)},r.onerror=function(e){return n(new Error("Could not load image ".concat(t,": ").concat(e)))}}catch(i){n(i)}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _y={},wy=!0;function ky(e,t,n){return Sy.apply(this,arguments)}function Sy(){return(Sy=Ov(Cv.mark((function e(t,n,r){var i,o,a;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!py(r)){e.next=7;break}return e.next=3,gy(t,n,r);case 3:o=e.sent,i=o,e.next=8;break;case 7:i=my(t,r);case 8:return a=n&&n.imagebitmap,e.next=11,Ey(i,a);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ey(e){return Py.apply(this,arguments)}function Py(){return(Py=Ov(Cv.mark((function e(t){var n,r=arguments;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Cy(n=r.length>1&&void 0!==r[1]?r[1]:null)&&wy||(n=null),!n){e.next=13;break}return e.prev=3,e.next=6,createImageBitmap(t,n);case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(3),console.warn(e.t0),wy=!1;case 13:return e.next=15,createImageBitmap(t);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function Cy(e){for(var t in e||_y)return!1;return!0}function Ay(e){var t=Oy(e);return function(e){var t=Oy(e);if(!(t.byteLength>=24&&2303741511===t.getUint32(0,false)))return null;return{mimeType:"image/png",width:t.getUint32(16,false),height:t.getUint32(20,false)}}(t)||function(e){var t=Oy(e);if(!(t.byteLength>=3&&65496===t.getUint16(0,false)&&255===t.getUint8(2)))return null;var n=function(){for(var e=new Set([65499,65476,65484,65501,65534]),t=65504;t<65520;++t)e.add(t);var n=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:n}}(),r=n.tableMarkers,i=n.sofMarkers,o=2;for(;o+9<t.byteLength;){var a=t.getUint16(o,false);if(i.has(a))return{mimeType:"image/jpeg",height:t.getUint16(o+5,false),width:t.getUint16(o+7,false)};if(!r.has(a))return null;o+=2,o+=t.getUint16(o,false)}return null}(t)||function(e){var t=Oy(e);if(!(t.byteLength>=10&&1195984440===t.getUint32(0,false)))return null;return{mimeType:"image/gif",width:t.getUint16(6,true),height:t.getUint16(8,true)}}(t)||function(e){var t=Oy(e);if(!(t.byteLength>=14&&16973===t.getUint16(0,false)&&t.getUint32(2,true)===t.byteLength))return null;return{mimeType:"image/bmp",width:t.getUint32(18,true),height:t.getUint32(22,true)}}(t)}function Oy(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}function Ty(e,t){var n=(Ay(e)||{}).mimeType,r=ny._parseImageNode;return ey(r),r(e,n,t)}function My(){return(My=Ov(Cv.mark((function e(t,n,r){var i,o,a,s,l;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=(n=n||{}).image||{},o=i.type||"auto",a=(r||{}).url,s=Ry(o),e.t0=s,e.next="imagebitmap"===e.t0?8:"image"===e.t0?12:"data"===e.t0?16:20;break;case 8:return e.next=10,ky(t,n,a);case 10:return l=e.sent,e.abrupt("break",21);case 12:return e.next=14,gy(t,n,a);case 14:return l=e.sent,e.abrupt("break",21);case 16:return e.next=18,Ty(t,n);case 18:return l=e.sent,e.abrupt("break",21);case 20:ey(!1);case 21:return"data"===o&&(l=fy(l)),e.abrupt("return",l);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ry(e){switch(e){case"auto":case"data":return function(){if(sy)return"imagebitmap";if(ay)return"image";if(uy)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(e){switch(e){case"auto":return sy||ay||uy;case"imagebitmap":return sy;case"image":return ay;case"data":return uy;case"html":return ay;case"ndarray":return uy;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}(e),e}}var Iy={id:"image",name:"Images",version:"2.3.12",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function(e,t,n){return My.apply(this,arguments)},tests:[function(e){return Boolean(Ay(new DataView(e)))}],options:{image:{type:"auto",decode:!0}}},Ly={};var jy=function(e){return e&&e.__esModule?e:{default:e}};function Dy(e){return Ny=Dy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dy(e)}var Ny=Dy,Fy=Ny;function zy(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return zy=function(){return e},e}var By=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==Fy(e)&&"function"!=typeof e)return{default:e};var t=zy();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n},Vy={},Uy=jy;Object.defineProperty(Vy,"__esModule",{value:!0}),Vy.console=Vy.process=Vy.document=Vy.global=Vy.window=Vy.self=void 0;var Wy=Uy(Ny),Gy={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==u&&u,document:"undefined"!=typeof document&&document,process:"object"===("undefined"==typeof process?"undefined":(0,Wy.default)(process))&&process},Hy=Gy.self||Gy.window||Gy.global;Vy.self=Hy;var qy=Gy.window||Gy.self||Gy.global;Vy.window=qy;var $y=Gy.global||Gy.self||Gy.window;Vy.global=$y;var Xy=Gy.document||{};Vy.document=Xy;var Yy=Gy.process||{};Vy.process=Yy;var Zy=console;Vy.console=Zy;var Ky={},Qy={};!function(e){var t=jy;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){if("undefined"!=typeof window&&"object"===(0,n.default)(window.process)&&"renderer"===window.process.type)return!0;if("undefined"!=typeof process&&"object"===(0,n.default)(process.versions)&&Boolean(process.versions.electron))return!0;var t="object"===("undefined"==typeof navigator?"undefined":(0,n.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,r=e||t;if(r&&r.indexOf("Electron")>=0)return!0;return!1};var n=t(Ny)}(Qy),function(e){var t=jy;Object.defineProperty(e,"__esModule",{value:!0}),e.default=i,e.isBrowserMainThread=function(){return i()&&"undefined"!=typeof document};var n=t(Ny),r=t(Qy);function i(){return!("object"===("undefined"==typeof process?"undefined":(0,n.default)(process))&&"[object process]"===String(process)&&!process.browser)||(0,r.default)()}}(Ky);var Jy={};!function(e){var t=jy;Object.defineProperty(e,"__esModule",{value:!0}),e.isMobile=function(){return void 0!==n.window.orientation},e.default=function(e){if(!e&&!(0,r.default)())return"Node";if((0,i.default)(e))return"Electron";var t="undefined"!=typeof navigator?navigator:{},o=e||t.userAgent||"";if(o.indexOf("Edge")>-1)return"Edge";var a=-1!==o.indexOf("MSIE "),s=-1!==o.indexOf("Trident/");if(a||s)return"IE";if(n.window.chrome)return"Chrome";if(n.window.safari)return"Safari";if(n.window.mozInnerScreenX)return"Firefox";return"Unknown"};var n=Vy,r=t(Ky),i=t(Qy)}(Jy),function(e){var t=jy,n=By;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"self",{enumerable:!0,get:function(){return r.self}}),Object.defineProperty(e,"window",{enumerable:!0,get:function(){return r.window}}),Object.defineProperty(e,"global",{enumerable:!0,get:function(){return r.global}}),Object.defineProperty(e,"document",{enumerable:!0,get:function(){return r.document}}),Object.defineProperty(e,"process",{enumerable:!0,get:function(){return r.process}}),Object.defineProperty(e,"console",{enumerable:!0,get:function(){return r.console}}),Object.defineProperty(e,"isBrowser",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"isBrowserMainThread",{enumerable:!0,get:function(){return i.isBrowserMainThread}}),Object.defineProperty(e,"getBrowser",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"isMobile",{enumerable:!0,get:function(){return o.isMobile}}),Object.defineProperty(e,"isElectron",{enumerable:!0,get:function(){return a.default}});var r=Vy,i=n(Ky),o=n(Jy),a=t(Qy)}(Ly);var ex=Ly;function tx(e){if("undefined"!=typeof window&&"object"===Hc(window.process)&&"renderer"===window.process.type)return!0;if("undefined"!=typeof process&&"object"===Hc(process.versions)&&Boolean(process.versions.electron))return!0;var t="object"===("undefined"==typeof navigator?"undefined":Hc(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=e||t;return!!(n&&n.indexOf("Electron")>=0)}function nx(){return!("object"===("undefined"==typeof process?"undefined":Hc(process))&&"[object process]"===String(process)&&!process.browser)||tx()}var rx={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"===("undefined"==typeof process?"undefined":Hc(process))&&process},ix=rx.window||rx.self||rx.global,ox=rx.process||{},ax="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source",sx=nx();function lx(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch(r){return null}}var ux=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Np(this,e),this.storage=lx(r),this.id=t,this.config={},Object.assign(this.config,n),this._loadConfiguration()}return Tf(e,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(e){return this.config={},this.updateConfiguration(e)}},{key:"updateConfiguration",value:function(e){if(Object.assign(this.config,e),this.storage){var t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}},{key:"_loadConfiguration",value:function(){var e={};if(this.storage){var t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}]),e}();function cx(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>r&&(n=Math.min(n,r/e.width));var o=e.width*n,a=e.height*n,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}var fx={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function hx(e){return"string"==typeof e?fx[e.toUpperCase()]||fx.WHITE:e}function dx(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return px(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return px(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function px(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vx(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],r=Object.getPrototypeOf(e),i=Object.getOwnPropertyNames(r),o=dx(i);try{var a=function(){var r=t.value;"function"==typeof e[r]&&(n.find((function(e){return r===e}))||(e[r]=e[r].bind(e)))};for(o.s();!(t=o.n()).done;)a()}catch(s){o.e(s)}finally{o.f()}}function mx(e,t){if(!e)throw new Error(t||"Assertion failed")}function gx(){var e;if(sx&&ix.performance)e=ix.performance.now();else if(ox.hrtime){var t=ox.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}var yx={debug:sx&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},xx={enabled:!0,level:0};function bx(){}var _x={},wx={once:!0};function kx(e){for(var t in e)for(var n in e[t])return n||"untitled";return"empty"}var Sx=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id;Np(this,e),this.id=n,this.VERSION=ax,this._startTs=gx(),this._deltaTs=gx(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new ux("__probe-".concat(this.id,"__"),xx),this.userData={},this.timeStamp("".concat(this.id," started")),vx(this),Object.seal(this)}return Tf(e,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number((gx()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((gx()-this._deltaTs).toPrecision(10))}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:e}),this}},{key:"setLevel",value:function(e){return this._storage.updateConfiguration({level:e}),this}},{key:"assert",value:function(e,t){mx(e,t)}},{key:"warn",value:function(e){return this._getLogFunction(0,e,yx.warn,arguments,wx)}},{key:"error",value:function(e){return this._getLogFunction(0,e,yx.error,arguments)}},{key:"deprecated",value:function(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}},{key:"removed",value:function(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}},{key:"probe",value:function(e,t){return this._getLogFunction(e,t,yx.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(e,t){return this._getLogFunction(e,t,yx.debug,arguments)}},{key:"info",value:function(e,t){return this._getLogFunction(e,t,console.info,arguments)}},{key:"once",value:function(e,t){return this._getLogFunction(e,t,yx.debug||yx.info,arguments,wx)}},{key:"table",value:function(e,t,n){return t?this._getLogFunction(e,t,console.table||bx,n&&[n],{tag:kx(t)}):bx}},{key:"image",value:function(e){var t=e.logLevel,n=e.priority,r=e.image,i=e.message,o=void 0===i?"":i,a=e.scale,s=void 0===a?1:a;return this._shouldLog(t||n)?sx?function(e){var t=e.image,n=e.message,r=void 0===n?"":n,i=e.scale,o=void 0===i?1:i;if("string"==typeof t){var a=new Image;return a.onload=function(){var e,t=cx(a,r,o);(e=console).log.apply(e,yd(t))},a.src=t,bx}var s=t.nodeName||"";if("img"===s.toLowerCase()){var l;return(l=console).log.apply(l,yd(cx(t,r,o))),bx}if("canvas"===s.toLowerCase()){var u=new Image;return u.onload=function(){var e;return(e=console).log.apply(e,yd(cx(u,r,o)))},u.src=t.toDataURL(),bx}return bx}({image:r,message:o,scale:s}):function(e){var t=e.image;e.message;var n=e.scale,r=void 0===n?1:n,i=null;try{i=module.require("asciify-image")}catch(o){}if(i)return function(){return i(t,{fit:"box",width:"".concat(Math.round(80*r),"%")}).then((function(e){return console.log(e)}))};return bx}({image:r,message:o,scale:s}):bx}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(e){return this._storage.config[e]}},{key:"set",value:function(e,t){this._storage.updateConfiguration(Qc({},e,t))}},{key:"time",value:function(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}},{key:"timeEnd",value:function(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(e,t){return this._getLogFunction(e,t,console.timeStamp||bx)}},{key:"group",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},r=n=Px({logLevel:e,message:t,opts:n}),i=r.collapsed;return n.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(n)}},{key:"groupCollapsed",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},n,{collapsed:!0}))}},{key:"groupEnd",value:function(e){return this._getLogFunction(e,"",console.groupEnd||bx)}},{key:"withGroup",value:function(e,t,n){this.group(e,t)();try{n()}finally{this.groupEnd(e)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(e){return this.isEnabled()&&this.getLevel()>=Ex(e)}},{key:"_getLogFunction",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0;if(this._shouldLog(e)){var o;i=Px({logLevel:e,message:t,args:r,opts:i}),mx(n=n||i.method),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=gx();var a=i.tag||i.message;if(i.once){if(_x[a])return bx;_x[a]=gx()}return t=Cx(this.id,i.message,i),(o=n).bind.apply(o,[console,t].concat(yd(i.args)))}return bx}},{key:"level",set:function(e){this.setLevel(e)},get:function(){return this.getLevel()}},{key:"priority",set:function(e){this.level=e},get:function(){return this.level}}]),e}();function Ex(e){if(!e)return 0;var t;switch(Hc(e)){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return mx(Number.isFinite(t)&&t>=0),t}function Px(e){var t=e.logLevel,n=e.message;e.logLevel=Ex(t);for(var r=e.args?Array.from(e.args):[];r.length&&r.shift()!==n;);switch(e.args=r,Hc(t)){case"string":case"function":void 0!==n&&r.unshift(n),e.message=t;break;case"object":Object.assign(e,t)}"function"==typeof e.message&&(e.message=e.message());var i=Hc(e.message);return mx("string"===i||"object"===i),Object.assign(e,e.opts)}function Cx(e,t,n){if("string"==typeof t){var r=n.time?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=Math.max(t-e.length,0);return"".concat(" ".repeat(n)).concat(e)}((s=n.total)<10?"".concat(s.toFixed(2),"ms"):s<100?"".concat(s.toFixed(1),"ms"):s<1e3?"".concat(s.toFixed(0),"ms"):"".concat((s/1e3).toFixed(2),"s")):"";t=n.time?"".concat(e,": ").concat(r,"  ").concat(t):"".concat(e,": ").concat(t),i=t,o=n.color,a=n.background,sx||"string"!=typeof i||(o&&(o=hx(o),i="[".concat(o,"m").concat(i,"[39m")),a&&(o=hx(a),i="[".concat(a+10,"m").concat(i,"[49m"))),t=i}var i,o,a,s;return t}function Ax(e){if(!e&&!nx())return"Node";if(tx(e))return"Electron";var t="undefined"!=typeof navigator?navigator:{},n=e||t.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";var r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i?"IE":ix.chrome?"Chrome":ix.safari?"Safari":ix.mozInnerScreenX?"Firefox":"Unknown"}Sx.VERSION=ax;var Ox=new Sx({id:"deck"}),Tx={};function Mx(e){var t;Ox.level>0&&Tx[e]&&(t=Tx[e]).call.apply(t,arguments)}var Rx={name:"JSON",extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(e){var t=e[0],n=e[e.length-1];return"{"===t&&"}"===n||"["===t&&"]"===n},parseTextSync:JSON.parse},Ix=ex.global.deck&&ex.global.deck.VERSION;if(Ix&&"8.4.6"!==Ix)throw new Error("deck.gl - multiple versions detected: ".concat(Ix," vs ").concat("8.4.6"));Ix||(ex.global.deck=Object.assign(ex.global.deck||{},{VERSION:"8.4.6",version:"8.4.6",log:Ox,_registerLoggers:function(e){Tx=e}}),function(e){var t,n=ng(),r=eg(e=Array.isArray(e)?e:[e]);try{var i=function(){var e=Jm(t.value);n.find((function(t){return e===t}))||n.unshift(e)};for(r.s();!(t=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}}([Rx,[Iy,{imagebitmap:{premultiplyAlpha:"none"}}]]));var Lx=ex.global.deck,jx=new Sx({id:"luma.gl"});function Dx(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function Nx(e){return"undefined"!=typeof WebGLRenderingContext&&e instanceof WebGLRenderingContext||Boolean(e&&Number.isFinite(e._version))}function Fx(e){return"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||Boolean(e&&2===e._version)}function zx(e){return Dx(Nx(e),"Invalid WebGLRenderingContext"),e}function Bx(e){return Dx(Fx(e),"Requires WebGL2"),e}var Vx={};function Ux(e,t){var n;Vx[e]=!0,void 0!==t&&(n=t,ex.global.console&&ex.global.console.error&&ex.global.console.error(n))}var Wx=function e(t){var n=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(var r=0;r<this.attribs.length;r++){var i=new e.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};(Wx.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var Gx,Hx=function(e){var t=this;this.gl=e,function(e){var t=e.getError;e.getError=function(){var n;do{0!==(n=t.apply(e))&&(Vx[n]=!0)}while(0!==n);for(n in Vx)if(Vx[n])return delete Vx[n],parseInt(n,10);return 0}}(e);var n=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(e){return e===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:n.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(e){var r=t.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,e);var i=r.attribs[e];return i.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(e){var r=t.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,e);var i=r.attribs[e];return i.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(e,r){switch(e){case 34962:t.currentArrayBuffer=r;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=r}return n.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(e,r){var i=t.currentVertexArrayObject,o=i.attribs[e];switch(r){case 34975:return o.buffer;case 34338:return o.enabled;case 34339:return o.size;case 34340:return o.stride;case 34341:return o.type;case 34922:return o.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(e,r,i,o,a,s){var l=t.currentVertexArrayObject;l.maxAttrib=Math.max(l.maxAttrib,e);var u=l.attribs[e];return u.buffer=t.currentArrayBuffer,u.size=r,u.type=i,u.normalized=o,u.stride=a,u.offset=s,u.recache(),n.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",(function(){var e;e="OESVertexArrayObject emulation library context restored",ex.global.console&&ex.global.console.log&&ex.global.console.log(e),t.reset_()}),!0),this.reset_()};Hx.prototype.VERTEX_ARRAY_BINDING_OES=34229,Hx.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(var e=0;e<this.vertexArrayObjects.length;++e)this.vertexArrayObjects.isAlive=!1;var t=this.gl;this.maxVertexAttribs=t.getParameter(34921),this.defaultVertexArrayObject=new Wx(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},Hx.prototype.createVertexArrayOES=function(){var e=new Wx(this);return this.vertexArrayObjects.push(e),e},Hx.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},Hx.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof Wx&&e.hasBeenBound&&e.ext===this)},Hx.prototype.bindVertexArrayOES=function(e){var t=this.gl;if(!e||e.isAlive){var n=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;var i=this.currentVertexArrayObject;if(r!==i){r&&i.elementArrayBuffer===r.elementArrayBuffer||n.bindBuffer.call(t,34963,i.elementArrayBuffer);for(var o=this.currentArrayBuffer,a=Math.max(r?r.maxAttrib:0,i.maxAttrib),s=0;s<=a;s++){var l=i.attribs[s],u=r?r.attribs[s]:null;if(r&&l.enabled===u.enabled||(l.enabled?n.enableVertexAttribArray.call(t,s):n.disableVertexAttribArray.call(t,s)),l.enabled){var c=!1;r&&l.buffer===u.buffer||(o!==l.buffer&&(n.bindBuffer.call(t,34962,l.buffer),o=l.buffer),c=!0),(c||l.cached!==u.cached)&&n.vertexAttribPointer.call(t,s,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==o&&n.bindBuffer.call(t,34962,this.currentArrayBuffer)}}else Ux(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject")};var qx,$x=function(e){return Fx(e)?void 0:0},Xx=(Qc(Gx={},3074,(function(e){return Fx(e)?void 0:36064})),Qc(Gx,35723,(function(e){return Fx(e)?void 0:4352})),Qc(Gx,35977,$x),Qc(Gx,32937,$x),Qc(Gx,36795,(function(e,t){var n=Fx(e)?e.getExtension("EXT_disjoint_timer_query_webgl2"):e.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?t(n.GPU_DISJOINT_EXT):0})),Qc(Gx,37445,(function(e,t){var n=e.getExtension("WEBGL_debug_renderer_info");return t(n&&n.UNMASKED_VENDOR_WEBGL||7936)})),Qc(Gx,37446,(function(e,t){var n=e.getExtension("WEBGL_debug_renderer_info");return t(n&&n.UNMASKED_RENDERER_WEBGL||7937)})),Qc(Gx,34047,(function(e,t){var n=e.luma.extensions.EXT_texture_filter_anisotropic;return n?t(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1})),Qc(Gx,32883,$x),Qc(Gx,35071,$x),Qc(Gx,37447,$x),Qc(Gx,36063,(function(e,t){if(!Fx(e)){var n=e.getExtension("WEBGL_draw_buffers");return n?t(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}})),Qc(Gx,35379,$x),Qc(Gx,35374,$x),Qc(Gx,35377,$x),Qc(Gx,34852,(function(e){if(!Fx(e)){var t=e.getExtension("WEBGL_draw_buffers");return t?t.MAX_DRAW_BUFFERS_WEBGL:0}})),Qc(Gx,36203,(function(e){return e.getExtension("OES_element_index")?2147483647:65535})),Qc(Gx,33001,(function(e){return e.getExtension("OES_element_index")?16777216:65535})),Qc(Gx,33e3,(function(e){return 16777216})),Qc(Gx,37157,$x),Qc(Gx,35373,$x),Qc(Gx,35657,$x),Qc(Gx,36183,$x),Qc(Gx,37137,$x),Qc(Gx,34045,$x),Qc(Gx,35978,$x),Qc(Gx,35979,$x),Qc(Gx,35968,$x),Qc(Gx,35376,$x),Qc(Gx,35375,$x),Qc(Gx,35659,$x),Qc(Gx,37154,$x),Qc(Gx,35371,$x),Qc(Gx,35658,$x),Qc(Gx,35076,$x),Qc(Gx,35077,$x),Qc(Gx,35380,$x),Gx);var Yx,Zx,Kx,Qx=(Qc(qx={},"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){Dx(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),Qc(qx,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(e,t){Dx(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),Qc(qx,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){Dx(!1)}}),Qc(qx,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){Dx(!1)},deleteQuery:function(){Dx(!1)},beginQuery:function(){Dx(!1)},endQuery:function(){},getQuery:function(e,t){return this.getQueryObject(e,t)},getQueryParameter:function(e,t){return this.getQueryObject(e,t)},getQueryObject:function(){}}),qx),Jx={readBuffer:function(e,t,n){Fx(e)&&t(n)},getVertexAttrib:function(e,t,n,r){var i,o=function(e,t){return{webgl2:Fx(e),ext:e.getExtension(t)}}(e,"ANGLE_instanced_arrays"),a=o.webgl2,s=o.ext;switch(r){case 35069:i=!!a&&void 0;break;case 35070:i=a||s?void 0:0}return void 0!==i?i:t(n,r)},getProgramParameter:function(e,t,n,r){if(!Fx(e))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return t(n,r)},getInternalformatParameter:function(e,t,n,r,i){if(!Fx(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(n,r,i)},getTexParameter:function(e,t,n,r){switch(r){case 34046:var i=e.luma.extensions.EXT_texture_filter_anisotropic;r=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046}return t(n,r)},getParameter:function(e,t,n){var r=Xx[n],i="function"==typeof r?r(e,t,n):r;return void 0!==i?i:t(n)},hint:function(e,t,n,r){return t(n,r)}};function eb(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return tb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tb(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function tb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nb(e,t){var n=t.extension,r=t.target,i=t.target2,o=Qx[n];Dx(o);for(var a=o.meta,s=(void 0===a?{}:a).suffix,l=void 0===s?"":s,u=e.getExtension(n),c=function(){var t=h[f],n="".concat(t).concat(l),a=null;"meta"===t||"function"==typeof e[t]||(u&&"function"==typeof u[n]?a=function(){return u[n].apply(u,arguments)}:"function"==typeof o[t]&&(a=o[t].bind(r))),a&&(r[t]=a,i[t]=a)},f=0,h=Object.keys(o);f<h.length;f++)c()}function rb(e){if(Array.isArray(e))return e}function ib(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ob(e,t){return rb(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||gd(e,t)||ib()}("undefined"!=typeof global?global:window).polyfillContext=function(e){e.luma=e.luma||{};var t=e.luma;return t.polyfilled||(!function(e){if("function"!=typeof e.createVertexArray){var t=e.getSupportedExtensions;e.getSupportedExtensions=function(){var e=t.call(this)||[];return e.indexOf("OES_vertex_array_object")<0&&e.push("OES_vertex_array_object"),e};var n=e.getExtension;e.getExtension=function(t){return n.call(this,t)||("OES_vertex_array_object"!==t?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Hx(this)),this.__OESVertexArrayObject))}}}(e),function(e){e.luma.extensions={};var t,n=eb(e.getSupportedExtensions()||[]);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.luma[r]=e.getExtension(r)}}catch(i){n.e(i)}finally{n.f()}}(e),function(e,t){var n,r=eb(Object.getOwnPropertyNames(t));try{for(r.s();!(n=r.n()).done;){var i=n.value;"overrides"!==i&&nb(e,{extension:i,target:e.luma,target2:e})}}catch(o){r.e(o)}finally{r.f()}}(e,Qx),function(e,t){var n=t.target,r=t.target2;Object.keys(Jx).forEach((function(t){if("function"==typeof Jx[t]){var i=e[t]?e[t].bind(e):function(){},o=Jx[t].bind(null,e,i);n[t]=o,r[t]=o}}))}(e,{target:t,target2:e}),t.polyfilled=!0),e};var ab=(Qc(Yx={},3042,!1),Qc(Yx,32773,new Float32Array([0,0,0,0])),Qc(Yx,32777,32774),Qc(Yx,34877,32774),Qc(Yx,32969,1),Qc(Yx,32968,0),Qc(Yx,32971,1),Qc(Yx,32970,0),Qc(Yx,3106,new Float32Array([0,0,0,0])),Qc(Yx,3107,[!0,!0,!0,!0]),Qc(Yx,2884,!1),Qc(Yx,2885,1029),Qc(Yx,2929,!1),Qc(Yx,2931,1),Qc(Yx,2932,513),Qc(Yx,2928,new Float32Array([0,1])),Qc(Yx,2930,!0),Qc(Yx,3024,!0),Qc(Yx,36006,null),Qc(Yx,2886,2305),Qc(Yx,33170,4352),Qc(Yx,2849,1),Qc(Yx,32823,!1),Qc(Yx,32824,0),Qc(Yx,10752,0),Qc(Yx,32938,1),Qc(Yx,32939,!1),Qc(Yx,3089,!1),Qc(Yx,3088,new Int32Array([0,0,1024,1024])),Qc(Yx,2960,!1),Qc(Yx,2961,0),Qc(Yx,2968,4294967295),Qc(Yx,36005,4294967295),Qc(Yx,2962,519),Qc(Yx,2967,0),Qc(Yx,2963,4294967295),Qc(Yx,34816,519),Qc(Yx,36003,0),Qc(Yx,36004,4294967295),Qc(Yx,2964,7680),Qc(Yx,2965,7680),Qc(Yx,2966,7680),Qc(Yx,34817,7680),Qc(Yx,34818,7680),Qc(Yx,34819,7680),Qc(Yx,2978,[0,0,1024,1024]),Qc(Yx,3333,4),Qc(Yx,3317,4),Qc(Yx,37440,!1),Qc(Yx,37441,!1),Qc(Yx,37443,37444),Qc(Yx,35723,4352),Qc(Yx,36010,null),Qc(Yx,35977,!1),Qc(Yx,3330,0),Qc(Yx,3332,0),Qc(Yx,3331,0),Qc(Yx,3314,0),Qc(Yx,32878,0),Qc(Yx,3316,0),Qc(Yx,3315,0),Qc(Yx,32877,0),Yx),sb=function(e,t,n){return t?e.enable(n):e.disable(n)},lb=function(e,t,n){return e.hint(n,t)},ub=function(e,t,n){return e.pixelStorei(n,t)};function cb(e){return Array.isArray(e)||ArrayBuffer.isView(e)}var fb=(Qc(Zx={},3042,sb),Qc(Zx,32773,(function(e,t){return e.blendColor.apply(e,yd(t))})),Qc(Zx,32777,"blendEquation"),Qc(Zx,34877,"blendEquation"),Qc(Zx,32969,"blendFunc"),Qc(Zx,32968,"blendFunc"),Qc(Zx,32971,"blendFunc"),Qc(Zx,32970,"blendFunc"),Qc(Zx,3106,(function(e,t){return e.clearColor.apply(e,yd(t))})),Qc(Zx,3107,(function(e,t){return e.colorMask.apply(e,yd(t))})),Qc(Zx,2884,sb),Qc(Zx,2885,(function(e,t){return e.cullFace(t)})),Qc(Zx,2929,sb),Qc(Zx,2931,(function(e,t){return e.clearDepth(t)})),Qc(Zx,2932,(function(e,t){return e.depthFunc(t)})),Qc(Zx,2928,(function(e,t){return e.depthRange.apply(e,yd(t))})),Qc(Zx,2930,(function(e,t){return e.depthMask(t)})),Qc(Zx,3024,sb),Qc(Zx,35723,lb),Qc(Zx,36006,(function(e,t){var n=Fx(e)?36009:36160;return e.bindFramebuffer(n,t)})),Qc(Zx,2886,(function(e,t){return e.frontFace(t)})),Qc(Zx,33170,lb),Qc(Zx,2849,(function(e,t){return e.lineWidth(t)})),Qc(Zx,32823,sb),Qc(Zx,32824,"polygonOffset"),Qc(Zx,10752,"polygonOffset"),Qc(Zx,35977,sb),Qc(Zx,32938,"sampleCoverage"),Qc(Zx,32939,"sampleCoverage"),Qc(Zx,3089,sb),Qc(Zx,3088,(function(e,t){return e.scissor.apply(e,yd(t))})),Qc(Zx,2960,sb),Qc(Zx,2961,(function(e,t){return e.clearStencil(t)})),Qc(Zx,2968,(function(e,t){return e.stencilMaskSeparate(1028,t)})),Qc(Zx,36005,(function(e,t){return e.stencilMaskSeparate(1029,t)})),Qc(Zx,2962,"stencilFuncFront"),Qc(Zx,2967,"stencilFuncFront"),Qc(Zx,2963,"stencilFuncFront"),Qc(Zx,34816,"stencilFuncBack"),Qc(Zx,36003,"stencilFuncBack"),Qc(Zx,36004,"stencilFuncBack"),Qc(Zx,2964,"stencilOpFront"),Qc(Zx,2965,"stencilOpFront"),Qc(Zx,2966,"stencilOpFront"),Qc(Zx,34817,"stencilOpBack"),Qc(Zx,34818,"stencilOpBack"),Qc(Zx,34819,"stencilOpBack"),Qc(Zx,2978,(function(e,t){return e.viewport.apply(e,yd(t))})),Qc(Zx,3333,ub),Qc(Zx,3317,ub),Qc(Zx,37440,ub),Qc(Zx,37441,ub),Qc(Zx,37443,ub),Qc(Zx,3330,ub),Qc(Zx,3332,ub),Qc(Zx,3331,ub),Qc(Zx,36010,(function(e,t){return e.bindFramebuffer(36008,t)})),Qc(Zx,3314,ub),Qc(Zx,32878,ub),Qc(Zx,3316,ub),Qc(Zx,3315,ub),Qc(Zx,32877,ub),Qc(Zx,"framebuffer",(function(e,t){var n=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,n)})),Qc(Zx,"blend",(function(e,t){return t?e.enable(3042):e.disable(3042)})),Qc(Zx,"blendColor",(function(e,t){return e.blendColor.apply(e,yd(t))})),Qc(Zx,"blendEquation",(function(e,t){t=cb(t)?t:[t,t],e.blendEquationSeparate.apply(e,yd(t))})),Qc(Zx,"blendFunc",(function(e,t){t=cb(t)&&2===t.length?[].concat(yd(t),yd(t)):t,e.blendFuncSeparate.apply(e,yd(t))})),Qc(Zx,"clearColor",(function(e,t){return e.clearColor.apply(e,yd(t))})),Qc(Zx,"clearDepth",(function(e,t){return e.clearDepth(t)})),Qc(Zx,"clearStencil",(function(e,t){return e.clearStencil(t)})),Qc(Zx,"colorMask",(function(e,t){return e.colorMask.apply(e,yd(t))})),Qc(Zx,"cull",(function(e,t){return t?e.enable(2884):e.disable(2884)})),Qc(Zx,"cullFace",(function(e,t){return e.cullFace(t)})),Qc(Zx,"depthTest",(function(e,t){return t?e.enable(2929):e.disable(2929)})),Qc(Zx,"depthFunc",(function(e,t){return e.depthFunc(t)})),Qc(Zx,"depthMask",(function(e,t){return e.depthMask(t)})),Qc(Zx,"depthRange",(function(e,t){return e.depthRange.apply(e,yd(t))})),Qc(Zx,"dither",(function(e,t){return t?e.enable(3024):e.disable(3024)})),Qc(Zx,"derivativeHint",(function(e,t){e.hint(35723,t)})),Qc(Zx,"frontFace",(function(e,t){return e.frontFace(t)})),Qc(Zx,"mipmapHint",(function(e,t){return e.hint(33170,t)})),Qc(Zx,"lineWidth",(function(e,t){return e.lineWidth(t)})),Qc(Zx,"polygonOffsetFill",(function(e,t){return t?e.enable(32823):e.disable(32823)})),Qc(Zx,"polygonOffset",(function(e,t){return e.polygonOffset.apply(e,yd(t))})),Qc(Zx,"sampleCoverage",(function(e,t){return e.sampleCoverage.apply(e,yd(t))})),Qc(Zx,"scissorTest",(function(e,t){return t?e.enable(3089):e.disable(3089)})),Qc(Zx,"scissor",(function(e,t){return e.scissor.apply(e,yd(t))})),Qc(Zx,"stencilTest",(function(e,t){return t?e.enable(2960):e.disable(2960)})),Qc(Zx,"stencilMask",(function(e,t){var n=ob(t=cb(t)?t:[t,t],2),r=n[0],i=n[1];e.stencilMaskSeparate(1028,r),e.stencilMaskSeparate(1029,i)})),Qc(Zx,"stencilFunc",(function(e,t){var n=ob(t=cb(t)&&3===t.length?[].concat(yd(t),yd(t)):t,6),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5];e.stencilFuncSeparate(1028,r,i,o),e.stencilFuncSeparate(1029,a,s,l)})),Qc(Zx,"stencilOp",(function(e,t){var n=ob(t=cb(t)&&3===t.length?[].concat(yd(t),yd(t)):t,6),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5];e.stencilOpSeparate(1028,r,i,o),e.stencilOpSeparate(1029,a,s,l)})),Qc(Zx,"viewport",(function(e,t){return e.viewport.apply(e,yd(t))})),Zx);function hb(e,t,n){return void 0!==t[e]?t[e]:n[e]}var db={blendEquation:function(e,t,n){return e.blendEquationSeparate(hb(32777,t,n),hb(34877,t,n))},blendFunc:function(e,t,n){return e.blendFuncSeparate(hb(32969,t,n),hb(32968,t,n),hb(32971,t,n),hb(32970,t,n))},polygonOffset:function(e,t,n){return e.polygonOffset(hb(32824,t,n),hb(10752,t,n))},sampleCoverage:function(e,t,n){return e.sampleCoverage(hb(32938,t,n),hb(32939,t,n))},stencilFuncFront:function(e,t,n){return e.stencilFuncSeparate(1028,hb(2962,t,n),hb(2967,t,n),hb(2963,t,n))},stencilFuncBack:function(e,t,n){return e.stencilFuncSeparate(1029,hb(34816,t,n),hb(36003,t,n),hb(36004,t,n))},stencilOpFront:function(e,t,n){return e.stencilOpSeparate(1028,hb(2964,t,n),hb(2965,t,n),hb(2966,t,n))},stencilOpBack:function(e,t,n){return e.stencilOpSeparate(1029,hb(34817,t,n),hb(34818,t,n),hb(34819,t,n))}},pb={enable:function(e,t){return e(Qc({},t,!0))},disable:function(e,t){return e(Qc({},t,!1))},pixelStorei:function(e,t,n){return e(Qc({},t,n))},hint:function(e,t,n){return e(Qc({},t,n))},bindFramebuffer:function(e,t,n){var r;switch(t){case 36160:return e((Qc(r={},36006,n),Qc(r,36010,n),r));case 36009:return e(Qc({},36006,n));case 36008:return e(Qc({},36010,n));default:return null}},blendColor:function(e,t,n,r,i){return e(Qc({},32773,new Float32Array([t,n,r,i])))},blendEquation:function(e,t){var n;return e((Qc(n={},32777,t),Qc(n,34877,t),n))},blendEquationSeparate:function(e,t,n){var r;return e((Qc(r={},32777,t),Qc(r,34877,n),r))},blendFunc:function(e,t,n){var r;return e((Qc(r={},32969,t),Qc(r,32968,n),Qc(r,32971,t),Qc(r,32970,n),r))},blendFuncSeparate:function(e,t,n,r,i){var o;return e((Qc(o={},32969,t),Qc(o,32968,n),Qc(o,32971,r),Qc(o,32970,i),o))},clearColor:function(e,t,n,r,i){return e(Qc({},3106,new Float32Array([t,n,r,i])))},clearDepth:function(e,t){return e(Qc({},2931,t))},clearStencil:function(e,t){return e(Qc({},2961,t))},colorMask:function(e,t,n,r,i){return e(Qc({},3107,[t,n,r,i]))},cullFace:function(e,t){return e(Qc({},2885,t))},depthFunc:function(e,t){return e(Qc({},2932,t))},depthRange:function(e,t,n){return e(Qc({},2928,new Float32Array([t,n])))},depthMask:function(e,t){return e(Qc({},2930,t))},frontFace:function(e,t){return e(Qc({},2886,t))},lineWidth:function(e,t){return e(Qc({},2849,t))},polygonOffset:function(e,t,n){var r;return e((Qc(r={},32824,t),Qc(r,10752,n),r))},sampleCoverage:function(e,t,n){var r;return e((Qc(r={},32938,t),Qc(r,32939,n),r))},scissor:function(e,t,n,r,i){return e(Qc({},3088,new Int32Array([t,n,r,i])))},stencilMask:function(e,t){var n;return e((Qc(n={},2968,t),Qc(n,36005,t),n))},stencilMaskSeparate:function(e,t,n){return e(Qc({},1028===t?2968:36005,n))},stencilFunc:function(e,t,n,r){var i;return e((Qc(i={},2962,t),Qc(i,2967,n),Qc(i,2963,r),Qc(i,34816,t),Qc(i,36003,n),Qc(i,36004,r),i))},stencilFuncSeparate:function(e,t,n,r,i){var o;return e((Qc(o={},1028===t?2962:34816,n),Qc(o,1028===t?2967:36003,r),Qc(o,1028===t?2963:36004,i),o))},stencilOp:function(e,t,n,r){var i;return e((Qc(i={},2964,t),Qc(i,2965,n),Qc(i,2966,r),Qc(i,34817,t),Qc(i,34818,n),Qc(i,34819,r),i))},stencilOpSeparate:function(e,t,n,r,i){var o;return e((Qc(o={},1028===t?2964:34817,n),Qc(o,1028===t?2965:34818,r),Qc(o,1028===t?2966:34819,i),o))},viewport:function(e,t,n,r,i){return e(Qc({},2978,[t,n,r,i]))}},vb=function(e,t){return e.isEnabled(t)},mb=(Qc(Kx={},3042,vb),Qc(Kx,2884,vb),Qc(Kx,2929,vb),Qc(Kx,3024,vb),Qc(Kx,32823,vb),Qc(Kx,32926,vb),Qc(Kx,32928,vb),Qc(Kx,3089,vb),Qc(Kx,2960,vb),Qc(Kx,35977,vb),Kx);function gb(e){for(var t in e)return!1;return!0}function yb(e,t){if(e===t)return!0;var n=Array.isArray(e)||ArrayBuffer.isView(e),r=Array.isArray(t)||ArrayBuffer.isView(t);if(n&&r&&e.length===t.length){for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return!1}function xb(e,t){var n=e[t].bind(e);e[t]=function(){var t=arguments.length<=0?void 0:arguments[0];return t in e.state.cache||(e.state.cache[t]=n.apply(void 0,arguments)),e.state.enable?e.state.cache[t]:n.apply(void 0,arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function bb(e,t,n){var r=e[t].bind(e);e[t]=function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];var a=n.apply(void 0,[e.state._updateCache].concat(i)),s=a.valueChanged,l=a.oldValue;return s&&r.apply(void 0,i),l},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}function _b(e){var t=e.useProgram.bind(e);e.useProgram=function(n){e.state.program!==n&&(t(n),e.state.program=n)}}var wb=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.copyState,i=void 0!==r&&r,o=n.log,a=void 0===o?function(){}:o;Np(this,e),this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=i?Ab(t):Object.assign({},ab),this.log=a,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Tf(e,[{key:"push",value:function(){this.stateStack.push({})}},{key:"pop",value:function(){Dx(this.stateStack.length>0);var e=this.stateStack[this.stateStack.length-1];Cb(this.gl,e),this.stateStack.pop()}},{key:"_updateCache",value:function(e){var t,n=!1,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in e){Dx(void 0!==i);var o=e[i],a=this.cache[i];yb(o,a)||(n=!0,t=a,r&&!(i in r)&&(r[i]=a),this.cache[i]=o)}return{valueChanged:n,oldValue:t}}}]),e}();function kb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.enable,r=void 0===n||n,i=t.copyState;if(Dx(void 0!==i),!e.state){var o="undefined"!=typeof global?global:window,a=o.polyfillContext;for(var s in a&&a(e),e.state=new wb(e,{copyState:i}),_b(e),pb){var l=pb[s];bb(e,s,l)}xb(e,"getParameter"),xb(e,"isEnabled")}return e.state.enable=r,e}function Sb(e){Dx(e.state),e.state.pop()}function Eb(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Pb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pb(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Pb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cb(e,t){if(Dx(Nx(e),"setParameters requires a WebGL context"),!gb(t)){var n={};for(var r in t){var i=Number(r),o=fb[r];o&&("string"==typeof o?n[o]=!0:o(e,t[r],i))}var a=e.state&&e.state.cache;if(a)for(var s in n){(0,db[s])(e,t,a)}}}function Ab(e,t){if("number"==typeof(t=t||ab)){var n=t,r=mb[n];return r?r(e,n):e.getParameter(n)}var i,o={},a=Eb(Array.isArray(t)?t:Object.keys(t));try{for(a.s();!(i=a.n()).done;){var s=i.value,l=mb[s];o[s]=l?l(e,Number(s)):e.getParameter(Number(s))}}catch(u){a.e(u)}finally{a.f()}return o}function Ob(e,t,n){if(gb(t))return n(e);var r,i=t.nocatch,o=void 0===i||i;if(function(e){e.state||kb(e,{copyState:!1}),e.state.push()}(e),Cb(e,t),o)r=n(e),Sb(e);else try{r=n(e)}finally{Sb(e)}return r}function Tb(e){var t=e.luma;if(e.canvas&&t){var n=t.canvasSizeInfo.clientWidth;return n?e.drawingBufferWidth/n:1}return 1}function Mb(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Tb(e),i=e.drawingBufferWidth,o=e.drawingBufferHeight;return Ib(t,r,i,o,n)}function Rb(e){var t="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}function Ib(e,t,n,r,i){var o,a=Lb(e[0],t,n),s=jb(e[1],t,r,i),l=Lb(e[0]+1,t,n),u=l===n-1?l:l-1;return l=jb(e[1]+1,t,r,i),i?(o=s,s=l=0===l?l:l+1):o=l===r-1?l:l-1,{x:a,y:s,width:Math.max(u-a+1,1),height:Math.max(o-s+1,1)}}function Lb(e,t,n){return Math.min(Math.round(e*t),n-1)}function jb(e,t,n,r){return r?Math.max(0,n-1-Math.round(e*t)):Math.min(Math.round(e*t),n-1)}var Db=ex.isBrowser(),Nb=Db&&"undefined"!=typeof document,Fb={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function zb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Dx(Db,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils");var t,n=e=Object.assign({},Fb,e),r=n.width,i=n.height;function o(t){if(e.throwOnError)throw new Error(t);return console.error(t),null}e.onError=o;var a=e,s=a.canvas,l=Ub({canvas:s,width:r,height:i,onError:o});return(t=Vb(l,e))?(Wb(t=Bb(t,e)),t):null}function Bb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||e._instrumented)return e;e._version=e._version||Gb(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};var n=t=Object.assign({},Fb,t),r=n.manageState,i=n.debug;return r&&kb(e,{copyState:!1,log:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jx.log.apply(jx,[1].concat(t))()}}),Db&&i&&(ex.global.makeDebugContext?(e=ex.global.makeDebugContext(e,t),jx.level=Math.max(jx.level,1)):jx.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function Vb(e,t){var n=t.onError,r=null,i=function(e){return r=e.statusMessage||r};e.addEventListener("webglcontextcreationerror",i,!1);var o=t.webgl1,a=void 0===o||o,s=t.webgl2,l=void 0===s||s,u=null;return l&&(u=(u=u||e.getContext("webgl2",t))||e.getContext("experimental-webgl2",t)),a&&(u=(u=u||e.getContext("webgl",t))||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",i,!1),u?(t.onContextLost&&e.addEventListener("webglcontextlost",t.onContextLost,!1),t.onContextRestored&&e.addEventListener("webglcontextrestored",t.onContextRestored,!1),u):n("Failed to create ".concat(l&&!a?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function Ub(e){var t,n=e.canvas,r=e.width,i=void 0===r?800:r,o=e.height,a=void 0===o?600:o,s=e.onError;"string"==typeof n?(Nb&&"complete"===document.readyState||s("createGLContext called on canvas '".concat(n,"' before page was loaded")),t=document.getElementById(n)):n?t=n:((t=document.createElement("canvas")).id="lumagl-canvas",t.style.width=Number.isFinite(i)?"".concat(i,"px"):"100%",t.style.height=Number.isFinite(a)?"".concat(a,"px"):"100%",document.body.insertBefore(t,document.body.firstChild));return t}function Wb(e){var t=Fx(e)?"WebGL2":"WebGL1",n=function(e){var t=e.getParameter(7936),n=e.getParameter(7937),r=e.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&e.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||t,renderer:r&&e.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:t,rendererMasked:n,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}(e),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=e.debug?" debug":"";jx.info(1,"".concat(t).concat(i," context ").concat(r))()}function Gb(e){return"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext?2:1}function Hb(e,t,n){var r="width"in n?n.width:e.canvas.clientWidth,i="height"in n?n.height:e.canvas.clientHeight;r&&i||(jx.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,r=e.canvas.width||1,i=e.canvas.height||1),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};var o=e.luma.canvasSizeInfo;if(o.clientWidth!==r||o.clientHeight!==i||o.devicePixelRatio!==t){var a=t,s=Math.floor(r*a),l=Math.floor(i*a);e.canvas.width=s,e.canvas.height=l,e.drawingBufferWidth===s&&e.drawingBufferHeight===l||(jx.warn("Device pixel ratio clamped")(),a=Math.min(e.drawingBufferWidth/r,e.drawingBufferHeight/i),e.canvas.width=Math.floor(r*a),e.canvas.height=Math.floor(i*a)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:t})}}var qb=new(function(){function e(){Np(this,e),this.stats=new Map}return Tf(e,[{key:"get",value:function(e){return this.stats.has(e)||this.stats.set(e,new rm({id:e})),this.stats.get(e)}}]),e}());if(ex.global.luma&&"8.4.3"!==ex.global.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(ex.global.luma.VERSION," vs ").concat("8.4.3"));function $b(e){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}function Xb(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mf(e,t)}function Yb(e,t){return!t||"object"!==Hc(t)&&"function"!=typeof t?If(e):t}function Zb(e){return(Zb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}ex.global.luma||(ex.isBrowser()&&jx.log(1,"luma.gl ".concat("8.4.3"," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),ex.global.luma=ex.global.luma||{VERSION:"8.4.3",version:"8.4.3",log:jx,stats:qb,globals:{modules:{},nodeIO:{}}}),ex.global.luma;function Kb(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function Qb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clamped,r=void 0===n||n;switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return r?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Jb(e){var t=e.data,n=e.width,r=e.height,i=e.bytesPerPixel,o=void 0===i?4:i,a=e.temp,s=n*o;a=a||new Uint8Array(s);for(var l=0;l<r/2;++l){var u=l*s,c=(r-l-1)*s;a.set(t.subarray(u,u+s)),t.copyWithin(u,c,c+s),t.set(a,c)}}function e_(e){for(var t=e.data,n=e.width,r=e.height,i=Math.round(n/2),o=Math.round(r/2),a=new Uint8Array(i*o*4),s=0;s<o;s++)for(var l=0;l<i;l++)for(var u=0;u<4;u++)a[4*(s*i+l)+u]=t[4*(2*s*n+2*l)+u];return{data:a,width:i,height:o}}function t_(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}var n_={};function r_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";n_[e]=n_[e]||1;var t=n_[e]++;return"".concat(e,"-").concat(t)}function i_(e){return t_("number"==typeof e,"Input must be a number"),e&&0==(e&e-1)}function o_(e){var t=!0;for(var n in e){t=!1;break}return t}function a_(e,t){for(var n=t.maxElts,r=void 0===n?16:n,i=t.size,o=void 0===i?1:i,a="[",s=0;s<e.length&&s<r;++s)s>0&&(a+=",".concat(s%o==0?" ":"")),a+=s_(e[s],t);var l=e.length>r?"...":"]";return"".concat(a).concat(l)}function s_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=1e-16,r=t.isInteger,i=void 0!==r&&r;if(Array.isArray(e)||ArrayBuffer.isView(e))return a_(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<n)return i?"0":"0.";if(i)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);var o=e.toPrecision(2),a=o.indexOf(".0");return a===o.length-2?o.slice(0,-1):o}function l_(e,t,n,r){var i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(e);r.forEach((function(e){o.methodName||(o[e]=function(){throw jx.removed("Calling removed method ".concat(t,".").concat(e,": "),i)(),new Error(e)})}))}function u_(e,t,n){var r=n.removedProps,i=void 0===r?{}:r,o=n.deprecatedProps,a=void 0===o?{}:o,s=n.replacedProps,l=void 0===s?{}:s;for(var u in i)if(u in t){var c=i[u]?"".concat(e,".").concat(i[u]):"N/A";jx.removed("".concat(e,".").concat(u),c)()}for(var f in a)if(f in t){var h=a[f];jx.deprecated("".concat(e,".").concat(f),"".concat(e,".").concat(h))()}var d=null;for(var p in l)if(p in t){var v=l[p];jx.deprecated("".concat(e,".").concat(p),"".concat(e,".").concat(v))(),(d=d||Object.assign({},t))[v]=t[p],delete d[p]}return d||t}function c_(e,t){if("string"!=typeof t)return t;var n=Number(t);if(!isNaN(n))return n;var r=e[t=t.replace(/^.*\./,"")];return t_(void 0!==r,"Accessing undefined constant GL.".concat(t)),r}function f_(e,t){for(var n in t=Number(t),e)if(e[n]===t)return"GL.".concat(n);return String(t)}function h_(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d_(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function d_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p_="Resource subclass must define virtual methods",v_=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Np(this,e),zx(t);var r=n.id,i=n.userData,o=void 0===i?{}:i;this.gl=t,this.gl2=t,this.id=r||r_(this.constructor.name),this.userData=o,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return Tf(e,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deleteChildren,n=void 0!==t&&t,r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&n&&r.filter(Boolean).forEach((function(e){return e.delete()})),this}},{key:"bind",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof t?(this._bindHandle(t),this):(this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t_(e=c_(this.gl,e));var n=this.constructor.PARAMETERS||{},r=n[e];if(r){var i=Fx(this.gl),o=(!("webgl2"in r)||i)&&(!("extension"in r)||this.gl.getExtension(r.extension));if(!o){var a=r.webgl1,s="webgl2"in r?r.webgl2:r.webgl1,l=i?s:a;return l}}return this._getParameter(e,t)}},{key:"getParameters",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.parameters,r=t.keys,i=this.constructor.PARAMETERS||{},o=Fx(this.gl),a={},s=n||Object.keys(i),l=h_(s);try{for(l.s();!(e=l.n()).done;){var u=e.value,c=i[u],f=c&&(!("webgl2"in c)||o)&&(!("extension"in c)||this.gl.getExtension(c.extension));if(f){var h=r?f_(this.gl,u):u;a[h]=this.getParameter(u,t),r&&"GLenum"===c.type&&(a[h]=f_(this.gl,a[h]))}}}catch(d){l.e(d)}finally{l.f()}return a}},{key:"setParameter",value:function(e,t){t_(e=c_(this.gl,e));var n=(this.constructor.PARAMETERS||{})[e];if(n){var r=Fx(this.gl);if(!((!("webgl2"in n)||r)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(t=c_(t))}return this._setParameter(e,t),this}},{key:"setParameters",value:function(e){for(var t in e)this.setParameter(t,e[t]);return this}},{key:"stubRemovedMethods",value:function(e,t,n){return l_(this,e,t,n)}},{key:"initialize",value:function(e){}},{key:"_createHandle",value:function(){throw new Error(p_)}},{key:"_deleteHandle",value:function(){throw new Error(p_)}},{key:"_bindHandle",value:function(e){throw new Error(p_)}},{key:"_getOptsFromHandle",value:function(){throw new Error(p_)}},{key:"_getParameter",value:function(e,t){throw new Error(p_)}},{key:"_setParameter",value:function(e,t){throw new Error(p_)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var e=this.constructor.name,t=qb.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}},{key:"_removeStats",value:function(){var e=this.constructor.name;qb.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.name,n=qb.get("Memory Usage");n.get("GPU Memory").addCount(e),n.get("".concat(t," Memory")).addCount(e),this.byteLength=e}},{key:"_trackDeallocatedMemory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.name,t=qb.get("Memory Usage");t.get("GPU Memory").subtractCount(this.byteLength),t.get("".concat(e," Memory")).subtractCount(this.byteLength),this.byteLength=0}},{key:"handle",get:function(){return this._handle}}]),e}();function m_(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g_(e,t,n){return(g_=m_()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Mf(i,n.prototype),i}).apply(null,arguments)}var y_={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},x_={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},b_=function(){function e(){var t=this;Np(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((function(e){return t._assign(e)})),Object.freeze(this)}return Tf(e,null,[{key:"getBytesPerElement",value:function(e){return Qb(e.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(e){return t_(e.size),Qb(e.type||5126).BYTES_PER_ELEMENT*e.size}},{key:"resolve",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g_(e,[y_].concat(n))}}]),Tf(e,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"_assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==(e=u_("Accessor",e,x_)).type&&(this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&("boolean"==typeof e.index?this.index=e.index?1:0:this.index=e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function(){return e.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return e.getBytesPerVertex(this)}}]),e}();function __(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var w_,k_,S_,E_={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},P_={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:E_},C_={removedProps:E_},A_=function(e){Xb(n,v_);var t=__(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Np(this,n),(r=t.call(this,e,i)).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),r.target=i.target||(r.gl.webgl2?36662:34962),r.initialize(i),Object.seal(If(r)),r}return Tf(n,[{key:"getElementCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/b_.getBytesPerElement(e))}},{key:"getVertexCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/b_.getBytesPerVertex(e))}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=u_("Buffer",e,P_),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}},{key:"setProps",value:function(e){return"accessor"in(e=u_("Buffer",e,C_))&&this.setAccessor(e.accessor),this}},{key:"setAccessor",value:function(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new b_(e),this}},{key:"reallocate",value:function(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}},{key:"setData",value:function(e){return this.initialize(e)}},{key:"subData",value:function(e){ArrayBuffer.isView(e)&&(e={data:e});var t=e,n=t.data,r=t.offset,i=void 0===r?0:r,o=t.srcOffset,a=void 0===o?0:o,s=e.byteLength||e.length;t_(n);var l=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(l,this.handle),0!==a||void 0!==s?(Bx(this.gl),this.gl.bufferSubData(this.target,i,n,a,s)):this.gl.bufferSubData(l,i,n),this.gl.bindBuffer(l,null),this.debugData=null,this._inferType(n),this}},{key:"copyData",value:function(e){var t=e.sourceBuffer,n=e.readOffset,r=void 0===n?0:n,i=e.writeOffset,o=void 0===i?0:i,a=e.size,s=this.gl;return Bx(s),s.bindBuffer(36662,t.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,o,a),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dstData,n=void 0===t?null:t,r=e.srcByteOffset,i=void 0===r?0:r,o=e.dstOffset,a=void 0===o?0:o,s=e.length,l=void 0===s?0:s;Bx(this.gl);var u,c,f=Qb(this.accessor.type||5126,{clamped:!1}),h=this._getAvailableElementCount(i),d=a;n?u=(c=n.length)-d:c=d+(u=Math.min(h,l||h));var p=Math.min(h,u);return t_((l=l||p)<=p),n=n||new f(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,i,n,a,l),this.gl.bindBuffer(36662,null),n}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,i=void 0===r?this.accessor&&this.accessor.index:r,o=e.offset,a=void 0===o?0:o,s=e.size;return 35345===n||35982===n?void 0!==s?this.gl.bindBufferRange(n,i,this.handle,a,s):(t_(0===a),this.gl.bindBufferBase(n,i,this.handle)):this.gl.bindBuffer(n,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,i=void 0===r?this.accessor&&this.accessor.index:r,o=35345===n||35982===n;return o?this.gl.bindBufferBase(n,i,null):this.gl.bindBuffer(n,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_setData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+t;t_(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();var r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,this.usage),this.gl.bufferSubData(r,t,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=n,this._trackAllocatedMemory(n);var i=Kb(e);return t_(i),this.setAccessor(new b_(this.accessor,{type:i})),this}},{key:"_setByteLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;t_(e>=0),this._trackDeallocatedMemory();var n=e;0===e&&(n=new Float32Array(0));var r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(e){var t=e/Qb(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-t}},{key:"_inferType",value:function(e){this.accessor.type||this.setAccessor(new b_(this.accessor,{type:Kb(e)}))}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function(e){this.gl.bindBuffer(this.target,this.handle);var t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}},{key:"setByteLength",value:function(e){return jx.deprecated("setByteLength","reallocate")(),this.reallocate(e)}},{key:"updateAccessor",value:function(e){return jx.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new b_(this.accessor,e),this}},{key:"type",get:function(){return jx.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return jx.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}}]),n}(),O_=(Qc(w_={},6407,{dataFormat:6407,types:[5121,33635]}),Qc(w_,6408,{dataFormat:6408,types:[5121,32819,32820]}),Qc(w_,6406,{dataFormat:6406,types:[5121]}),Qc(w_,6409,{dataFormat:6409,types:[5121]}),Qc(w_,6410,{dataFormat:6410,types:[5121]}),Qc(w_,33326,{dataFormat:6403,types:[5126],gl2:!0}),Qc(w_,33328,{dataFormat:33319,types:[5126],gl2:!0}),Qc(w_,34837,{dataFormat:6407,types:[5126],gl2:!0}),Qc(w_,34836,{dataFormat:6408,types:[5126],gl2:!0}),w_),T_=(Qc(k_={},6403,1),Qc(k_,36244,1),Qc(k_,33319,2),Qc(k_,33320,2),Qc(k_,6407,3),Qc(k_,36248,3),Qc(k_,6408,4),Qc(k_,36249,4),Qc(k_,6402,1),Qc(k_,34041,1),Qc(k_,6406,1),Qc(k_,6409,1),Qc(k_,6410,2),k_),M_=(Qc(S_={},5126,4),Qc(S_,5125,4),Qc(S_,5124,4),Qc(S_,5123,2),Qc(S_,5122,2),Qc(S_,5131,2),Qc(S_,5120,1),Qc(S_,5121,1),S_);function R_(e,t){var n=O_[t];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;var r=Fx(e)&&n.gl2||n.gl1;return"string"==typeof r?e.getExtension(r):r}function I_(e,t){var n=O_[t];switch(n&&n.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}function L_(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return j_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j_(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function j_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var N_=[9729,9728],F_=ex.global.WebGLBuffer||function(){},z_=function(e){Xb(n,v_);var t=D_(n);function n(e,r){var i;Np(this,n);var o=r.id,a=void 0===o?r_("texture"):o,s=r.handle,l=r.target;return(i=t.call(this,e,{id:a,handle:s})).target=l,i.textureUnit=void 0,i.loaded=!1,i.width=void 0,i.height=void 0,i.depth=void 0,i.format=void 0,i.type=void 0,i.dataFormat=void 0,i.border=void 0,i.textureUnit=void 0,i.mipmaps=void 0,i}return Tf(n,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format,r=t.linearFiltering,i=!0;return n&&(i=(i=i&&R_(e,n))&&(!r||I_(e,n))),i}}]),Tf(n,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data;if(n instanceof Promise)return n.then((function(n){return e.initialize(Object.assign({},t,{pixels:n,data:n}))})),this;var r="undefined"!=typeof HTMLVideoElement&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",(function(){return e.initialize(t)})),this;var i=t.pixels,o=void 0===i?null:i,a=t.format,s=void 0===a?6408:a,l=t.border,u=void 0===l?0:l,c=t.recreate,f=void 0!==c&&c,h=t.parameters,d=void 0===h?{}:h,p=t.pixelStore,v=void 0===p?{}:p,m=t.textureUnit,g=void 0===m?void 0:m;n||(n=o);var y=t.width,x=t.height,b=t.dataFormat,_=t.type,w=t.compressed,k=void 0!==w&&w,S=t.mipmaps,E=void 0===S||S,P=t.depth,C=void 0===P?0:P,A=this._deduceParameters({format:s,type:_,dataFormat:b,compressed:k,data:n,width:y,height:x});return y=A.width,x=A.height,k=A.compressed,b=A.dataFormat,_=A.type,this.width=y,this.height=x,this.depth=C,this.format=s,this.type=_,this.dataFormat=b,this.border=u,this.textureUnit=g,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),E&&this._isNPOT()&&(jx.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),E=!1,this._updateForNPOT(d)),this.mipmaps=E,this.setImageData({data:n,width:y,height:x,depth:C,format:s,type:_,dataFormat:b,border:u,mipmaps:E,parameters:v,compressed:k}),E&&this.generateMipmap(),this.setParameters(d),f&&(this.data=n),r&&(this._video={video:n,parameters:d,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}},{key:"update",value:function(){if(this._video){var e=this._video,t=e.video,n=e.parameters;if(e.lastTime===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}},{key:"resize",value:function(e){var t=e.height,n=e.width,r=e.mipmaps,i=void 0!==r&&r;return n!==this.width||t!==this.height?this.initialize({width:n,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}},{key:"generateMipmap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(jx.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Ob(this.gl,t,(function(){e.gl.generateMipmap(e.target)})),this.gl.bindTexture(this.target,null),this)}},{key:"setImageData",value:function(e){this._trackDeallocatedMemory("Texture");var t=e.target,n=void 0===t?this.target:t,r=e.pixels,i=void 0===r?null:r,o=e.level,a=void 0===o?0:o,s=e.format,l=void 0===s?this.format:s,u=e.border,c=void 0===u?this.border:u,f=e.offset,h=void 0===f?0:f,d=e.parameters,p=void 0===d?{}:d,v=e.data,m=void 0===v?null:v,g=e.type,y=void 0===g?this.type:g,x=e.width,b=void 0===x?this.width:x,_=e.height,w=void 0===_?this.height:_,k=e.dataFormat,S=void 0===k?this.dataFormat:k,E=e.compressed,P=void 0!==E&&E;m||(m=i);var C=this._deduceParameters({format:l,type:y,dataFormat:S,compressed:P,data:m,width:b,height:w});y=C.type,S=C.dataFormat,P=C.compressed,b=C.width,w=C.height;var A=this.gl;A.bindTexture(this.target,this.handle);var O,T,M=this._getDataType({data:m,compressed:P});if(m=M.data,O=M.dataType,Ob(this.gl,p,(function(){switch(O){case"null":A.texImage2D(n,a,l,b,w,c,S,y,m);break;case"typed-array":A.texImage2D(n,a,l,b,w,c,S,y,m,h);break;case"buffer":(T=Bx(A)).bindBuffer(35052,m.handle||m),T.texImage2D(n,a,l,b,w,c,S,y,h),T.bindBuffer(35052,null);break;case"browser-object":Fx(A)?A.texImage2D(n,a,l,b,w,c,S,y,m):A.texImage2D(n,a,l,S,y,m);break;case"compressed":var e,t=L_(m.entries());try{for(t.s();!(e=t.n()).done;){var r=ob(e.value,2),i=r[0],o=r[1];A.compressedTexImage2D(n,i,o.format,o.width,o.height,c,o.data)}}catch(s){t.e(s)}finally{t.f()}break;default:t_(!1,"Unknown image data type")}})),m&&m.byteLength)this._trackAllocatedMemory(m.byteLength,"Texture");else{var R=T_[this.dataFormat]||4,I=M_[this.type]||1;this._trackAllocatedMemory(this.width*this.height*R*I,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function(e){var t=this,n=e.target,r=void 0===n?this.target:n,i=e.pixels,o=void 0===i?null:i,a=e.data,s=void 0===a?null:a,l=e.x,u=void 0===l?0:l,c=e.y,f=void 0===c?0:c,h=e.width,d=void 0===h?this.width:h,p=e.height,v=void 0===p?this.height:p,m=e.level,g=void 0===m?0:m,y=e.format,x=void 0===y?this.format:y,b=e.type,_=void 0===b?this.type:b,w=e.dataFormat,k=void 0===w?this.dataFormat:w,S=e.compressed,E=void 0!==S&&S,P=e.offset,C=void 0===P?0:P,A=e.border;void 0===A&&this.border;var O=e.parameters,T=void 0===O?{}:O,M=this._deduceParameters({format:x,type:_,dataFormat:k,compressed:E,data:s,width:d,height:v});if(_=M.type,k=M.dataFormat,E=M.compressed,d=M.width,v=M.height,t_(0===this.depth,"texSubImage not supported for 3D textures"),s||(s=o),s&&s.data){var R=s;s=R.data,d=R.shape[0],v=R.shape[1]}s instanceof A_&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),Ob(this.gl,T,(function(){if(E)t.gl.compressedTexSubImage2D(r,g,u,f,d,v,x,s);else if(null===s)t.gl.texSubImage2D(r,g,u,f,d,v,k,_,null);else if(ArrayBuffer.isView(s))t.gl.texSubImage2D(r,g,u,f,d,v,k,_,s,C);else if(s instanceof F_){var e=Bx(t.gl);e.bindBuffer(35052,s),e.texSubImage2D(r,g,u,f,d,v,k,_,C),e.bindBuffer(35052,null)}else if(Fx(t.gl)){Bx(t.gl).texSubImage2D(r,g,u,f,d,v,k,_,s)}else t.gl.texSubImage2D(r,g,u,f,k,_,s)})),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(){return jx.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}},{key:"_getDataType",value:function(e){var t=e.data,n=e.compressed;return void 0!==n&&n?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof A_?{data:t.handle,dataType:"buffer"}:t instanceof F_?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}},{key:"_deduceParameters",value:function(e){var t=e.format,n=e.data,r=e.width,i=e.height,o=e.dataFormat,a=e.type,s=e.compressed,l=O_[t];o=o||l&&l.dataFormat,a=a||l&&l.types[0],s=s||l&&l.compressed;var u=this._deduceImageSize(n,r,i);return{dataFormat:o,type:a,compressed:s,width:r=u.width,height:i=u.height,format:t,data:n}}},{key:"_deduceImageSize",value:function(e,t,n){var r;return t_(r="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:n}:{width:t>=0?t:1,height:n>=0?n:1},"Could not deduced texture size"),t_(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),t_(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}},{key:"_setParameter",value:function(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:t_(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!Fx(this.gl)&&(!(!this.width||!this.height)&&(!i_(this.width)||!i_(this.height)))}},{key:"_updateForNPOT",value:function(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(e,t){if(this._isNPOT())switch(e){case 10241:-1===N_.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}]),n}();function B_(e,t){return t_("string"==typeof e),e=""+e,new Promise((function(n,r){try{var i=new Image;i.onload=function(){return n(i)},i.onerror=function(){return r(new Error("Could not load image ".concat(e,".")))},i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(o){r(o)}}))}function V_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var U_=function(e){Xb(n,z_);var t=V_(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Np(this,n),zx(e),(i instanceof Promise||"string"==typeof i)&&(i={data:i}),"string"==typeof i.data&&(i=Object.assign({},i,{data:B_(i.data)})),(r=t.call(this,e,Object.assign({},i,{target:3553}))).initialize(i),Object.seal(If(r)),r}return Tf(n,null,[{key:"isSupported",value:function(e,t){return z_.isSupported(e,t)}}]),n}();function W_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var G_=[34069,34070,34071,34072,34073,34074],H_=function(e){Xb(r,z_);var t,n=W_(r);function r(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Np(this,r),zx(e),(t=n.call(this,e,Object.assign({},i,{target:34067}))).initialize(i),Object.seal(If(t)),t}return Tf(r,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.mipmaps,r=void 0===n||n,i=t.parameters,o=void 0===i?{}:i;return this.opts=t,this.setCubeMapImageData(t).then((function(){e.loaded=!0,r&&e.generateMipmap(t),e.setParameters(o)})),this}},{key:"subImage",value:function(e){var t=e.face,n=e.data,r=e.x,i=void 0===r?0:r,o=e.y,a=void 0===o?0:o,s=e.mipmapLevel,l=void 0===s?0:s;return this._subImage({target:t,data:n,x:i,y:a,mipmapLevel:l})}},{key:"setCubeMapImageData",value:(t=Ov(Cv.mark((function e(t){var n,r,i,o,a,s,l,u,c,f,h,d,p,v=this;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,r=t.height,i=t.pixels,o=t.data,a=t.border,s=void 0===a?0:a,l=t.format,u=void 0===l?6408:l,c=t.type,f=void 0===c?5121:c,h=this.gl,d=i||o,e.next=5,Promise.all(G_.map((function(e){var t=d[e];return Promise.all(Array.isArray(t)?t:[t])})));case 5:p=e.sent,this.bind(),G_.forEach((function(e,t){p[t].length>1&&!1!==v.opts.mipmaps&&jx.warn("".concat(v.id," has mipmap and multiple LODs."))(),p[t].forEach((function(t,i){n&&r?h.texImage2D(e,i,u,n,r,s,u,f,t):h.texImage2D(e,i,u,u,f,t)}))})),this.unbind();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setImageDataForFace",value:function(e){var t=this,n=e.face,r=e.width,i=e.height,o=e.pixels,a=e.data,s=e.border,l=void 0===s?0:s,u=e.format,c=void 0===u?6408:u,f=e.type,h=void 0===f?5121:f,d=this.gl,p=o||a;return this.bind(),p instanceof Promise?p.then((function(r){return t.setImageDataForFace(Object.assign({},e,{face:n,data:r,pixels:r}))})):this.width||this.height?d.texImage2D(n,0,c,r,i,l,c,h,p):d.texImage2D(n,0,c,c,h,p),this}}]),r}();function q_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}H_.FACES=G_;var $_,X_=function(e){Xb(n,z_);var t=q_(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Np(this,n),Bx(e),i=Object.assign({depth:1},i,{target:32879,unpackFlipY:!1}),(r=t.call(this,e,i)).initialize(i),Object.seal(If(r)),r}return Tf(n,null,[{key:"isSupported",value:function(e){return Fx(e)}}]),Tf(n,[{key:"setImageData",value:function(e){var t=this,n=e.level,r=void 0===n?0:n,i=e.dataFormat,o=void 0===i?6408:i,a=e.width,s=e.height,l=e.depth,u=void 0===l?1:l,c=e.border,f=void 0===c?0:c,h=e.format,d=e.type,p=void 0===d?5121:d,v=e.offset,m=void 0===v?0:v,g=e.data,y=e.parameters,x=void 0===y?{}:y;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Ob(this.gl,x,(function(){ArrayBuffer.isView(g)&&t.gl.texImage3D(t.target,r,o,a,s,u,f,h,p,g),g instanceof A_&&(t.gl.bindBuffer(35052,g.handle),t.gl.texImage3D(t.target,r,o,a,s,u,f,h,p,m))})),g&&g.byteLength)this._trackAllocatedMemory(g.byteLength,"Texture");else{var b=T_[this.dataFormat]||4,_=M_[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*b*_,"Texture")}return this.loaded=!0,this}}]),n}();function Y_(e,t,n){return(Y_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zb(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var Z_="EXT_color_buffer_float",K_=(Qc($_={},33189,{bpp:2}),Qc($_,33190,{gl2:!0,bpp:3}),Qc($_,36012,{gl2:!0,bpp:4}),Qc($_,36168,{bpp:1}),Qc($_,34041,{bpp:4}),Qc($_,35056,{gl2:!0,bpp:4}),Qc($_,36013,{gl2:!0,bpp:5}),Qc($_,32854,{bpp:2}),Qc($_,36194,{bpp:2}),Qc($_,32855,{bpp:2}),Qc($_,33321,{gl2:!0,bpp:1}),Qc($_,33330,{gl2:!0,bpp:1}),Qc($_,33329,{gl2:!0,bpp:1}),Qc($_,33332,{gl2:!0,bpp:2}),Qc($_,33331,{gl2:!0,bpp:2}),Qc($_,33334,{gl2:!0,bpp:4}),Qc($_,33333,{gl2:!0,bpp:4}),Qc($_,33323,{gl2:!0,bpp:2}),Qc($_,33336,{gl2:!0,bpp:2}),Qc($_,33335,{gl2:!0,bpp:2}),Qc($_,33338,{gl2:!0,bpp:4}),Qc($_,33337,{gl2:!0,bpp:4}),Qc($_,33340,{gl2:!0,bpp:8}),Qc($_,33339,{gl2:!0,bpp:8}),Qc($_,32849,{gl2:!0,bpp:3}),Qc($_,32856,{gl2:!0,bpp:4}),Qc($_,32857,{gl2:!0,bpp:4}),Qc($_,36220,{gl2:!0,bpp:4}),Qc($_,36238,{gl2:!0,bpp:4}),Qc($_,36975,{gl2:!0,bpp:4}),Qc($_,36214,{gl2:!0,bpp:8}),Qc($_,36232,{gl2:!0,bpp:8}),Qc($_,36226,{gl2:!0,bpp:16}),Qc($_,36208,{gl2:!0,bpp:16}),Qc($_,33325,{gl2:Z_,bpp:2}),Qc($_,33327,{gl2:Z_,bpp:4}),Qc($_,34842,{gl2:Z_,bpp:8}),Qc($_,33326,{gl2:Z_,bpp:4}),Qc($_,33328,{gl2:Z_,bpp:8}),Qc($_,34836,{gl2:Z_,bpp:16}),Qc($_,35898,{gl2:Z_,bpp:4}),$_);function Q_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}function J_(e,t,n){var r=n[t];if(!r)return!1;var i=Fx(e)&&r.gl2||r.gl1;return"string"==typeof i?e.getExtension(i):i}var ew,tw=function(e){Xb(n,v_);var t=Q_(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Np(this,n),(r=t.call(this,e,i)).initialize(i),Object.seal(If(r)),r}return Tf(n,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null},n=t.format;return!n||J_(e,n,K_)}},{key:"getSamplesForFormat",value:function(e,t){var n=t.format;return e.getInternalformatParameter(36161,n,32937)}}]),Tf(n,[{key:"initialize",value:function(e){var t=e.format,n=e.width,r=void 0===n?1:n,i=e.height,o=void 0===i?1:i,a=e.samples,s=void 0===a?0:a;return t_(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&Fx(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,t,r,o):this.gl.renderbufferStorage(36161,t,r,o),this.format=t,this.width=r,this.height=o,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*K_[this.format].bpp),this}},{key:"resize",value:function(e){var t=e.width,n=e.height;return t!==this.width||n!==this.height?this.initialize({width:t,height:n,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function(e){this.gl.bindRenderbuffer(36161,e)}},{key:"_syncHandle",value:function(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}]),n}();function nw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,r=void 0===n?null:n,i=t.color,o=void 0===i?null:i,a=t.depth,s=void 0===a?null:a,l=t.stencil,u=void 0===l?null:l,c={};r&&(c.framebuffer=r);var f=0;o&&(f|=16384,!0!==o&&(c.clearColor=o)),s&&(f|=256,!0!==s&&(c.clearDepth=s)),u&&(f|=1024,!0!==s&&(c.clearStencil=s)),t_(0!==f,"clear: bad arguments"),Ob(e,c,(function(){e.clear(f)}))}function rw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,r=void 0===n?null:n,i=t.buffer,o=void 0===i?6144:i,a=t.drawBuffer,s=void 0===a?0:a,l=t.value,u=void 0===l?[0,0,0,0]:l;Bx(e),Ob(e,{framebuffer:r},(function(){switch(o){case 6144:switch(u.constructor){case Int32Array:e.clearBufferiv(o,s,u);break;case Uint32Array:e.clearBufferuiv(o,s,u);break;case Float32Array:default:e.clearBufferfv(o,s,u)}break;case 6145:e.clearBufferfv(6145,0,[u]);break;case 6146:e.clearBufferiv(6146,0,[u]);break;case 34041:var t=ob(u,2),n=t[0],r=t[1];e.clearBufferfi(34041,0,n,r);break;default:t_(!1,"clear: bad arguments")}}))}function iw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sourceX,r=void 0===n?0:n,i=t.sourceY,o=void 0===i?0:i,a=t.sourceFormat,s=void 0===a?6408:a,l=t.sourceAttachment,u=void 0===l?36064:l,c=t.target,f=void 0===c?null:c,h=t.sourceWidth,d=t.sourceHeight,p=t.sourceType,v=aw(e),m=v.framebuffer,g=v.deleteFramebuffer;t_(m);var y=m.gl,x=m.handle,b=m.attachments;h=h||m.width,d=d||m.height,36064===u&&null===x&&(u=1028),t_(b[u]),f=sw(f,p=p||b[u].type,s,h,d),p=p||Kb(f);var _=y.bindFramebuffer(36160,x);return y.readPixels(r,o,h,d,s,p,f),y.bindFramebuffer(36160,_||null),g&&m.delete(),f}function ow(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sourceAttachment,r=void 0===n?36064:n,i=t.targetMaxHeight,o=void 0===i?Number.MAX_SAFE_INTEGER:i,a=iw(e,{sourceAttachment:r}),s=e.width,l=e.height;l>o;){var u=e_({data:a,width:s,height:l});a=u.data,s=u.width,l=u.height}Jb({data:a,width:s,height:l});var c=document.createElement("canvas");c.width=s,c.height=l;var f=c.getContext("2d"),h=f.createImageData(s,l);return h.data.set(a),f.putImageData(h,0,0),c.toDataURL()}function aw(e){return e instanceof Fw?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:(t=e,r=t.gl,i=t.width,o=t.height,a=t.id,s=new Fw(r,Object.assign({},n,{id:"framebuffer-for-".concat(a),width:i,height:o,attachments:Qc({},36064,t)})),s),deleteFramebuffer:!0};var t,n,r,i,o,a,s}function sw(e,t,n,r,i){return e||new(Qb(t=t||5121,{clamped:!1}))(r*i*function(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return t_(!1),0}}(n))}var lw="VERTEX_ARRAY_OBJECT",uw="TIMER_QUERY",cw="INSTANCED_RENDERING",fw="MULTIPLE_RENDER_TARGETS",hw="ELEMENT_INDEX_UINT32",dw="BLEND_EQUATION_MINMAX",pw="FLOAT_BLEND",vw="COLOR_ENCODING_SRGB",mw="TEXTURE_DEPTH",gw="TEXTURE_FLOAT",yw="TEXTURE_HALF_FLOAT",xw="TEXTURE_FILTER_LINEAR_FLOAT",bw="TEXTURE_FILTER_LINEAR_HALF_FLOAT",_w="TEXTURE_FILTER_ANISOTROPIC",ww="COLOR_ATTACHMENT_RGBA32F",kw="COLOR_ATTACHMENT_FLOAT",Sw="COLOR_ATTACHMENT_HALF_FLOAT",Ew="GLSL_FRAG_DATA",Pw="GLSL_FRAG_DEPTH",Cw="GLSL_DERIVATIVES",Aw="GLSL_TEXTURE_LOD";var Ow=(Qc(ew={},"WEBGL2",[!1,!0]),Qc(ew,lw,["OES_vertex_array_object",!0]),Qc(ew,uw,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),Qc(ew,cw,["ANGLE_instanced_arrays",!0]),Qc(ew,fw,["WEBGL_draw_buffers",!0]),Qc(ew,hw,["OES_element_index_uint",!0]),Qc(ew,dw,["EXT_blend_minmax",!0]),Qc(ew,pw,["EXT_float_blend"]),Qc(ew,vw,["EXT_sRGB",!0]),Qc(ew,mw,["WEBGL_depth_texture",!0]),Qc(ew,gw,["OES_texture_float",!0]),Qc(ew,yw,["OES_texture_half_float",!0]),Qc(ew,xw,["OES_texture_float_linear"]),Qc(ew,bw,["OES_texture_half_float_linear"]),Qc(ew,_w,["EXT_texture_filter_anisotropic"]),Qc(ew,ww,[function(e){var t=new U_(e,{format:6408,type:5126,dataFormat:6408}),n=new Fw(e,{id:"test-framebuffer",check:!1,attachments:Qc({},36064,t)}),r=n.getStatus();return t.delete(),n.delete(),36053===r},"EXT_color_buffer_float"]),Qc(ew,kw,[!1,"EXT_color_buffer_float"]),Qc(ew,Sw,["EXT_color_buffer_half_float"]),Qc(ew,Ew,["WEBGL_draw_buffers",!0]),Qc(ew,Pw,["EXT_frag_depth",!0]),Qc(ew,Cw,["OES_standard_derivatives",!0]),Qc(ew,Aw,["EXT_shader_texture_lod",!0]),ew);function Tw(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Mw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mw(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Mw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rw(e,t){return Iw(e,t)}function Iw(e,t){return(t=Array.isArray(t)?t:[t]).every((function(t){return Lw(e,t)}))}function Lw(e,t){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},void 0===e.luma.caps[t]&&(e.luma.caps[t]=function(e,t){var n,r=Ow[t];t_(r,t);var i=Fx(e)&&r[1]||r[0];if("function"==typeof i)n=i(e);else if(Array.isArray(i)){n=!0;var o,a=Tw(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;n=n&&Boolean(e.getExtension(s))}}catch(l){a.e(l)}finally{a.f()}}else"string"==typeof i?n=Boolean(e.getExtension(i)):"boolean"==typeof i?n=i:t_(!1);return n}(e,t)),e.luma.caps[t]||jx.log(2,"Feature: ".concat(t," not supported"))(),e.luma.caps[t]}function jw(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Dw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dw(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Dw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var Fw=function(e){Xb(n,v_);var t=Nw(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Np(this,n),(r=t.call(this,e,i)).width=null,r.height=null,r.attachments={},r.readBuffer=36064,r.drawBuffers=[36064],r.ownResources=[],r.initialize(i),Object.seal(If(r)),r}return Tf(n,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){var e=Bx(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){var e=Bx(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.colorBufferFloat,r=t.colorBufferHalfFloat,i=!0;return n&&(i=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(i=i&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),i}},{key:"getDefaultFramebuffer",value:function(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new n(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}}]),Tf(n,[{key:"initialize",value:function(e){var t=e.width,n=void 0===t?1:t,r=e.height,i=void 0===r?1:r,o=e.attachments,a=void 0===o?null:o,s=e.color,l=void 0===s||s,u=e.depth,c=void 0===u||u,f=e.stencil,h=void 0!==f&&f,d=e.check,p=void 0===d||d,v=e.readBuffer,m=void 0===v?void 0:v,g=e.drawBuffers,y=void 0===g?void 0:g;if(t_(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,a)for(var x in a){var b=a[x];(Array.isArray(b)?b[0]:b).resize({width:n,height:i})}else a=this._createDefaultAttachments(l,c,h,n,i);this.update({clearAttachments:!0,attachments:a,readBuffer:m,drawBuffers:y}),a&&p&&this.checkStatus()}},{key:"delete",value:function(){var e,t=jw(this.ownResources);try{for(t.s();!(e=t.n()).done;){e.value.delete()}}catch(r){t.e(r)}finally{t.f()}return Y_(Zb(n.prototype),"delete",this).call(this),this}},{key:"update",value:function(e){var t=e.attachments,n=void 0===t?{}:t,r=e.readBuffer,i=e.drawBuffers,o=e.clearAttachments,a=void 0!==o&&o,s=e.resizeAttachments,l=void 0===s||s;this.attach(n,{clearAttachments:a,resizeAttachments:l});var u=this.gl,c=u.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),u.bindFramebuffer(36160,c||null),this}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height;if(null===this.handle)return t_(void 0===t&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var r in void 0===t&&(t=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),t!==this.width&&n!==this.height&&jx.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(n))(),this.attachments)this.attachments[r].resize({width:t,height:n});return this.width=t,this.height=n,this}},{key:"attach",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.clearAttachments,i=void 0!==r&&r,o=n.resizeAttachments,a=void 0===o||o,s={};i&&Object.keys(this.attachments).forEach((function(e){s[e]=null})),Object.assign(s,e);var l=this.gl.bindFramebuffer(36160,this.handle);for(var u in s){t_(void 0!==u,"Misspelled framebuffer binding point?");var c=Number(u),f=s[c],h=f;if(h)if(h instanceof tw)this._attachRenderbuffer({attachment:c,renderbuffer:h});else if(Array.isArray(f)){var d=ob(f,3),p=d[0],v=d[1],m=void 0===v?0:v,g=d[2],y=void 0===g?0:g;h=p,this._attachTexture({attachment:c,texture:p,layer:m,level:y})}else this._attachTexture({attachment:c,texture:h,layer:0,level:0});else this._unattach(c);a&&h&&h.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,l||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter((function(e){return!t.attachments[e]})).forEach((function(e){delete t.attachments[e]}))}},{key:"checkStatus",value:function(){this.gl;var e=this.getStatus();if(36053!==e)throw new Error(function(e){return(Fw.STATUS||{})[e]||"Framebuffer error ".concat(e)}(e));return this}},{key:"getStatus",value:function(){var e=this.gl,t=e.bindFramebuffer(36160,this.handle),n=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),n}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=e.depth,r=e.stencil,i=e.drawBuffers,o=void 0===i?[]:i,a=this.gl.bindFramebuffer(36160,this.handle);return(t||n||r)&&nw(this.gl,{color:t,depth:n,stencil:r}),o.forEach((function(e,t){rw({drawBuffer:t,value:e})})),this.gl.bindFramebuffer(36160,a||null),this}},{key:"readPixels",value:function(){return jx.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function(){return jx.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function(){return jx.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function(){return jx.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function(){return jx.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function(){return jx.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function(e){var t=e.attachments,n=void 0===t?[]:t,r=e.x,i=void 0===r?0:r,o=e.y,a=void 0===o?0:o,s=e.width,l=e.height,u=Bx(this.gl),c=u.bindFramebuffer(36008,this.handle);return 0===i&&0===a&&void 0===s&&void 0===l?u.invalidateFramebuffer(36008,n):u.invalidateFramebuffer(36008,n,i,a,s,l),u.bindFramebuffer(36008,c),this}},{key:"getAttachmentParameter",value:function(e,t,n){var r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=f_(this.gl,r)),r}},{key:"getAttachmentParameters",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],i={},o=jw(r);try{for(o.s();!(e=o.n()).done;){var a=e.value,s=n?f_(this.gl,a):a;i[s]=this.getAttachmentParameter(t,a,n)}}catch(l){o.e(l)}finally{o.f()}return i}},{key:"getParameters",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.keys(this.attachments),n={},r=0,i=t;r<i.length;r++){var o=i[r],a=Number(o),s=e?f_(this.gl,a):a;n[s]=this.getAttachmentParameters(a,e)}return n}},{key:"show",value:function(){return"undefined"!=typeof window&&window.open(ow(this),"luma-debug-texture"),this}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>jx.level||"undefined"==typeof window)return this;t=t||"Framebuffer ".concat(this.id);var n=ow(this,{targetMaxHeight:100});return jx.image({logLevel:e,message:t,image:n},t)(),this}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?36160:t;return this.gl.bindFramebuffer(n,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?36160:t;return this.gl.bindFramebuffer(n,null),this}},{key:"_createDefaultAttachments",value:function(e,t,n,r,i){var o,a=null;e&&((a=a||{})[36064]=new U_(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:i,mipmaps:!1,parameters:(o={},Qc(o,10241,9729),Qc(o,10240,9729),Qc(o,10242,33071),Qc(o,10243,33071),o)}),this.ownResources.push(a[36064]));return t&&n?((a=a||{})[33306]=new tw(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(a[33306])):t?((a=a||{})[36096]=new tw(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:i}),this.ownResources.push(a[36096])):n&&t_(!1),a}},{key:"_unattach",value:function(e){var t=this.attachments[e];t&&(t instanceof tw?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}},{key:"_attachRenderbuffer",value:function(e){var t=e.attachment,n=void 0===t?36064:t,r=e.renderbuffer;this.gl.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}},{key:"_attachTexture",value:function(e){var t=e.attachment,n=void 0===t?36064:t,r=e.texture,i=e.layer,o=e.level,a=this.gl;switch(a.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:Bx(a).framebufferTextureLayer(36160,n,r.target,o,i);break;case 34067:var s=function(e){return e<34069?e+34069:e}(i);a.framebufferTexture2D(36160,n,s,r.handle,o);break;case 3553:a.framebufferTexture2D(36160,n,3553,r.handle,o);break;default:t_(!1,"Illegal texture type")}a.bindTexture(r.target,null),this.attachments[n]=r}},{key:"_setReadBuffer",value:function(e){var t,n=Fx(t=this.gl)?t:null;n?n.readBuffer(e):t_(36064===e||1029===e,"Multiple render targets not supported"),this.readBuffer=e}},{key:"_setDrawBuffers",value:function(e){var t=this.gl,n=Bx(t);if(n)n.drawBuffers(e);else{var r=t.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):t_(1===e.length&&(36064===e[0]||1029===e[0]),"Multiple render targets not supported")}this.drawBuffers=e}},{key:"_getAttachmentParameterFallback",value:function(e){var t=function(e){for(var t in e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},Ow)void 0===e.luma.caps[t]&&(e.luma.caps[t]=Lw(e,t));return e.luma.caps}(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(e){return this.gl.bindFramebuffer(36160,e)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),n}();function zw(e,t){t_(e instanceof U_||e instanceof H_||e instanceof X_);var n=e.constructor,r=e.gl,i=e.width,o=e.height,a=e.format,s=e.type,l=e.dataFormat,u=e.border,c=e.mipmaps;return new n(r,Object.assign({width:i,height:o,format:a,type:s,dataFormat:l,border:u,mipmaps:c},t))}function Bw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=e.match(n);return r?r[1]:t}Fw.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];function Vw(e,t,n,r){for(var i=e.split(/\r?\n/),o={},a={},s=r||Bw(t)||"(unnamed)",l="".concat(function(e){switch(e){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(s),u=0;u<i.length;u++){var c=i[u];if(!(c.length<=1)){var f=c.split(":"),h=f[0],d=parseInt(f[2],10);if(isNaN(d))throw new Error("GLSL compilation error in ".concat(l,": ").concat(e));"WARNING"!==h?o[d]=c:a[d]=c}}var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",r=e.split(/\r?\n/),i=String(r.length+t-1).length;return r.map((function(e,r){var o=String(r+t),a=o.length;return Ww(o,i-a)+n+e}))}(t);return{shaderName:l,errors:Uw(o,p),warnings:Uw(a,p)}}function Uw(e,t){for(var n="",r=0;r<t.length;r++){var i=t[r];if((e[r+3]||e[r+2]||e[r+1])&&(n+="".concat(i,"\n"),e[r+1])){var o=e[r+1],a=o.split(":",3),s=a[0],l=parseInt(a[1],10)||0,u=o.substring(a.join(":").length+1).trim();n+=Ww("^^^ ".concat(s,": ").concat(u,"\n\n"),l)}}return n}function Ww(e,t){for(var n="",r=0;r<t;++r)n+=" ";return"".concat(n).concat(e)}function Gw(e){var t=100,n=e.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){var r=parseInt(n[1],10);Number.isFinite(r)&&(t=r)}return t}function Hw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var qw,$w,Xw=function(e){Xb(n,v_);var t=Hw(n);function n(e,r){var i;Np(this,n),zx(e),t_("string"==typeof r.source,"Shader: GLSL source code must be a JavaScript string");var o=Bw(r.source,null)||r.id||r_("unnamed ".concat(n.getTypeName(r.shaderType)));return(i=t.call(this,e,{id:o})).shaderType=r.shaderType,i.source=r.source,i.initialize(r),i}return Tf(n,null,[{key:"getTypeName",value:function(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return t_(!1),"unknown"}}}]),Tf(n,[{key:"initialize",value:function(e){var t=e.source,n=Bw(t,null);n&&(this.id=r_(n)),this._compile(t)}},{key:"getParameter",value:function(e){return this.gl.getShaderParameter(this.handle,e)}},{key:"toString",value:function(){return"".concat(n.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return Bw(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}},{key:"_compile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);var t=this.getParameter(35713);if(!t){var n=this.gl.getShaderInfoLog(this.handle),r=Vw(n,this.source,this.shaderType,this.id),i=r.shaderName,o=r.errors,a=r.warnings;throw jx.error("GLSL compilation errors in ".concat(i,"\n").concat(o))(),jx.warn("GLSL compilation warnings in ".concat(i,"\n").concat(a))(),new Error("GLSL compilation errors in ".concat(i))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),n}(),Yw=function(e){Xb(n,Xw);var t=Hw(n);function n(e,r){return Np(this,n),"string"==typeof r&&(r={source:r}),t.call(this,e,Object.assign({},r,{shaderType:35633}))}return Tf(n,[{key:"_createHandle",value:function(){return this.gl.createShader(35633)}}]),n}(),Zw=function(e){Xb(n,Xw);var t=Hw(n);function n(e,r){return Np(this,n),"string"==typeof r&&(r={source:r}),t.call(this,e,Object.assign({},r,{shaderType:35632}))}return Tf(n,[{key:"_createHandle",value:function(){return this.gl.createShader(35632)}}]),n}(),Kw=(Qc(qw={},5126,hk.bind(null,"uniform1fv",rk,1,dk)),Qc(qw,35664,hk.bind(null,"uniform2fv",rk,2,dk)),Qc(qw,35665,hk.bind(null,"uniform3fv",rk,3,dk)),Qc(qw,35666,hk.bind(null,"uniform4fv",rk,4,dk)),Qc(qw,5124,hk.bind(null,"uniform1iv",ik,1,dk)),Qc(qw,35667,hk.bind(null,"uniform2iv",ik,2,dk)),Qc(qw,35668,hk.bind(null,"uniform3iv",ik,3,dk)),Qc(qw,35669,hk.bind(null,"uniform4iv",ik,4,dk)),Qc(qw,35670,hk.bind(null,"uniform1iv",ik,1,dk)),Qc(qw,35671,hk.bind(null,"uniform2iv",ik,2,dk)),Qc(qw,35672,hk.bind(null,"uniform3iv",ik,3,dk)),Qc(qw,35673,hk.bind(null,"uniform4iv",ik,4,dk)),Qc(qw,35674,hk.bind(null,"uniformMatrix2fv",rk,4,pk)),Qc(qw,35675,hk.bind(null,"uniformMatrix3fv",rk,9,pk)),Qc(qw,35676,hk.bind(null,"uniformMatrix4fv",rk,16,pk)),Qc(qw,35678,fk),Qc(qw,35680,fk),Qc(qw,5125,hk.bind(null,"uniform1uiv",ok,1,dk)),Qc(qw,36294,hk.bind(null,"uniform2uiv",ok,2,dk)),Qc(qw,36295,hk.bind(null,"uniform3uiv",ok,3,dk)),Qc(qw,36296,hk.bind(null,"uniform4uiv",ok,4,dk)),Qc(qw,35685,hk.bind(null,"uniformMatrix2x3fv",rk,6,pk)),Qc(qw,35686,hk.bind(null,"uniformMatrix2x4fv",rk,8,pk)),Qc(qw,35687,hk.bind(null,"uniformMatrix3x2fv",rk,6,pk)),Qc(qw,35688,hk.bind(null,"uniformMatrix3x4fv",rk,12,pk)),Qc(qw,35689,hk.bind(null,"uniformMatrix4x2fv",rk,8,pk)),Qc(qw,35690,hk.bind(null,"uniformMatrix4x3fv",rk,12,pk)),Qc(qw,35678,fk),Qc(qw,35680,fk),Qc(qw,35679,fk),Qc(qw,35682,fk),Qc(qw,36289,fk),Qc(qw,36292,fk),Qc(qw,36293,fk),Qc(qw,36298,fk),Qc(qw,36299,fk),Qc(qw,36300,fk),Qc(qw,36303,fk),Qc(qw,36306,fk),Qc(qw,36307,fk),Qc(qw,36308,fk),Qc(qw,36311,fk),qw),Qw={},Jw={},ek={},tk=[0];function nk(e,t,n,r){1===t&&"boolean"==typeof e&&(e=e?1:0),Number.isFinite(e)&&(tk[0]=e,e=tk);var i=e.length;if(i%t&&jx.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof n)return e;var o=r[i];o||(o=new n(i),r[i]=o);for(var a=0;a<i;a++)o[a]=e[a];return o}function rk(e,t){return nk(e,t,Float32Array,Qw)}function ik(e,t){return nk(e,t,Int32Array,Jw)}function ok(e,t){return nk(e,t,Uint32Array,ek)}function ak(e,t,n){var r=Kw[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,e,t)}function sk(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};var t=e.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function lk(e,t,n){for(var r in e){var i=e[r];if((!n||Boolean(n[r]))&&!uk(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(r),i),new Error("".concat(t," Bad uniform ").concat(r))}return!0}function uk(e){return Array.isArray(e)||ArrayBuffer.isView(e)?function(e){if(0===e.length)return!1;for(var t=Math.min(e.length,16),n=0;n<t;++n)if(!Number.isFinite(e[n]))return!1;return!0}(e):!!isFinite(e)||(!0===e||!1===e||(e instanceof z_||(e instanceof tw||e instanceof Fw&&Boolean(e.texture))))}function ck(e,t,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(e[t])for(var r=e[t],i=0,o=n.length;i<o;++i)r[i]=n[i];else e[t]=n.slice();else e[t]=n}function fk(){var e=null;return function(t,n,r){var i=e!==r;return i&&(t.uniform1i(n,r),e=r),i}}function hk(e,t,n,r){var i=null,o=null;return function(a,s,l){var u=t(l,n),c=u.length,f=!1;if(null===i)i=new Float32Array(c),o=c,f=!0;else{t_(o===c,"Uniform length cannot change.");for(var h=0;h<c;++h)if(u[h]!==i[h]){f=!0;break}}return f&&(r(a,e,s,u),i.set(u)),f}}function dk(e,t,n,r){e[t](n,r)}function pk(e,t,n,r){e[t](n,!1,r)}var vk=(Qc($w={},5126,[5126,1,"float"]),Qc($w,35664,[5126,2,"vec2"]),Qc($w,35665,[5126,3,"vec3"]),Qc($w,35666,[5126,4,"vec4"]),Qc($w,5124,[5124,1,"int"]),Qc($w,35667,[5124,2,"ivec2"]),Qc($w,35668,[5124,3,"ivec3"]),Qc($w,35669,[5124,4,"ivec4"]),Qc($w,5125,[5125,1,"uint"]),Qc($w,36294,[5125,2,"uvec2"]),Qc($w,36295,[5125,3,"uvec3"]),Qc($w,36296,[5125,4,"uvec4"]),Qc($w,35670,[5126,1,"bool"]),Qc($w,35671,[5126,2,"bvec2"]),Qc($w,35672,[5126,3,"bvec3"]),Qc($w,35673,[5126,4,"bvec4"]),Qc($w,35674,[5126,8,"mat2"]),Qc($w,35685,[5126,8,"mat2x3"]),Qc($w,35686,[5126,8,"mat2x4"]),Qc($w,35675,[5126,12,"mat3"]),Qc($w,35687,[5126,12,"mat3x2"]),Qc($w,35688,[5126,12,"mat3x4"]),Qc($w,35676,[5126,16,"mat4"]),Qc($w,35689,[5126,16,"mat4x2"]),Qc($w,35690,[5126,16,"mat4x3"]),$w);function mk(e){var t=vk[e];if(!t)return null;var n=ob(t,2);return{type:n[0],components:n[1]}}function gk(e,t){switch(e){case 5120:case 5121:case 5122:case 5123:e=5126}for(var n in vk){var r=ob(vk[n],3),i=r[0],o=r[1],a=r[2];if(i===e&&o===t)return{glType:n,name:a}}return null}var yk=function(){function e(t){Np(this,e),this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}return Tf(e,[{key:"getAttributeInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}},{key:"getAttributeLocation",value:function(e){var t=this.getAttributeInfo(e);return t?t.location:-1}},{key:"getAttributeAccessor",value:function(e){var t=this.getAttributeInfo(e);return t?t.accessor:null}},{key:"getVaryingInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}},{key:"getVaryingIndex",value:function(e){var t=this.getVaryingInfo();return t?t.location:-1}},{key:"getVaryingAccessor",value:function(e){var t=this.getVaryingInfo();return t?t.accessor:null}},{key:"_readAttributesFromProgram",value:function(e){for(var t=e.gl,n=t.getProgramParameter(e.handle,35721),r=0;r<n;r++){var i=t.getActiveAttrib(e.handle,r),o=i.name,a=i.type,s=i.size,l=t.getAttribLocation(e.handle,o);l>=0&&this._addAttribute(l,o,a,s)}this.attributeInfos.sort((function(e,t){return e.location-t.location}))}},{key:"_readVaryingsFromProgram",value:function(e){var t=e.gl;if(Fx(t)){for(var n=t.getProgramParameter(e.handle,35971),r=0;r<n;r++){var i=t.getTransformFeedbackVarying(e.handle,r),o=i.name,a=i.type,s=i.size;this._addVarying(r,o,a,s)}this.varyingInfos.sort((function(e,t){return e.location-t.location}))}}},{key:"_addAttribute",value:function(e,t,n,r){var i=mk(n),o={type:i.type,size:r*i.components};this._inferProperties(e,t,o);var a={location:e,name:t,accessor:new b_(o)};this.attributeInfos.push(a),this.attributeInfosByLocation[e]=a,this.attributeInfosByName[a.name]=a}},{key:"_inferProperties",value:function(e,t,n){/instance/i.test(t)&&(n.divisor=1)}},{key:"_addVarying",value:function(e,t,n,r){var i=mk(n),o=i.type,a=i.components,s={location:e,name:t,accessor:new b_({type:o,size:r*a})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}]),e}();function xk(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return bk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bk(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function bk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var wk=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],kk=function(e){Xb(n,v_);var t=_k(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Np(this,n),(r=t.call(this,e,i)).stubRemovedMethods("Program","v6.0",wk),r._isCached=!1,r.initialize(i),Object.seal(If(r)),r._setId(i.id),r}return Tf(n,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hash,n=e.vs,r=e.fs,i=e.varyings,o=e.bufferMode,a=void 0===o?35981:o;return this.hash=t||"",this.vs="string"==typeof n?new Yw(this.gl,{id:"".concat(e.id,"-vs"),source:n}):n,this.fs="string"==typeof r?new Zw(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,t_(this.vs instanceof Yw),t_(this.fs instanceof Zw),this.uniforms={},this._textureUniforms={},i&&i.length>0&&(Bx(this.gl),this.varyings=i,this.gl2.transformFeedbackVaryings(this.handle,i,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new yk(this),this.setProps(e)}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:Y_(Zb(n.prototype),"delete",this).call(this,e)}},{key:"setProps",value:function(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}},{key:"draw",value:function(e){var t=this,n=e.logPriority,r=e.drawMode,i=void 0===r?4:r,o=e.vertexCount,a=e.offset,s=void 0===a?0:a,l=e.start,u=e.end,c=e.isIndexed,f=void 0!==c&&c,h=e.indexType,d=void 0===h?5123:h,p=e.instanceCount,v=void 0===p?0:p,m=e.isInstanced,g=void 0===m?v>0:m,y=e.vertexArray,x=void 0===y?null:y,b=e.transformFeedback,_=e.framebuffer,w=e.parameters,k=void 0===w?{}:w,S=e.uniforms,E=e.samplers;if((S||E)&&(jx.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(S||{})),jx.priority>=n){var P=_?_.id:"default",C="mode=".concat(f_(this.gl,i)," verts=").concat(o," ")+"instances=".concat(v," indexType=").concat(f_(this.gl,d)," ")+"isInstanced=".concat(g," isIndexed=").concat(f," ")+"Framebuffer=".concat(P);jx.log(n,C)()}return t_(x),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===o||g&&0===v)&&(x.bindForDraw(o,v,(function(){if(void 0!==_&&(k=Object.assign({},k,{framebuffer:_})),b){var e=function(e){switch(e){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return t_(!1),0}}(i);b.begin(e)}t._bindTextures(),Ob(t.gl,k,(function(){f&&g?t.gl2.drawElementsInstanced(i,o,d,s,v):f&&Fx(t.gl)&&!isNaN(l)&&!isNaN(u)?t.gl2.drawRangeElements(i,l,u,o,d,s):f?t.gl.drawElements(i,o,d,s):g?t.gl2.drawArraysInstanced(i,s,o,v):t.gl.drawArrays(i,s,o)})),b&&b.end()})),!0)}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in jx.priority>=2&&lk(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle),e){var n=e[t],r=this._uniformSetters[t];if(r){var i=n,o=!1;if(i instanceof Fw&&(i=i.texture),i instanceof z_)if(o=this.uniforms[t]!==n){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);var a=i,s=r.textureIndex;a.bind(s),i=s,this._textureUniforms[t]=a}else i=r.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(r(i)||o)&&ck(this.uniforms,t,n)}}return this}},{key:"_areTexturesRenderable",value:function(){var e=!0;for(var t in this._textureUniforms){var n=this._textureUniforms[t];n.update(),e=e&&n.loaded}return e}},{key:"_bindTextures",value:function(){for(var e in this._textureUniforms){var t=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(t)}}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(e){var t,n={},r=xk(this.gl.getAttachedShaders(e));try{for(r.s();!(t=r.n()).done;){var i=t.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new Yw({handle:i});break;case 35632:n.fs=new Zw({handle:i})}}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"_getParameter",value:function(e){return this.gl.getProgramParameter(this.handle,e)}},{key:"_setId",value:function(e){if(!e){var t=this._getName();this.id=r_(t)}}},{key:"_getName",value:function(){var e=this.vs.getName()||this.fs.getName();return e=(e=e.replace(/shader/i,""))?"".concat(e,"-program"):"program"}},{key:"_compileAndLink",value:function(){var e=this.gl;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),jx.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),jx.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||jx.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var e=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var t=0;t<this._uniformCount;t++){var n=this.gl.getActiveUniform(this.handle,t),r=sk(n.name).name,i=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=ak(e,i,n),n.size>1)for(var o=0;o<n.size;o++)i=e.getUniformLocation(this.handle,"".concat(r,"[").concat(o,"]")),this._uniformSetters["".concat(r,"[").concat(o,"]")]=ak(e,i,n)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}},{key:"getUniformBlockIndex",value:function(e){return this.gl2.getUniformBlockIndex(this.handle,e)}},{key:"getActiveUniformBlockParameter",value:function(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}},{key:"uniformBlockBinding",value:function(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}]),n}();function Sk(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ek(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ek(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ek(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var Ck=function(e){Xb(n,v_);var t=Pk(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Np(this,n),(r=t.call(this,e,i)).target=null,r._queryPending=!1,r._pollingPromise=null,Object.seal(If(r)),r}return Tf(n,null,[{key:"isSupported",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Fx(e),i=Iw(e,uw),o=r||i,a=Sk(n);try{for(a.s();!(t=a.n()).done;){var s=t.value;switch(s){case"queries":o=o&&r;break;case"timers":o=o&&i;break;default:t_(!1)}}}catch(l){a.e(l)}finally{a.f()}return o}}]),Tf(n,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.conservative,n=void 0!==t&&t;return this.begin(n?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(35976)}},{key:"begin",value:function(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}},{key:"end",value:function(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}},{key:"isResultAvailable",value:function(){if(!this._queryPending)return!1;var e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}},{key:"isTimerDisjoint",value:function(){return this.gl2.getParameter(36795)}},{key:"getResult",value:function(){return this.gl2.getQueryParameter(this.handle,34918)}},{key:"getTimerMilliseconds",value:function(){return this.getResult()/1e6}},{key:"createPoll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;var n=0;return this._pollingPromise=new Promise((function(r,i){requestAnimationFrame((function o(){e.isResultAvailable()?(r(e.getResult()),e._pollingPromise=null):n++>t?(i("Timed out"),e._pollingPromise=null):requestAnimationFrame(o)}))})),this._pollingPromise}},{key:"_createHandle",value:function(){return n.isSupported(this.gl)?this.gl2.createQuery():null}},{key:"_deleteHandle",value:function(){this.gl2.deleteQuery(this.handle)}}]),n}();function Ak(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var Ok=function(e){Xb(n,v_);var t=Ak(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Np(this,n),Bx(e),(r=t.call(this,e,i)).initialize(i),r.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(If(r)),r}return Tf(n,null,[{key:"isSupported",value:function(e){return Fx(e)}}]),Tf(n,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,o_(this.buffers)||this.bind((function(){return e._unbindBuffers()})),this.setProps(t),this}},{key:"setProps",value:function(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}},{key:"setBuffers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((function(){for(var n in t)e.setBuffer(n,t[n])})),this}},{key:"setBuffer",value:function(e,t){var n=this,r=this._getVaryingIndex(e),i=this._getBufferParams(t),o=i.buffer,a=i.byteSize,s=i.byteOffset;return r<0?(this.unused[e]=o,jx.warn((function(){return"".concat(n.id," unused varying buffer ").concat(e)}))(),this):(this.buffers[r]=t,this.bindOnUse||this._bindBuffer(r,o,s,a),this)}},{key:"begin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(e){var t,n,r;return e instanceof A_==!1?(r=e.buffer,n=e.byteSize,t=e.byteOffset):r=e,void 0===t&&void 0===n||(t=t||0,n=n||r.byteLength-t),{buffer:r,byteOffset:t,byteSize:n}}},{key:"_getVaryingInfo",value:function(e){return this.configuration&&this.configuration.getVaryingInfo(e)}},{key:"_getVaryingIndex",value:function(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;var t=Number(e);return Number.isFinite(t)?t:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers){var t=this._getBufferParams(this.buffers[e]),n=t.buffer,r=t.byteSize,i=t.byteOffset;this._bindBuffer(e,n,i,r)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers)this._bindBuffer(e,null)}},{key:"_bindBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=t&&t.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,e,i,n,r):this.gl.bindBufferBase(35982,e,i),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(e){this.gl.bindTransformFeedback(36386,this.handle)}}]),n}(),Tk=null;function Mk(e,t){var n;return new e((n=e.BYTES_PER_ELEMENT*t,(!Tk||Tk.byteLength<n)&&(Tk=new ArrayBuffer(n)),Tk),0,t)}function Rk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var Ik="elements must be GL.ELEMENT_ARRAY_BUFFER",Lk=function(e){Xb(n,v_);var t=Rk(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Np(this,n);var o=i.id||i.program&&i.program.id;return(r=t.call(this,e,Object.assign({},i,{id:o}))).buffer=null,r.bufferValue=null,r.isDefaultArray=i.isDefaultArray||!1,r.gl2=e,r.initialize(i),Object.seal(If(r)),r}return Tf(n,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!t.constantAttributeZero||(Fx(e)||"Chrome"===Ax())}},{key:"getDefaultArray",value:function(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new n(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(e){return n.MAX_ATTRIBUTES=n.MAX_ATTRIBUTES||e.getParameter(34921),n.MAX_ATTRIBUTES}},{key:"setConstant",value:function(e,t,r){switch(r.constructor){case Float32Array:n._setConstantFloatArray(e,t,r);break;case Int32Array:n._setConstantIntArray(e,t,r);break;case Uint32Array:n._setConstantUintArray(e,t,r);break;default:t_(!1)}}}]),Tf(n,[{key:"delete",value:function(){return Y_(Zb(n.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete(),this}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(e)}},{key:"setProps",value:function(e){return this}},{key:"setElementBuffer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t_(!t||34963===t.target,Ik),this.bind((function(){e.gl.bindBuffer(34963,t?t.handle:null)})),this}},{key:"setBuffer",value:function(e,t,n){if(34963===t.target)return this.setElementBuffer(t,n);var r=n.size,i=n.type,o=n.stride,a=n.offset,s=n.normalized,l=n.integer,u=n.divisor,c=this.gl,f=this.gl2;return e=Number(e),this.bind((function(){c.bindBuffer(34962,t.handle),l?(t_(Fx(c)),f.vertexAttribIPointer(e,r,i,o,a)):c.vertexAttribPointer(e,r,i,s,o,a),c.enableVertexAttribArray(e),f.vertexAttribDivisor(e,u||0)})),this}},{key:"enable",value:function(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!r&&0===e&&!n.isSupported(this.gl,{constantAttributeZero:!0});return i||(e=Number(e),this.bind((function(){return r?t.gl.enableVertexAttribArray(e):t.gl.disableVertexAttribArray(e)}))),this}},{key:"getConstantBuffer",value:function(e,t){var n=this._normalizeConstantArrayValue(t),r=n.byteLength*e,i=n.length*e,o=!this.buffer;if(this.buffer=this.buffer||new A_(this.gl,r),o=(o=o||this.buffer.reallocate(r))||!this._compareConstantArrayValues(n,this.bufferValue)){var a=Mk(t.constructor,i);!function(e){for(var t=e.target,n=e.source,r=e.start,i=void 0===r?0:r,o=e.count,a=void 0===o?1:o,s=n.length,l=a*s,u=0,c=i;u<s;u++)t[c++]=n[u];for(;u<l;)u<l-u?(t.copyWithin(i+u,i,i+u),u*=2):(t.copyWithin(i+u,i,i+l-u),u=l)}({target:a,source:n,start:0,count:i}),this.buffer.subData(a),this.bufferValue=t}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(e){return Array.isArray(e)?new Float32Array(e):e}},{key:"_compareConstantArrayValues",value:function(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}},{key:"_createHandle",value:function(){return this.gl.createVertexArray()}},{key:"_deleteHandle",value:function(e){return this.gl2.deleteVertexArray(e),[this.elements]}},{key:"_bindHandle",value:function(e){this.gl2.bindVertexArray(e)}},{key:"_getParameter",value:function(e,t){var n=this,r=t.location;return t_(Number.isFinite(r)),this.bind((function(){switch(e){case 34373:return n.gl.getVertexAttribOffset(r,e);default:return n.gl.getVertexAttrib(r,e)}}))}},{key:"MAX_ATTRIBUTES",get:function(){return n.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function(e,t,n){switch(n.length){case 1:e.vertexAttrib1fv(t,n);break;case 2:e.vertexAttrib2fv(t,n);break;case 3:e.vertexAttrib3fv(t,n);break;case 4:e.vertexAttrib4fv(t,n);break;default:t_(!1)}}},{key:"_setConstantIntArray",value:function(e,t,n){switch(t_(Fx(e)),n.length){case 1:e.vertexAttribI1iv(t,n);break;case 2:e.vertexAttribI2iv(t,n);break;case 3:e.vertexAttribI3iv(t,n);break;case 4:e.vertexAttribI4iv(t,n);break;default:t_(!1)}}},{key:"_setConstantUintArray",value:function(e,t,n){switch(t_(Fx(e)),n.length){case 1:e.vertexAttribI1uiv(t,n);break;case 2:e.vertexAttribI2uiv(t,n);break;case 3:e.vertexAttribI3uiv(t,n);break;case 4:e.vertexAttribI4uiv(t,n);break;default:t_(!1)}}}]),n}(),jk=/^(.+)__LOCATION_([0-9]+)$/,Dk=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],Nk=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Np(this,e);var r=n.id||n.program&&n.program.id;this.id=r,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Lk(t),l_(this,"VertexArray","v6.0",Dk),this.initialize(n),Object.seal(this)}return Tf(e,[{key:"delete",value:function(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}},{key:"reset",value:function(){this.elements=null,this.elementsAccessor=null;var e=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}},{key:"setAttributes",value:function(e){var t=this;return Object.assign(this.attributes,e),this.vertexArrayObject.bind((function(){for(var n in e){var r=e[n];t._setAttribute(n,r)}t.gl.bindBuffer(34962,null)})),this}},{key:"setElementBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}},{key:"setBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t,n);var r=this._resolveLocationAndAccessor(e,t,t.accessor,n),i=r.location,o=r.accessor;return i>=0&&(this.values[i]=t,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,t,o)),this}},{key:"setConstant",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},n)),i=r.location,o=r.accessor;return i>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[i]=t,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}},{key:"unbindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind((function(){e.elements&&e.vertexArrayObject.setElementBuffer(null),e.buffer=e.buffer||new A_(e.gl,{accessor:{size:4}});for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++)e.values[t]instanceof A_&&(e.gl.disableVertexAttribArray(t),e.gl.bindBuffer(34962,e.buffer.handle),e.gl.vertexAttribPointer(t,1,5126,!1,0,0))})),this}},{key:"bindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind((function(){e.elements&&e.setElementBuffer(e.elements);for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++){var n=e.values[t];n instanceof A_&&e.setBuffer(t,n)}})),this}},{key:"bindForDraw",value:function(e,t,n){var r,i=this;return this.vertexArrayObject.bind((function(){i._setConstantAttributes(e,t),r=n()})),r}},{key:"_resolveLocationAndAccessor",value:function(e,t,n,r){var i=this,o={location:-1,accessor:null},a=this._getAttributeIndex(e),s=a.location,l=a.name;if(!Number.isFinite(s)||s<0)return this.unused[e]=t,jx.once(3,(function(){return"unused value ".concat(e," in ").concat(i.id)}))(),o;var u=this._getAttributeInfo(l||s);if(!u)return o;var c=this.accessors[s]||{},f=b_.resolve(u.accessor,c,n,r),h=f.size,d=f.type;return t_(Number.isFinite(h)&&Number.isFinite(d)),{location:s,accessor:f}}},{key:"_getAttributeInfo",value:function(e){return this.configuration&&this.configuration.getAttributeInfo(e)}},{key:"_getAttributeIndex",value:function(e){var t=Number(e);if(Number.isFinite(t))return{location:t};var n=jk.exec(e),r=n?n[1]:e,i=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}},{key:"_setAttribute",value:function(e,t){if(t instanceof A_)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof A_){var n=t[0],r=t[1];this.setBuffer(e,n,r)}else if(ArrayBuffer.isView(t)||Array.isArray(t)){var i=t;this.setConstant(e,i)}else{if(!(t.buffer instanceof A_))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");var o=t;this.setBuffer(e,o.buffer,o)}}},{key:"_setConstantAttributes",value:function(e,t){var n=Math.max(0|e,0|t),r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}},{key:"_setConstantAttributeZero",value:function(e,t){if(Lk.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,e);else{var n=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(e,t){Lk.setConstant(this.gl,e,t)}},{key:"_updateDrawParams",value:function(){for(var e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}},{key:"_updateDrawParamsForLocation",value:function(e,t){var n=this.values[t],r=this.accessors[t];if(n){var i=r.divisor>0;if(e.isInstanced=e.isInstanced||i,n instanceof A_){var o=n;if(i){var a=o.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,a)}else{var s=o.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,s)}}}}},{key:"setElements",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return jx.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}]),e}();function Fk(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return zk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zk(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function zk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bk(e){var t=e.header,n=void 0===t?"Uniforms":t,r=e.program,i=e.uniforms,o=e.undefinedOnly,a=void 0!==o&&o;t_(r);var s,l=".*Matrix",u=r._uniformSetters,c={},f=Object.keys(u).sort(),h=0,d=Fk(f);try{for(d.s();!(s=d.n()).done;){var p=s.value;p.match(".*_.*")||p.match(l)||Vk({table:c,header:n,uniforms:i,uniformName:p,undefinedOnly:a})&&h++}}catch(E){d.e(E)}finally{d.f()}var v,m=Fk(f);try{for(m.s();!(v=m.n()).done;){var g=v.value;g.match(l)&&Vk({table:c,header:n,uniforms:i,uniformName:g,undefinedOnly:a})&&h++}}catch(E){m.e(E)}finally{m.f()}var y,x=Fk(f);try{for(x.s();!(y=x.n()).done;){var b=y.value;c[b]||Vk({table:c,header:n,uniforms:i,uniformName:b,undefinedOnly:a})&&h++}}catch(E){x.e(E)}finally{x.f()}var _=0,w={};if(!a)for(var k in i){var S=i[k];c[k]||(_++,w[k]=Qc({Type:"NOT USED: ".concat(S)},n,s_(S)))}return{table:c,count:h,unusedTable:w,unusedCount:_}}function Vk(e){var t,n=e.table,r=e.header,i=e.uniforms,o=e.uniformName,a=e.undefinedOnly,s=i[o],l=function(e){return null!=e}(s);return(!a||!l)&&(n[o]=(Qc(t={},r,l?s_(s):"N/A"),Qc(t,"Uniform Type",l?s:"NOT PROVIDED"),t),!0)}function Uk(e,t,n,r){var i,o,a=e.gl;if(!t)return Qc(o={},r,"null"),Qc(o,"Format ","N/A"),o;var s,l,u,c="NOT PROVIDED",f=1,h=0,d=0;if(n&&(c=n.type,f=n.size,s=-1!==(c=String(c).replace("Array","")).indexOf("nt")),t instanceof A_){var p,v,m=t,g=m.getDebugData(),y=g.data;if(l=g.changed?"*":"",u=y,h=(d=m.byteLength)/y.BYTES_PER_ELEMENT/f,n){var x=n.divisor>0;v="".concat(x?"I ":"P "," ").concat(h," (x").concat(f,"=").concat(d," bytes ").concat(f_(a,c),")")}else s=!0,v="".concat(d," bytes");return Qc(p={},r,"".concat(l).concat(s_(u,{size:f,isInteger:s}))),Qc(p,"Format ",v),p}return u=t,f=t.length,s=-1!==(c=String(t.constructor.name).replace("Array","")).indexOf("nt"),Qc(i={},r,"".concat(s_(u,{size:f,isInteger:s})," (constant)")),Qc(i,"Format ","".concat(f,"x").concat(c," (constant)")),i}function Wk(e,t){var n=gk(t.type,t.size);return n?"".concat(e," (").concat(n.name,")"):e}function Gk(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Hk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hk(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Hk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qk(e){var t=e.accessor,n=gk(t.type,t.size);return n?"".concat(n.name," ").concat(e.name):e.name}var $k=ex.isBrowser()&&"undefined"!=typeof document,Xk=0,Yk=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Np(this,e);var n=t.onCreateContext,r=void 0===n?function(e){return zb(e)}:n,i=t.onAddHTML,o=void 0===i?null:i,a=t.onInitialize,s=void 0===a?function(){}:a,l=t.onRender,u=void 0===l?function(){}:l,c=t.onFinalize,f=void 0===c?function(){}:c,h=t.onError,d=t.gl,p=void 0===d?null:d,v=t.glOptions,m=void 0===v?{}:v,g=t.debug,y=void 0!==g&&g,x=t.createFramebuffer,b=void 0!==x&&x,_=t.autoResizeViewport,w=void 0===_||_,k=t.autoResizeDrawingBuffer,S=void 0===k||k,E=t.stats,P=void 0===E?qb.get("animation-loop-".concat(Xk++)):E,C=t.useDevicePixels,A=void 0===C||C;"useDevicePixelRatio"in t&&(jx.deprecated("useDevicePixelRatio","useDevicePixels")(),A=t.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:o,onInitialize:s,onRender:u,onFinalize:f,onError:h,gl:p,glOptions:m,debug:y,createFramebuffer:b},this.gl=p,this.needsRedraw=null,this.timeline=null,this.stats=P,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:w,autoResizeDrawingBuffer:S,useDevicePixels:A}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}var t;return Tf(e,[{key:"delete",value:function(){this.stop(),this._setDisplay(null)}},{key:"setNeedsRedraw",value:function(e){return t_("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}},{key:"setProps",value:function(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;var n=this._getPageLoadPromise().then((function(){return!e._running||e._initialized?null:(e._createWebGLContext(t),e._createFramebuffer(),e._startEventHandling(),e._initializeCallbackData(),e._updateCallbackData(),e._resizeCanvasDrawingBuffer(),e._resizeViewport(),e._gpuTimeQuery=Ck.isSupported(e.gl,["timers"])?new Ck(e.gl):null,e._initialized=!0,e.onInitialize(e.animationProps))})).then((function(t){e._running&&(e._addCallbackData(t||{}),!1!==t&&e._startLoop())}));return this.props.onError&&n.catch(this.props.onError),this}},{key:"redraw",value:function(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}},{key:"stop",value:function(){return this._running&&(this._finalizeCallbackData(),$b(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}},{key:"attachTimeline",value:function(e){return this.timeline=e,this.timeline}},{key:"detachTimeline",value:function(){this.timeline=null}},{key:"waitForRender",value:function(){var e=this;return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((function(t){e._resolveNextFrame=t}))),this._nextFramePromise}},{key:"toDataURL",value:(t=Ov(Cv.mark((function e(){return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setNeedsRedraw("toDataURL"),e.next=3,this.waitForRender();case 3:return e.abrupt("return",this.gl.canvas.toDataURL());case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"isContextLost",value:function(){return this.gl.isContextLost()}},{key:"onCreateContext",value:function(){var e;return(e=this.props).onCreateContext.apply(e,arguments)}},{key:"onInitialize",value:function(){var e;return(e=this.props).onInitialize.apply(e,arguments)}},{key:"onRender",value:function(){var e;return(e=this.props).onRender.apply(e,arguments)}},{key:"onFinalize",value:function(){var e;return(e=this.props).onFinalize.apply(e,arguments)}},{key:"getHTMLControlValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.getElementById(e);return n?Number(n.value):t}},{key:"setViewParameters",value:function(){return jx.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function(){var e=this;$b(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame((function t(){e._running&&(e.redraw(),e._animationFrameId=e._requestAnimationFrame(t))}))}},{key:"_getPageLoadPromise",value:function(){return this._pageLoadPromise||(this._pageLoadPromise=$k?new Promise((function(e,t){$k&&"complete"===document.readyState?e(document):window.addEventListener("load",(function(){e(document)}))})):Promise.resolve({})),this._pageLoadPromise}},{key:"_setDisplay",value:function(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}},{key:"_requestAnimationFrame",value:function(e){var t;this.display&&this.display.requestAnimationFrame(e)||(t=e,"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60))}},{key:"_renderFrame",value:function(){var e;this.display?(e=this.display)._renderFrame.apply(e,arguments):this.onRender.apply(this,arguments)}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var e=this._getSizeAndAspect(),t=e.width,n=e.height,r=e.aspect;t===this.animationProps.width&&n===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(e){"object"===Hc(e)&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}},{key:"_createWebGLContext",value:function(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?Bb(this.props.gl,e):this.onCreateContext(e),!Nx(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Cb(this.gl,ab),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";var t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);var n=this.props.onAddHTML(t);n&&(t.innerHTML=n)}}},{key:"_getSizeAndAspect",value:function(){var e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight,n=1,r=this.gl.canvas;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:e>0&&t>0&&(n=e/t),{width:e,height:t,aspect:n}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.canvas){Hb(e,Rb(t.useDevicePixels),t)}else{var n=e.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in t&&"height"in t&&n.resize(t.width,t.height)}}(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new Fw(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_beginTimers",value:function(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}},{key:"_endTimers",value:function(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}},{key:"_startEventHandling",value:function(){var e=this.gl.canvas;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}},{key:"_onMousemove",value:function(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}},{key:"_onMouseleave",value:function(e){this.animationProps._mousePosition=null}}]),e}();function Zk(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}var Kk={number:{validate:function(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},array:{validate:function(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function Qk(e){var t=Jk(e);return"object"===t?e?"type"in e?Object.assign({},e,Kk[e.type]):"value"in e?(t=Jk(e.value),Object.assign({type:t},e,Kk[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},Kk[t])}function Jk(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":Hc(e)}var eS=function(){function e(t){var n=t.name,r=t.vs,i=t.fs,o=t.dependencies,a=void 0===o?[]:o,s=t.uniforms,l=t.getUniforms,u=t.deprecations,c=void 0===u?[]:u,f=t.defines,h=void 0===f?{}:f,d=t.inject,p=void 0===d?{}:d,v=t.vertexShader,m=t.fragmentShader;Np(this,e),Zk("string"==typeof n),this.name=n,this.vs=r||v,this.fs=i||m,this.getModuleUniforms=l,this.dependencies=a,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=h,this.injections=function(e){var t={vs:{},fs:{}};for(var n in e){var r=e[n];"string"==typeof r&&(r={order:0,injection:r}),t[n.slice(0,2)][n]=r}return t}(p),s&&(this.uniforms=function(e){var t={};for(var n in e){var r=Qk(e[n]);t[n]=r}return t}(s))}return Tf(e,[{key:"getModuleSource",value:function(e){var t;switch(e){case"vs":t=this.vs||"";break;case"fs":t=this.fs||"";break;default:Zk(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(t,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}},{key:"getDefines",value:function(){return this.defines}},{key:"checkDeprecations",value:function(e,t){this.deprecations.forEach((function(n){n.regex.test(e)&&(n.deprecated?t.deprecated(n.old,n.new)():t.removed(n.old,n.new)())}))}},{key:"_parseDeprecationDefinitions",value:function(e){return e.forEach((function(e){switch(e.type){case"function":e.regex=new RegExp("\\b".concat(e.old,"\\("));break;default:e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))}})),e}},{key:"_defaultGetUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=this.uniforms;for(var r in n){var i=n[r];r in e&&!i.private?(i.validate&&Zk(i.validate(e[r],i),"".concat(this.name,": invalid ").concat(r)),t[r]=e[r]):t[r]=i.value}return t}}]),e}();function tS(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return nS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nS(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function nS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rS(e){return function(e){var t={},n={};return iS({modules:e,level:0,moduleMap:t,moduleDepth:n}),Object.keys(n).sort((function(e,t){return n[t]-n[e]})).map((function(e){return t[e]}))}(oS(e))}function iS(e){var t=e.modules,n=e.level,r=e.moduleMap,i=e.moduleDepth;if(n>=5)throw new Error("Possible loop in shader dependency graph");var o,a=tS(t);try{for(a.s();!(o=a.n()).done;){var s=o.value;r[s.name]=s,(void 0===i[s.name]||i[s.name]<n)&&(i[s.name]=n)}}catch(f){a.e(f)}finally{a.f()}var l,u=tS(t);try{for(u.s();!(l=u.n()).done;){var c=l.value;c.dependencies&&iS({modules:c.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}}catch(f){u.e(f)}finally{u.f()}}function oS(e,t){return e.map((function(e){return e instanceof eS||(Zk("string"!=typeof e,"Shader module use by name is deprecated. Import shader module '".concat(e,"' and use it directly.")),Zk(e.name,"shader module has no name"),(e=new eS(e)).dependencies=oS(e.dependencies)),e}))}function aS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="undefined"!=typeof window&&window.navigator||{},n=e.userAgent||t.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}var sS={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},lS={};Object.keys(sS).forEach((function(e){lS[e]=e}));var uS={};function cS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=sS[t];if(Zk(r,t),!aS(n))return!0;if(t in uS)return uS[t];var i=r[0],o=n.behavior||"enable",a="#extension GL_".concat(i," : ").concat(o,"\nvoid main(void) {}"),s=e.createShader(35633);e.shaderSource(s,a),e.compileShader(s);var l=e.getShaderParameter(s,35713);return e.deleteShader(s),uS[t]=l,l}function fS(e,t){var n=sS[t];Zk(n,t);var r=function(e){return Boolean(e&&2===e._version)}(e)&&n[1]||n[0],i="string"==typeof r?Boolean(e.getExtension(r)):r;return Zk(!1===i||!0===i),i}function hS(e,t){return(t=Array.isArray(t)?t:[t]).every((function(t){return fS(e,t)}))}var dS,pS=(Qc(dS={},"vs","#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n"),Qc(dS,"fs","#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"),dS),vS=/void\s+main\s*\([^)]*\)\s*\{\n?/,mS=/}\n?[^{}]*$/,gS=[];function yS(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i="vs"===t,o=function(t){var r=n[t];r.sort((function(e,t){return e.order-t.order})),gS.length=r.length;for(var o=0,a=r.length;o<a;++o)gS[o]=r[o].injection;var s="".concat(gS.join("\n"),"\n");switch(t){case"vs:#decl":i&&(e=e.replace("__LUMA_INJECT_DECLARATIONS__",s));break;case"vs:#main-start":i&&(e=e.replace(vS,(function(e){return e+s})));break;case"vs:#main-end":i&&(e=e.replace(mS,(function(e){return s+e})));break;case"fs:#decl":i||(e=e.replace("__LUMA_INJECT_DECLARATIONS__",s));break;case"fs:#main-start":i||(e=e.replace(vS,(function(e){return e+s})));break;case"fs:#main-end":i||(e=e.replace(mS,(function(e){return s+e})));break;default:e=e.replace(t,(function(e){return e+s}))}};for(var a in n)o(a);return e=e.replace("__LUMA_INJECT_DECLARATIONS__",""),r&&(e=e.replace(/\}\s*$/,(function(e){return e+pS[t]}))),e}function xS(e){var t={};return Zk(Array.isArray(e)&&e.length>1),e.forEach((function(e){for(var n in e)t[n]=t[n]?"".concat(t[n],"\n").concat(e[n]):e[n]})),t}function bS(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _S(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wS,kS=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],SS=[].concat(kS,[[/^[ \t]*attribute[ \t]+(.+;)/gm,"in $1"],[/^[ \t]*varying[ \t]+(.+;)/gm,"out $1"]]),ES=[].concat(kS,[[/^[ \t]*varying[ \t]+(.+;)/gm,"in $1"]]),PS=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],CS=[].concat(PS,[[/^[ \t]*in[ \t]+(.+;)/gm,"attribute $1"],[/^[ \t]*out[ \t]+(.+;)/gm,"varying $1"]]),AS=[].concat(PS,[[/^[ \t]*in[ \t]+/gm,"varying "]]),OS=/^[ \t]*out[ \t]+vec4[ \t]+(\w+)[ \t]*;\s+/m;function TS(e,t,n){switch(t){case 300:return MS(e,n?SS:ES);case 100:return n?MS(e,CS):function(e){var t=(e=MS(e,AS)).match(OS);if(t){var n=t[1];e=e.replace(OS,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),"gl_FragColor")}return e}(e);default:throw new Error("unknown GLSL version ".concat(t))}}function MS(e,t){var n,r=bS(t);try{for(r.s();!(n=r.n()).done;){var i=ob(n.value,2),o=i[0],a=i[1];e=e.replace(o,a)}}catch(s){r.e(s)}finally{r.f()}return e}function RS(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return IS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IS(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function IS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var LS="\n\n".concat("__LUMA_INJECT_DECLARATIONS__","\n\n"),jS=(Qc(wS={},"vs","vertex"),Qc(wS,"fs","fragment"),wS);function DS(e,t){var n=t.vs,r=t.fs,i=rS(t.modules||[]);return{gl:e,vs:NS(e,Object.assign({},t,{source:n,type:"vs",modules:i})),fs:NS(e,Object.assign({},t,{source:r,type:"fs",modules:i})),getUniforms:FS(i)}}function NS(e,t){var n=t.id,r=t.source,i=t.type,o=t.modules,a=t.defines,s=void 0===a?{}:a,l=t.hookFunctions,u=void 0===l?[]:l,c=t.inject,f=void 0===c?{}:c,h=t.transpileToGLSL100,d=void 0!==h&&h,p=t.prologue,v=void 0===p||p,m=t.log;Zk("string"==typeof r,"shader source must be a string");var g="vs"===i,y=r.split("\n"),x=100,b="",_=r;0===y[0].indexOf("#version ")?(x=300,b=y[0],_=y.slice(1).join("\n")):b="#version ".concat(x);var w={};o.forEach((function(e){Object.assign(w,e.getDefines())})),Object.assign(w,s);var k=v?"".concat(b,"\n").concat(function(e){var t=e.id,n=e.source,r=e.type;return t&&"string"==typeof t&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(t,"_").concat(jS[r],"\n\n"):""}({id:n,source:r,type:i}),"\n").concat(function(e){var t=e.type;return"\n#define SHADER_TYPE_".concat(jS[t].toUpperCase(),"\n")}({type:i}),"\n").concat(function(e){switch(function(e){var t=e.getExtension("WEBGL_debug_renderer_info"),n=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||7936),r=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||7937);return{gpuVendor:function(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(n,r),vendor:n,renderer:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}(e).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(e),"\n").concat(function(e,t,n){var r="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return hS(e,lS.GLSL_FRAG_DEPTH)&&(r+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),hS(e,lS.GLSL_DERIVATIVES)&&cS(e,lS.GLSL_DERIVATIVES)&&(r+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),hS(e,lS.GLSL_FRAG_DATA)&&cS(e,lS.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),hS(e,lS.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),r}(e),"\n").concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n="";for(var r in e){0===t&&(n+="\n// APPLICATION DEFINES\n"),t++;var i=e[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(e[r],"\n"))}0===t&&(n+="\n");return n}(w),"\n").concat(g?"":"precision highp float;\n\n","\n"):"".concat(b,"\n"),S=function(e){var t={vs:{},fs:{}};return e.forEach((function(e){var n;"string"!=typeof e?e=(n=e).hook:n={};var r=ob((e=e.trim()).split(":"),2),i=r[0],o=r[1],a=e.replace(/\(.+/,"");t[i][a]=Object.assign(n,{signature:o})})),t}(u),E={},P={},C={};for(var A in f){var O="string"==typeof f[A]?{injection:f[A],order:0}:f[A],T=A.match(/^(v|f)s:(#)?([\w-]+)$/);if(T){var M=T[2],R=T[3];M?"decl"===R?P[A]=[O]:C[A]=[O]:E[A]=[O]}else C[A]=[O]}var I,L=RS(o);try{for(L.s();!(I=L.n()).done;){var j=I.value;m&&j.checkDeprecations(_,m),k+=j.getModuleSource(i,x);var D=j.injections[i];for(var N in D){var F=N.match(/^(v|f)s:#([\w-]+)$/);if(F){var z="decl"===F[2]?P:C;z[N]=z[N]||[],z[N].push(D[N])}else E[N]=E[N]||[],E[N].push(D[N])}}}catch(B){L.e(B)}finally{L.f()}return k=yS(k+=LS,i,P),k+=function(e,t){var n="";for(var r in e){var i=e[r];if(n+="void ".concat(i.signature," {\n"),i.header&&(n+="  ".concat(i.header)),t[r]){var o=t[r];o.sort((function(e,t){return e.order-t.order}));var a,s=RS(o);try{for(s.s();!(a=s.n()).done;){var l=a.value;n+="  ".concat(l.injection,"\n")}}catch(B){s.e(B)}finally{s.f()}}i.footer&&(n+="  ".concat(i.footer)),n+="}\n"}return n}(S[i],E),k=TS(k=yS(k+=_,i,C),d?100:x,g)}function FS(e){return function(t){var n,r={},i=RS(e);try{for(i.s();!(n=i.n()).done;){var o=n.value.getUniforms(t,r);Object.assign(r,o)}}catch(a){i.e(a)}finally{i.f()}return r}}var zS="void main() {gl_FragColor = vec4(0);}",BS="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",VS="#version 300 es\n".concat(BS);function US(e,t){t=Array.isArray(t)?t:[t];var n=ob(e.replace(/^\s+/,"").split(/\s+/),3),r=n[0],i=n[1],o=n[2];return t.includes(r)&&i&&o?{qualifier:r,type:i,name:o.split(";")[0]}:null}function WS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.version,n=void 0===t?100:t,r=e.input,i=e.inputType,o=e.output;if(!r)return 300===n?VS:n>300?"#version ".concat(n,"\n").concat(BS):zS;var a=HS(r,i);return n>=300?"#version ".concat(n," ").concat(300===n?"es":"","\nin ").concat(i," ").concat(r,";\nout vec4 ").concat(o,";\nvoid main() {\n  ").concat(o," = ").concat(a,";\n}"):"varying ".concat(i," ").concat(r,";\nvoid main() {\n  gl_FragColor = ").concat(a,";\n}")}function GS(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Zk(!1),null}}function HS(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return Zk(!1),null}}var qS={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null};function $S(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}var XS={};function YS(e){return Math.round(e/XS.EPSILON)*XS.EPSILON}function ZS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.precision,r=void 0===n?XS.precision||4:n;return e=YS(e),"".concat(parseFloat(e.toPrecision(r)))}function KS(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function QS(e,t,n){if(KS(e)){n=n||((i=e).clone?i.clone():new Array(i.length));for(var r=0;r<n.length&&r<e.length;++r)n[r]=t(e[r],r,n);return n}var i;return t(e)}function JS(e,t,n){return QS(e,(function(e){return Math.max(t,Math.min(n,e))}))}function eE(e,t,n){return KS(e)?e.map((function(e,r){return eE(e,t[r],n)})):n*t+(1-n)*e}function tE(e,t,n){var r=XS.EPSILON;n&&(XS.EPSILON=n);try{if(e===t)return!0;if(KS(e)&&KS(t)){if(e.length!==t.length)return!1;for(var i=0;i<e.length;++i)if(!tE(e[i],t[i]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):!(!Number.isFinite(e)||!Number.isFinite(t))&&Math.abs(e-t)<=XS.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}finally{XS.EPSILON=r}}function nE(e){var t="function"==typeof Map?new Map:void 0;return(nE=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return g_(e,arguments,Zb(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Mf(r,e)})(e)}function rE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}XS.EPSILON=1e-12,XS.debug=!1,XS.precision=4,XS.printTypes=!1,XS.printDegrees=!1,XS.printRowMajor=!0;var iE=function(e){Xb(n,nE(Array));var t=rE(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"from",value:function(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check()}},{key:"to",value:function(e){return e===this?this:KS(e)?this.toArray(e):this.toObject(e)}},{key:"toTarget",value:function(e){return e?this.to(e):this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"toString",value:function(){return this.formatString(XS)}},{key:"formatString",value:function(e){for(var t="",n=0;n<this.ELEMENTS;++n)t+=(n>0?", ":"")+ZS(this[n],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}},{key:"equals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(!tE(this[t],e[t]))return!1;return!0}},{key:"exactEquals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}},{key:"negate",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}},{key:"lerp",value:function(e,t,n){void 0===n&&(n=t,t=e,e=this);for(var r=0;r<this.ELEMENTS;++r){var i=e[r];this[r]=i+n*(t[r]-i)}return this.check()}},{key:"min",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}},{key:"max",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}},{key:"clamp",value:function(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),t[n]);return this.check()}},{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++)for(var o=i[r],a=0;a<this.ELEMENTS;++a)this[a]+=o[a];return this.check()}},{key:"subtract",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++)for(var o=i[r],a=0;a<this.ELEMENTS;++a)this[a]-=o[a];return this.check()}},{key:"scale",value:function(e){if(Array.isArray(e))return this.multiply(e);for(var t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}},{key:"sub",value:function(e){return this.subtract(e)}},{key:"setScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}},{key:"addScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}},{key:"subScalar",value:function(e){return this.addScalar(-e)}},{key:"multiplyScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}},{key:"divideScalar",value:function(e){return this.scale(1/e)}},{key:"clampScalar",value:function(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),t);return this.check()}},{key:"multiplyByScalar",value:function(e){return this.scale(e)}},{key:"check",value:function(){if(XS.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function(){for(var e=this.length===this.ELEMENTS,t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}},{key:"ELEMENTS",get:function(){return $S(!1),0}},{key:"RANK",get:function(){return $S(!1),0}},{key:"elements",get:function(){return this}}]),n}();function oE(e,t){if(e.length!==t)return!1;for(var n=0;n<e.length;++n)if(!Number.isFinite(e[n]))return!1;return!0}function aE(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function sE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(XS.debug&&!oE(e,t))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return e}var lE={};function uE(e,t){lE[e]||(lE[e]=!0,console.warn("".concat(e," has been removed in version ").concat(t,", see upgrade guide for more information")))}function cE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var fE,hE=function(e){Xb(n,iE);var t=cE(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"copy",value:function(e){return $S(!1),this}},{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return this.len()}},{key:"lengthSquared",value:function(){for(var e=0,t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}},{key:"magnitudeSquared",value:function(){return this.lengthSquared()}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSquared(e))}},{key:"distanceSquared",value:function(e){for(var t=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-e[n];t+=r*r}return aE(t)}},{key:"dot",value:function(e){for(var t=0,n=0;n<this.ELEMENTS;++n)t+=this[n]*e[n];return aE(t)}},{key:"normalize",value:function(){var e=this.magnitude();if(0!==e)for(var t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}},{key:"multiply",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++)for(var o=i[r],a=0;a<this.ELEMENTS;++a)this[a]*=o[a];return this.check()}},{key:"divide",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++)for(var o=i[r],a=0;a<this.ELEMENTS;++a)this[a]/=o[a];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(e){return this.distance(e)}},{key:"distanceToSquared",value:function(e){return this.distanceSquared(e)}},{key:"getComponent",value:function(e){return $S(e>=0&&e<this.ELEMENTS,"index is out of range"),aE(this[e])}},{key:"setComponent",value:function(e,t){return $S(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}},{key:"addVectors",value:function(e,t){return this.copy(e).add(t)}},{key:"subVectors",value:function(e,t){return this.copy(e).subtract(t)}},{key:"multiplyVectors",value:function(e,t){return this.copy(e).multiply(t)}},{key:"addScaledVector",value:function(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}},{key:"x",get:function(){return this[0]},set:function(e){this[0]=aE(e)}},{key:"y",get:function(){return this[1]},set:function(e){this[1]=aE(e)}}]),n}(),dE="undefined"!=typeof Float32Array?Float32Array:Array;function pE(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function vE(e,t){return e[0]=-t[0],e[1]=-t[1],e}function mE(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e}function gE(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e}function yE(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}function xE(e,t,n){var r=t[0],i=t[1],o=n[3]*r+n[7]*i||1;return e[0]=(n[0]*r+n[4]*i)/o,e[1]=(n[1]*r+n[5]*i)/o,e}function bE(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o||1;return e[0]=(n[0]*r+n[4]*i+n[8]*o)/a,e[1]=(n[1]*r+n[5]*i+n[9]*o)/a,e[2]=(n[2]*r+n[6]*i+n[10]*o)/a,e}function _E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),fE=new dE(2),dE!=Float32Array&&(fE[0]=0,fE[1]=0);var wE=function(e){Xb(n,hE);var t=_E(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Np(this,n),e=t.call(this,2),KS(r)&&1===arguments.length?e.copy(r):(XS.debug&&(aE(r),aE(i)),e[0]=r,e[1]=i),e}return Tf(n,[{key:"set",value:function(e,t){return this[0]=e,this[1]=t,this.check()}},{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this.check()}},{key:"fromObject",value:function(e){return XS.debug&&(aE(e.x),aE(e.y)),this[0]=e.x,this[1]=e.y,this.check()}},{key:"toObject",value:function(e){return e.x=this[0],e.y=this[1],e}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"transform",value:function(e){return this.transformAsPoint(e)}},{key:"transformAsPoint",value:function(e){return yE(this,this,e),this.check()}},{key:"transformAsVector",value:function(e){return xE(this,this,e),this.check()}},{key:"transformByMatrix3",value:function(e){return gE(this,this,e),this.check()}},{key:"transformByMatrix2x3",value:function(e){return function(e,t,n){var r=t[0],i=t[1];e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5]}(this,this,e),this.check()}},{key:"transformByMatrix2",value:function(e){return function(e,t,n){var r=t[0],i=t[1];e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i}(this,this,e),this.check()}},{key:"ELEMENTS",get:function(){return 2}}]),n}();function kE(){var e=new dE(3);return dE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function SE(e,t,n){var r=new dE(3);return r[0]=e,r[1]=t,r[2]=n,r}function EE(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function PE(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a,e}function CE(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}function AE(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}var OE=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},TE=function(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)};function ME(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}!function(){var e=kE()}();var RE=[0,0,0],IE={},LE=function(e){Xb(n,hE);var t=ME(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Np(this,n),e=t.call(this,-0,-0,-0),1===arguments.length&&KS(r)?e.copy(r):(XS.debug&&(aE(r),aE(i),aE(o)),e[0]=r,e[1]=i,e[2]=o),e}return Tf(n,null,[{key:"ZERO",get:function(){return IE.ZERO=IE.ZERO||Object.freeze(new n(0,0,0,0))}}]),Tf(n,[{key:"set",value:function(e,t,n){return this[0]=e,this[1]=t,this[2]=n,this.check()}},{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}},{key:"fromObject",value:function(e){return XS.debug&&(aE(e.x),aE(e.y),aE(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}},{key:"toObject",value:function(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}},{key:"angle",value:function(e){return function(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],a=t[1],s=t[2],l=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+a*a+s*s),u=l&&EE(e,t)/l;return Math.acos(Math.min(Math.max(u,-1),1))}(this,e)}},{key:"cross",value:function(e){return PE(this,this,e),this.check()}},{key:"rotateX",value:function(e){var t=e.radians,n=e.origin;return function(e,t,n,r){var i=[],o=[];i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,void 0===n?RE:n,t),this.check()}},{key:"rotateY",value:function(e){var t=e.radians,n=e.origin;return function(e,t,n,r){var i=[],o=[];i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,void 0===n?RE:n,t),this.check()}},{key:"rotateZ",value:function(e){var t=e.radians,n=e.origin;return function(e,t,n,r){var i=[],o=[];i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2]}(this,this,void 0===n?RE:n,t),this.check()}},{key:"transform",value:function(e){return this.transformAsPoint(e)}},{key:"transformAsPoint",value:function(e){return CE(this,this,e),this.check()}},{key:"transformAsVector",value:function(e){return bE(this,this,e),this.check()}},{key:"transformByMatrix3",value:function(e){return AE(this,this,e),this.check()}},{key:"transformByMatrix2",value:function(e){return function(e,t,n){var r=t[0],i=t[1];e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e[2]=t[2]}(this,this,e),this.check()}},{key:"transformByQuaternion",value:function(e){return function(e,t,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=t[0],l=t[1],u=t[2],c=i*u-o*l,f=o*s-r*u,h=r*l-i*s,d=i*h-o*f,p=o*c-r*h,v=r*f-i*c,m=2*a;c*=m,f*=m,h*=m,d*=2,p*=2,v*=2,e[0]=s+c+d,e[1]=l+f+p,e[2]=u+h+v}(this,this,e),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(e){this[2]=aE(e)}}]),n}();function jE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var DE=function(e){Xb(n,iE);var t=jE(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"toString",value:function(){var e="[";if(XS.printRowMajor){e+="row-major:";for(var t=0;t<this.RANK;++t)for(var n=0;n<this.RANK;++n)e+=" ".concat(this[n*this.RANK+t])}else{e+="column-major:";for(var r=0;r<this.ELEMENTS;++r)e+=" ".concat(this[r])}return e+="]"}},{key:"getElementIndex",value:function(e,t){return t*this.RANK+e}},{key:"getElement",value:function(e,t){return this[t*this.RANK+e]}},{key:"setElement",value:function(e,t,n){return this[t*this.RANK+e]=aE(n),this}},{key:"getColumn",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0),n=e*this.RANK,r=0;r<this.RANK;++r)t[r]=this[n+r];return t}},{key:"setColumn",value:function(e,t){for(var n=e*this.RANK,r=0;r<this.RANK;++r)this[n+r]=t[r];return this}}]),n}();function NE(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=n[0],d=n[1],p=n[2],v=n[3],m=n[4],g=n[5],y=n[6],x=n[7],b=n[8];return e[0]=h*r+d*a+p*u,e[1]=h*i+d*s+p*c,e[2]=h*o+d*l+p*f,e[3]=v*r+m*a+g*u,e[4]=v*i+m*s+g*c,e[5]=v*o+m*l+g*f,e[6]=y*r+x*a+b*u,e[7]=y*i+x*s+b*c,e[8]=y*o+x*l+b*f,e}function FE(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function zE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var BE=Object.freeze([1,0,0,0,1,0,0,0,1]),VE=Object.freeze([0,0,0,0,0,0,0,0,0]),UE=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),WE={},GE=function(e){Xb(n,DE);var t=zE(n);function n(e){var r;return Np(this,n),r=t.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?r.copy(e):r.identity(),r}return Tf(n,[{key:"ELEMENTS",get:function(){return 9}},{key:"RANK",get:function(){return 3}},{key:"INDICES",get:function(){return UE}}],[{key:"IDENTITY",get:function(){return WE.IDENTITY=WE.IDENTITY||Object.freeze(new n(BE)),WE.IDENTITY}},{key:"ZERO",get:function(){return WE.ZERO=WE.ZERO||Object.freeze(new n(VE)),WE.ZERO}}]),Tf(n,[{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}},{key:"set",value:function(e,t,n,r,i,o,a,s,l){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=l,this.check()}},{key:"setRowMajor",value:function(e,t,n,r,i,o,a,s,l){return this[0]=e,this[1]=r,this[2]=a,this[3]=t,this[4]=i,this[5]=s,this[6]=n,this[7]=o,this[8]=l,this.check()}},{key:"determinant",value:function(){return function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*(u*o-a*l)+n*(-u*i+a*s)+r*(l*i-o*s)}(this)}},{key:"identity",value:function(){return this.copy(BE)}},{key:"fromQuaternion",value:function(e){return function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,u=n*a,c=r*a,f=r*s,h=i*a,d=i*s,p=i*l,v=o*a,m=o*s,g=o*l;e[0]=1-f-p,e[3]=c-g,e[6]=h+m,e[1]=c+g,e[4]=1-u-p,e[7]=d-v,e[2]=h-m,e[5]=d+v,e[8]=1-u-f}(this,e),this.check()}},{key:"transpose",value:function(){return function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8]}(this,this),this.check()}},{key:"invert",value:function(){return function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=c*a-s*u,h=-c*o+s*l,d=u*o-a*l,p=n*f+r*h+i*d;p&&(p=1/p,e[0]=f*p,e[1]=(-c*r+i*u)*p,e[2]=(s*r-i*a)*p,e[3]=h*p,e[4]=(c*n-i*l)*p,e[5]=(-s*n+i*o)*p,e[6]=d*p,e[7]=(-u*n+r*l)*p,e[8]=(a*n-r*o)*p)}(this,this),this.check()}},{key:"multiplyLeft",value:function(e){return NE(this,e,this),this.check()}},{key:"multiplyRight",value:function(e){return NE(this,this,e),this.check()}},{key:"rotate",value:function(e){return function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=Math.sin(n),d=Math.cos(n);e[0]=d*r+h*a,e[1]=d*i+h*s,e[2]=d*o+h*l,e[3]=d*a-h*r,e[4]=d*s-h*i,e[5]=d*l-h*o,e[6]=u,e[7]=c,e[8]=f}(this,this,e),this.check()}},{key:"scale",value:function(e){return Array.isArray(e)?FE(this,this,e):FE(this,this,[e,e,e]),this.check()}},{key:"translate",value:function(e){return function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=n[0],d=n[1];e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=h*r+d*a+u,e[7]=h*i+d*s+c,e[8]=h*o+d*l+f}(this,this,e),this.check()}},{key:"transform",value:function(e,t){switch(e.length){case 2:t=gE(t||[-0,-0],e,this);break;case 3:t=AE(t||[-0,-0,-0],e,this);break;case 4:t=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=n[0]*r+n[3]*i+n[6]*o,e[1]=n[1]*r+n[4]*i+n[7]*o,e[2]=n[2]*r+n[5]*i+n[8]*o,e[3]=t[3],e}(t||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return sE(t,e.length),t}},{key:"transformVector",value:function(e,t){return uE("Matrix3.transformVector"),this.transform(e,t)}},{key:"transformVector2",value:function(e,t){return uE("Matrix3.transformVector"),this.transform(e,t)}},{key:"transformVector3",value:function(e,t){return uE("Matrix3.transformVector"),this.transform(e,t)}}]),n}();function HE(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],m=t[14],g=t[15],y=n*s-r*a,x=n*l-i*a,b=n*u-o*a,_=r*l-i*s,w=r*u-o*s,k=i*u-o*l,S=c*v-f*p,E=c*m-h*p,P=c*g-d*p,C=f*m-h*v,A=f*g-d*v,O=h*g-d*m,T=y*O-x*A+b*C+_*P-w*E+k*S;return T?(T=1/T,e[0]=(s*O-l*A+u*C)*T,e[1]=(i*A-r*O-o*C)*T,e[2]=(v*k-m*w+g*_)*T,e[3]=(h*w-f*k-d*_)*T,e[4]=(l*P-a*O-u*E)*T,e[5]=(n*O-i*P+o*E)*T,e[6]=(m*b-p*k-g*x)*T,e[7]=(c*k-h*b+d*x)*T,e[8]=(a*A-s*P+u*S)*T,e[9]=(r*P-n*A-o*S)*T,e[10]=(p*w-v*b+g*y)*T,e[11]=(f*b-c*w-d*y)*T,e[12]=(s*E-a*C-l*S)*T,e[13]=(n*C-r*E+i*S)*T,e[14]=(v*x-p*_-m*y)*T,e[15]=(c*_-f*x+h*y)*T,e):null}function qE(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=t[9],d=t[10],p=t[11],v=t[12],m=t[13],g=t[14],y=t[15],x=n[0],b=n[1],_=n[2],w=n[3];return e[0]=x*r+b*s+_*f+w*v,e[1]=x*i+b*l+_*h+w*m,e[2]=x*o+b*u+_*d+w*g,e[3]=x*a+b*c+_*p+w*y,x=n[4],b=n[5],_=n[6],w=n[7],e[4]=x*r+b*s+_*f+w*v,e[5]=x*i+b*l+_*h+w*m,e[6]=x*o+b*u+_*d+w*g,e[7]=x*a+b*c+_*p+w*y,x=n[8],b=n[9],_=n[10],w=n[11],e[8]=x*r+b*s+_*f+w*v,e[9]=x*i+b*l+_*h+w*m,e[10]=x*o+b*u+_*d+w*g,e[11]=x*a+b*c+_*p+w*y,x=n[12],b=n[13],_=n[14],w=n[15],e[12]=x*r+b*s+_*f+w*v,e[13]=x*i+b*l+_*h+w*m,e[14]=x*o+b*u+_*d+w*g,e[15]=x*a+b*c+_*p+w*y,e}function $E(e,t,n){var r,i,o,a,s,l,u,c,f,h,d,p,v=n[0],m=n[1],g=n[2];return t===e?(e[12]=t[0]*v+t[4]*m+t[8]*g+t[12],e[13]=t[1]*v+t[5]*m+t[9]*g+t[13],e[14]=t[2]*v+t[6]*m+t[10]*g+t[14],e[15]=t[3]*v+t[7]*m+t[11]*g+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=t[9],d=t[10],p=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=f,e[9]=h,e[10]=d,e[11]=p,e[12]=r*v+s*m+f*g+t[12],e[13]=i*v+l*m+h*g+t[13],e[14]=o*v+u*m+d*g+t[14],e[15]=a*v+c*m+p*g+t[15]),e}function XE(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function YE(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*r,e[5]=a*i+c*r,e[6]=s*i+f*r,e[7]=l*i+h*r,e[8]=u*i-o*r,e[9]=c*i-a*r,e[10]=f*i-s*r,e[11]=h*i-l*r,e}function ZE(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*r,e[1]=a*i+c*r,e[2]=s*i+f*r,e[3]=l*i+h*r,e[4]=u*i-o*r,e[5]=c*i-a*r,e[6]=f*i-s*r,e[7]=h*i-l*r,e}function KE(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e}function QE(e,t,n,r){var i,o,a,s,l,u,c,f,h,d,p=t[0],v=t[1],m=t[2],g=r[0],y=r[1],x=r[2],b=n[0],_=n[1],w=n[2];return Math.abs(p-b)<1e-6&&Math.abs(v-_)<1e-6&&Math.abs(m-w)<1e-6?function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}(e):(c=p-b,f=v-_,h=m-w,i=y*(h*=d=1/Math.hypot(c,f,h))-x*(f*=d),o=x*(c*=d)-g*h,a=g*f-y*c,(d=Math.hypot(i,o,a))?(i*=d=1/d,o*=d,a*=d):(i=0,o=0,a=0),s=f*a-h*o,l=h*i-c*a,u=c*o-f*i,(d=Math.hypot(s,l,u))?(s*=d=1/d,l*=d,u*=d):(s=0,l=0,u=0),e[0]=i,e[1]=s,e[2]=c,e[3]=0,e[4]=o,e[5]=l,e[6]=f,e[7]=0,e[8]=a,e[9]=u,e[10]=h,e[11]=0,e[12]=-(i*p+o*v+a*m),e[13]=-(s*p+l*v+u*m),e[14]=-(c*p+f*v+h*m),e[15]=1,e)}function JE(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],v=e[13],m=e[14],g=e[15],y=t[0],x=t[1],b=t[2],_=t[3],w=t[4],k=t[5],S=t[6],E=t[7],P=t[8],C=t[9],A=t[10],O=t[11],T=t[12],M=t[13],R=t[14],I=t[15];return Math.abs(n-y)<=1e-6*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-x)<=1e-6*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(i-b)<=1e-6*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-_)<=1e-6*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-w)<=1e-6*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-k)<=1e-6*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(l-S)<=1e-6*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-E)<=1e-6*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-P)<=1e-6*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(f-C)<=1e-6*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(h-A)<=1e-6*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(d-O)<=1e-6*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(p-T)<=1e-6*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(v-M)<=1e-6*Math.max(1,Math.abs(v),Math.abs(M))&&Math.abs(m-R)<=1e-6*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(g-I)<=1e-6*Math.max(1,Math.abs(g),Math.abs(I))}function eP(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function tP(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function nP(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*o-l*i,f=u*i+l*r-a*o,h=u*o+a*i-s*r,d=-a*r-s*i-l*o;return e[0]=c*u+d*-a+f*-l-h*-s,e[1]=f*u+d*-s+h*-a-c*-l,e[2]=h*u+d*-l+c*-s-f*-a,e[3]=t[3],e}function rP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}!function(){var e=function(){var e=new dE(4);return dE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}()}();var iP=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),oP=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),aP=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),sP={},lP=function(e){Xb(n,DE);var t=rP(n);function n(e){var r;return Np(this,n),r=t.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?r.copy(e):r.identity(),r}return Tf(n,[{key:"INDICES",get:function(){return aP}},{key:"ELEMENTS",get:function(){return 16}},{key:"RANK",get:function(){return 4}}],[{key:"IDENTITY",get:function(){return sP.IDENTITY=sP.IDENTITY||Object.freeze(new n(iP)),sP.IDENTITY}},{key:"ZERO",get:function(){return sP.ZERO=sP.ZERO||Object.freeze(new n(oP)),sP.ZERO}}]),Tf(n,[{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}},{key:"set",value:function(e,t,n,r,i,o,a,s,l,u,c,f,h,d,p,v){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=l,this[9]=u,this[10]=c,this[11]=f,this[12]=h,this[13]=d,this[14]=p,this[15]=v,this.check()}},{key:"setRowMajor",value:function(e,t,n,r,i,o,a,s,l,u,c,f,h,d,p,v){return this[0]=e,this[1]=i,this[2]=l,this[3]=h,this[4]=t,this[5]=o,this[6]=u,this[7]=d,this[8]=n,this[9]=a,this[10]=c,this[11]=p,this[12]=r,this[13]=s,this[14]=f,this[15]=v,this.check()}},{key:"toRowMajor",value:function(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}},{key:"identity",value:function(){return this.copy(iP)}},{key:"fromQuaternion",value:function(e){return function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,u=n*a,c=r*a,f=r*s,h=i*a,d=i*s,p=i*l,v=o*a,m=o*s,g=o*l;e[0]=1-f-p,e[1]=c+g,e[2]=h-m,e[3]=0,e[4]=c-g,e[5]=1-u-p,e[6]=d+v,e[7]=0,e[8]=h+m,e[9]=d-v,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this,e),this.check()}},{key:"frustum",value:function(e){var t=e.left,r=e.right,i=e.bottom,o=e.top,a=e.near,s=e.far;return s===1/0?n._computeInfinitePerspectiveOffCenter(this,t,r,i,o,a):function(e,t,n,r,i,o,a){var s=1/(n-t),l=1/(i-r),u=1/(o-a);e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*l,e[10]=(a+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*u,e[15]=0}(this,t,r,i,o,a,s),this.check()}},{key:"lookAt",value:function(e,t,n){if(1===arguments.length){var r=e;e=r.eye,t=r.center,n=r.up}return QE(this,e,t=t||[0,0,0],n=n||[0,1,0]),this.check()}},{key:"ortho",value:function(e){var t=e.left,n=e.right,r=e.bottom,i=e.top,o=e.near,a=void 0===o?.1:o,s=e.far;return function(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),u=1/(o-a);e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*u,e[15]=1}(this,t,n,r,i,a,void 0===s?500:s),this.check()}},{key:"orthographic",value:function(e){var t=e.fovy,r=void 0===t?45*Math.PI/180:t,i=e.aspect,o=void 0===i?1:i,a=e.focalDistance,s=void 0===a?1:a,l=e.near,u=void 0===l?.1:l,c=e.far,f=void 0===c?500:c;if(r>2*Math.PI)throw Error("radians");var h=r/2,d=s*Math.tan(h),p=d*o;return(new n).ortho({left:-p,right:p,bottom:-d,top:d,near:u,far:f})}},{key:"perspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fovy,n=void 0===t?void 0:t,r=e.fov,i=void 0===r?45*Math.PI/180:r,o=e.aspect,a=void 0===o?1:o,s=e.near,l=void 0===s?.1:s,u=e.far,c=void 0===u?500:u;if((n=n||i)>2*Math.PI)throw Error("radians");return KE(this,n,a,l,c),this.check()}},{key:"determinant",value:function(){return function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],m=e[15];return(t*a-n*o)*(f*m-h*v)-(t*s-r*o)*(c*m-h*p)+(t*l-i*o)*(c*v-f*p)+(n*s-r*a)*(u*m-h*d)-(n*l-i*a)*(u*v-f*d)+(r*l-i*s)*(u*p-c*d)}(this)}},{key:"getScale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}},{key:"getTranslation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}},{key:"getRotation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getScale(t||[-0,-0,-0]),r=1/n[0],i=1/n[1],o=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*i,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*i,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*i,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{key:"getRotationMatrix3",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getScale(t||[-0,-0,-0]),r=1/n[0],i=1/n[1],o=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*i,e[2]=this[2]*o,e[3]=this[4]*r,e[4]=this[5]*i,e[5]=this[6]*o,e[6]=this[8]*r,e[7]=this[9]*i,e[8]=this[10]*o,e}},{key:"transpose",value:function(){return function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15]}(this,this),this.check()}},{key:"invert",value:function(){return HE(this,this),this.check()}},{key:"multiplyLeft",value:function(e){return qE(this,e,this),this.check()}},{key:"multiplyRight",value:function(e){return qE(this,this,e),this.check()}},{key:"rotateX",value:function(e){return YE(this,this,e),this.check()}},{key:"rotateY",value:function(e){return function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],h=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-u*r,e[1]=a*i-c*r,e[2]=s*i-f*r,e[3]=l*i-h*r,e[8]=o*r+u*i,e[9]=a*r+c*i,e[10]=s*r+f*i,e[11]=l*r+h*i}(this,this,e),this.check()}},{key:"rotateZ",value:function(e){return ZE(this,this,e),this.check()}},{key:"rotateXYZ",value:function(e){var t=ob(e,3),n=t[0],r=t[1],i=t[2];return this.rotateX(n).rotateY(r).rotateZ(i)}},{key:"rotateAxis",value:function(e,t){return function(e,t,n,r){var i,o,a,s,l,u,c,f,h,d,p,v,m,g,y,x,b,_,w,k,S,E,P,C,A=r[0],O=r[1],T=r[2],M=Math.hypot(A,O,T);M<1e-6||(A*=M=1/M,O*=M,T*=M,i=Math.sin(n),a=1-(o=Math.cos(n)),s=t[0],l=t[1],u=t[2],c=t[3],f=t[4],h=t[5],d=t[6],p=t[7],v=t[8],m=t[9],g=t[10],y=t[11],x=A*A*a+o,b=O*A*a+T*i,_=T*A*a-O*i,w=A*O*a-T*i,k=O*O*a+o,S=T*O*a+A*i,E=A*T*a+O*i,P=O*T*a-A*i,C=T*T*a+o,e[0]=s*x+f*b+v*_,e[1]=l*x+h*b+m*_,e[2]=u*x+d*b+g*_,e[3]=c*x+p*b+y*_,e[4]=s*w+f*k+v*S,e[5]=l*w+h*k+m*S,e[6]=u*w+d*k+g*S,e[7]=c*w+p*k+y*S,e[8]=s*E+f*P+v*C,e[9]=l*E+h*P+m*C,e[10]=u*E+d*P+g*C,e[11]=c*E+p*P+y*C,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]))}(this,this,e,t),this.check()}},{key:"scale",value:function(e){return Array.isArray(e)?XE(this,this,e):XE(this,this,[e,e,e]),this.check()}},{key:"translate",value:function(e){return $E(this,this,e),this.check()}},{key:"transform",value:function(e,t){return 4===e.length?(sE(t=tP(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}},{key:"transformAsPoint",value:function(e,t){switch(e.length){case 2:t=yE(t||[-0,-0],e,this);break;case 3:t=CE(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return sE(t,e.length),t}},{key:"transformAsVector",value:function(e,t){switch(e.length){case 2:t=xE(t||[-0,-0],e,this);break;case 3:t=bE(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return sE(t,e.length),t}},{key:"makeRotationX",value:function(e){return this.identity().rotateX(e)}},{key:"makeTranslation",value:function(e,t,n){return this.identity().translate([e,t,n])}},{key:"transformPoint",value:function(e,t){return uE("Matrix4.transformPoint","3.0"),this.transformAsPoint(e,t)}},{key:"transformVector",value:function(e,t){return uE("Matrix4.transformVector","3.0"),this.transformAsPoint(e,t)}},{key:"transformDirection",value:function(e,t){return uE("Matrix4.transformDirection","3.0"),this.transformAsVector(e,t)}}],[{key:"_computeInfinitePerspectiveOffCenter",value:function(e,t,n,r,i,o){var a=2*o/(n-t),s=2*o/(i-r),l=(n+t)/(n-t),u=(i+r)/(i-r),c=-2*o;return e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=l,e[9]=u,e[10]=-1,e[11]=-1,e[12]=0,e[13]=0,e[14]=c,e[15]=0,e}}]),n}();function uP(){var e=new dE(4);return dE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function cP(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function fP(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*c+a*s+i*u-o*l,e[1]=i*c+a*l+o*s-r*u,e[2]=o*c+a*u+r*l-i*s,e[3]=a*c-r*s-i*l-o*u,e}function hP(e,t,n,r){var i,o,a,s,l,u=t[0],c=t[1],f=t[2],h=t[3],d=n[0],p=n[1],v=n[2],m=n[3];return(o=u*d+c*p+f*v+h*m)<0&&(o=-o,d=-d,p=-p,v=-v,m=-m),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,l=Math.sin(r*i)/a):(s=1-r,l=r),e[0]=s*u+l*d,e[1]=s*c+l*p,e[2]=s*f+l*v,e[3]=s*h+l*m,e}function dP(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*a+a]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*o+a]-t[3*a+o])*n,e[o]=(t[3*o+i]+t[3*i+o])*n,e[a]=(t[3*a+i]+t[3*i+a])*n}return e}var pP,vP,mP,gP=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},yP=eP,xP=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},bP=function(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e[3]=s+r*(n[3]-s),e},_P=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.hypot(t,n,r,i)},wP=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i},kP=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a,e},SP=(pP=kE(),vP=SE(1,0,0),mP=SE(0,1,0),function(e,t,n){var r=EE(t,n);return r<-.999999?(PE(pP,vP,t),TE(pP)<1e-6&&PE(pP,mP,t),function(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o}(pP,pP),cP(e,pP,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(PE(pP,t,n),e[0]=pP[0],e[1]=pP[1],e[2]=pP[2],e[3]=1+r,kP(e,e))});function EP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}uP(),uP(),function(){var e=new dE(9);dE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1}();var PP=[0,0,0,1],CP=function(e){Xb(n,iE);var t=EP(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Np(this,n),e=t.call(this,-0,-0,-0,-0),Array.isArray(r)&&1===arguments.length?e.copy(r):e.set(r,i,o,a),e}return Tf(n,[{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}},{key:"set",value:function(e,t,n,r){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this.check()}},{key:"fromMatrix3",value:function(e){return dP(this,e),this.check()}},{key:"identity",value:function(){return function(e){e[0]=0,e[1]=0,e[2]=0,e[3]=1}(this),this.check()}},{key:"fromAxisRotation",value:function(e,t){return cP(this,e,t),this.check()}},{key:"setAxisAngle",value:function(e,t){return this.fromAxisRotation(e,t)}},{key:"len",value:function(){return _P(this)}},{key:"lengthSquared",value:function(){return wP(this)}},{key:"dot",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return xP(this,e)}},{key:"rotationTo",value:function(e,t){return SP(this,e,t),this.check()}},{key:"add",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return gP(this,this,e),this.check()}},{key:"calculateW",value:function(){return function(e,t){var n=t[0],r=t[1],i=t[2];e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i))}(this,this),this.check()}},{key:"conjugate",value:function(){return function(e,t){e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3]}(this,this),this.check()}},{key:"invert",value:function(){return function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=o*s}(this,this),this.check()}},{key:"lerp",value:function(e,t,n){return bP(this,e,t,n),this.check()}},{key:"multiplyRight",value:function(e,t){return $S(!t),fP(this,this,e),this.check()}},{key:"multiplyLeft",value:function(e,t){return $S(!t),fP(this,e,this),this.check()}},{key:"normalize",value:function(){var e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}},{key:"rotateX",value:function(e){return function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=r*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-r*s}(this,this,e),this.check()}},{key:"rotateY",value:function(e){return function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=r*l-o*s,e[1]=i*l+a*s,e[2]=o*l+r*s,e[3]=a*l-i*s}(this,this,e),this.check()}},{key:"rotateZ",value:function(e){return function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=r*l+i*s,e[1]=i*l-r*s,e[2]=o*l+a*s,e[3]=a*l-o*s}(this,this,e),this.check()}},{key:"scale",value:function(e){return yP(this,this,e),this.check()}},{key:"slerp",value:function(e,t,n){switch(arguments.length){case 1:var r=arguments[0],i=r.start;e=void 0===i?PP:i,t=r.target,n=r.ratio;break;case 2:var o=Array.prototype.slice.call(arguments);t=o[0],n=o[1],e=this}return hP(this,e,t,n),this.check()}},{key:"transformVector4",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return nP(t,e,this),sE(t,4)}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"setFromAxisAngle",value:function(e,t){return this.setAxisAngle(e,t)}},{key:"premultiply",value:function(e,t){return this.multiplyLeft(e,t)}},{key:"multiply",value:function(e,t){return this.multiplyRight(e,t)}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(e){this[0]=aE(e)}},{key:"y",get:function(){return this[1]},set:function(e){this[1]=aE(e)}},{key:"z",get:function(){return this[2]},set:function(e){this[2]=aE(e)}},{key:"w",get:function(){return this[3]},set:function(e){this[3]=aE(e)}}]),n}(),AP="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n";function OP(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return TP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TP(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function TP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var MP={lightSources:{}};function RP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=void 0===t?[0,0,0]:t,r=e.intensity,i=void 0===r?1:r;return n.map((function(e){return e*i/255}))}function IP(e){var t=e.ambientLight,n=e.pointLights,r=void 0===n?[]:n,i=e.directionalLights,o=void 0===i?[]:i,a={};return a["lighting_uAmbientLight.color"]=t?RP(t):[0,0,0],r.forEach((function(e,t){a["lighting_uPointLight[".concat(t,"].color")]=RP(e),a["lighting_uPointLight[".concat(t,"].position")]=e.position,a["lighting_uPointLight[".concat(t,"].attenuation")]=e.attenuation||[1,0,0]})),a.lighting_uPointLightCount=r.length,o.forEach((function(e,t){a["lighting_uDirectionalLight[".concat(t,"].color")]=RP(e),a["lighting_uDirectionalLight[".concat(t,"].direction")]=e.direction})),a.lighting_uDirectionalLightCount=o.length,a}var LP={name:"lights",vs:AP,fs:AP,getUniforms:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:MP;if("lightSources"in t){var n=t.lightSources||{},r=n.ambientLight,i=n.pointLights,o=n.directionalLights,a=r||i&&i.length>0||o&&o.length>0;return a?Object.assign({},IP({ambientLight:r,pointLights:i,directionalLights:o}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){var s,l={pointLights:[],directionalLights:[]},u=OP(t.lights||[]);try{for(u.s();!(s=u.n()).done;){var c=s.value;switch(c.type){case"ambient":l.ambientLight=c;break;case"directional":l.directionalLights.push(c);break;case"point":l.pointLights.push(c)}}}catch(f){u.e(f)}finally{u.f()}return e({lightSources:l})}return{}},defines:{MAX_LIGHTS:3}},jP={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};var DP={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jP,t={};if(void 0!==e.pickingSelectedColor)if(e.pickingSelectedColor){var n=e.pickingSelectedColor.slice(0,3);t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=n}else t.picking_uSelectedColorValid=0;if(e.pickingHighlightColor){var r=Array.from(e.pickingHighlightColor,(function(e){return e/255}));Number.isFinite(r[3])||(r[3]=1),t.picking_uHighlightColor=r}return void 0!==e.pickingActive&&(t.picking_uActive=Boolean(e.pickingActive),t.picking_uAttribute=Boolean(e.pickingAttribute)),t}},NP={};function FP(e){var t=e.ambient,n=void 0===t?.35:t,r=e.diffuse,i=void 0===r?.6:r,o=e.shininess,a=void 0===o?32:o,s=e.specularColor;return{lighting_uAmbient:n,lighting_uDiffuse:i,lighting_uShininess:a,lighting_uSpecularColor:(void 0===s?[30,30,30]:s).map((function(e){return e/255}))}}var zP={name:"gouraud-lighting",dependencies:[LP],vs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_VERTEX:1},getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NP;if(!("material"in e))return{};var t=e.material;return t?FP(t):{lighting_uEnabled:!1}}},BP={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null};function VP(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return UP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UP(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function UP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var WP=function(){function e(t){Np(this,e),this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}return Tf(e,null,[{key:"getDefaultProgramManager",value:function(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new e(t),t.luma.defaultProgramManager}}]),Tf(e,[{key:"addDefaultModule",value:function(e){this._defaultModules.find((function(t){return t.name===e.name}))||this._defaultModules.push(e),this.stateHash++}},{key:"removeDefaultModule",value:function(e){var t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter((function(e){return e.name!==t})),this.stateHash++}},{key:"addShaderHook",value:function(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}},{key:"get",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.vs,i=void 0===r?"":r,o=n.fs,a=void 0===o?"":o,s=n.defines,l=void 0===s?{}:s,u=n.inject,c=void 0===u?{}:u,f=n.varyings,h=void 0===f?[]:f,d=n.bufferMode,p=void 0===d?35981:d,v=n.transpileToGLSL100,m=void 0!==v&&v,g=this._getModuleList(n.modules),y=this._getHash(i),x=this._getHash(a),b=g.map((function(e){return t._getHash(e.name)})).sort(),_=h.map((function(e){return t._getHash(e)})),w=Object.keys(l).sort(),k=Object.keys(c).sort(),S=[],E=[],P=VP(w);try{for(P.s();!(e=P.n()).done;){var C=e.value;S.push(this._getHash(C)),S.push(this._getHash(l[C]))}}catch(I){P.e(I)}finally{P.f()}var A,O=VP(k);try{for(O.s();!(A=O.n()).done;){var T=A.value;E.push(this._getHash(T)),E.push(this._getHash(c[T]))}}catch(I){O.e(I)}finally{O.f()}var M="".concat(y,"/").concat(x,"D").concat(S.join("/"),"M").concat(b.join("/"),"I").concat(E.join("/"),"V").concat(_.join("/"),"H").concat(this.stateHash,"B").concat(p).concat(m?"T":"");if(!this._programCache[M]){var R=DS(this.gl,{vs:i,fs:a,modules:g,inject:c,defines:l,hookFunctions:this._hookFunctions,transpileToGLSL100:m});this._programCache[M]=new kk(this.gl,{hash:M,vs:R.vs,fs:R.fs,varyings:h,bufferMode:p}),this._getUniforms[M]=R.getUniforms||function(e){},this._useCounts[M]=0}return this._useCounts[M]++,this._programCache[M]}},{key:"getUniforms",value:function(e){return this._getUniforms[e.hash]||null}},{key:"release",value:function(e){var t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}},{key:"_getHash",value:function(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}},{key:"_getModuleList",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Array(this._defaultModules.length+e.length),n={},r=0,i=0,o=this._defaultModules.length;i<o;++i){var a=this._defaultModules[i],s=a.name;t[r++]=a,n[s]=!0}for(var l=0,u=e.length;l<u;++l){var c=e[l],f=c.name;n[f]||(t[r++]=c,n[f]=!0)}return t.length=r,t}}]),e}();function GP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GP(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qP={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function $P(e,t){var n=(t||{}).attributeMap,r=void 0===n?qP:n;return r&&r[e]||e}function XP(e,t){var n;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2}t_(Number.isFinite(t.size),"attribute ".concat(e," needs size"))}var YP=function(){},ZP={},KP=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Np(this,e);var r=n.id,i=void 0===r?r_("model"):r;t_(Nx(t)),this.id=i,this.gl=t,this.id=n.id||r_("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}return Tf(e,[{key:"initialize",value:function(e){this.props={},this.programManager=e.programManager||WP.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;var t=e.program,n=void 0===t?null:t,r=e.vs,i=e.fs,o=e.modules,a=e.defines,s=e.inject,l=e.varyings,u=e.bufferMode,c=e.transpileToGLSL100;this.programProps={program:n,vs:r,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},t_(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function(e){this._setModelProps(e)}},{key:"delete",value:function(){for(var e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getProgram",value:function(){return this.program}},{key:"setProgram",value:function(e){var t=e.program,n=e.vs,r=e.fs,i=e.modules,o=e.defines,a=e.inject,s=e.varyings,l=e.bufferMode,u=e.transpileToGLSL100;this.programProps={program:t,vs:n,fs:r,modules:i,defines:o,inject:a,varyings:s,bufferMode:l,transpileToGLSL100:u},this._programDirty=!0}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setDrawMode",value:function(e){return this.drawMode=e,this}},{key:"setVertexCount",value:function(e){return t_(Number.isFinite(e)),this.vertexCount=e,this}},{key:"setInstanceCount",value:function(e){return t_(Number.isFinite(e)),this.instanceCount=e,this}},{key:"setGeometry",value:function(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(e,t,n){var r={},i=t.indices;for(var o in t.attributes){var a=t.attributes[o],s=$P(o,n);if("indices"===o)i=a;else if(a.constant)r[s]=a.value;else{var l=a.value,u=HP({},a);delete u.value,r[s]=[new A_(e,l),u],XP(o,u)}}if(i){var c=i.value||i;t_(c instanceof Uint16Array||c instanceof Uint32Array,'attribute array for "indices" must be of integer type');var f={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};r.indices=[new A_(e,{data:c,target:34963}),f]}return r}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o_(e))return this;var t={};for(var n in e){var r=e[n];t[n]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(t),this}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,e),this}},{key:"getModuleUniforms",value:function(e){this._checkProgram();var t=this.programManager.getUniforms(this.program);return t?t(e):{}}},{key:"updateModuleSettings",value:function(e){var t=this.getModuleUniforms(e||{});return this.setUniforms(t)}},{key:"clear",value:function(e){return nw(this.program.gl,e),this}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();var t,n=e.moduleSettings,r=void 0===n?null:n,i=e.framebuffer,o=e.uniforms,a=void 0===o?{}:o,s=e.attributes,l=void 0===s?{}:s,u=e.transformFeedback,c=void 0===u?this.transformFeedback:u,f=e.parameters,h=void 0===f?{}:f,d=e.vertexArray,p=void 0===d?this.vertexArray:d;this.setAttributes(l),this.updateModuleSettings(r),this.setUniforms(a),jx.priority>=2&&(t=this._logDrawCallStart(2));var v=this.vertexArray.getDrawParams(),m=this.props,g=m.isIndexed,y=void 0===g?v.isIndexed:g,x=m.indexType,b=void 0===x?v.indexType:x,_=m.indexOffset,w=void 0===_?v.indexOffset:_,k=m.vertexArrayInstanced,S=void 0===k?v.isInstanced:k;S&&!this.isInstanced&&jx.warn("Found instanced attributes on non-instanced model",this.id)();var E=this.isInstanced,P=this.instanceCount,C=this.props,A=C.onBeforeRender,O=void 0===A?YP:A,T=C.onAfterRender,M=void 0===T?YP:T;O(),this.program.setUniforms(this.uniforms);var R=this.program.draw(Object.assign(ZP,e,{logPriority:t,uniforms:null,framebuffer:i,parameters:h,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:p,transformFeedback:c,isIndexed:y,indexType:b,isInstanced:E,instanceCount:P,offset:y?w:0}));return M(),jx.priority>=2&&this._logDrawCallEnd(t,p,i),R}},{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.discard,n=void 0===t||t,r=e.feedbackBuffers,i=e.unbindModels,o=void 0===i?[]:i,a=e.parameters;r&&this._setFeedbackBuffers(r),n&&(a=Object.assign({},a,Qc({},35977,n))),o.forEach((function(e){return e.vertexArray.unbindBuffers()}));try{this.draw(Object.assign({},e,{parameters:a}))}finally{o.forEach((function(e){return e.vertexArray.bindBuffers()}))}return this}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jx.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}},{key:"_setModelProps",value:function(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}},{key:"_checkProgram",value:function(){if(this._programDirty||this.programManager.stateHash!==this._programManagerState){var e=this.programProps.program;if(e)this._managedProgram=!1;else{var t=this.programProps,n=t.vs,r=t.fs,i=t.modules,o=t.inject,a=t.defines,s=t.varyings,l=t.bufferMode,u=t.transpileToGLSL100;e=this.programManager.get({vs:n,fs:r,modules:i,inject:o,defines:a,varyings:s,bufferMode:l,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}t_(e instanceof kk,"Model needs a program"),this._programDirty=!1,e!==this.program&&(this.program=e,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Nk(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}}},{key:"_deleteGeometryBuffers",value:function(){for(var e in this.geometryBuffers){var t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof A_&&t.delete()}}},{key:"_setAnimationProps",value:function(e){this.animated&&t_(e,"Model.draw(): animated uniforms but no animationProps")}},{key:"_setFeedbackBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o_(e))return this;var t=this.program.gl;return this.transformFeedback=this.transformFeedback||new Ok(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}},{key:"_logDrawCallStart",value:function(e){var t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),jx.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:jx.level<=2})(),e}},{key:"_logDrawCallEnd",value:function(e,t,n,r){if(void 0!==e){var i=function(e){var t=e.vertexArray,n=e.header,r=void 0===n?"Attributes":n;if(!t.configuration)return{};var i={};t.elements&&(i.ELEMENT_ARRAY_BUFFER=Uk(t,t.elements,null,r));var o=t.values;for(var a in o){var s=t._getAttributeInfo(a);if(s){var l="".concat(a,": ").concat(s.name),u=t.accessors[s.location];u&&(l="".concat(a,": ").concat(Wk(s.name,u))),i[l]=Uk(t,o[a],u,r)}}return i}({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),o=Bk({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),a=o.table,s=o.unusedTable,l=o.unusedCount,u=Bk({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0}),c=u.table;u.count>0&&jx.log("MISSING UNIFORMS",Object.keys(c))(),l>0&&jx.log("UNUSED UNIFORMS",Object.keys(s))();var f=function(e){var t,n={},r="Accessors for ".concat(e.id),i=Gk(e.attributeInfos);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o){var a=qk(o);n["in ".concat(a)]=Qc({},r,JSON.stringify(o.accessor))}}}catch(f){i.e(f)}finally{i.f()}var s,l=Gk(e.varyingInfos);try{for(l.s();!(s=l.n()).done;){var u=s.value;if(u){var c=qk(u);n["out ".concat(c)]=Qc({},r,JSON.stringify(u.accessor))}}}catch(f){l.e(f)}finally{l.f()}return n}(this.vertexArray.configuration);jx.table(e,i)(),jx.table(e,a)(),jx.table(e+1,f)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),jx.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}}]),e}();function QP(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return JP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JP(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function JP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var eC,tC=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Np(this,e),this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return Tf(e,[{key:"setupResources",value:function(e){var t,n=QP(this.bindings);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._setupTransformFeedback(r,e)}}catch(i){n.e(i)}finally{n.f()}}},{key:"updateModelProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.varyings;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}},{key:"getDrawOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.bindings[this.currentIndex],n=t.sourceBuffers,r=t.transformFeedback,i=Object.assign({},n,e.attributes);return{attributes:i,transformFeedback:r}}},{key:"swap",value:function(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e)}},{key:"getBuffer",value:function(e){var t=this.bindings[this.currentIndex].feedbackBuffers,n=e?t[e]:null;return n?n instanceof A_?n:n.buffer:null}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.varyingName,n=this.getBuffer(t);return n?n.getData():null}},{key:"delete",value:function(){for(var e in this.resources)this.resources[e].delete()}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&t_(Fx(this.gl))}},{key:"_getFeedbackBuffers",value:function(e){var t=e.sourceBuffers,n=void 0===t?{}:t,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(var i in this.feedbackMap){var o=this.feedbackMap[i];i in n&&(r[o]=i)}for(var a in Object.assign(r,e.feedbackBuffers),r){var s=r[a];if("string"==typeof s){var l=n[s],u=l.byteLength,c=l.usage,f=l.accessor;r[a]=this._createNewBuffer(a,{byteLength:u,usage:c,accessor:f})}}return r}},{key:"_setupBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sourceBuffers,n=void 0===t?null:t;Object.assign(this.feedbackMap,e.feedbackMap);var r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}},{key:"_setupTransformFeedback",value:function(e,t){var n=t.model.program;e.transformFeedback=new Ok(this.gl,{program:n,buffers:e.feedbackBuffers})}},{key:"_updateBindings",value:function(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){var t=this._swapBuffers(this.bindings[this.currentIndex]),n=t.sourceBuffers,r=t.feedbackBuffers,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}},{key:"_updateBinding",value:function(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}},{key:"_swapBuffers",value:function(e){if(!this.feedbackMap)return null;var t=Object.assign({},e.sourceBuffers),n=Object.assign({},e.feedbackBuffers);for(var r in this.feedbackMap){var i=this.feedbackMap[r];t[r]=e.feedbackBuffers[i],n[i]=e.sourceBuffers[r],t_(n[i]instanceof A_)}return{sourceBuffers:t,feedbackBuffers:n}}},{key:"_createNewBuffer",value:function(e,t){var n=new A_(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=n,n}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}}]),e}();function nC(e){var t=e.vs,n=e.sourceTextureMap,r=e.targetTextureVarying,i=e.targetTexture,o=Object.keys(n).length,a=null,s={},l=t,u={};if(o>0||r){var c=l.split("\n"),f=c.slice();if(c.forEach((function(e,t,i){if(o>0){var l=function(e,t){var n={},r=function(e){return US(e,["attribute","in"])}(e);if(!r)return null;var i=r.type,o=r.name;if(o&&t[o]){var a="// ".concat(e," => Replaced by Transform with a sampler"),s=function(e){var t="".concat("transform_uSampler_").concat(e),n="".concat("transform_uSize_").concat(e),r="  uniform sampler2D ".concat(t,";\n  uniform vec2 ").concat(n,";");return{samplerName:t,sizeName:n,uniformDeclerations:r}}(o),l=s.samplerName,u=s.sizeName,c=s.uniformDeclerations,f=function(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Zk(!1),null}}(i),h="  ".concat(i," ").concat(o," = transform_getInput(").concat(l,", ").concat(u,").").concat(f,";\n");return n[l]=o,{updatedLine:a,inject:{"vs:#decl":c,"vs:#main-start":h},samplerTextureMap:n}}return null}(e,n);if(l){var c=l.updatedLine,h=l.inject;f[t]=c,u=xS([u,h]),Object.assign(s,l.samplerTextureMap),o--}}r&&!a&&(a=function(e,t){var n=US(e,["varying","out"]);if(!n)return null;return n.name===t?n.type:null}(e,r))})),r){t_(i);var h="".concat("transform_uSize_").concat(r),d="uniform vec2 ".concat(h,";\n"),p="     vec2 ".concat("transform_position"," = transform_getPos(").concat(h,");\n     gl_Position = vec4(").concat("transform_position",", 0, 1.);\n");u=xS([u,{"vs:#decl":d,"vs:#main-start":p}])}l=f.join("\n")}return{vs:l,targetTextureType:a,inject:u,samplerTextureMap:s}}function rC(e){var t,n,r=e.sourceTextureMap,i=e.targetTextureVarying,o=e.targetTexture,a={};for(var s in i&&(t=o.width,n=o.height,a["".concat("transform_uSize_").concat(i)]=[t,n]),r){var l=r[s];t=l.width,n=l.height,a["".concat("transform_uSize_").concat(s)]=[t,n]}return a}var iC=(Qc(eC={},10241,9728),Qc(eC,10240,9728),Qc(eC,10242,33071),Qc(eC,10243,33071),eC),oC=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Np(this,e),this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return Tf(e,[{key:"updateModelProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._processVertexShader(e);return Object.assign({},e,t)}},{key:"getDrawOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.bindings[this.currentIndex],n=t.sourceBuffers,r=t.sourceTextures,i=t.framebuffer,o=t.targetTexture,a=Object.assign({},n,e.attributes),s=Object.assign({},e.uniforms),l=Object.assign({},e.parameters),u=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){for(var c in a.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var f=this.samplerTextureMap[c];s[c]=r[f]}this._setSourceTextureParameters();var h=rC({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(s,h)}return this.hasTargetTexture&&(u=!1,l.viewport=[0,0,i.width,i.height]),{attributes:a,framebuffer:i,uniforms:s,discard:u,parameters:l}}},{key:"swap",value:function(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(e)}},{key:"getTargetTexture",value:function(){return this.bindings[this.currentIndex].targetTexture}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.packed,n=void 0!==t&&t,r=this.bindings[this.currentIndex].framebuffer,i=iw(r);if(!n)return i;for(var o=i.constructor,a=GS(this.targetTextureType),s=new o(i.length*a/4),l=0,u=0;u<i.length;u+=4)for(var c=0;c<a;c++)s[l++]=i[u+c];return s}},{key:"getFramebuffer",value:function(){return this.bindings[this.currentIndex].framebuffer}},{key:"delete",value:function(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e._targetTextureVarying,n=e._swapTexture;this._swapTexture=n,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}},{key:"_createTargetTexture",value:function(e){var t=e.sourceTextures,n=e.textureOrReference;if(n instanceof U_)return n;var r=t[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}},{key:"_setupTextures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sourceBuffers,n=e._sourceTextures,r=void 0===n?{}:n,i=e._targetTexture,o=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:r,targetTexture:o}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}},{key:"_updateElementIDBuffer",value:function(e){if(!("number"!=typeof e||this.elementCount>=e)){var t=new Float32Array(e);t.forEach((function(e,t,n){n[t]=t})),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new A_(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}}},{key:"_updateBindings",value:function(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){var t=this._swapTextures(this.bindings[this.currentIndex]),n=t.sourceTextures,r=t.targetTexture,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}},{key:"_updateBinding",value:function(e,t){var n=t.sourceBuffers,r=t.sourceTextures,i=t.targetTexture;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,n),i){e.targetTexture=i;var o=i.width,a=i.height,s=e.framebuffer;s?(s.update({attachments:Qc({},36064,i),resizeAttachments:!1}),s.resize({width:o,height:a})):e.framebuffer=new Fw(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:Qc({},36064,i)})}return e}},{key:"_setSourceTextureParameters",value:function(){var e=this.currentIndex,t=this.bindings[e].sourceTextures;for(var n in t)t[n].setParameters(iC)}},{key:"_swapTextures",value:function(e){if(!this._swapTexture)return null;var t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}},{key:"_createNewTexture",value:function(e){var t,n=zw(e,{parameters:(t={},Qc(t,10241,9728),Qc(t,10240,9728),Qc(t,10242,33071),Qc(t,10243,33071),t),pixelStore:Qc({},37440,!1)});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}},{key:"_processVertexShader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.bindings[this.currentIndex],n=t.sourceTextures,r=t.targetTexture,i=nC({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),o=i.vs,a=i.uniforms,s=i.targetTextureType,l=i.inject,u=i.samplerTextureMap,c=xS([e.inject||{},l]);this.targetTextureType=s,this.samplerTextureMap=u;var f=e._fs||WS({version:Gw(o),input:this.targetTextureVarying,inputType:s,output:"transform_output"}),h=this.hasSourceTextures||this.targetTextureVarying?[BP].concat(e.modules||[]):e.modules;return{vs:o,fs:f,modules:h,uniforms:a,inject:c}}}]),e}();function aC(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return sC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sC(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function sC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lC=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Np(this,e),this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}return Tf(e,null,[{key:"isSupported",value:function(e){return Fx(e)}}]),Tf(e,[{key:"delete",value:function(){var e=this.model,t=this.bufferTransform,n=this.textureTransform;e&&e.delete(),t&&t.delete(),n&&n.delete()}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRenderTarget,n=void 0===t||t,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}},{key:"swap",value:function(){var e,t=!1,n=aC([this.bufferTransform,this.textureTransform].filter(Boolean));try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t||r.swap()}}catch(i){n.e(i)}finally{n.f()}t_(t,"Nothing to swap")}},{key:"getBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}},{key:"getData",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=aC(n);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=i.getData(t);if(o)return o}}catch(a){r.e(a)}finally{r.f()}return null}},{key:"getFramebuffer",value:function(){return this.textureTransform&&this.textureTransform.getFramebuffer()}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);var t,n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=aC(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.update(e)}}catch(o){r.e(o)}finally{r.f()}}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.gl;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new KP(t,Object.assign({},e,{fs:e.fs||WS({version:Gw(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}},{key:"_updateModelProps",value:function(e){var t,n=Object.assign({},e),r=aC([this.bufferTransform,this.textureTransform].filter(Boolean));try{for(r.s();!(t=r.n()).done;){n=t.value.updateModelProps(n)}}catch(i){r.e(i)}finally{r.f()}return n}},{key:"_buildResourceTransforms",value:function(e,t){(function(e){if(!o_(e.feedbackBuffers)||!o_(e.feedbackMap)||e.varyings&&e.varyings.length>0)return!0;return!1})(t)&&(this.bufferTransform=new tC(e,t)),function(e){if(!o_(e._sourceTextures)||e._targetTexture||e._targetTextureVarying)return!0;return!1}(t)&&(this.textureTransform=new oC(e,t)),t_(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}},{key:"_updateDrawOptions",value:function(e){var t,n=Object.assign({},e),r=aC([this.bufferTransform,this.textureTransform].filter(Boolean));try{for(r.s();!(t=r.n()).done;){var i=t.value;n=Object.assign(n,i.getDrawOptions(n))}}catch(o){r.e(o)}finally{r.f()}return n}}]),e}();function uC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var cC={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},fC=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Np(this,e);var n=t.id,r=void 0===n?r_("geometry"):n,i=t.drawMode,o=void 0===i?cC.TRIANGLES:i,a=t.attributes,s=void 0===a?{}:a,l=t.indices,u=void 0===l?null:l,c=t.vertexCount,f=void 0===c?null:c;this.id=r,this.drawMode=0|o,this.attributes={},this.userData={},this._setAttributes(s,u),this.vertexCount=f||this._calculateVertexCount(this.attributes,this.indices)}return Tf(e,null,[{key:"DRAW_MODE",get:function(){return cC}}]),Tf(e,[{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getAttributes",value:function(){return this.indices?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uC(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function(e){return"Geometry ".concat(this.id," attribute ").concat(e)}},{key:"_setAttributes",value:function(e,t){for(var n in t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t),e){var r=e[n];r=ArrayBuffer.isView(r)?{value:r}:r,t_(ArrayBuffer.isView(r.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),"POSITION"!==n&&"positions"!==n||r.size||(r.size=3),"indices"===n?(t_(!this.indices),this.indices=r):this.attributes[n]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}},{key:"_calculateVertexCount",value:function(e,t){if(t)return t.value.length;var n=1/0;for(var r in e){var i=e[r],o=i.value,a=i.size;!i.constant&&o&&a>=1&&(n=Math.min(n,o.length/a))}return t_(Number.isFinite(n)),n}},{key:"mode",get:function(){return this.drawMode}}]),e}();function hC(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return dC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dC(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function dC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pC=1,vC=1,mC=function(){function e(){Np(this,e),this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}return Tf(e,[{key:"addChannel",value:function(e){var t=e.delay,n=void 0===t?0:t,r=e.duration,i=void 0===r?Number.POSITIVE_INFINITY:r,o=e.rate,a=void 0===o?1:o,s=e.repeat,l=pC++,u={time:0,delay:n,duration:i,rate:a,repeat:void 0===s?1:s};return this._setChannelTime(u,this.time),this.channels.set(l,u),l}},{key:"removeChannel",value:function(e){this.channels.delete(e);var t,n=hC(this.animations);try{for(n.s();!(t=n.n()).done;){var r=ob(t.value,2),i=r[0];r[1].channel===e&&this.detachAnimation(i)}}catch(o){n.e(o)}finally{n.f()}}},{key:"isFinished",value:function(e){var t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}},{key:"getTime",value:function(e){if(void 0===e)return this.time;var t=this.channels.get(e);return void 0===t?-1:t.time}},{key:"setTime",value:function(e){this.time=Math.max(0,e);var t,n=hC(this.channels.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;this._setChannelTime(r,this.time)}}catch(u){n.e(u)}finally{n.f()}var i,o=hC(this.animations.values());try{for(o.s();!(i=o.n()).done;){var a=i.value,s=a.animation,l=a.channel;s.setTime(this.getTime(l))}}catch(u){o.e(u)}finally{o.f()}}},{key:"play",value:function(){this.playing=!0}},{key:"pause",value:function(){this.playing=!1,this.lastEngineTime=-1}},{key:"reset",value:function(){this.setTime(0)}},{key:"attachAnimation",value:function(e,t){var n=vC++;return this.animations.set(n,{animation:e,channel:t}),e.setTime(this.getTime(t)),n}},{key:"detachAnimation",value:function(e){this.animations.delete(e)}},{key:"update",value:function(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}},{key:"_setChannelTime",value:function(e,t){var n=t-e.delay;n>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,n)%e.duration,e.time*=e.rate)}}]),e}(),gC={name:"geometry",vs:"\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry;\n",fs:"\n#define SMOOTH_EDGE_RADIUS 0.5\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n"},yC={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(yC,"IDENTITY",{get:function(){return Ox.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0}});var xC={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},bC={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},_C=Object.keys(yC).map((function(e){return"const int COORDINATE_SYSTEM_".concat(e," = ").concat(yC[e],";")})).join(""),wC=Object.keys(xC).map((function(e){return"const int PROJECTION_MODE_".concat(e," = ").concat(xC[e],";")})).join(""),kC="".concat(_C,"\n").concat(wC,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    dy = clamp(dy, -1., 1.);\n  }\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  );\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy) * WORLD_SCALE,\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n");function SC(e,t){if(e===t)return!0;if(Array.isArray(e)){var n=e.length;if(!t||t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return!1}function EC(e){var t,n={};return function(r){for(var i in r)if(!SC(r[i],n[i])){t=e(r),n=r;break}return t}}function PC(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}var CC=[0,0,0,0],AC=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],OC=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],TC=[0,0,0],MC=[0,0,0],RC=EC((function(e){var t=e.viewport,n=e.devicePixelRatio,r=e.coordinateSystem,i=e.coordinateOrigin,o=function(e,t,n){var r=e.viewMatrixUncentered,i=e.projectionMatrix,o=e.viewMatrix,a=e.viewProjectionMatrix,s=CC,l=e.cameraPosition,u=IC(e,t,n),c=u.geospatialOrigin,f=u.shaderCoordinateOrigin;if(u.offsetMode){var h=e.projectPosition(c||f);l=[l[0]-h[0],l[1]-h[1],l[2]-h[2]],h[3]=1,s=tP([],h,a),a=qE([],i,o=r||o),a=qE([],a,AC)}return{viewMatrix:o,viewProjectionMatrix:a,projectionCenter:s,cameraPosCommon:l,shaderCoordinateOrigin:f,geospatialOrigin:c}}(t,r,i),a=o.projectionCenter,s=o.viewProjectionMatrix,l=o.cameraPosCommon,u=o.shaderCoordinateOrigin,c=o.geospatialOrigin,f=t.getDistanceScales(),h=[t.width*n,t.height*n],d={project_uCoordinateSystem:r,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:u,project_uCenter:a,project_uViewportSize:h,project_uDevicePixelRatio:n,project_uFocalDistance:t.focalDistance||1,project_uCommonUnitsPerMeter:f.unitsPerMeter,project_uCommonUnitsPerWorldUnit:f.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:TC,project_uScale:t.scale,project_uViewProjectionMatrix:s,project_uCameraPosition:l};if(c){var p=t.getDistanceScales(c);switch(r){case yC.METER_OFFSETS:d.project_uCommonUnitsPerWorldUnit=p.unitsPerMeter,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerMeter2;break;case yC.LNGLAT:case yC.LNGLAT_OFFSETS:d.project_uCommonUnitsPerWorldUnit=p.unitsPerDegree,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerDegree2;break;case yC.CARTESIAN:d.project_uCommonUnitsPerWorldUnit=[1,1,p.unitsPerMeter[2]],d.project_uCommonUnitsPerWorldUnit2=[0,0,p.unitsPerMeter2[2]]}}return d}));function IC(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:MC,i=r,o=!0;switch(n=t===yC.LNGLAT_OFFSETS||t===yC.METER_OFFSETS?r:e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case xC.WEB_MERCATOR:t!==yC.LNGLAT&&t!==yC.CARTESIAN||(o=!1);break;case xC.WEB_MERCATOR_AUTO_OFFSET:t===yC.LNGLAT?i=n:t===yC.CARTESIAN&&(i=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],n=e.unprojectPosition(i),i[0]-=r[0],i[1]-=r[1],i[2]-=r[2]);break;case xC.IDENTITY:i=e.position.map(Math.fround);break;case xC.GLOBE:o=!1,n=null;break;default:o=!1}return i[2]=i[2]||0,{geospatialOrigin:n,shaderCoordinateOrigin:i,offsetMode:o}}function LC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewport,n=e.devicePixelRatio,r=void 0===n?1:n,i=e.modelMatrix,o=void 0===i?null:i,a=e.coordinateSystem,s=void 0===a?yC.DEFAULT:a,l=e.coordinateOrigin,u=e.autoWrapLongitude,c=void 0!==u&&u;e.projectionMode,e.positionOrigin,PC(t),s===yC.DEFAULT&&(s=t.isGeospatial?yC.LNGLAT:yC.CARTESIAN);var f=RC({viewport:t,devicePixelRatio:r,coordinateSystem:s,coordinateOrigin:l});return f.project_uWrapLongitude=c,f.project_uModelMatrix=o||OC,f}var jC={};var DC={name:"project",dependencies:[qS],vs:kC,getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jC;return e.viewport?LC(e):{}}},NC={name:"project32",dependencies:[DC],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"};function FC(e,t){var n=tP([],t,e);return eP(n,n,1/n[3]),n}function zC(e,t){var n=e%t;return n<0?t+n:n}function BC(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}var VC=Math.PI,UC=VC/4,WC=VC/180,GC=180/VC;function HC(e){return Math.pow(2,e)}function qC(e){var t=ob(e,2),n=t[0],r=t[1];BC(Number.isFinite(n)),BC(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");var i=r*WC;return[512*(n*WC+VC)/(2*VC),512*(VC+Math.log(Math.tan(UC+.5*i)))/(2*VC)]}function $C(e){var t=ob(e,2),n=t[0],r=t[1],i=n/512*(2*VC)-VC,o=2*(Math.atan(Math.exp(r/512*(2*VC)-VC))-UC);return[i*GC,o*GC]}function XC(e){var t=e.latitude;BC(Number.isFinite(t));var n,r=Math.cos(t*WC);return n=4003e4*r,Math.log2(n)-9}function YC(e){var t=e.latitude,n=e.longitude,r=e.highPrecision,i=void 0!==r&&r;BC(Number.isFinite(t)&&Number.isFinite(n));var o={},a=Math.cos(t*WC),s=512/360,l=s/a,u=512/4003e4/a;if(o.unitsPerMeter=[u,u,u],o.metersPerUnit=[1/u,1/u,1/u],o.unitsPerDegree=[s,l,u],o.degreesPerUnit=[.703125,1/l,1/u],i){var c=WC*Math.tan(t*WC)/a,f=s*c/2,h=512/4003e4*c,d=h/l*u;o.unitsPerDegree2=[0,f,h],o.unitsPerMeter2=[d,0,d]}return o}function ZC(e,t){var n=ob(e,3),r=n[0],i=n[1],o=n[2],a=ob(t,3),s=a[0],l=a[1],u=a[2],c=YC({longitude:r,latitude:i,highPrecision:!0}),f=c.unitsPerMeter,h=c.unitsPerMeter2,d=qC(e);d[0]+=s*(f[0]+h[0]*l),d[1]+=l*(f[1]+h[1]*l);var p=$C(d),v=(o||0)+(u||0);return Number.isFinite(o)||Number.isFinite(u)?[p[0],p[1],v]:p}function KC(e){var t=e.height,n=e.pitch,r=e.bearing,i=e.altitude,o=e.scale,a=e.center,s=void 0===a?null:a,l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return $E(l,l,[0,0,-i]),YE(l,l,-n*WC),ZE(l,l,r*WC),XE(l,l,[o/=t,o,o]),s&&$E(l,l,function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}([],s)),l}function QC(e){var t=e.width,n=e.height,r=e.altitude,i=void 0===r?1.5:r,o=e.pitch,a=void 0===o?0:o,s=e.nearZMultiplier,l=void 0===s?1:s,u=e.farZMultiplier,c=void 0===u?1:u,f=a*WC,h=Math.atan(.5/i),d=Math.sin(h)*i/Math.sin(Math.min(Math.max(Math.PI/2-f-h,.01),Math.PI-.01));return{fov:2*h,aspect:t/n,focalDistance:i,near:l,far:(Math.sin(f)*d+i)*c}}function JC(e){var t=e.width,n=e.height,r=e.pitch,i=QC({width:t,height:n,altitude:e.altitude,pitch:r,nearZMultiplier:e.nearZMultiplier,farZMultiplier:e.farZMultiplier});return KE([],i.fov,i.aspect,i.near,i.far)}function eA(e,t){var n=ob(e,3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o;return BC(Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(a)),FC(t,[r,i,a,1])}function tA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=ob(e,3),i=r[0],o=r[1],a=r[2];if(BC(Number.isFinite(i)&&Number.isFinite(o),"invalid pixel coordinate"),Number.isFinite(a)){var s=FC(t,[i,o,a,1]);return s}var l=FC(t,[i,o,0,1]),u=FC(t,[i,o,1,1]),c=l[2],f=u[2],h=c===f?0:((n||0)-c)/(f-c);return mE([],l,u,h)}function nA(e){var t=e.width,n=e.height,r=e.bounds,i=e.minExtent,o=void 0===i?0:i,a=e.maxZoom,s=void 0===a?24:a,l=e.padding,u=void 0===l?0:l,c=e.offset,f=void 0===c?[0,0]:c,h=ob(r,2),d=ob(h[0],2),p=d[0],v=d[1],m=ob(h[1],2),g=m[0],y=m[1];if(Number.isFinite(u)){u={top:u,bottom:u,left:u,right:u}}else BC(Number.isFinite(u.top)&&Number.isFinite(u.bottom)&&Number.isFinite(u.left)&&Number.isFinite(u.right));var x=new aA({width:t,height:n,longitude:0,latitude:0,zoom:0}),b=x.project([p,y]),_=x.project([g,v]),w=[Math.max(Math.abs(_[0]-b[0]),o),Math.max(Math.abs(_[1]-b[1]),o)],k=[t-u.left-u.right-2*Math.abs(f[0]),n-u.top-u.bottom-2*Math.abs(f[1])];BC(k[0]>0&&k[1]>0);var S=k[0]/w[0],E=k[1]/w[1],P=(u.right-u.left)/2/S,C=(u.bottom-u.top)/2/E,A=[(_[0]+b[0])/2+P,(_[1]+b[1])/2+C],O=x.unproject(A),T=Math.min(s,x.zoom+Math.log2(Math.abs(Math.min(S,E))));return BC(Number.isFinite(T)),{longitude:O[0],latitude:O[1],zoom:T}}var rA=Math.PI/180;function iA(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=e.width,o=e.height,a=e.unproject,s={targetZ:r},l=a([0,o],s),u=a([i,o],s),c=Math.atan(.5/e.altitude),f=(90-e.pitch)*rA;return c>f-.01?(t=oA(e,0,r),n=oA(e,i,r)):(t=a([0,0],s),n=a([i,0],s)),[l,u,n,t]}function oA(e,t,n){var r=e.pixelUnprojectionMatrix,i=FC(r,[t,0,1,1]),o=FC(r,[t,e.height,1,1]),a=$C(mE([],i,o,(n*e.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2])));return a[2]=n,a}var aA=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:1,height:1},n=t.width,r=t.height,i=t.latitude,o=void 0===i?0:i,a=t.longitude,s=void 0===a?0:a,l=t.zoom,u=void 0===l?0:l,c=t.pitch,f=void 0===c?0:c,h=t.bearing,d=void 0===h?0:h,p=t.altitude,v=void 0===p?1.5:p,m=t.nearZMultiplier,g=void 0===m?.02:m,y=t.farZMultiplier,x=void 0===y?1.01:y;Np(this,e),n=n||1,r=r||1;var b=HC(u);v=Math.max(.75,v);var _=qC([s,o]);_[2]=0,this.projectionMatrix=JC({width:n,height:r,pitch:f,altitude:v,nearZMultiplier:g,farZMultiplier:x}),this.viewMatrix=KC({height:r,scale:b,center:_,pitch:f,bearing:d,altitude:v}),this.width=n,this.height=r,this.scale=b,this.latitude=o,this.longitude=s,this.zoom=u,this.pitch=f,this.bearing=d,this.altitude=v,this.center=_,this.distanceScales=YC(this),this._initMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),Object.freeze(this)}return Tf(e,[{key:"_initMatrices",value:function(){var e=this.width,t=this.height,n=this.projectionMatrix,r=this.viewMatrix,i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];qE(i,i,n),qE(i,i,r),this.viewProjectionMatrix=i;var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];XE(o,o,[e/2,-t/2,1]),$E(o,o,[1,-1,0]),qE(o,o,i);var a=HE([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o);if(!a)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=o,this.pixelUnprojectionMatrix=a}},{key:"equals",value:function(t){return t instanceof e&&(t.width===this.width&&t.height===this.height&&JE(t.projectionMatrix,this.projectionMatrix)&&JE(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=this.projectPosition(e),o=eA(i,this.pixelProjectionMatrix),a=ob(o,2),s=a[0],l=a[1],u=r?l:this.height-l;return 2===e.length?[s,u]:[s,u,o[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=t.targetZ,o=void 0===i?void 0:i,a=ob(e,3),s=a[0],l=a[1],u=a[2],c=r?l:this.height-l,f=o&&o*this.distanceScales.unitsPerMeter[2],h=tA([s,c,u],this.pixelUnprojectionMatrix,f),d=this.unprojectPosition(h),p=ob(d,3),v=p[0],m=p[1],g=p[2];return Number.isFinite(u)?[v,m,g]:Number.isFinite(o)?[v,m,o]:[v,m]}},{key:"projectPosition",value:function(e){var t=ob(qC(e),2);return[t[0],t[1],(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function(e){var t=ob($C(e),2);return[t[0],t[1],(e[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function(e){return qC(e)}},{key:"unprojectFlat",value:function(e){return $C(e)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,n=tA(e.pos,this.pixelUnprojectionMatrix),r=pE([],qC(t),vE([],n));return $C(pE([],this.center,r))}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,n=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"fitBounds",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=nA(Object.assign({width:r,height:i,bounds:t},n)),a=o.longitude,s=o.latitude,l=o.zoom;return new e({width:r,height:i,longitude:a,latitude:s,zoom:l})}},{key:"getBounds",value:function(e){var t=this.getBoundingRegion(e),n=Math.min.apply(Math,yd(t.map((function(e){return e[0]})))),r=Math.max.apply(Math,yd(t.map((function(e){return e[0]}))));return[[n,Math.min.apply(Math,yd(t.map((function(e){return e[1]}))))],[r,Math.max.apply(Math,yd(t.map((function(e){return e[1]}))))]]}},{key:"getBoundingRegion",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return iA(this,e.z||0)}}]),e}();function sA(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return lA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lA(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function lA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var uA=EC((function(e){var t=e.viewport,n=e.center;return new lP(t.viewProjectionMatrix).invert().transform(n)})),cA=EC((function(e){var t,n=e.viewport,r=e.shadowMatrices,i=[],o=n.pixelUnprojectionMatrix,a=n.isGeospatial?void 0:1,s=[[0,0,a],[n.width,0,a],[0,n.height,a],[n.width,n.height,a],[0,0,-1],[n.width,0,-1],[0,n.height,-1],[n.width,n.height,-1]].map((function(e){return function(e,t){var n=ob(e,3),r=n[0],i=n[1],o=n[2],a=tA([r,i,o],t);if(Number.isFinite(o))return a;return[a[0],a[1],0]}(e,o)})),l=sA(r);try{var u=function(){var e=t.value,r=e.clone().translate(new LE(n.center).negate()),o=s.map((function(e){return r.transform(e)})),a=(new lP).ortho({left:Math.min.apply(Math,yd(o.map((function(e){return e[0]})))),right:Math.max.apply(Math,yd(o.map((function(e){return e[0]})))),bottom:Math.min.apply(Math,yd(o.map((function(e){return e[1]})))),top:Math.max.apply(Math,yd(o.map((function(e){return e[1]})))),near:Math.min.apply(Math,yd(o.map((function(e){return-e[2]})))),far:Math.max.apply(Math,yd(o.map((function(e){return-e[2]}))))});i.push(a.multiplyRight(e))};for(l.s();!(t=l.n()).done;)u()}catch(c){l.e(c)}finally{l.f()}return i})),fA=[0,0,0,1],hA=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function dA(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:!!e.shadowMaps&&e.shadowMaps.length>0,shadow_uColor:e.shadowColor||fA,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},r=uA({viewport:e.viewport,center:t.project_uCenter}),i=[],o=cA({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice(),a=0;a<e.shadowMatrices.length;a++){var s=o[a],l=s.clone().translate(new LE(e.viewport.center).negate());t.project_uCoordinateSystem===yC.LNGLAT&&t.project_uProjectionMode===xC.WEB_MERCATOR?(o[a]=l,i[a]=r):(o[a]=s.clone().multiplyRight(hA),i[a]=l.transform(r))}for(var u=0;u<o.length;u++)n["shadow_uViewProjectionMatrices[".concat(u,"]")]=o[u],n["shadow_uProjectCenters[".concat(u,"]")]=i[u],e.shadowMaps&&e.shadowMaps.length>0?n["shadow_uShadowMap".concat(u)]=e.shadowMaps[u]:n["shadow_uShadowMap".concat(u)]=e.dummyShadowMap;return n}var pA={name:"shadow",dependencies:[DC],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0){var n={},r=e.shadowEnabled,i=void 0===r||r;return i&&e.shadowMatrices&&e.shadowMatrices.length>0?Object.assign(n,dA(e,t)):Object.assign(n,{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}),n}return{}}},vA=Object.assign({inject:{"vs:DECKGL_FILTER_COLOR":"\n    picking_setPickingColor(geometry.pickingColor);\n    // for picking depth values\n    picking_setPickingAttribute(geometry.position.z);\n    ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n    // use highlight color if this fragment belongs to the selected object.\n    color = picking_filterHighlightColor(color);\n\n    // use picking color if rendering to picking FBO.\n    color = picking_filterPickingColor(color);\n      "}}},DP);function mA(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return gA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gA(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function gA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yA=[gC,DC],xA=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function bA(e){var t,n=WP.getDefaultProgramManager(e),r=mA(yA);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.addDefaultModule(i)}}catch(l){r.e(l)}finally{r.f()}var o,a=mA(xA);try{for(a.s();!(o=a.n()).done;){var s=o.value;n.addShaderHook(s)}}catch(l){a.e(l)}finally{a.f()}return n}var _A=[255,255,255],wA=0,kA=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Np(this,e);var n=t.color,r=void 0===n?_A:n,i=t.intensity,o=void 0===i?1:i;this.id=t.id||"ambient-".concat(wA++),this.color=r,this.intensity=o,this.type="ambient"},SA=[255,255,255],EA=[0,0,-1],PA=0,CA=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Np(this,e);var n=t.color,r=void 0===n?SA:n,i=t.intensity,o=void 0===i?1:i,a=t.direction,s=void 0===a?EA:a,l=t._shadow,u=void 0!==l&&l;this.id=t.id||"directional-".concat(PA++),this.color=r,this.intensity=o,this.type="directional",this.direction=new LE(s).normalize().toArray(),this.shadow=u}return Tf(e,[{key:"getProjectedLight",value:function(){return this}}]),e}(),AA=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Np(this,e);var n=t.id,r=void 0===n?"effect":n;this.id=r,this.props={},Object.assign(this.props,t)}return Tf(e,[{key:"preRender",value:function(){}},{key:"getModuleParameters",value:function(){}},{key:"cleanup",value:function(){}}]),e}(),OA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Np(this,e);var r=n.id,i=void 0===r?"pass":r;this.id=i,this.gl=t,this.props={},Object.assign(this.props,n)}return Tf(e,[{key:"setProps",value:function(e){Object.assign(this.props,e)}},{key:"render",value:function(){}},{key:"cleanup",value:function(){}}]),e}();function TA(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return MA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MA(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function MA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function RA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var IA=function(e){Xb(n,OA);var t=RA(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"render",value:function(e){return Cb(this.gl,{framebuffer:e.target}),this._drawLayers(e)}},{key:"_drawLayers",value:function(e){var t=e.viewports,n=e.views,r=e.onViewportActive,i=e.clearCanvas,o=void 0===i||i,a=this.gl;o&&function(e){var t=e.drawingBufferWidth,n=e.drawingBufferHeight;Cb(e,{viewport:[0,0,t,n]}),e.clear(16640)}(a);var s,l=[],u=TA(t);try{for(u.s();!(s=u.n()).done;){var c=s.value,f=c.viewport||c,h=n&&n[f.id];r(f);var d=this._getDrawLayerParams(f,e);e.view=h;var p,v=TA(f.subViewports||[f]);try{for(v.s();!(p=v.n()).done;){var m=p.value;e.viewport=m;var g=this._drawLayersInViewport(a,e,d);l.push(g)}}catch(y){v.e(y)}finally{v.f()}}}catch(y){u.e(y)}finally{u.f()}return l}},{key:"_getDrawLayerParams",value:function(e,t){for(var n=t.layers,r=t.pass,i=void 0===r?"unknown":r,o=t.layerFilter,a=t.effects,s=t.moduleParameters,l=[],u=LA(),c=0;c<n.length;c++){var f=n[c],h=this._shouldDrawLayer(f,e,i,o),d={shouldDrawLayer:h,layerRenderIndex:u(f,h)};h&&(d.moduleParameters=this._getModuleParameters(f,a,i,s),d.layerParameters=this.getLayerParameters(f,c)),l[c]=d}return l}},{key:"_drawLayersInViewport",value:function(e,t,n){var r=t.layers,i=t.onError,o=t.viewport,a=t.view,s=function(e,t){var n=t.viewport,r=e.canvas?e.canvas.clientHeight||e.canvas.height:100,i=n,o=Tb(e);return[i.x*o,(r-i.y-i.height)*o,i.width*o,i.height*o]}(e,{viewport:o});if(a&&a.props.clear){var l=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;Ob(e,{scissorTest:!0,scissor:s},(function(){return nw(e,l)}))}var u={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};Cb(e,{viewport:s});for(var c=0;c<r.length;c++){var f=r[c],h=n[c],d=h.shouldDrawLayer,p=h.layerRenderIndex,v=h.moduleParameters,m=h.layerParameters;if(d&&f.props.pickable&&u.pickableCount++,f.isComposite)u.compositeCount++;else if(d){u.visibleCount++,v.viewport=o;try{f.drawLayer({moduleParameters:v,uniforms:{layerIndex:p},parameters:m})}catch(g){i?i(g,f):Ox.error("error during drawing of ".concat(f),g)()}}}return u}},{key:"shouldDrawLayer",value:function(e){return!0}},{key:"getModuleParameters",value:function(e,t){return null}},{key:"getLayerParameters",value:function(e,t){return e.props.parameters}},{key:"_shouldDrawLayer",value:function(e,t,n,r){var i=this.shouldDrawLayer(e)&&e.props.visible;return i&&r&&(i=r({layer:e,viewport:t,isPicking:n.startsWith("picking"),renderPass:n})),i&&e.activateViewport(t),i}},{key:"_getModuleParameters",value:function(e,t,n,r){var i=Object.assign(Object.create(e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Tb(this.gl)});if(t){var o,a=TA(t);try{for(a.s();!(o=a.n()).done;){var s=o.value;Object.assign(i,s.getModuleParameters(e))}}catch(l){a.e(l)}finally{a.f()}}return Object.assign(i,this.getModuleParameters(e,t),r)}}]),n}();function LA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=function r(i,o){var a,s=i.props._offset,l=i.id,u=i.parent&&i.parent.id;if(u&&!(u in t)&&r(i.parent,!1),u in n){var c=n[u]=n[u]||LA(t[u],t);a=c(i,o),n[l]=c}else Number.isFinite(s)?(a=s+(t[u]||0),n[l]=null):a=e;return o&&a>=e&&(e=a+1),t[l]=a,a};return r}function jA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jA(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function NA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var FA=function(e){Xb(n,IA);var t=NA(n);function n(e,r){var i,o,a;return Np(this,n),(a=t.call(this,e,r)).shadowMap=new U_(e,{width:1,height:1,parameters:(i={},Qc(i,10241,9729),Qc(i,10240,9729),Qc(i,10242,33071),Qc(i,10243,33071),i)}),a.depthBuffer=new tw(e,{format:33189,width:1,height:1}),a.fbo=new Fw(e,{id:"shadowmap",width:1,height:1,attachments:(o={},Qc(o,36064,a.shadowMap),Qc(o,36096,a.depthBuffer),o)}),a}return Tf(n,[{key:"render",value:function(e){var t=this,r=this.fbo;Ob(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(function(){var i=e.viewports[0],o=Tb(t.gl),a=i.width*o,s=i.height*o;a===r.width&&s===r.height||r.resize({width:a,height:s}),Y_(Zb(n.prototype),"render",t).call(t,DA(DA({},e),{},{target:r,pass:"shadow"}))}))}},{key:"shouldDrawLayer",value:function(e){return!1!==e.props.shadowEnabled}},{key:"getModuleParameters",value:function(){return{drawToShadowMap:!0}}},{key:"delete",value:function(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}]),n}();function zA(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return BA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BA(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function BA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function VA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var UA={color:[255,255,255],intensity:1},WA=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],GA=[0,0,0,200/255],HA=function(e){Xb(n,AA);var t=VA(n);function n(e){var r;for(var i in Np(this,n),(r=t.call(this,e)).ambientLight=null,r.directionalLights=[],r.pointLights=[],r.shadowColor=GA,r.shadowPasses=[],r.shadowMaps=[],r.dummyShadowMap=null,r.shadow=!1,r.programManager=null,e){var o=e[i];switch(o.type){case"ambient":r.ambientLight=o;break;case"directional":r.directionalLights.push(o);break;case"point":r.pointLights.push(o)}}return r._applyDefaultLights(),r.shadow=r.directionalLights.some((function(e){return e.shadow})),r}return Tf(n,[{key:"preRender",value:function(e,t){var n=t.layers,r=t.layerFilter,i=t.viewports,o=t.onViewportActive,a=t.views;if(this.shadow){this.shadowMatrices=this._createLightMatrix(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=WP.getDefaultProgramManager(e),pA&&this.programManager.addDefaultModule(pA)),this.dummyShadowMap||(this.dummyShadowMap=new U_(e,{width:1,height:1}));for(var s=0;s<this.shadowPasses.length;s++){this.shadowPasses[s].render({layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:a,moduleParameters:{shadowLightId:s,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}},{key:"getModuleParameters",value:function(e){var t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((function(t){return t.getProjectedLight({layer:e})})),pointLights:this.pointLights.map((function(t){return t.getProjectedLight({layer:e})}))},t}},{key:"cleanup",value:function(){var e,t=zA(this.shadowPasses);try{for(t.s();!(e=t.n()).done;){e.value.delete()}}catch(n){t.e(n)}finally{t.f()}this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(pA),this.programManager=null)}},{key:"_createLightMatrix",value:function(){var e,t=[],n=zA(this.directionalLights);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=(new lP).lookAt({eye:new LE(r.direction).negate()});t.push(i)}}catch(o){n.e(o)}finally{n.f()}return t}},{key:"_createShadowPasses",value:function(e){for(var t=0;t<this.directionalLights.length;t++){var n=new FA(e);this.shadowPasses[t]=n,this.shadowMaps[t]=n.shadowMap}}},{key:"_applyDefaultLights",value:function(){var e=this.ambientLight,t=this.pointLights,n=this.directionalLights;e||0!==t.length||0!==n.length||(this.ambientLight=new kA(UA),this.directionalLights.push(new CA(WA[0]),new CA(WA[1])))}}]),n}(),qA=new(function(){function e(t){Np(this,e),this._pool=[],this.props={overAlloc:2,poolSize:100},this.setProps(t)}return Tf(e,[{key:"setProps",value:function(e){Object.assign(this.props,e)}},{key:"allocate",value:function(e,t,n){var r,i=n.size,o=void 0===i?1:i,a=n.type,s=n.padding,l=void 0===s?0:s,u=n.copy,c=void 0!==u&&u,f=n.initialize,h=void 0!==f&&f,d=n.maxCount,p=a||e&&e.constructor||Float32Array,v=t*o+l;if(ArrayBuffer.isView(e)){if(v<=e.length)return e;if(v*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new p(e.buffer,0,v)}d&&(r=d*o+l);var m=this._allocate(p,v,h,r);return e&&c?m.set(e):h||m.fill(0,0,4),this._release(e),m}},{key:"release",value:function(e){this._release(e)}},{key:"_allocate",value:function(e,t,n,r){var i=Math.max(Math.ceil(t*this.props.overAlloc),1);i>r&&(i=r);var o=this._pool,a=e.BYTES_PER_ELEMENT*i,s=o.findIndex((function(e){return e.byteLength>=a}));if(s>=0){var l=new e(o.splice(s,1)[0],0,i);return n&&l.fill(0),l}return new e(i)}},{key:"_release",value:function(e){if(ArrayBuffer.isView(e)){var t=this._pool,n=e.buffer,r=n.byteLength,i=t.findIndex((function(e){return e.byteLength>=r}));i<0?t.push(n):(i>0||t.length<this.props.poolSize)&&t.splice(i,0,n),t.length>this.props.poolSize&&t.shift()}}}]),e}());var $A,XA=new LE;function YA(e,t,n,r){XA.set(e,t,n);var i=XA.len();return{distance:r/i,normal:new LE(-e/i,-t/i,-n/i)}}function ZA(e,t){var n=t.size,r=void 0===n?1:n,i=t.startIndex,o=void 0===i?0:i,a=t.endIndex;Number.isFinite(a)||(a=e.length);var s=(a-o)/r;$A=qA.allocate($A,s,{type:Float32Array,size:2*r});for(var l,u=o,c=0;u<a;){for(var f=0;f<r;f++){var h=e[u++];$A[c+f]=h,$A[c+f+r]=(l=h)-Math.fround(l)}c+=2*r}return $A.subarray(0,s*r*2)}var KA=Math.PI/180,QA=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],JA=[0,0,0],eO={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]},tO=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Np(this,e);var n=t.id,r=void 0===n?null:n,i=t.x,o=void 0===i?0:i,a=t.y,s=void 0===a?0:a,l=t.width,u=void 0===l?1:l,c=t.height,f=void 0===c?1:c;this.id=r||this.constructor.displayName||"viewport",this.x=o,this.y=s,this.width=u||1,this.height=f||1,this._frustumPlanes={},this._initViewMatrix(t),this._initProjectionMatrix(t),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Tf(e,[{key:"equals",value:function(t){return t instanceof e&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&tE(t.projectionMatrix,this.projectionMatrix)&&tE(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=this.projectPosition(e),o=eA(i,this.pixelProjectionMatrix),a=ob(o,2),s=a[0],l=a[1],u=r?l:this.height-l;return 2===e.length?[s,u]:[s,u,o[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=t.targetZ,o=ob(e,3),a=o[0],s=o[1],l=o[2],u=r?s:this.height-s,c=i&&i*this.distanceScales.unitsPerMeter[2],f=tA([a,u,l],this.pixelUnprojectionMatrix,c),h=this.unprojectPosition(f),d=ob(h,3),p=d[0],v=d[1],m=d[2];return Number.isFinite(l)?[p,v,m]:Number.isFinite(i)?[p,v,i]:[p,v]}},{key:"projectPosition",value:function(e){var t=ob(this.projectFlat(e),2);return[t[0],t[1],(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function(e){var t=ob(this.unprojectFlat(e),2);return[t[0],t[1],(e[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function(e){return this.isGeospatial?qC(e):e}},{key:"unprojectFlat",value:function(e){return this.isGeospatial?$C(e):e}},{key:"getBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={targetZ:e.z||0},n=this.unproject([0,0],t),r=this.unproject([this.width,0],t),i=this.unproject([0,this.height],t),o=this.unproject([this.width,this.height],t);return[Math.min(n[0],r[0],i[0],o[0]),Math.min(n[1],r[1],i[1],o[1]),Math.max(n[0],r[0],i[0],o[0]),Math.max(n[1],r[1],i[1],o[1])]}},{key:"getDistanceScales",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?YC({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}},{key:"containsPixel",value:function(e){var t=e.x,n=e.y,r=e.width,i=void 0===r?1:r,o=e.height,a=void 0===o?1:o;return t<this.x+this.width&&this.x<t+i&&n<this.y+this.height&&this.y<n+a}},{key:"getFrustumPlanes",value:function(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,(e=this.viewProjectionMatrix,(t={}).left=YA(e[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),t.right=YA(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),t.bottom=YA(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),t.top=YA(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),t.near=YA(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),t.far=YA(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14]),t)),this._frustumPlanes;var e,t}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_createProjectionMatrix",value:function(e){var t=e.orthographic,n=e.fovyRadians,r=e.aspect,i=e.focalDistance,o=e.near,a=e.far;return t?(new lP).orthographic({fovy:n,aspect:r,focalDistance:i,near:o,far:a}):(new lP).perspective({fovy:n,aspect:r,near:o,far:a})}},{key:"_initViewMatrix",value:function(e){var t=e.viewMatrix,n=void 0===t?QA:t,r=e.longitude,i=void 0===r?null:r,o=e.latitude,a=void 0===o?null:o,s=e.zoom,l=void 0===s?null:s,u=e.position,c=void 0===u?null:u,f=e.modelMatrix,h=void 0===f?null:f,d=e.focalDistance,p=void 0===d?1:d,v=e.distanceScales,m=void 0===v?null:v;this.isGeospatial=Number.isFinite(a)&&Number.isFinite(i),this.zoom=l,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?XC({latitude:a})+Math.log2(p):0);var g=Math.pow(2,this.zoom);this.scale=g,this.distanceScales=this.isGeospatial?YC({latitude:a,longitude:i}):m||eO,this.focalDistance=p,this.distanceScales.metersPerUnit=new LE(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new LE(this.distanceScales.unitsPerMeter),this.position=JA,this.meterOffset=JA,c&&(this.position=c,this.modelMatrix=h,this.meterOffset=h?h.transformVector(c):c),this.isGeospatial?(this.longitude=i,this.latitude=a,this.center=this._getCenterInWorld({longitude:i,latitude:a})):this.center=c?this.projectPosition(c):[0,0,0],this.viewMatrixUncentered=n,this.viewMatrix=(new lP).multiplyRight(this.viewMatrixUncentered).translate(new LE(this.center||JA).negate())}},{key:"_getCenterInWorld",value:function(e){var t=e.longitude,n=e.latitude,r=this.meterOffset,i=this.distanceScales,o=new LE(this.projectPosition([t,n,0]));if(r){var a=new LE(r).scale(i.unitsPerMeter);o.add(a)}return o}},{key:"_initProjectionMatrix",value:function(e){var t=e.projectionMatrix,n=void 0===t?null:t,r=e.orthographic,i=void 0!==r&&r,o=e.fovyRadians,a=e.fovy,s=void 0===a?75:a,l=e.near,u=void 0===l?.1:l,c=e.far,f=void 0===c?1e3:c,h=e.focalDistance,d=void 0===h?1:h;this.projectionMatrix=n||this._createProjectionMatrix({orthographic:i,fovyRadians:o||s*KA,aspect:this.width/this.height,focalDistance:d,near:u,far:f})}},{key:"_initPixelMatrices",value:function(){var e,t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];qE(t,t,this.projectionMatrix),qE(t,t,this.viewMatrix),this.viewProjectionMatrix=t,this.viewMatrixInverse=HE([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=[(e=this.viewMatrixInverse)[12],e[13],e[14]];var n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];XE(n,n,[this.width/2,-this.height/2,1]),$E(n,n,[1,-1,0]),qE(r,n,this.viewProjectionMatrix),this.pixelProjectionMatrix=r,this.viewportMatrix=n,this.pixelUnprojectionMatrix=HE([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Ox.warn("Pixel project matrix not invertible")()}},{key:"metersPerPixel",get:function(){return this.distanceScales.metersPerUnit[2]/this.scale}},{key:"projectionMode",get:function(){return this.isGeospatial?this.zoom<12?xC.WEB_MERCATOR:xC.WEB_MERCATOR_AUTO_OFFSET:xC.IDENTITY}}]),e}();function nO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nO(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}tO.displayName="Viewport";var oO=function(e){Xb(n,tO);var t=iO(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Np(this,n);var i=r.latitude,o=void 0===i?0:i,a=r.longitude,s=void 0===a?0:a,l=r.zoom,u=void 0===l?11:l,c=r.pitch,f=void 0===c?0:c,h=r.bearing,d=void 0===h?0:h,p=r.nearZMultiplier,v=void 0===p?.1:p,m=r.farZMultiplier,g=void 0===m?1.01:m,y=r.orthographic,x=void 0!==y&&y,b=r.repeat,_=void 0!==b&&b,w=r.worldOffset,k=void 0===w?0:w,S=r.width,E=r.height,P=r.altitude,C=void 0===P?1.5:P,A=Math.pow(2,u),O=QC({width:S=S||1,height:E=E||1,pitch:f,altitude:C=Math.max(.75,C),nearZMultiplier:v,farZMultiplier:g}),T=O.fov,M=O.aspect,R=O.focalDistance,I=O.near,L=O.far,j=KC({height:E,pitch:f,bearing:d,scale:A,altitude:C});if(k){var D=(new lP).translate([512*k,0,0]);j=D.multiplyLeft(j)}var N=Object.assign({},r,{width:S,height:E,viewMatrix:j,longitude:s,latitude:o,zoom:u,orthographic:x,fovyRadians:T,aspect:M,focalDistance:x?R:1,near:I,far:L});return(e=t.call(this,N)).latitude=o,e.longitude=s,e.zoom=u,e.pitch=f,e.bearing=d,e.altitude=C,e.orthographic=x,e._subViewports=_?[]:null,Object.freeze(If(e)),e}return Tf(n,[{key:"addMetersToLngLat",value:function(e,t){return ZC(e,t)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,n=tA(e.pos,this.pixelUnprojectionMatrix),r=pE([],this.projectFlat(t),vE([],n)),i=pE([],this.center,r);return this.unprojectFlat(i)}},{key:"getBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=iA(this,e.z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}},{key:"fitBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=nA(Object.assign({width:r,height:i,bounds:e},t)),a=o.longitude,s=o.latitude,l=o.zoom;return new n({width:r,height:i,longitude:a,latitude:s,zoom:l})}},{key:"subViewports",get:function(){if(this._subViewports&&!this._subViewports.length)for(var e=this.getBounds(),t=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360),i=t;i<=r;i++){var o=i?new n(rO(rO({},this),{},{worldOffset:i})):this;this._subViewports.push(o)}return this._subViewports}}]),n}();function aO(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.projectPosition(e);if(n&&t instanceof oO){var i=ob(e,3),o=i[0],a=i[1],s=i[2],l=void 0===s?0:s,u=t.getDistanceScales([o,a]);r[2]=l*u.unitsPerMeter[2]}return r}function sO(e,t){var n=t.viewport,r=t.modelMatrix,i=t.coordinateSystem,o=t.coordinateOrigin,a=t.offsetMode,s=ob(e,3),l=s[0],u=s[1],c=s[2],f=void 0===c?0:c;if(r){var h=ob(tP([],[l,u,f,1],r),3);l=h[0],u=h[1],f=h[2]}switch(i){case yC.LNGLAT:return aO([l,u,f],n,a);case yC.LNGLAT_OFFSETS:return aO([l+o[0],u+o[1],f+(o[2]||0)],n,a);case yC.METER_OFFSETS:return aO(ZC(o,[l,u,f]),n,a);case yC.CARTESIAN:default:return n.isGeospatial?[l+o[0],u+o[1],f+o[2]]:n.projectPosition([l,u,f])}}function lO(e,t){var n=function(e){var t=Object.assign({},e),n=e.coordinateSystem,r=e.viewport,i=e.coordinateOrigin,o=e.fromCoordinateSystem,a=e.fromCoordinateOrigin;return n===yC.DEFAULT&&(n=r.isGeospatial?yC.LNGLAT:yC.CARTESIAN),void 0===o&&(t.fromCoordinateSystem=n),void 0===a&&(t.fromCoordinateOrigin=i),t.coordinateSystem=n,t}(t),r=n.viewport,i=n.coordinateSystem,o=n.coordinateOrigin,a=n.modelMatrix,s=n.fromCoordinateSystem,l=n.fromCoordinateOrigin,u=IC(r,i,o),c=u.geospatialOrigin,f=u.shaderCoordinateOrigin,h=u.offsetMode,d=sO(e,{viewport:r,modelMatrix:a,coordinateSystem:s,coordinateOrigin:l,offsetMode:h});if(h){var p=r.projectPosition(c||f);OE(d,d,p)}return d}function uO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uO(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}oO.displayName="WebMercatorViewport";var fO=function(){function e(t,n){Np(this,e),this.opts=n,this.source=t}return Tf(e,[{key:"getValue",value:function(){var e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];var n=this.source.value,r=t.size,i=n;if(n&&n.length!==r){i=new Float32Array(r);for(var o=t.elementOffset||0,a=0;a<r;++a)i[a]=n[o+a]}return i}},{key:"getAccessor",value:function(){return cO(cO({},this.source.getAccessor()),this.opts)}},{key:"value",get:function(){return this.source.value}}]),e}();function hO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hO(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pO(e){return e.stride||e.size*e.bytesPerElement}function vO(e,t){t.offset&&Ox.removed("shaderAttribute.offset","vertexOffset, elementOffset")();var n=pO(e),r=("vertexOffset"in t?t.vertexOffset:e.vertexOffset||0)*n+(t.elementOffset||0)*e.bytesPerElement+(e.offset||0);return dO(dO({},t),{},{offset:r,stride:n})}var mO=function(){function e(t,n){Np(this,e),this.gl=t,this.id=n.id,this.size=n.size;var r=n.logicalType||n.type,i=5130===r,o=n.defaultValue;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0),n.defaultValue=o;var a=r;i?a=5126:!a&&n.isIndexed?a=t&&Rw(t,hw)?5125:5123:a||(a=5126),n.logicalType=r,n.type=a;var s=function(e){switch(e){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||a||5126);this.shaderAttributes={},this.doublePrecision=i,i&&!1===n.fp64&&(s=Float32Array),n.bytesPerElement=s.BYTES_PER_ELEMENT,this.defaultType=s,this.value=null,this.settings=n,this.state={externalBuffer:null,bufferAccessor:n,allocatedValue:null,constant:!1},this._buffer=null,this.setData(n)}return Tf(e,[{key:"delete",value:function(){this._buffer&&(this._buffer.delete(),this._buffer=null),qA.release(this.state.allocatedValue)}},{key:"getShaderAttributes",value:function(e,t){if(this.doublePrecision){var n={},r=this.value instanceof Float64Array,i=(o=this.getAccessor(),{high:a=vO(o,t||{}),low:dO(dO({},a),{},{offset:a.offset+4*o.size})});return n[e]=new fO(this,i.high),n["".concat(e,"64Low")]=r?new fO(this,i.low):new Float32Array(this.size),n}var o,a;if(t){var s=vO(this.getAccessor(),t);return Qc({},e,new fO(this,s))}return Qc({},e,this)}},{key:"getBuffer",value:function(){return this.state.constant?null:this.state.externalBuffer||this._buffer}},{key:"getValue",value:function(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}},{key:"getAccessor",value:function(){return this.state.bufferAccessor}},{key:"setData",value:function(e){var t=this.state;ArrayBuffer.isView(e)?e={value:e}:e instanceof A_&&(e={buffer:e});var n=dO(dO({},this.settings),e);if(t.bufferAccessor=n,e.constant){var r=e.value;if(r=this._normalizeValue(r,[],0),this.settings.normalized&&(r=this._normalizeConstant(r)),!(!t.constant||!this._areValuesEqual(r,this.value)))return!1;t.externalBuffer=null,t.constant=!0,this.value=r}else if(e.buffer){var i=e.buffer;t.externalBuffer=i,t.constant=!1,this.value=e.value;var o=e.value instanceof Float64Array;n.type=e.type||i.accessor.type,n.bytesPerElement=i.accessor.BYTES_PER_ELEMENT*(o?2:1),n.stride=pO(n)}else if(e.value){this._checkExternalBuffer(e);var a=e.value;t.externalBuffer=null,t.constant=!1,this.value=a,n.bytesPerElement=a.BYTES_PER_ELEMENT,n.stride=pO(n);var s=this.buffer,l=this.byteOffset;this.doublePrecision&&a instanceof Float64Array&&(a=ZA(a,n));var u=a.byteLength+l+2*n.stride;s.byteLength<u&&s.reallocate(u),s.setAccessor(null),s.subData({data:a,offset:l}),n.type=e.type||s.accessor.type}return!0}},{key:"updateSubBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.value,n=e.startOffset,r=void 0===n?0:n,i=e.endOffset;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?ZA(t,{size:this.size,startIndex:r,endIndex:i}):t.subarray(r,i),offset:r*t.BYTES_PER_ELEMENT+this.byteOffset})}},{key:"allocate",value:function(e){var t=e.numInstances,n=e.copy,r=void 0!==n&&n,i=this.state,o=i.allocatedValue,a=qA.allocate(o,t+1,{size:this.size,type:this.defaultType,copy:r});this.value=a;var s=this.buffer,l=this.byteOffset;return s.byteLength<a.byteLength+l&&(s.reallocate(a.byteLength+l),r&&o&&s.subData({data:o instanceof Float64Array?ZA(o,this):o,offset:l})),i.allocatedValue=a,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}},{key:"_checkExternalBuffer",value:function(e){var t=e.value;if(!e.constant&&t){var n=this.defaultType,r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));t instanceof n||!this.settings.normalized||"normalized"in e||Ox.warn("Attribute ".concat(this.id," is normalized"))()}}},{key:"_normalizeConstant",value:function(e){switch(this.settings.type){case 5120:return new Float32Array(e).map((function(e){return(e+128)/255*2-1}));case 5122:return new Float32Array(e).map((function(e){return(e+32768)/65535*2-1}));case 5121:return new Float32Array(e).map((function(e){return e/255}));case 5123:return new Float32Array(e).map((function(e){return e/65535}));default:return e}}},{key:"_normalizeValue",value:function(e,t,n){var r=this.settings,i=r.defaultValue,o=r.size;if(Number.isFinite(e))return t[n]=e,t;if(!e)return t[n]=i[0],t;switch(o){case 4:t[n+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:t[n+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:t[n+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:t[n+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:for(var a=o;--a>=0;)t[n+a]=Number.isFinite(e[a])?e[a]:i[a]}return t}},{key:"_areValuesEqual",value:function(e,t){if(!e||!t)return!1;for(var n=this.size,r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}},{key:"buffer",get:function(){if(!this._buffer){var e=this.settings,t=e.isIndexed,n=e.type;this._buffer=new A_(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:n}})}return this._buffer}},{key:"byteOffset",get:function(){var e=this.getAccessor();return e.vertexOffset?e.vertexOffset*pO(e):0}}]),e}(),gO=[],yO=[];function xO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=gO,i={index:-1,data:e,target:[]};return e?"function"==typeof e[Symbol.iterator]?r=e:e.length>0&&(yO.length=e.length,r=yO):r=gO,(t>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(t,n),i.index=t-1),{iterable:r,objectInfo:i}}function bO(e){return e&&e[Symbol.asyncIterator]}function _O(e,t){var n=t.size,r=t.stride,i=t.offset,o=t.startIndices,a=t.nested,s=e.BYTES_PER_ELEMENT,l=r?r/s:n,u=i?i/s:0,c=Math.floor((e.length-u)/l);return function(t,r){var i=r.index,s=r.target;if(!o){for(var f=i*l+u,h=0;h<n;h++)s[h]=e[f+h];return s}var d,p=o[i],v=o[i+1]||c;if(a){d=new Array(v-p);for(var m=p;m<v;m++){var g=m*l+u;s=new Array(n);for(var y=0;y<n;y++)s[y]=e[g+y];d[m-p]=s}}else if(l===n)d=e.subarray(p*n+u,v*n+u);else{d=new e.constructor((v-p)*n);for(var x=0,b=p;b<v;b++)for(var _=b*l+u,w=0;w<n;w++)d[x++]=e[_+w]}return d}}function wO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};return Array.isArray(e)?kO(e,t,[]):t(e)?[e]:[]}function kO(e,t,n){for(var r=-1;++r<e.length;){var i=e[r];Array.isArray(i)?kO(i,t,n):t(i)&&n.push(i)}return n}function SO(e){for(var t=e.target,n=e.source,r=e.start,i=void 0===r?0:r,o=e.count,a=void 0===o?1:o,s=n.length,l=a*s,u=0,c=i;u<s;u++)t[c++]=n[u];for(;u<l;)u<l-u?(t.copyWithin(i+u,i,i+u),u*=2):(t.copyWithin(i+u,i,i+l-u),u=l);return t}var EO=[],PO=[[0,1/0]];function CO(e,t){if(e===PO)return e;if(t[0]<0&&(t[0]=0),t[0]>=t[1])return e;for(var n=[],r=e.length,i=0,o=0;o<r;o++){var a=e[o];a[1]<t[0]?(n.push(a),i=o+1):a[0]>t[1]?n.push(a):t=[Math.min(a[0],t[0]),Math.max(a[1],t[1])]}return n.splice(i,0,t),n}function AO(e){var t=e.source,n=e.target,r=e.start,i=void 0===r?0:r,o=e.end,a=e.size,s=e.getData;o=o||n.length;var l=t.length,u=o-i;if(l>u)n.set(t.subarray(0,u),i);else if(n.set(t,i),s)for(var c=l;c<u;)for(var f=s(c,t),h=0;h<a;h++)n[i+c]=f[h]||0,c++}var OO={interpolation:{duration:0,easing:function(e){return e}},spring:{stiffness:.05,damping:.5}};function TO(e,t){return e?(Number.isFinite(e)&&(e={duration:e}),e.type=e.type||"interpolation",Object.assign({},OO[e.type],t,e)):null}function MO(e,t){return t.getBuffer()?[t.getBuffer(),{divisor:0,size:t.size,normalized:t.settings.normalized}]:t.value}function RO(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function IO(e){e.push(e.shift())}function LO(e,t){var n=e.doublePrecision,r=e.settings,i=e.value,o=e.size,a=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:t*o)*a}function jO(e){var t=e.buffer,n=e.numInstances,r=e.attribute,i=e.fromLength,o=e.fromStartIndices,a=e.getData,s=void 0===a?function(e){return e}:a,l=r.doublePrecision&&r.value instanceof Float64Array?2:1,u=r.size*l,c=r.byteOffset,f=r.startIndices,h=o&&f,d=LO(r,n),p=r.state.constant;if(h||!(i>=d)){var v=p?r.value:r.getBuffer().getData({srcByteOffset:c});if(r.settings.normalized&&!p){var m=s;s=function(e,t){return r._normalizeConstant(m(e,t))}}var g=p?function(e,t){return s(v,t)}:function(e,t){return s(v.subarray(e,e+u),t)},y=t.getData({length:i}),x=new Float32Array(d);!function(e){var t=e.source,n=e.target,r=e.size,i=e.getData,o=e.sourceStartIndices,a=e.targetStartIndices;if(!Array.isArray(a))return AO({source:t,target:n,size:r,getData:i}),n;for(var s=0,l=0,u=i&&function(e,t){return i(e+l,t)},c=Math.min(o.length,a.length),f=1;f<c;f++){var h=o[f]*r,d=a[f]*r;AO({source:t.subarray(s,h),target:n,start:l,end:d,size:r,getData:u}),s=h,l=d}l<n.length&&AO({source:[],target:n,start:l,size:r,getData:u})}({source:y,target:x,sourceStartIndices:o,targetStartIndices:f,size:u,getData:g}),t.byteLength<x.byteLength+c&&t.reallocate(x.byteLength+c),t.subData({data:x,offset:c})}}function DO(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return NO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NO(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function NO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function FO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var zO=function(e){Xb(n,mO);var t=FO(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Np(this,n),r=t.call(this,e,i);var o=i.transition,a=void 0!==o&&o,s=i.noAlloc,l=void 0!==s&&s,u=i.update,c=void 0===u?null:u,f=i.accessor,h=void 0===f?null:f,d=i.transform,p=void 0===d?null:d,v=i.startIndices,m=void 0===v?null:v;return Object.assign(r.settings,{transition:a,noAlloc:l,update:c||h&&r._autoUpdater,accessor:h,transform:p}),Object.assign(r.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:PO,startIndices:m}),Object.seal(r.settings),Object.seal(r.state),r._validateAttributeUpdaters(),r}return Tf(n,[{key:"needsUpdate",value:function(){return this.state.needsUpdate}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearChangedFlags,n=void 0!==t&&t,r=this.state.needsRedraw;return this.state.needsRedraw=r&&!n,r}},{key:"getUpdateTriggers",value:function(){var e=this.settings.accessor;return[this.id].concat("function"!=typeof e&&e||[])}},{key:"supportsTransition",value:function(){return Boolean(this.settings.transition)}},{key:"getTransitionSetting",value:function(e){if(!e||!this.supportsTransition())return null;var t=this.settings.accessor,n=this.settings.transition;return TO(Array.isArray(t)?e[t.find((function(t){return e[t]}))]:e[t],n)}},{key:"setNeedsUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,t=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){var n=t.startRow,r=void 0===n?0:n,i=t.endRow,o=void 0===i?1/0:i;this.state.updateRanges=CO(this.state.updateRanges,[r,o])}else this.state.updateRanges=PO}},{key:"clearNeedsUpdate",value:function(){this.state.needsUpdate=!1,this.state.updateRanges=EO}},{key:"setNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||e}},{key:"update",value:function(e){this.setData(e)}},{key:"allocate",value:function(e){var t=this.state,r=this.settings;return!r.noAlloc&&(!!r.update&&(PC(Number.isFinite(e)),Y_(Zb(n.prototype),"allocate",this).call(this,{numInstances:e,copy:t.updateRanges!==PO}),!0))}},{key:"updateBuffer",value:function(e){var t=e.numInstances,r=e.data,i=e.props,o=e.context;if(!this.needsUpdate())return!1;var a=this.state.updateRanges,s=this.settings,l=s.update,u=s.noAlloc,c=!0;if(l){var f,h=DO(a);try{for(h.s();!(f=h.n()).done;){var d=ob(f.value,2),p=d[0],v=d[1];l.call(o,this,{data:r,startRow:p,endRow:v,props:i,numInstances:t})}}catch(k){h.e(k)}finally{h.f()}if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant});else{var m,g=DO(a);try{for(g.s();!(m=g.n()).done;){var y=ob(m.value,2),x=y[0],b=y[1],_=Number.isFinite(x)?this.getVertexOffset(x):0,w=Number.isFinite(b)?this.getVertexOffset(b):u||!Number.isFinite(t)?this.value.length:t*this.size;Y_(Zb(n.prototype),"updateSubBuffer",this).call(this,{startOffset:_,endOffset:w})}}catch(k){g.e(k)}finally{g.f()}}else;this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}},{key:"setConstantValue",value:function(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}},{key:"setExternalBuffer",value:function(e){var t=this.state;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}},{key:"setBinaryValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.state,r=this.settings;if(!e)return n.binaryValue=null,n.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(n.binaryValue===e)return this.clearNeedsUpdate(),!0;n.binaryValue=e,this.setNeedsRedraw(),ArrayBuffer.isView(e)&&(e={value:e});var i=r.transform||t!==this.startIndices;if(i){PC(ArrayBuffer.isView(e.value),"invalid ".concat(r.accessor));var o=e.size&&e.size!==this.size;return n.binaryAccessor=_O(e.value,{size:e.size||this.size,stride:e.stride,offset:e.offset,startIndices:t,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}},{key:"getVertexOffset",value:function(e){var t=this.startIndices;return(t?t[e]:e)*this.size}},{key:"getShaderAttributes",value:function(){var e=this.settings.shaderAttributes||Qc({},this.id,null),t={};for(var r in e)Object.assign(t,Y_(Zb(n.prototype),"getShaderAttributes",this).call(this,r,e[r]));return t}},{key:"_autoUpdater",value:function(e,t){var n=t.data,r=t.startRow,i=t.endRow,o=t.props,a=t.numInstances;if(!e.constant){var s=e.settings,l=e.state,u=e.value,c=e.size,f=e.startIndices,h=s.accessor,d=s.transform,p=l.binaryAccessor||("function"==typeof h?h:o[h]);PC("function"==typeof p,'accessor "'.concat(h,'" is not a function'));var v,m=e.getVertexOffset(r),g=xO(n,r,i),y=g.iterable,x=g.objectInfo,b=DO(y);try{for(b.s();!(v=b.n()).done;){var _=v.value;x.index++;var w=p(_,x);if(d&&(w=d.call(this,w)),f){var k=(x.index<f.length-1?f[x.index+1]:a)-f[x.index];if(w&&Array.isArray(w[0])){var S,E=m,P=DO(w);try{for(P.s();!(S=P.n()).done;){var C=S.value;e._normalizeValue(C,u,E),E+=c}}catch(A){P.e(A)}finally{P.f()}}else w&&w.length>c?u.set(w,m):(e._normalizeValue(w,x.target,0),SO({target:u,source:x.target,start:m,count:k}));m+=k*c}else e._normalizeValue(w,u,m),m+=c}}catch(A){b.e(A)}finally{b.f()}}}},{key:"_validateAttributeUpdaters",value:function(){var e=this.settings;if(!(e.noAlloc||"function"==typeof e.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function(){var e=this.value,t=Math.min(4,this.size);if(e&&e.length>=t){var n=!0;switch(t){case 4:n=n&&Number.isFinite(e[3]);case 3:n=n&&Number.isFinite(e[2]);case 2:n=n&&Number.isFinite(e[1]);case 1:n=n&&Number.isFinite(e[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}},{key:"startIndices",get:function(){return this.state.startIndices},set:function(e){this.state.startIndices=e}}]),n}();function BO(){}var VO={onStart:BO,onUpdate:BO,onInterrupt:BO,onEnd:BO},UO=function(){function e(t){Np(this,e),this._inProgress=!1,this._handle=null,this.timeline=t,this.settings={}}return Tf(e,[{key:"start",value:function(e){this.cancel(),this.settings=Object.assign({},VO,e),this._inProgress=!0,this.settings.onStart(this)}},{key:"end",value:function(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}},{key:"cancel",value:function(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}},{key:"update",value:function(){if(!this._inProgress)return!1;if(null===this._handle){var e=this.timeline,t=this.settings;this._handle=e.addChannel({delay:e.getTime(),duration:t.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}},{key:"_onUpdate",value:function(){}},{key:"inProgress",get:function(){return this._inProgress}}]),e}();function WO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WO(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function HO(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return qO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qO(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function qO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $O=function(){function e(t){var n=t.gl,r=t.attribute,i=t.timeline;Np(this,e),this.gl=n,this.type="interpolation",this.transition=new UO(i),this.attribute=r,this.attributeInTransition=new zO(n,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=function(e,t){var n=RO(t.size);return new lC(e,{vs:XO,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(n,r);var o={byteLength:0,usage:35050};this.buffers=[new A_(n,o),new A_(n,o)]}return Tf(e,[{key:"start",value:function(e,t){if(e.duration<=0)this.transition.cancel();else{this.gl;var n=this.buffers,r=this.attribute;IO(n);var i,o={numInstances:t,attribute:r,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter},a=HO(n);try{for(a.s();!(i=a.n()).done;){jO(GO({buffer:i.value},o))}}catch(s){a.e(s)}finally{a.f()}this.currentStartIndices=r.startIndices,this.currentLength=LO(r,t),this.attributeInTransition.update({buffer:n[1],value:r.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/r.size),sourceBuffers:{aFrom:n[0],aTo:MO(0,r)},feedbackBuffers:{vCurrent:n[1]}})}}},{key:"update",value:function(){var e=this.transition.update();if(e){var t=this.transition,n=t.time,r=t.settings,i=r.duration,o=(0,r.easing)(n/i);this.transform.run({uniforms:{time:o}})}return e}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),e}(),XO="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";function YO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YO(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function KO(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return QO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QO(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function QO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var JO={interpolation:$O,spring:function(){function e(t){var n=t.gl,r=t.attribute,i=t.timeline;Np(this,e),this.gl=n,this.type="spring",this.transition=new UO(i),this.attribute=r,this.attributeInTransition=new zO(n,Object.assign({},r.settings,{normalized:!1})),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=function(e){return new U_(e,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(n),this.framebuffer=function(e,t){return new Fw(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:Qc({},36064,t)})}(n,this.texture),this.transform=function(e,t,n){var r=RO(t.size);return new lC(e,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}(n,r,this.framebuffer);var o={byteLength:0,usage:35050};this.buffers=[new A_(n,o),new A_(n,o),new A_(n,o)]}return Tf(e,[{key:"start",value:function(e,t){this.gl;var n,r=this.buffers,i=this.attribute,o={numInstances:t,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter},a=KO(r);try{for(a.s();!(n=a.n()).done;){jO(ZO({buffer:n.value},o))}}catch(s){a.e(s)}finally{a.f()}this.currentStartIndices=i.startIndices,this.currentLength=LO(i,t),this.attributeInTransition.update({buffer:r[1],value:i.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aTo:MO(0,i)}})}},{key:"update",value:function(){var e=this.buffers,t=this.transform,n=this.framebuffer,r=this.transition;return!!r.update()&&(t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:r.settings.stiffness,damping:r.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),IO(e),this.attributeInTransition.update({buffer:e[1],value:this.attribute.value}),iw(n)[0]>0||r.end(),!0)}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),e}()},eT=function(){function e(t,n){var r=n.id,i=n.timeline;Np(this,e),this.id=r,this.gl=t,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=lC.isSupported(t)}return Tf(e,[{key:"finalize",value:function(){for(var e in this.transitions)this._removeTransition(e)}},{key:"update",value:function(e){var t=e.attributes,n=e.transitions,r=e.numInstances;for(var i in this.numInstances=r||1,t){var o=t[i],a=o.getTransitionSetting(n);a&&this._updateAttribute(i,o,a)}for(var s in this.transitions){var l=t[s];l&&l.getTransitionSetting(n)||this._removeTransition(s)}}},{key:"hasAttribute",value:function(e){var t=this.transitions[e];return t&&t.inProgress}},{key:"getAttributes",value:function(){var e={};for(var t in this.transitions){var n=this.transitions[t];n.inProgress&&(e[t]=n.attributeInTransition)}return e}},{key:"run",value:function(){if(!this.isSupported||0===this.numInstances)return!1;for(var e in this.transitions){this.transitions[e].update()&&(this.needsRedraw=!0)}var t=this.needsRedraw;return this.needsRedraw=!1,t}},{key:"_removeTransition",value:function(e){this.transitions[e].cancel(),delete this.transitions[e]}},{key:"_updateAttribute",value:function(e,t,n){var r=this.transitions[e],i=!r||r.type!==n.type;if(i){if(!this.isSupported)return void Ox.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);var o=JO[n.type];o?this.transitions[e]=new o({attribute:t,timeline:this.timeline,gl:this.gl}):(Ox.error("unsupported transition type '".concat(n.type,"'"))(),i=!1)}(i||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(n,this.numInstances))}}]),e}(),tT=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.id,i=void 0===r?"attribute-manager":r,o=n.stats,a=n.timeline;Np(this,e),this.id=i,this.gl=t,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=o,this.attributeTransitionManager=new eT(t,{id:"".concat(i,"-transitions"),timeline:a}),Object.seal(this)}return Tf(e,[{key:"finalize",value:function(){for(var e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}},{key:"setNeedsRedraw",value:function(){return this.needsRedraw=!0,this}},{key:"add",value:function(e,t){this._add(e,t)}},{key:"addInstanced",value:function(e,t){this._add(e,t,{instanced:1})}},{key:"remove",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}}},{key:"invalidate",value:function(e,t){Mx("attributeManager.invalidate",this,e,this._invalidateTrigger(e,t))}},{key:"invalidateAll",value:function(e){for(var t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);Mx("attributeManager.invalidate",this,"all")}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.numInstances,r=e.startIndices,i=void 0===r?null:r,o=e.transitions,a=e.props,s=void 0===a?{}:a,l=e.buffers,u=void 0===l?{}:l,c=e.context,f=void 0===c?{}:c,h=!1;for(var d in Mx("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart(),this.attributes){var p=this.attributes[d],v=p.settings.accessor;p.startIndices=i,s[d]&&Ox.removed("props.".concat(d),"data.attributes.".concat(d))(),p.setExternalBuffer(u[d])||p.setBinaryValue(u[v],t.startIndices)||!u[v]&&p.setConstantValue(s[v])||p.needsUpdate()&&(h=!0,this._updateAttribute({attribute:p,numInstances:n,data:t,props:s,context:f})),this.needsRedraw|=p.needsRedraw()}h&&Mx("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:o})}},{key:"updateTransition",value:function(){var e=this.attributeTransitionManager.run();return this.needsRedraw=this.needsRedraw||e,e}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1},t=this.attributes,n=this.attributeTransitionManager,r=Object.assign({},n.getAttributes());for(var i in t){var o=t[i];o.needsRedraw(e)&&!n.hasAttribute(i)&&(r[i]=o)}return r}},{key:"getShaderAttributes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e||(e=this.getAttributes());var n={};for(var r in e)t[r]||Object.assign(n,e[r].getShaderAttributes());return n}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t&&Ox.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var r={};for(var i in e){var o=e[i],a=this._createAttribute(i,o,n);r[i]=a}Object.assign(this.attributes,r),this._mapUpdateTriggersToAttributes()}},{key:"_createAttribute",value:function(e,t,n){var r={id:e,constant:t.constant||!1,isIndexed:t.isIndexed||t.elements,size:t.elements?1:t.size,value:t.value||null,divisor:t.instanced||n.instanced?1:t.divisor};return new zO(this.gl,Object.assign({},t,r))}},{key:"_mapUpdateTriggersToAttributes",value:function(){var e=this,t={},n=function(n){e.attributes[n].getUpdateTriggers().forEach((function(e){t[e]||(t[e]=[]),t[e].push(n)}))};for(var r in this.attributes)n(r);this.updateTriggers=t}},{key:"_invalidateTrigger",value:function(e,t){var n=this.attributes,r=this.updateTriggers[e];return r&&r.forEach((function(e){var r=n[e];r&&r.setNeedsUpdate(r.id,t)})),r}},{key:"_updateAttribute",value:function(e){var t=e.attribute,n=e.numInstances;Mx("attribute.updateStart",t),t.allocate(n)&&Mx("attribute.allocate",t,n),t.updateBuffer(e)&&(this.needsRedraw=!0,Mx("attribute.updateEnd",t,n))}}]),e}();function nT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var rT=function(e){Xb(n,UO);var t=nT(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"_onUpdate",value:function(){var e=this.time,t=this.settings,n=t.fromValue,r=t.toValue,i=t.duration,o=(0,t.easing)(e/i);this._value=eE(n,r,o)}},{key:"value",get:function(){return this._value}}]),n}();function iT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}function oT(e,t,n,r,i){var o=t-e;return(n-t)*i+-o*r+o+t}function aT(e,t){if(Array.isArray(e)){for(var n=0,r=0;r<e.length;r++){var i=e[r]-t[r];n+=i*i}return Math.sqrt(n)}return Math.abs(e-t)}function sT(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return lT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lT(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function lT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uT(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fT={interpolation:rT,spring:function(e){Xb(n,UO);var t=iT(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"_onUpdate",value:function(){var e=this.settings,t=e.fromValue,n=e.toValue,r=e.damping,i=e.stiffness,o=this._prevValue,a=void 0===o?t:o,s=this._currValue,l=void 0===s?t:s,u=function(e,t,n,r,i){if(Array.isArray(n)){for(var o=[],a=0;a<n.length;a++)o[a]=oT(e[a],t[a],n[a],r,i);return o}return oT(e,t,n,r,i)}(a,l,n,r,i),c=aT(u,n),f=aT(u,l);c<1e-5&&f<1e-5&&(u=n,this.end()),this._prevValue=l,this._currValue=u}},{key:"value",get:function(){return this._currValue}}]),n}()},hT=function(){function e(t){Np(this,e),this.transitions=new Map,this.timeline=t}return Tf(e,[{key:"add",value:function(e,t,n,r){var i=this.transitions;if(i.has(e)){var o=i.get(e),a=o.value;t=void 0===a?o.settings.fromValue:a,this.remove(e)}if(r=TO(r)){var s=fT[r.type];if(s){var l=new s(this.timeline);l.start(cT(cT({},r),{},{fromValue:t,toValue:n})),i.set(e,l)}else Ox.error("unsupported transition type '".concat(r.type,"'"))()}}},{key:"remove",value:function(e){var t=this.transitions;t.has(e)&&(t.get(e).cancel(),t.delete(e))}},{key:"update",value:function(){var e,t={},n=sT(this.transitions);try{for(n.s();!(e=n.n()).done;){var r=ob(e.value,2),i=r[0],o=r[1];o.update(),t[i]=o.value,o.inProgress||this.remove(i)}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"clear",value:function(){var e,t=sT(this.transitions.keys());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.remove(n)}}catch(r){t.e(r)}finally{t.f()}}},{key:"active",get:function(){return this.transitions.size>0}}]),e}(),dT="Awaiting state",pT="Matched. State transferred from previous layer",vT="Initialized",mT="Discarded. Awaiting garbage collection",gT="No longer matched. Awaiting garbage collection",yT="Finalized! Awaiting garbage collection",xT={COMPONENT:Symbol.for("component"),ASYNC_DEFAULTS:Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL:Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED:Symbol.for("asyncPropResolved")},bT=xT.COMPONENT;function _T(e,t){var n=kT({newProps:e,oldProps:t,propTypes:CT(e),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(e,t){if(null===t)return"oldProps is null, initial diff";var n=null,r=e.dataComparator,i=e._dataDiff;r?r(e.data,t.data)||(n="Data comparator detected a change"):e.data!==t.data&&(n="A new data container was supplied");n&&i&&(n=i(e.data,t.data)||n);return n}(e,t),i=!1;return r||(i=function(e,t){if(null===t)return"oldProps is null, initial diff";if("all"in e.updateTriggers){if(PT(e,t,"all"))return{all:!0}}var n={},r=!1;for(var i in e.updateTriggers){if("all"!==i)PT(e,t,i)&&(n[i]=!0,r=n)}return r}(e,t)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:ET(e,t),transitionsChanged:wT(e,t)}}function wT(e,t){if(!e.transitions)return null;var n={},r=CT(e);for(var i in e.transitions){var o=r[i],a=o&&o.type;("number"===a||"color"===a||"array"===a)&&ST(e[i],t[i],o)&&(n[i]=!0)}return n}function kT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.newProps,n=e.oldProps,r=e.ignoreProps,i=void 0===r?{}:r,o=e.propTypes,a=void 0===o?{}:o,s=e.triggerName,l=void 0===s?"props":s;if(n===t)return null;if("object"!==Hc(t)||null===t)return"".concat(l," changed shallowly");if("object"!==Hc(n)||null===n)return"".concat(l," changed shallowly");for(var u=0,c=Object.keys(t);u<c.length;u++){var f=c[u];if(!(f in i)){if(!(f in n))return"".concat(l,".").concat(f," added");var h=ST(t[f],n[f],a[f]);if(h)return"".concat(l,".").concat(f," ").concat(h)}}for(var d=0,p=Object.keys(n);d<p.length;d++){var v=p[d];if(!(v in i)){if(!(v in t))return"".concat(l,".").concat(v," dropped");if(!Object.hasOwnProperty.call(t,v)){var m=ST(t[v],n[v],a[v]);if(m)return"".concat(l,".").concat(v," ").concat(m)}}}return null}function ST(e,t,n){var r=n&&n.equal;return r&&!r(e,t,n)?"changed deeply":r||!(r=e&&t&&e.equals)||r.call(e,t)?r||t===e?null:"changed shallowly":"changed deeply"}function ET(e,t){if(null===t)return"oldProps is null, initial diff";var n=t.extensions,r=e.extensions;if(r===n)return!1;if(r.length!==n.length)return!0;for(var i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function PT(e,t,n){var r=e.updateTriggers[n];r=null==r?{}:r;var i=t.updateTriggers[n];return kT({oldProps:i=null==i?{}:i,newProps:r,triggerName:n})}function CT(e){var t=e[bT],n=t&&t.constructor;return n?n._propTypes:{}}var AT;function OT(e){if(null===(t=e)||"object"!==Hc(t))throw new Error("count(): argument not an object");var t;if("function"==typeof e.count)return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(function(e){return null!==e&&"object"===Hc(e)&&e.constructor===Object}(e))return Object.keys(e).length;throw new Error("count(): argument not a container")}function TT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MT(e,t){if(!t)return e;var n=Object.assign({},e,t);if("defines"in t&&(n.defines=Object.assign({},e.defines,t.defines)),"modules"in t&&(n.modules=(e.modules||[]).concat(t.modules),t.modules.some((function(e){return"project64"===e.name})))){var r=n.modules.findIndex((function(e){return"project32"===e.name}));r>=0&&n.modules.splice(r,1)}if("inject"in t)if(e.inject){var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TT(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.inject);for(var o in t.inject)i[o]=(i[o]||"")+t.inject[o];n.inject=i}else n.inject=t.inject;return n}function RT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function IT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RT(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var LT=(Qc(AT={},10241,9987),Qc(AT,10240,9729),Qc(AT,10242,33071),Qc(AT,10243,33071),AT),jT={};var DT={boolean:{validate:function(e,t){return!0},equal:function(e,t,n){return Boolean(e)===Boolean(t)}},number:{validate:function(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate:function(e,t){return t.optional&&!e||BT(e)&&(3===e.length||4===e.length)},equal:function(e,t,n){return NT(e,t)}},accessor:{validate:function(e,t){var n=VT(e);return"function"===n||n===VT(t.value)},equal:function(e,t,n){return"function"==typeof t||NT(e,t)}},array:{validate:function(e,t){return t.optional&&!e||BT(e)},equal:function(e,t,n){return n.compare?NT(e,t):e===t}},function:{validate:function(e,t){return t.optional&&!e||"function"==typeof e},equal:function(e,t,n){return!n.compare||e===t}},data:{transform:function(e,t,n){var r=(n?n.props:{}).dataTransform;return r&&e?r(e):e}},image:{transform:function(e,t,n){return function(e,t){var n=e.context&&e.context.gl;if(!n||!t)return null;if(t instanceof U_)return t;t.constructor&&"Object"!==t.constructor.name&&(t={data:t});var r=null;t.compressed&&(r=Qc({},10241,t.data.length>1?9985:9729));var i=new U_(n,IT(IT({},t),{},{parameters:IT(IT(IT({},LT),r),e.props.textureParameters)}));return jT[i.id]=!0,i}(n,e)},release:function(e){var t;(t=e)&&t instanceof U_&&jT[t.id]&&(t.delete(),delete jT[t.id])}}};function NT(e,t){if(e===t)return!0;if(!BT(e)||!BT(t))return!1;var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function FT(e,t){switch(VT(t)){case"object":return zT(e,t);case"array":return zT(e,{type:"array",value:t,compare:!1});case"boolean":return zT(e,{type:"boolean",value:t});case"number":return zT(e,{type:"number",value:t});case"function":return zT(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function zT(e,t){return"type"in t?Object.assign({name:e},DT[t.type],t):"value"in t?Object.assign({name:e,type:VT(t.value)},t):{name:e,type:"object",value:t}}function BT(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function VT(e){return BT(e)?"array":null===e?"null":Hc(e)}function UT(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return WT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WT(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function WT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var GT=xT.COMPONENT,HT=xT.ASYNC_ORIGINAL,qT=xT.ASYNC_RESOLVED,$T=xT.ASYNC_DEFAULTS;function XT(){var e=this,t=YT(e.constructor),n=Object.create(t);n[GT]=e,n[HT]={},n[qT]={};for(var r=0;r<arguments.length;++r){var i=arguments[r];for(var o in i)n[o]=i[o]}return Object.freeze(n),n}function YT(e){var t=QT(e,"_mergedDefaultProps");return t||(function(e){if(!e.prototype)return;var t=Object.getPrototypeOf(e),n=YT(t),r=function(e){for(var t={},n={},r={},i=0,o=Object.entries(e);i<o.length;i++){var a=ob(o[i],2),s=a[0],l=a[1];if(l&&l.deprecatedFor)r[s]=Array.isArray(l.deprecatedFor)?l.deprecatedFor:[l.deprecatedFor];else{var u=FT(s,l);t[s]=u,n[s]=u.value}}return{propTypes:t,defaultProps:n,deprecatedProps:r}}(QT(e,"defaultProps")||{}),i=function(e,t,n){var r=Object.create(null);Object.assign(r,t,e);var i=function(e){var t=QT(e,"layerName")||QT(e,"componentName");t||Ox.once(0,"".concat(e.name,".componentName not specified"))();return t||e.name}(n);return delete e.id,Object.defineProperties(r,{id:{writable:!0,value:i}}),r}(r.defaultProps,n,e),o=Object.assign({},t._propTypes,r.propTypes);!function(e,t){var n={},r={};for(var i in t){var o=t[i],a=o.name,s=o.value;o.async&&(n[a]=s,r[a]=ZT(a))}e[$T]=n,e[HT]={},Object.defineProperties(e,r)}(i,o);var a=Object.assign({},t._deprecatedProps,r.deprecatedProps);(function(e,t){var n=function(n){Object.defineProperty(e,n,{enumerable:!1,set:function(e){var r,i="".concat(this.id,": ").concat(n),o=UT(t[n]);try{for(o.s();!(r=o.n()).done;){var a=r.value;KT(this,a)||(this[a]=e)}}catch(s){o.e(s)}finally{o.f()}Ox.deprecated(i,t[n].join("/"))()}})};for(var r in t)n(r)})(i,a),e._mergedDefaultProps=i,e._propTypes=o,e._deprecatedProps=a}(e),e._mergedDefaultProps)}function ZT(e){return{enumerable:!0,set:function(t){"string"==typeof t||t instanceof Promise||bO(t)?this[HT][e]=t:this[qT][e]=t},get:function(){if(this[qT]){if(e in this[qT])return this[qT][e]||this[$T][e];if(e in this[HT]){var t=this[GT]&&this[GT].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[$T][e]}}return this[$T][e]}}}function KT(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function QT(e,t){return KT(e,t)&&e[t]}var JT=xT.ASYNC_ORIGINAL,eM=xT.ASYNC_RESOLVED,tM=xT.ASYNC_DEFAULTS,nM=Object.freeze({}),rM=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Np(this,e),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=nM,this.oldAsyncProps=null}var t;return Tf(e,[{key:"finalize",value:function(){for(var e in this.asyncProps){var t=this.asyncProps[e];t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}}},{key:"getOldProps",value:function(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function(){if(!this.oldAsyncProps)for(var e in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps),this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}},{key:"hasAsyncProp",value:function(e){return e in this.asyncProps}},{key:"getAsyncProp",value:function(e){var t=this.asyncProps[e];return t&&t.resolvedValue}},{key:"isAsyncPropLoading",value:function(e){if(e){var t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(var n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}},{key:"reloadAsyncProp",value:function(e,t){this._watchPromise(e,Promise.resolve(t))}},{key:"setAsyncProps",value:function(e){var t=e[eM]||{},n=e[JT]||e,r=e[tM]||{};for(var i in t){var o=t[i];this._createAsyncPropData(i,r[i]),this._updateAsyncProp(i,o),t[i]=this.getAsyncProp(i)}for(var a in n){var s=n[a];this._createAsyncPropData(a,r[a]),this._updateAsyncProp(a,s)}}},{key:"_updateAsyncProp",value:function(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t){var n=this.layer&&this.layer.props.fetch;n&&(t=n(t,{propName:e,layer:this.layer}))}t instanceof Promise?this._watchPromise(e,t):bO(t)?this._resolveAsyncIterable(e,t):this._setPropValue(e,t)}}},{key:"_didAsyncInputValueChange",value:function(e,t){var n=this.asyncProps[e];return t!==n.resolvedValue&&t!==n.lastValue&&(n.lastValue=t,!0)}},{key:"_setPropValue",value:function(e,t){var n=this.asyncProps[e];t=this._postProcessValue(n,t),n.resolvedValue=t,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount}},{key:"_setAsyncPropValue",value:function(e,t,n){var r=this.asyncProps[e];r&&n>=r.resolvedLoadCount&&void 0!==t&&(this.freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=n,this.onAsyncPropUpdated(e,t))}},{key:"_watchPromise",value:function(e,t){var n=this,r=this.asyncProps[e];r.pendingLoadCount++;var i=r.pendingLoadCount;t.then((function(t){t=n._postProcessValue(r,t),n._setAsyncPropValue(e,t,i);var o=n.layer&&n.layer.props.onDataLoad;"data"===e&&o&&o(t,{propName:e,layer:n.layer})})).catch((function(e){return Ox.error(e)()}))}},{key:"_resolveAsyncIterable",value:(t=Ov(Cv.mark((function e(t,n){var r,i,o,a,s,l,u,c,f,h,d,p,v,m;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"data"!==t&&this._setPropValue(t,n),(r=this.asyncProps[t]).pendingLoadCount++,i=r.pendingLoadCount,o=[],a=0,s=!0,l=!1,e.prev=8,c=Fv(n);case 10:return e.next=12,c.next();case 12:return f=e.sent,s=f.done,e.next=16,f.value;case 16:if(h=e.sent,s){e.next=27;break}d=h,p=this.component?this.component.props:{},v=p.dataTransform,o=v?v(d,o):o.concat(d),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,this._setAsyncPropValue(t,o,i);case 24:s=!0,e.next=10;break;case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(8),l=!0,u=e.t0;case 33:if(e.prev=33,e.prev=34,s||null==c.return){e.next=38;break}return e.next=38,c.return();case 38:if(e.prev=38,!l){e.next=41;break}throw u;case 41:return e.finish(38);case 42:return e.finish(33);case 43:(m=this.layer&&this.layer.props.onDataLoad)&&m(o,{propName:t,layer:this.layer});case 45:case"end":return e.stop()}}),e,this,[[8,29,33,43],[34,,38,42]])}))),function(e,n){return t.apply(this,arguments)})},{key:"_postProcessValue",value:function(e,t){var n=e.type;return n&&(n.release&&n.release(e.resolvedValue,n,this.component),n.transform)?n.transform(t,n,this.component):t}},{key:"_createAsyncPropData",value:function(e,t){if(!this.asyncProps[e]){var n=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:n&&n[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}]),e}(),iM=xT.ASYNC_ORIGINAL,oM=xT.ASYNC_RESOLVED,aM=xT.ASYNC_DEFAULTS,sM=0,lM=function(){function e(){Np(this,e),this.props=XT.apply(this,arguments),this.id=this.props.id,this.count=sM++,this.lifecycle=dT,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return Tf(e,[{key:"clone",value:function(e){var t=this.props,n={};for(var r in t[aM])r in t[oM]?n[r]=t[oM][r]:r in t[iM]&&(n[r]=t[iM][r]);return new this.constructor(Object.assign({},t,n,e))}},{key:"_initState",value:function(){this.internalState=new rM({})}},{key:"stats",get:function(){return this.internalState.stats}}]),e}();function uM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}lM.componentName="Component",lM.defaultProps={};var cM=function(e){Xb(n,rM);var t=uM(n);function n(e){var r,i=e.attributeManager,o=e.layer;return Np(this,n),(r=t.call(this,o)).attributeManager=i,r.model=null,r.needsRedraw=!0,r.subLayers=null,r}return Tf(n,[{key:"layer",get:function(){return this.component},set:function(e){this.component=e}}]),n}();function fM(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return hM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hM(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function hM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var pM=Math.pow(2,24)-1,vM=Object.freeze([]),mM=EC((function(e){var t=e.oldViewport,n=e.viewport;return t.equals(n)})),gM=new Uint8ClampedArray(0),yM={data:{type:"data",value:vM,async:!0},dataComparator:null,_dataDiff:{type:"function",value:function(e){return e&&e.__diff},compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:function(e,t){var n=t.propName,r=t.layer,i=r.context.resourceManager,o=r.getLoadOptions(),a=r.props.loaders,s=i.contains(e);return s||o||(i.add({resourceId:e,data:Qg(e,a),persistent:!1}),s=!0),s?i.subscribe({resourceId:e,onChange:function(e){return r.internalState.reloadAsyncProp(n,e)},consumerId:r.id,requestId:n}):Qg(e,a,o)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:yC.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:function(e){return[0,100*-e.layerIndex]},compare:!1},highlightedObjectIndex:-1,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}},xM=function(e){Xb(n,lM);var t=dM(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"toString",value:function(){var e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=e)}},{key:"setNeedsUpdate",value:function(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(e)}},{key:"needsUpdate",value:function(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}},{key:"hasUniformTransition",value:function(){return this.internalState.uniformTransitions.active}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getLoadOptions",value:function(){return this.props.loadOptions}},{key:"project",value:function(e){var t=this.context.viewport,n=ob(eA(sO(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),t.pixelProjectionMatrix),3),r=n[0],i=n[1],o=n[2];return 2===e.length?[r,i]:[r,i,o]}},{key:"unproject",value:function(e){return this.context.viewport.unproject(e)}},{key:"projectPosition",value:function(e){return lO(e,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:"use64bitPositions",value:function(){var e=this.props.coordinateSystem;return e===yC.DEFAULT||e===yC.LNGLAT||e===yC.CARTESIAN}},{key:"onHover",value:function(e,t){return!!this.props.onHover&&this.props.onHover(e,t)}},{key:"onClick",value:function(e,t){return!!this.props.onClick&&this.props.onClick(e,t)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}},{key:"decodePickingColor",value:function(e){PC(e instanceof Uint8Array);var t=ob(e,3);return t[0]+256*t[1]+65536*t[2]-1}},{key:"initializeState",value:function(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"getShaders",value:function(e){var t,n=fM(this.props.extensions);try{for(n.s();!(t=n.n()).done;){var r=t.value;e=MT(e,r.getShaders.call(this,r))}}catch(i){n.e(i)}finally{n.f()}return e}},{key:"shouldUpdateState",value:function(e){return e.oldProps,e.props,e.context,e.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(e){var t=e.oldProps,n=e.props;e.context;var r=e.changeFlags,i=this.getAttributeManager();if(r.dataChanged&&i){var o=r.dataChanged;if(Array.isArray(o)){var a,s=fM(o);try{for(s.s();!(a=s.n()).done;){var l=a.value;i.invalidateAll(l)}}catch(v){s.e(v)}finally{s.f()}}else i.invalidateAll()}var u=t.highlightedObjectIndex>=0||t.pickable,c=n.highlightedObjectIndex>=0||n.pickable;if(u!==c&&i){var f=i.attributes,h=f.pickingColors,d=f.instancePickingColors,p=h||d;p&&(c&&p.constant&&(p.constant=!1,i.invalidate(p.id)),p.value||c||(p.constant=!0,p.value=[0,0,0]))}}},{key:"finalizeState",value:function(){var e,t=fM(this.getModels());try{for(t.s();!(e=t.n()).done;){e.value.delete()}}catch(r){t.e(r)}finally{t.f()}var n=this.getAttributeManager();n&&n.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear(),this.internalState.finalize()}},{key:"draw",value:function(e){var t,n=fM(this.getModels());try{for(n.s();!(t=n.n()).done;){t.value.draw(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"getPickingInfo",value:function(e){var t=e.info;e.mode;var n=t.index;return n>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[n]),t}},{key:"activateViewport",value:function(e){var t=this.internalState.viewport;this.internalState.viewport=e,t&&mM({oldViewport:t,viewport:e})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}},{key:"invalidateAttribute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=this.getAttributeManager();t&&("all"===e?t.invalidateAll():t.invalidate(e))}},{key:"updateAttributes",value:function(e){var t,n=fM(this.getModels());try{for(n.s();!(t=n.n()).done;){var r=t.value;this._setModelAttributes(r,e)}}catch(i){n.e(i)}finally{n.f()}}},{key:"_updateAttributes",value:function(e){var t=this.getAttributeManager();if(t){var n=this.getNumInstances(e),r=this.getStartIndices(e);t.update({data:e.data,numInstances:n,startIndices:r,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this,ignoreUnknownAttributes:!0});var i=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}}},{key:"_updateAttributeTransition",value:function(){var e=this.getAttributeManager();e&&e.updateTransition()}},{key:"_updateUniformTransition",value:function(){var e=this.internalState.uniformTransitions;if(e.active){var t=e.update(),n=Object.create(this.props);for(var r in t)Object.defineProperty(n,r,{value:t[r]});return n}return this.props}},{key:"calculateInstancePickingColors",value:function(e,t){var n=t.numInstances;if(!e.constant){var r=gM.length/3;if(r<n){n>pM&&Ox.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")();for(var i=(gM=qA.allocate(gM,n,{size:3,copy:!0,maxCount:Math.max(n,pM)})).length/3,o=[],a=r;a<i;a++)this.encodePickingColor(a,o),gM[3*a+0]=o[0],gM[3*a+1]=o[1],gM[3*a+2]=o[2]}e.value=gM.subarray(0,3*n)}}},{key:"_setModelAttributes",value:function(e,t){var n=this.getAttributeManager(),r=e.userData.excludeAttributes||{},i=n.getShaderAttributes(t,r);e.setAttributes(i)}},{key:"disablePickingIndex",value:function(e){this._disablePickingIndex(e)}},{key:"_disablePickingIndex",value:function(e){var t=this.getAttributeManager().attributes,n=t.pickingColors,r=t.instancePickingColors,i=n||r,o=i.getVertexOffset(e),a=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(a-o),offset:o})}},{key:"restorePickingColors",value:function(){var e=this.getAttributeManager().attributes,t=e.pickingColors,n=e.instancePickingColors;(t||n).updateSubBuffer({startOffset:0})}},{key:"getNumInstances",value:function(e){return void 0!==(e=e||this.props).numInstances?e.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:OT(e.data)}},{key:"getStartIndices",value:function(e){return void 0!==(e=e||this.props).startIndices?e.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}},{key:"_initialize",value:function(){Mx("layer.initialize",this),this._initState(),this.initializeState(this.context);var e,t=fM(this.props.extensions);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.initializeState.call(this,this.context,n)}}catch(r){t.e(r)}finally{t.f()}this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}},{key:"_update",value:function(){var e=this.needsUpdate();Mx("layer.update",this,e),e&&this._updateState()}},{key:"_updateState",value:function(){var e=this.props,t=this.context.viewport,n=this._updateUniformTransition();this.internalState.propsInTransition=n,this.context.viewport=this.internalState.viewport||t,this.props=n;try{var r=this._getUpdateParams(),i=this.getModels();if(this.context.gl)this.updateState(r);else try{this.updateState(r)}catch(u){}var o,a=fM(this.props.extensions);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.updateState.call(this,r,s)}}catch(c){a.e(c)}finally{a.f()}var l=this.getModels()[0]!==i[0];this._updateModules(r,l),this.isComposite?this._renderLayers(r):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances()))}finally{this.context.viewport=t,this.props=e,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}}},{key:"_finalize",value:function(){Mx("layer.finalize",this),PC(this.internalState&&this.state),this.finalizeState(this.context);var e,t=fM(this.props.extensions);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.finalizeState.call(this,n)}}catch(r){t.e(r)}finally{t.f()}}},{key:"drawLayer",value:function(e){var t=this,n=e.moduleParameters,r=void 0===n?null:n,i=e.uniforms,o=void 0===i?{}:i,a=e.parameters,s=void 0===a?{}:a;this._updateAttributeTransition();var l=this.props;this.props=this.internalState.propsInTransition||l;var u=this.props.opacity;o.opacity=Math.pow(u,1/2.2);try{r&&this.setModuleParameters(r);var c=this.props.getPolygonOffset,f=c&&c(o)||[0,0];Cb(this.context.gl,{polygonOffset:f}),Ob(this.context.gl,s,(function(){var e,n={moduleParameters:r,uniforms:o,parameters:s,context:t.context},i=fM(t.props.extensions);try{for(i.s();!(e=i.n()).done;){var a=e.value;a.draw.call(t,n,a)}}catch(l){i.e(l)}finally{i.f()}t.draw(n)}))}finally{this.props=l}}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(e){var t=this.internalState.changeFlags;for(var n in e)if(e[n]){var r=!1;switch(n){case"dataChanged":Array.isArray(t[n])&&(t[n]=Array.isArray(e[n])?t[n].concat(e[n]):e[n],r=!0);default:t[n]||(t[n]=e[n],r=!0)}r&&Mx("layer.changeFlag",this,n,e)}var i=t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged;t.propsOrDataChanged=i,t.somethingChanged=i||e.viewportChanged||e.stateChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"diffProps",value:function(e,t){var n=_T(e,t);if(n.updateTriggersChanged)for(var r in n.updateTriggersChanged)n.updateTriggersChanged[r]&&this.invalidateAttribute(r);if(n.transitionsChanged)for(var i in n.transitionsChanged)this.internalState.uniformTransitions.add(i,t[i],e[i],e.transitions[i]);return this.setChangeFlags(n)}},{key:"validateProps",value:function(){!function(e){var t=CT(e);for(var n in t){var r=t[n],i=r.validate;if(i&&!i(e[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(e[n]))}}(this.props)}},{key:"setModuleParameters",value:function(e){var t,n=fM(this.getModels());try{for(n.s();!(t=n.n()).done;){t.value.updateModuleSettings(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"_updateModules",value:function(e,t){var n=e.props,r=e.oldProps,i=n.autoHighlight,o=n.highlightedObjectIndex,a=n.highlightColor;if(t||r.autoHighlight!==i||r.highlightedObjectIndex!==o||r.highlightColor!==a){var s={};i||(s.pickingSelectedColor=null),Array.isArray(a)&&(s.pickingHighlightColor=a),Number.isInteger(o)&&(s.pickingSelectedColor=o>=0?this.encodePickingColor(o):null),this.setModuleParameters(s)}}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(e){if(!this.internalState)return!1;var t=!1;t=t||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;var n=this.getAttributeManager(),r=n&&n.getNeedsRedraw(e);return t=t||r}},{key:"_getAttributeManager",value:function(){return new tT(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}},{key:"_initState",value:function(){PC(!this.internalState&&!this.state),PC(isFinite(this.props.coordinateSystem),"".concat(this.id,": invalid coordinateSystem"));var e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new cM({attributeManager:e,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:function(){return Ox.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),e}}),this.internalState.layer=this,this.internalState.uniformTransitions=new hT(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function(e){Mx("layer.matched",this,this===e);var t=e.state,n=e.internalState;PC(t&&n),this!==e&&(this.internalState=n,this.internalState.layer=this,this.state=t,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}},{key:"_onAsyncPropUpdated",value:function(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}},{key:"isLoaded",get:function(){return this.internalState&&!this.internalState.isAsyncPropLoading()}},{key:"wrapLongitude",get:function(){return this.props.wrapLongitude}}]),n}();function bM(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _M(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}xM.layerName="Layer",xM.defaultProps=yM;var wM=function(){function e(t,n,r){Np(this,e),this.id=t,this.context=r,this._loadCount=0,this._subscribers=new Set,this.setData(n)}return Tf(e,[{key:"subscribe",value:function(e){this._subscribers.add(e)}},{key:"unsubscribe",value:function(e){this._subscribers.delete(e)}},{key:"inUse",value:function(){return this._subscribers.size>0}},{key:"delete",value:function(){}},{key:"getData",value:function(){var e=this;return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((function(){return e.getData()}))}},{key:"setData",value:function(e,t){var n=this;if(e!==this._data||t){this._data=e;var r=++this._loadCount,i=e;"string"==typeof e&&(i=Qg(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then((function(e){n._loadCount===r&&(n.isLoaded=!0,n._error=null,n._content=e)})).catch((function(e){n._loadCount===r&&(n.isLoaded=!0,n._error=e||!0)}))):(this.isLoaded=!0,this._error=null,this._content=e);var o,a=bM(this._subscribers);try{for(a.s();!(o=a.n()).done;){o.value.onChange(this.getData())}}catch(s){a.e(s)}finally{a.f()}}}}]),e}(),kM=function(){function e(t){var n=t.gl,r=t.protocol;Np(this,e),this.protocol=r||"resource://",this._context={gl:n,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}return Tf(e,[{key:"contains",value:function(e){return!!e.startsWith(this.protocol)||e in this._resources}},{key:"add",value:function(e){var t=e.resourceId,n=e.data,r=e.forceUpdate,i=void 0!==r&&r,o=e.persistent,a=void 0===o||o,s=this._resources[t];s?s.setData(n,i):(s=new wM(t,n,this._context),this._resources[t]=s),s.persistent=a}},{key:"remove",value:function(e){var t=this._resources[e];t&&(t.delete(),delete this._resources[e])}},{key:"unsubscribe",value:function(e){var t=e.consumerId,n=this._consumers[t];if(n){for(var r in n){var i=n[r];i.resource&&i.resource.unsubscribe(i)}delete this._consumers[t],this.prune()}}},{key:"subscribe",value:function(e){var t=e.resourceId,n=e.onChange,r=e.consumerId,i=e.requestId,o=void 0===i?"default":i,a=this._resources,s=this.protocol;t.startsWith(s)&&(a[t=t.replace(s,"")]||this.add({resourceId:t,data:null,persistent:!1}));var l=a[t];if(this._track(r,o,l,n),l)return l.getData()}},{key:"prune",value:function(){var e=this;this._pruneRequest||(this._pruneRequest=setTimeout((function(){return e._prune()}),0))}},{key:"finalize",value:function(){for(var e in this._resources)this._resources[e].delete()}},{key:"_track",value:function(e,t,n,r){var i=this._consumers,o=i[e]=i[e]||{},a=o[t]||{};a.resource&&(a.resource.unsubscribe(a),a.resource=null,this.prune()),n&&(o[t]=a,a.onChange=r,a.resource=n,n.subscribe(a))}},{key:"_prune",value:function(){this._pruneRequest=null;for(var e=0,t=Object.keys(this._resources);e<t.length;e++){var n=t[e],r=this._resources[n];r.persistent||r.inUse()||(r.delete(),delete this._resources[n])}}}]),e}();function SM(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return EM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EM(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function EM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var PM=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}}),CM=function(e){return e instanceof xM?"".concat(e):e?"invalid":"null"},AM=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.deck,i=n.stats,o=n.viewport,a=n.timeline;Np(this,e),this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new kM({gl:t,protocol:"deck://"}),this.context=Object.assign({},PM,{layerManager:this,gl:t,deck:r,programManager:t&&bA(t),stats:i||new rm({id:"deck.gl"}),viewport:o||new tO({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:a||new mC,resourceManager:this.resourceManager}),this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this._onError=null,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}return Tf(e,[{key:"finalize",value:function(){this.resourceManager.finalize();var e,t=SM(this.layers);try{for(t.s();!(e=t.n()).done;){var n=e.value;this._finalizeLayer(n)}}catch(r){t.e(r)}finally{t.f()}}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var n,r=SM(this.layers);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.getNeedsRedraw(e);t=t||o}}catch(a){r.e(a)}finally{r.f()}return t}},{key:"needsUpdate",value:function(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function(e){this._needsRedraw=this._needsRedraw||e}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e}},{key:"getLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerIds,n=void 0===t?null:t;return n?this.layers.filter((function(e){return n.find((function(t){return 0===e.id.indexOf(t)}))})):this.layers}},{key:"setProps",value:function(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&this.setLayers(e.layers),"onError"in e&&(this._onError=e.onError)}},{key:"setLayers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t||e!==this.lastRenderedLayers;if(Mx("layerManager.setLayers",this,n,e),!n)return this;this.lastRenderedLayers=e;var r,i=SM(e=wO(e,Boolean));try{for(i.s();!(r=i.n()).done;){var o=r.value;o.context=this.context}}catch(a){i.e(a)}finally{i.f()}return this._updateLayers(this.layers,e),this}},{key:"updateLayers",value:function(){var e=this.needsUpdate();if(e){this.setNeedsRedraw("updating layers: ".concat(e));this.setLayers(this.lastRenderedLayers,!0)}}},{key:"activateViewport",value:function(e){return Mx("layerManager.activateViewport",this,e),e&&(this.context.viewport=e),this}},{key:"_handleError",value:function(e,t,n){this._onError?this._onError(t,n):Ox.error("error during ".concat(e," of ").concat(CM(n)),t)()}},{key:"_updateLayers",value:function(e,t){var n,r={},i=SM(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;r[o.id]?Ox.warn("Multiple old layers with same id ".concat(CM(o)))():r[o.id]=o}}catch(c){i.e(c)}finally{i.f()}var a=[];this._updateSublayersRecursively(t,r,a),this._finalizeOldLayers(r);for(var s=!1,l=0,u=a;l<u.length;l++){if(u[l].hasUniformTransition()){s=!0;break}}this._needsUpdate=s,this.layers=a}},{key:"_updateSublayersRecursively",value:function(e,t,n){var r,i=SM(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.context=this.context;var a=t[o.id];null===a&&Ox.warn("Multiple new layers with same id ".concat(CM(o)))(),t[o.id]=null;var s=null;try{this._debug&&a!==o&&o.validateProps(),a?(this._transferLayerState(a,o),this._updateLayer(o)):this._initializeLayer(o),n.push(o),s=o.isComposite&&o.getSubLayers()}catch(l){this._handleError("matching",l,o)}s&&this._updateSublayersRecursively(s,t,n)}}catch(l){i.e(l)}finally{i.f()}}},{key:"_finalizeOldLayers",value:function(e){for(var t in e){var n=e[t];n&&this._finalizeLayer(n)}}},{key:"_initializeLayer",value:function(e){try{e._initialize(),e.lifecycle=vT}catch(t){this._handleError("initialization",t,e)}}},{key:"_transferLayerState",value:function(e,t){t._transferState(e),t.lifecycle=pT,t!==e&&(e.lifecycle=mT)}},{key:"_updateLayer",value:function(e){try{e._update()}catch(t){this._handleError("update",t,e)}}},{key:"_finalizeLayer",value:function(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(CM(e)),e.lifecycle=gT;try{e._finalize(),e.lifecycle=yT}catch(t){this._handleError("finalization",t,e)}}}]),e}();function OM(e,t){if(e===t)return!0;if(!e||!t)return!1;for(var n in e){var r=e[n],i=t[n];if(!(r===i||Array.isArray(r)&&Array.isArray(i)&&OM(r,i)))return!1}return!0}function TM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TM(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var RM=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Np(this,e),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}return Tf(e,[{key:"finalize",value:function(){for(var e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}},{key:"updateViewStates",value:function(){for(var e in this.controllers){var t=this.controllers[e];t&&t.updateTransition()}}},{key:"getViewports",value:function(e){return e?this._viewports.filter((function(t){return t.containsPixel(e)})):this._viewports}},{key:"getViews",value:function(){var e={};return this.views.forEach((function(t){e[t.id]=t})),e}},{key:"getView",value:function(e){return"string"==typeof e?this.views.find((function(t){return t.id===e})):e}},{key:"getViewState",value:function(e){var t=this.getView(e),n=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(n):n}},{key:"getViewport",value:function(e){return this._viewportMap[e]}},{key:"unproject",value:function(e,t){for(var n=this.getViewports(),r={x:e[0],y:e[1]},i=n.length-1;i>=0;--i){var o=n[i];if(o.containsPixel(r)){var a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,t)}}return null}},{key:"setProps",value:function(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}},{key:"_update",value:function(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function(e,t){PC(Number.isFinite(e)&&Number.isFinite(t)),e===this.width&&t===this.height||(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function(e){e=wO(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}},{key:"_setViewState",value:function(e){e?(!OM(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):Ox.warn("missing `viewState` or `initialViewState`")()}},{key:"_onViewStateChange",value:function(e,t){t.viewId=e,this._eventCallbacks.onViewStateChange(t)}},{key:"_createController",value:function(e,t){return new(0,t.type)(MM({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:function(t){return e._getViewport(t,{width:t.width,height:t.height})}},t))}},{key:"_updateController",value:function(e,t,n,r){var i=e.controller;return i?(i=MM(MM(MM(MM({},t),e.props),i),{},{id:e.id,x:n.x,y:n.y,width:n.width,height:n.height}),r?r.setProps(i):r=this._createController(e,i),r):null}},{key:"_rebuildViewports",value:function(){var e=this.width,t=this.height,n=this.views,r=this.controllers;this._viewports=[],this.controllers={};for(var i=n.length;i--;){var o=n[i],a=this.getViewState(o),s=o.makeViewport({width:e,height:t,viewState:a});this.controllers[o.id]=this._updateController(o,a,s,r[o.id]),this._viewports.unshift(s)}for(var l in r)r[l]&&!this.controllers[l]&&r[l].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function(){var e=this;this._viewportMap={},this._viewports.forEach((function(t){t.id&&(e._viewportMap[t.id]=e._viewportMap[t.id]||t)}))}},{key:"_diffViews",value:function(e,t){return e.length!==t.length||e.some((function(n,r){return!e[r].equals(t[r])}))}}]),e}(),IM=/([0-9]+\.?[0-9]*)(%|px)/;function LM(e){switch(Hc(e)){case"number":return{position:e,relative:!1};case"string":var t=e.match(IM);if(t&&t.length>=3){var n="%"===t[2],r=parseFloat(t[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(e))}}function jM(e,t){return e.relative?Math.round(e.position*t):e.position}function DM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function NM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DM(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var FM=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Np(this,e);var n=t.id,r=void 0===n?null:n,i=t.x,o=void 0===i?0:i,a=t.y,s=void 0===a?0:a,l=t.width,u=void 0===l?"100%":l,c=t.height,f=void 0===c?"100%":c,h=t.projectionMatrix,d=void 0===h?null:h,p=t.fovy,v=void 0===p?50:p,m=t.near,g=void 0===m?.1:m,y=t.far,x=void 0===y?1e3:y,b=t.modelMatrix,_=void 0===b?null:b,w=t.viewportInstance,k=void 0===w?null:w,S=t.type,E=void 0===S?tO:S;PC(!k||k instanceof tO),this.viewportInstance=k,this.id=r||this.constructor.displayName||"view",this.type=E,this.props=Object.assign({},t,{id:this.id,projectionMatrix:d,fovy:v,near:g,far:x,modelMatrix:_}),this._parseDimensions({x:o,y:s,width:u,height:f}),this.equals=this.equals.bind(this),Object.seal(this)}return Tf(e,[{key:"equals",value:function(e){return this===e||(this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):OM(this.props,e.props))}},{key:"makeViewport",value:function(e){var t=e.width,n=e.height,r=e.viewState;if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);var i=this.getDimensions({width:t,height:n});return this._getViewport(r,i)}},{key:"getViewStateId",value:function(){switch(Hc(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function(e){if(this.props.viewState&&"object"===Hc(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var t=Object.assign({},e);for(var n in this.props.viewState)"id"!==n&&(t[n]=this.props.viewState[n]);return t}return e}},{key:"getDimensions",value:function(e){var t=e.width,n=e.height;return{x:jM(this._x,t),y:jM(this._y,n),width:jM(this._width,t),height:jM(this._height,n)}}},{key:"_getControllerProps",value:function(e){var t=this.props.controller;return t?!0===t?e:("function"==typeof t&&(t={type:t}),Object.assign({},e,t)):null}},{key:"_getViewport",value:function(e,t){return new(0,this.type)(NM(NM(NM({},e),this.props),t))}},{key:"_parseDimensions",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height;this._x=LM(t),this._y=LM(n),this._width=LM(r),this._height=LM(i)}}]),e}(),zM=function(){},BM=1,VM=2,UM=3,WM={transitionEasing:function(e){return e},transitionInterruption:BM,onTransitionStart:zM,onTransitionInterrupt:zM,onTransitionEnd:zM},GM=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Np(this,e),this.ControllerState=t,this.props=Object.assign({},WM,n),this.propsInTransition=null,this.transition=new UO(n.timeline),this.onViewStateChange=n.onViewStateChange||zM,this.onStateChange=n.onStateChange||zM,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return Tf(e,[{key:"finalize",value:function(){this.transition.cancel()}},{key:"getViewportInTransition",value:function(){return this.propsInTransition}},{key:"processViewStateChange",value:function(e){var t=!1,n=this.props;if(e=Object.assign({},WM,e),this.props=e,this._shouldIgnoreViewportChange(n,e))return t;if(this._isTransitionEnabled(e)){var r=this.transition.settings,i=r.interruption,o=r.endProps,a=Object.assign({},n,i===VM?o:this.propsInTransition||n);this._triggerTransition(a,e),t=!0}else this.transition.cancel();return t}},{key:"updateTransition",value:function(){this.transition.update()}},{key:"_isTransitionEnabled",value:function(e){var t=e.transitionDuration,n=e.transitionInterpolator;return(t>0||"auto"===t)&&Boolean(n)}},{key:"_isUpdateDueToCurrentTransition",value:function(e){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(e,t){return this.transition.inProgress?this.transition.settings.interruption===UM||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}},{key:"_triggerTransition",value:function(e,t){var n=new this.ControllerState(e),r=new this.ControllerState(t).shortestPathFrom(n),i=t.transitionInterpolator,o=i.getDuration?i.getDuration(e,t):t.transitionDuration;if(0!==o){var a=t.transitionInterpolator.initializeProps(e,r);this.propsInTransition={},this.duration=o,this.transition.start({duration:o,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startProps:a.start,endProps:a.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)}),this.onStateChange({inTransition:!0}),this.updateTransition()}}},{key:"_onTransitionEnd",value:function(e){var t=this;return function(n){t.propsInTransition=null,t.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e(n)}}},{key:"_onTransitionUpdate",value:function(e){var t=e.time,n=e.settings,r=n.interpolator,i=n.startProps,o=n.endProps,a=n.duration,s=(0,n.easing)(t/a),l=r.interpolateProps(i,o,s);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,l)).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}}]),e}();function HM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HM(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $M={transitionDuration:0},XM=function(e){return 1-(1-e)*(1-e)},YM=["wheel"],ZM=["panstart","panmove","panend"],KM=["pinchstart","pinchmove","pinchend"],QM=["tripanstart","tripanmove","tripanend"],JM=["doubletap"],eR=["keydown"],tR=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Np(this,e),PC(t),this.ControllerState=t,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new GM(t,qM(qM({},n),{},{onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)})),this._events=null,this._interactionState={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.handleEvent=this.handleEvent.bind(this),this.setProps(n)}return Tf(e,[{key:"finalize",value:function(){for(var e in this._events)this._events[e]&&this.eventManager.off(e,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function(e){var t=this.ControllerState;this.controllerState=new t(qM(qM({makeViewport:this.makeViewport},this.controllerStateProps),this._state));var n=this._eventStartBlocked;switch(e.type){case"panstart":return!n&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!n&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!n&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}},{key:"getCenter",value:function(e){var t=this.controllerStateProps,n=t.x,r=t.y,i=e.offsetCenter;return[i.x-n,i.y-r]}},{key:"isPointInBounds",value:function(e,t){var n=this.controllerStateProps,r=n.width,i=n.height;if(t&&t.handled)return!1;var o=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return o&&t&&t.stopPropagation(),o}},{key:"isFunctionKeyPressed",value:function(e){var t=e.srcEvent;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}},{key:"isDragging",value:function(){return this._interactionState.isDragging}},{key:"blockEvents",value:function(e){var t=this,n=setTimeout((function(){t._eventStartBlocked===n&&(t._eventStartBlocked=null)}),e);this._eventStartBlocked=n}},{key:"setProps",value:function(e){"onViewStateChange"in e&&(this.onViewStateChange=e.onViewStateChange),"onStateChange"in e&&(this.onStateChange=e.onStateChange),"makeViewport"in e&&(this.makeViewport=e.makeViewport),"dragMode"in e&&(this.dragMode=e.dragMode),this.controllerStateProps=e,"eventManager"in e&&this.eventManager!==e.eventManager&&(this.eventManager=e.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);var t=e.inertia;!0===t&&(t=300),this.inertia=t;var n=e.scrollZoom,r=void 0===n||n,i=e.dragPan,o=void 0===i||i,a=e.dragRotate,s=void 0===a||a,l=e.doubleClickZoom,u=void 0===l||l,c=e.touchZoom,f=void 0===c||c,h=e.touchRotate,d=void 0!==h&&h,p=e.keyboard,v=void 0===p||p,m=Boolean(this.onViewStateChange);this.toggleEvents(YM,m&&r),this.toggleEvents(ZM,m&&(o||s)),this.toggleEvents(KM,m&&(f||d)),this.toggleEvents(QM,m&&d),this.toggleEvents(JM,m&&u),this.toggleEvents(eR,m&&v),this.scrollZoom=r,this.dragPan=o,this.dragRotate=s,this.doubleClickZoom=u,this.touchZoom=f,this.touchRotate=d,this.keyboard=v}},{key:"updateTransition",value:function(){this.transitionManager.updateTransition()}},{key:"toggleEvents",value:function(e,t){var n=this;this.eventManager&&e.forEach((function(e){n._events[e]!==t&&(n._events[e]=t,t?n.eventManager.on(e,n.handleEvent):n.eventManager.off(e,n.handleEvent))}))}},{key:"updateViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({},e.getViewportProps(),t),i=this.controllerState!==e;if(this._state=e.getState(),this._setInteractionState(n),i){var o=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:o})}}},{key:"_onTransition",value:function(e){this.onViewStateChange&&(e.interactionState=this._interactionState,this.onViewStateChange(e))}},{key:"_setInteractionState",value:function(e){Object.assign(this._interactionState,e),this.onStateChange&&this.onStateChange(this._interactionState)}},{key:"_onPanStart",value:function(e){var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=this.isFunctionKeyPressed(e)||e.rightButton;(this.invertPan||"pan"===this.dragMode)&&(n=!n);var r=this.controllerState[n?"panStart":"rotateStart"]({pos:t});return this._panMove=n,this.updateViewport(r,$M,{isDragging:!0}),!0}},{key:"_onPan",value:function(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}},{key:"_onPanEnd",value:function(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}},{key:"_onPanMove",value:function(e){if(!this.dragPan)return!1;var t=this.getCenter(e),n=this.controllerState.pan({pos:t});return this.updateViewport(n,$M,{isDragging:!0,isPanning:!0}),!0}},{key:"_onPanMoveEnd",value:function(e){var t=this.inertia;if(this.dragPan&&t&&e.velocity){var n=this.getCenter(e),r=[n[0]+e.velocityX*t/2,n[1]+e.velocityY*t/2],i=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(i,qM(qM({},this._getTransitionProps()),{},{transitionDuration:t,transitionEasing:XM}),{isDragging:!1,isPanning:!0})}else{var o=this.controllerState.panEnd();this.updateViewport(o,null,{isDragging:!1,isPanning:!1})}return!0}},{key:"_onPanRotate",value:function(e){if(!this.dragRotate)return!1;var t=this.getCenter(e),n=this.controllerState.rotate({pos:t});return this.updateViewport(n,$M,{isDragging:!0,isRotating:!0}),!0}},{key:"_onPanRotateEnd",value:function(e){var t=this.inertia;if(this.dragRotate&&t&&e.velocity){var n=this.getCenter(e),r=[n[0]+e.velocityX*t/2,n[1]+e.velocityY*t/2],i=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(i,qM(qM({},this._getTransitionProps()),{},{transitionDuration:t,transitionEasing:XM}),{isDragging:!1,isRotating:!0})}else{var o=this.controllerState.rotateEnd();this.updateViewport(o,null,{isDragging:!1,isRotating:!1})}return!0}},{key:"_onWheel",value:function(e){if(!this.scrollZoom)return!1;e.preventDefault();var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=this.scrollZoom,r=n.speed,i=void 0===r?.01:r,o=n.smooth,a=void 0!==o&&o,s=e.delta,l=2/(1+Math.exp(-Math.abs(s*i)));s<0&&0!==l&&(l=1/l);var u=this.controllerState.zoom({pos:t,scale:l});return this.updateViewport(u,qM(qM({},this._getTransitionProps({around:t})),{},{transitionDuration:a?250:1}),{isZooming:!0,isPanning:!0}),!0}},{key:"_onTriplePanStart",value:function(e){var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=this.controllerState.rotateStart({pos:t});return this.updateViewport(n,$M,{isDragging:!0}),!0}},{key:"_onTriplePan",value:function(e){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;var t=this.getCenter(e);t[0]-=e.deltaX;var n=this.controllerState.rotate({pos:t});return this.updateViewport(n,$M,{isDragging:!0,isRotating:!0}),!0}},{key:"_onTriplePanEnd",value:function(e){if(!this.isDragging())return!1;var t=this.inertia;if(this.touchRotate&&t&&e.velocityY){var n=this.getCenter(e),r=[n[0],n[1]+=e.velocityY*t/2],i=this.controllerState.rotate({pos:r});this.updateViewport(i,qM(qM({},this._getTransitionProps()),{},{transitionDuration:t,transitionEasing:XM}),{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{var o=this.controllerState.rotateEnd();this.updateViewport(o,null,{isDragging:!1,isRotating:!1})}return!0}},{key:"_onPinchStart",value:function(e){var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return this._startPinchRotation=e.rotation,this._lastPinchEvent=e,this.updateViewport(n,$M,{isDragging:!0}),!0}},{key:"_onPinch",value:function(e){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;var t=this.controllerState;if(this.touchZoom){var n=e.scale,r=this.getCenter(e);t=t.zoom({pos:r,scale:n})}if(this.touchRotate){var i=e.rotation;t=t.rotate({deltaAngleX:this._startPinchRotation-i})}return this.updateViewport(t,$M,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),this._lastPinchEvent=e,!0}},{key:"_onPinchEnd",value:function(e){if(!this.isDragging())return!1;var t=this.inertia,n=this._lastPinchEvent;if(this.touchZoom&&t&&n&&e.scale!==n.scale){var r=this.getCenter(e),i=this.controllerState.rotateEnd(),o=Math.log2(e.scale),a=(o-Math.log2(n.scale))/(e.deltaTime-n.deltaTime),s=Math.pow(2,o+a*t/2);i=i.zoom({pos:r,scale:s}).zoomEnd(),this.updateViewport(i,qM(qM({},this._getTransitionProps({around:r})),{},{transitionDuration:t,transitionEasing:XM}),{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{var l=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(l,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return this._startPinchRotation=null,this._lastPinchEvent=null,!0}},{key:"_onDoubleTap",value:function(e){if(!this.doubleClickZoom)return!1;var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}},{key:"_onKeyDown",value:function(e){if(!this.keyboard)return!1;var t,n=this.isFunctionKeyPressed(e),r=this.keyboard,i=r.zoomSpeed,o=r.moveSpeed,a=r.rotateSpeedX,s=r.rotateSpeedY,l=this.controllerState,u={};switch(e.srcEvent.code){case"Minus":t=n?l.zoomOut(i).zoomOut(i):l.zoomOut(i),u.isZooming=!0;break;case"Equal":t=n?l.zoomIn(i).zoomIn(i):l.zoomIn(i),u.isZooming=!0;break;case"ArrowLeft":n?(t=l.rotateLeft(a),u.isRotating=!0):(t=l.moveLeft(o),u.isPanning=!0);break;case"ArrowRight":n?(t=l.rotateRight(a),u.isRotating=!0):(t=l.moveRight(o),u.isPanning=!0);break;case"ArrowUp":n?(t=l.rotateUp(s),u.isRotating=!0):(t=l.moveUp(o),u.isPanning=!0);break;case"ArrowDown":n?(t=l.rotateDown(s),u.isRotating=!0):(t=l.moveDown(o),u.isPanning=!0);break;default:return!1}return this.updateViewport(t,this._getTransitionProps(),u),!0}},{key:"_getTransitionProps",value:function(){return $M}},{key:"events",set:function(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.setProps(this.controllerStateProps)}}]),e}(),nR=function(){function e(t){Np(this,e),PC(Number.isFinite(t.width),"`width` must be supplied"),PC(Number.isFinite(t.height),"`height` must be supplied"),this._viewportProps=this._applyConstraints(t)}return Tf(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getState",value:function(){return this._state}},{key:"shortestPathFrom",value:function(e){return this._viewportProps}},{key:"_applyConstraints",value:function(e){return e}}]),e}();function rR(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return iR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iR(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function iR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oR=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Np(this,e),Array.isArray(t)&&(t={compare:t,extract:t,required:t});var n=t,r=n.compare,i=n.extract,o=n.required;this._propsToCompare=r,this._propsToExtract=i,this._requiredProps=o}return Tf(e,[{key:"arePropsEqual",value:function(e,t){var n,r=rR(this._propsToCompare||Object.keys(t));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!(i in e)||!(i in t)||!tE(e[i],t[i]))return!1}}catch(o){r.e(o)}finally{r.f()}return!0}},{key:"initializeProps",value:function(e,t){var n;if(this._propsToExtract){var r,i={},o={},a=rR(this._propsToExtract);try{for(a.s();!(r=a.n()).done;){var s=r.value;i[s]=e[s],o[s]=t[s]}}catch(l){a.e(l)}finally{a.f()}n={start:i,end:o}}else n={start:e,end:t};return this._checkRequiredProps(n.start),this._checkRequiredProps(n.end),n}},{key:"interpolateProps",value:function(e,t,n){return t}},{key:"getDuration",value:function(e,t){return t.transitionDuration}},{key:"_checkRequiredProps",value:function(e){this._requiredProps&&this._requiredProps.forEach((function(t){var n=e[t];PC(Number.isFinite(n)||Array.isArray(n),"".concat(t," is required for transition"))}))}}]),e}();function aR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aR(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lR(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return uR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uR(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function uR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var fR=["longitude","latitude","zoom","bearing","pitch"],hR=["longitude","latitude","zoom"],dR=function(e){Xb(n,oR);var t=cR(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Np(this,n);var i=Array.isArray(r)?r:r.transitionProps;return(e=t.call(this,i||{compare:fR,extract:fR,required:hR})).opts=r,e}return Tf(n,[{key:"initializeProps",value:function(e,t){var r=Y_(Zb(n.prototype),"initializeProps",this).call(this,e,t),i=this.opts,o=i.makeViewport,a=i.around;if(o&&a){var s=o(e),l=o(t),u=s.unproject(a);r.start.around=a,Object.assign(r.end,{around:l.project(u),aroundLngLat:u,width:t.width,height:t.height})}return r}},{key:"interpolateProps",value:function(e,t,n){var r,i={},o=lR(this._propsToExtract);try{for(o.s();!(r=o.n()).done;){var a=r.value;i[a]=eE(e[a]||0,t[a]||0,n)}}catch(c){o.e(c)}finally{o.f()}if(t.aroundLngLat){var s=ob(this.opts.makeViewport(sR(sR({},t),i)).getMapCenterByLngLatPosition({lngLat:t.aroundLngLat,pos:eE(e.around,t.around,n)}),2),l=s[0],u=s[1];i.longitude=l,i.latitude=u}return i}}]),n}();function pR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pR(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var gR={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new dR,transitionInterruption:BM},yR=0,xR=0,bR=1.5,_R=0,wR=20,kR=0,SR=60,ER=function(e){Xb(n,nR);var t=mR(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.makeViewport,o=r.width,a=r.height,s=r.latitude,l=r.longitude,u=r.zoom,c=r.bearing,f=void 0===c?xR:c,h=r.pitch,d=void 0===h?yR:h,p=r.altitude,v=void 0===p?bR:p,m=r.maxZoom,g=void 0===m?wR:m,y=r.minZoom,x=void 0===y?_R:y,b=r.maxPitch,_=void 0===b?SR:b,w=r.minPitch,k=void 0===w?kR:w,S=r.startPanLngLat,E=r.startZoomLngLat,P=r.startRotatePos,C=r.startBearing,A=r.startPitch,O=r.startZoom;return Np(this,n),PC(Number.isFinite(l),"`longitude` must be supplied"),PC(Number.isFinite(s),"`latitude` must be supplied"),PC(Number.isFinite(u),"`zoom` must be supplied"),(e=t.call(this,{width:o,height:a,latitude:s,longitude:l,zoom:u,bearing:f,pitch:d,altitude:v,maxZoom:g,minZoom:x,maxPitch:_,minPitch:k}))._state={startPanLngLat:S,startZoomLngLat:E,startRotatePos:P,startBearing:C,startPitch:A,startZoom:O},e.makeViewport=i,e}return Tf(n,[{key:"panStart",value:function(e){var t=e.pos;return this._getUpdatedState({startPanLngLat:this._unproject(t)})}},{key:"pan",value:function(e){var t=e.pos,n=e.startPos,r=this._state.startPanLngLat||this._unproject(n);if(!r)return this;var i=ob(this._calculateNewLngLat({startPanLngLat:r,pos:t}),2),o=i[0],a=i[1];return this._getUpdatedState({longitude:o,latitude:a})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(e){var t=e.pos;return this._getUpdatedState({startRotatePos:t,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(e){var t,n=e.pos,r=e.deltaAngleX,i=void 0===r?0:r,o=e.deltaAngleY,a=void 0===o?0:o,s=this._state,l=s.startRotatePos,u=s.startBearing,c=s.startPitch;return l&&Number.isFinite(u)&&Number.isFinite(c)?(t=n?this._calculateNewPitchAndBearing(vR(vR({},this._getRotationParams(n,l)),{},{startBearing:u,startPitch:c})):{bearing:u+i,pitch:c+a},this._getUpdatedState(t)):this}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(e){var t=e.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(e){var t=e.pos,n=e.startPos,r=e.scale,i=this._state,o=i.startZoom,a=i.startZoomLngLat;Number.isFinite(o)||(o=this._viewportProps.zoom,a=this._unproject(n)||this._unproject(t));var s=this._calculateNewZoom({scale:r,startZoom:o}),l=ob(this.makeViewport(vR(vR({},this._viewportProps),{},{zoom:s})).getMapCenterByLngLatPosition({lngLat:a,pos:t}),2),u=l[0],c=l[1];return this._getUpdatedState({zoom:s,longitude:u,latitude:c})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(e)}},{key:"zoomOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(1/e)}},{key:"moveLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([e,0])}},{key:"moveRight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([-e,0])}},{key:"moveUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,e])}},{key:"moveDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,-e])}},{key:"rotateLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this._viewportProps.bearing-e})}},{key:"rotateRight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this._viewportProps.bearing+e})}},{key:"rotateUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this._viewportProps.pitch+e})}},{key:"rotateDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this._viewportProps.pitch-e})}},{key:"shortestPathFrom",value:function(e){var t=e.getViewportProps(),n=Object.assign({},this._viewportProps),r=n.bearing,i=n.longitude;return Math.abs(r-t.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-t.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}},{key:"_zoomFromCenter",value:function(e){var t=this._viewportProps,n=t.width,r=t.height;return this.zoom({pos:[n/2,r/2],scale:e})}},{key:"_panFromCenter",value:function(e){var t=this._viewportProps,n=t.width,r=t.height;return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}},{key:"_getUpdatedState",value:function(e){return new this.constructor(vR(vR(vR({makeViewport:this.makeViewport},this._viewportProps),this._state),e))}},{key:"_applyConstraints",value:function(e){var t=e.maxZoom,n=e.minZoom,r=e.zoom;e.zoom=JS(r,n,t);var i=e.maxPitch,o=e.minPitch,a=e.pitch;return e.pitch=JS(a,o,i),Object.assign(e,function(e){var t=e.width,n=e.height,r=e.longitude,i=e.latitude,o=e.zoom,a=e.pitch,s=void 0===a?0:a,l=e.bearing,u=void 0===l?0:l;(r<-180||r>180)&&(r=zC(r+180,360)-180),(u<-180||u>180)&&(u=zC(u+180,360)-180);var c=new aA({width:t,height:n,longitude:r,latitude:i,zoom:o}),f=c.project([r,85.05113])[1],h=c.project([r,-85.05113])[1],d=0;return h-f<n&&(o+=Math.log2(n/(h-f)),f=(c=new aA({width:t,height:n,longitude:r,latitude:i,zoom:o})).project([r,85.05113])[1],h=c.project([r,-85.05113])[1]),f>0?d=f:h<n&&(d=h-n),d&&(i=c.unproject([t/2,n/2+d])[1]),{width:t,height:n,longitude:r,latitude:i,zoom:o,pitch:s,bearing:u}}(e)),e}},{key:"_unproject",value:function(e){var t=this.makeViewport(this._viewportProps);return e&&t.unproject(e)}},{key:"_calculateNewLngLat",value:function(e){var t=e.startPanLngLat,n=e.pos;return this.makeViewport(this._viewportProps).getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"_calculateNewZoom",value:function(e){var t=e.scale,n=e.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom;return JS(n+Math.log2(t),o,i)}},{key:"_calculateNewPitchAndBearing",value:function(e){var t=e.deltaScaleX,n=e.deltaScaleY,r=e.startBearing,i=e.startPitch;n=JS(n,-1,1);var o=this._viewportProps,a=o.minPitch,s=o.maxPitch,l=i;return n>0?l=i+n*(s-i):n<0&&(l=i-n*(a-i)),{pitch:l,bearing:r+180*t}}},{key:"_getRotationParams",value:function(e,t){var n=e[0]-t[0],r=e[1]-t[1],i=e[1],o=t[1],a=this._viewportProps,s=a.width,l=a.height,u=n/s,c=0;return r>0?Math.abs(l-o)>5&&(c=r/(o-l)*1.2):r<0&&o>5&&(c=1-i/o),{deltaScaleX:u,deltaScaleY:c=Math.min(1,Math.max(-1,c))}}}]),n}(),PR=function(e){Xb(n,tR);var t=mR(n);function n(e){return Np(this,n),e.dragMode=e.dragMode||"pan",t.call(this,ER,e)}return Tf(n,[{key:"_getTransitionProps",value:function(e){return e?vR(vR({},gR),{},{transitionInterpolator:new dR(vR(vR({},e),{},{makeViewport:this.controllerState.makeViewport}))}):gR}}]),n}();function CR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var AR=function(e){Xb(n,FM);var t=CR(n);function n(e){return Np(this,n),t.call(this,Object.assign({},e,{type:oO}))}return Tf(n,[{key:"controller",get:function(){return this._getControllerProps({type:PR})}}]),n}();function OR(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return TR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TR(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function TR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}AR.displayName="MapView";var MR=new HA,RR=function(){function e(){Np(this,e),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}return Tf(e,[{key:"setProps",value:function(e){"effects"in e&&(e.effects.length===this.effects.length&&OM(e.effects,this.effects)||(this.setEffects(e.effects),this._needsRedraw="effects changed"))}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"getEffects",value:function(){return this._internalEffects}},{key:"finalize",value:function(){this.cleanup()}},{key:"setEffects",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cleanup(),this.effects=e,this._createInternalEffects()}},{key:"cleanup",value:function(){var e,t=OR(this.effects);try{for(t.s();!(e=t.n()).done;){e.value.cleanup()}}catch(i){t.e(i)}finally{t.f()}var n,r=OR(this._internalEffects);try{for(r.s();!(n=r.n()).done;){n.value.cleanup()}}catch(i){r.e(i)}finally{r.f()}this.effects.length=0,this._internalEffects.length=0}},{key:"_createInternalEffects",value:function(){this._internalEffects=this.effects.slice(),this.effects.some((function(e){return e instanceof HA}))||this._internalEffects.push(MR)}}]),e}();function IR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var LR=function(e){Xb(n,IA);var t=IR(n);function n(){return Np(this,n),t.apply(this,arguments)}return n}();function jR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jR(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function NR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var FR={blendFunc:[1,0,32771,0],blendEquation:32774},zR=function(e){Xb(n,IA);var t=NR(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"render",value:function(e){e.pickingFBO?(this.useAlpha=!0,this._drawPickingBuffer(e)):(this.useAlpha=!1,Y_(Zb(n.prototype),"render",this).call(this,e))}},{key:"_drawPickingBuffer",value:function(e){var t=this,r=e.layers,i=e.layerFilter,o=e.views,a=e.viewports,s=e.onViewportActive,l=e.pickingFBO,u=e.deviceRect,c=u.x,f=u.y,h=u.width,d=u.height,p=e.pass,v=void 0===p?"picking":p,m=e.redrawReason,g=e.pickZ,y=this.gl;return this.pickZ=g,Ob(y,DR(DR({scissorTest:!0,scissor:[c,f,h,d],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},FR),{},{blend:!g}),(function(){Y_(Zb(n.prototype),"render",t).call(t,{target:l,layers:r,layerFilter:i,views:o,viewports:a,onViewportActive:s,pass:v,redrawReason:m})}))}},{key:"shouldDrawLayer",value:function(e){return e.props.pickable}},{key:"getModuleParameters",value:function(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}},{key:"getLayerParameters",value:function(e,t){var n=this.pickZ?{blend:!1}:DR(DR({},FR),{},{blend:!0,blendColor:[0,0,0,this.useAlpha?(t+1)/255:1]});return Object.assign({},e.props.parameters,n)}}]),n}();function BR(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return VR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VR(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function VR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function UR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function WR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UR(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var GR=function(){function e(t){Np(this,e),this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new LR(t),this.pickLayersPass=new zR(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null,this._onError=null}return Tf(e,[{key:"setProps",value:function(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed"),"onError"in e&&(this._onError=e.onError)}},{key:"renderLayers",value:function(e){var t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=this.layerFilter,e.onError=this._onError,e.effects=e.effects||[],e.target=e.target||Fw.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);var n=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=t.render(WR(WR({},e),{},{target:n}));this._postRender(e.effects,e),this.renderCount++,Mx("deckRenderer.renderLayers",this,r,e)}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"finalize",value:function(){var e,t=this.renderBuffers,n=BR(t);try{for(n.s();!(e=n.n()).done;){e.value.delete()}}catch(r){n.e(r)}finally{n.f()}t.length=0}},{key:"_preRender",value:function(e,t){var n,r=null,i=BR(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.preRender(this.gl,t),o.postRender&&(r=o)}}catch(a){i.e(a)}finally{i.f()}r&&this._resizeRenderBuffers(),this.lastPostProcessEffect=r}},{key:"_resizeRenderBuffers",value:function(){var e=this.renderBuffers;0===e.length&&e.push(new Fw(this.gl),new Fw(this.gl));var t,n=BR(e);try{for(n.s();!(t=n.n()).done;){t.value.resize()}}catch(r){n.e(r)}finally{n.f()}}},{key:"_postRender",value:function(e,t){var n,r=this.renderBuffers,i={inputBuffer:r[0],swapBuffer:r[1],target:null},o=BR(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.postRender){if(a===this.lastPostProcessEffect){i.target=t.target,a.postRender(this.gl,i);break}var s=a.postRender(this.gl,i);i.inputBuffer=s,i.swapBuffer=s===r[0]?r[1]:r[0]}}}catch(l){o.e(l)}finally{o.f()}}}]),e}(),HR={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function qR(e){var t=e.pickedColors,n=e.layers,r=e.deviceX,i=e.deviceY,o=e.deviceRadius,a=e.deviceRect;if(t){for(var s=a.x,l=a.y,u=a.width,c=a.height,f=o*o,h=-1,d=0,p=0;p<c;p++){var v=p+l-i,m=v*v;if(m>f)d+=4*u;else for(var g=0;g<u;g++){if(t[d+3]-1>=0){var y=g+s-r,x=y*y+m;x<=f&&(f=x,h=d)}d+=4}}if(h>=0){var b=t[h+3]-1,_=t.slice(h,h+4),w=n[b];if(w){var k=w.decodePickingColor(_),S=Math.floor(h/4/u);return{pickedColor:_,pickedLayer:w,pickedObjectIndex:k,pickedX:s+(h/4-S*u),pickedY:l+S}}Ox.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return HR}function $R(e){var t=e.pickInfo,n=e.mode,r=e.viewports,i=e.layerFilter,o=e.pixelRatio,a=e.x,s=e.y,l=e.z,u=t&&t.pickedLayer,c=function(e,t,n){for(var r=e.length-1;r>=0;r--){var i=e[r];if(i.containsPixel(t)&&(!n||n(i)))return i}return e[0]}(r,{x:a,y:s},i&&u&&function(e){return i({layer:u,viewport:e,isPicking:!0,renderPass:"picking:".concat(n)})}),f=c&&c.unproject([a-c.x,s-c.y],{targetZ:l});return{color:null,layer:null,viewport:c,index:-1,picked:!1,x:a,y:s,pixel:[a,s],coordinate:f,devicePixel:t&&[t.pickedX,t.pickedY],pixelRatio:o}}function XR(e){var t=e.pickInfo,n=e.lastPickedInfo,r=e.mode,i=e.layers,o=t.pickedColor,a=t.pickedLayer,s=t.pickedObjectIndex,l=a?[a]:[];if("hover"===r){var u=n.index,c=n.layerId,f=a&&a.props.id;if(f!==c||s!==u){if(f!==c){var h=i.find((function(e){return e.props.id===c}));h&&l.unshift(h)}n.layerId=f,n.index=s,n.info=null}}var d=$R(e),p=new Map;return p.set(null,d),l.forEach((function(e){var t=Object.assign({},d);if(e===a&&(t.color=o,t.index=s,t.picked=!0),t=YR({layer:e,info:t,mode:r}),e===a&&"hover"===r&&(n.info=t),t&&p.set(t.layer.id,t),"hover"===r&&e.props.autoHighlight){var i={pickingSelectedColor:a===e?o:null},l=e.props.highlightColor;a===e&&"function"==typeof l&&(i.pickingHighlightColor=l(t)),e.setModuleParameters(i),e.setNeedsRedraw()}})),p}function YR(e){for(var t=e.layer,n=e.info,r=e.mode;t&&n;){var i=n.layer||t;n.layer=t,n=t.getPickingInfo({info:n,mode:r,sourceLayer:i}),t=t.parent}return n}function ZR(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return KR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KR(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function KR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var QR,JR=function(){function e(t){Np(this,e),this.gl=t,this.pickingFBO=null,this.pickLayersPass=new zR(t),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null},this._onError=null}return Tf(e,[{key:"setProps",value:function(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"onError"in e&&(this._onError=e.onError),"_pickable"in e&&(this._pickable=e._pickable)}},{key:"finalize",value:function(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}},{key:"pickObject",value:function(e){return this._pickClosestObject(e)}},{key:"pickObjects",value:function(e){return this._pickVisibleObjects(e)}},{key:"getLastPickedObject",value:function(e){var t=e.x,n=e.y,r=e.layers,i=e.viewports,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info,a=o&&o.layer&&o.layer.id,s=o&&o.viewport&&o.viewport.id,l=a?r.find((function(e){return e.id===a})):null,u=s&&i.find((function(e){return e.id===s}))||i[0],c=u&&u.unproject([t-u.x,n-u.y]),f={x:t,y:n,viewport:u,coordinate:c,layer:l};return l?Object.assign({},o,f):Object.assign(f,{color:null,object:null,index:-1})}},{key:"_resizeBuffer",value:function(){var e=this.gl;return this.pickingFBO||(this.pickingFBO=new Fw(e),Fw.isSupported(e,{colorBufferFloat:!0})&&(this.depthFBO=new Fw(e),this.depthFBO.attach(Qc({},36064,new U_(e,{format:Fx(e)?34836:6408,type:5126}))))),this.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.pickingFBO}},{key:"_getPickable",value:function(e){if(!1===this._pickable)return null;var t=e.filter((function(e){return e.isPickable()&&!e.isComposite}));return t.length>255?(Ox.warn("Too many pickable layers, only picking the first 255")(),t.slice(0,255)):t.length?t:null}},{key:"_pickClosestObject",value:function(e){var t=e.layers,n=e.views,r=e.viewports,i=e.x,o=e.y,a=e.radius,s=void 0===a?0:a,l=e.depth,u=void 0===l?1:l,c=e.mode,f=void 0===c?"query":c,h=e.unproject3D,d=e.onViewportActive;if(!(t=this._getPickable(t)))return{result:[],emptyInfo:$R({viewports:r,x:i,y:o})};this._resizeBuffer();for(var p,v=Tb(this.gl),m=Mb(this.gl,[i,o],!0),g=[m.x+Math.floor(m.width/2),m.y+Math.floor(m.height/2)],y=Math.round(s*v),x=this.pickingFBO,b=x.width,_=x.height,w=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:y,deviceWidth:b,deviceHeight:_}),k=[],S={},E=0;E<u;E++){var P=qR({pickedColors:w&&this._drawAndSample({layers:t,views:n,viewports:r,onViewportActive:d,deviceRect:w,pass:"picking:".concat(f),redrawReason:f}),layers:t,deviceX:g[0],deviceY:g[1],deviceRadius:y,deviceRect:w}),C=void 0;if(P.pickedLayer&&h&&this.depthFBO)C=this._drawAndSample({layers:[P.pickedLayer],views:n,viewports:r,onViewportActive:d,deviceRect:{x:P.pickedX,y:P.pickedY,width:1,height:1},pass:"picking:".concat(f),redrawReason:"pick-z",pickZ:!0})[0]*r[0].distanceScales.metersPerUnit[2]+r[0].position[2];if(P.pickedColor&&E+1<u){var A=P.pickedColor[3]-1;S[A]=!0,t[A].disablePickingIndex(P.pickedObjectIndex)}var O,T=ZR((p=XR({pickInfo:P,lastPickedInfo:this.lastPickedInfo,mode:f,layers:t,layerFilter:this.layerFilter,viewports:r,x:i,y:o,z:C,pixelRatio:v})).values());try{for(T.s();!(O=T.n()).done;){var M=O.value;M.layer&&k.push(M)}}catch(I){T.e(I)}finally{T.f()}if(!P.pickedColor)break}for(var R in S)t[R].restorePickingColors();return{result:k,emptyInfo:p&&p.get(null)}}},{key:"_pickVisibleObjects",value:function(e){var t=e.layers,n=e.views,r=e.viewports,i=e.x,o=e.y,a=e.width,s=void 0===a?1:a,l=e.height,u=void 0===l?1:l,c=e.mode,f=void 0===c?"query":c,h=e.maxObjects,d=void 0===h?null:h,p=e.onViewportActive;if(!(t=this._getPickable(t)))return[];this._resizeBuffer();for(var v=Tb(this.gl),m=Mb(this.gl,[i,o],!0),g=m.x,y=m.y+m.height,x=Mb(this.gl,[i+s,o+u],!0),b=x.x+x.width,_=x.y,w={x:g,y:_,width:b-g,height:y-_},k=function(e){var t=e.pickedColors,n=e.layers,r=new Map;if(t)for(var i=0;i<t.length;i+=4){var o=t[i+3]-1;if(o>=0){var a=t.slice(i,i+4),s=a.join(",");if(!r.has(s)){var l=n[o];l?r.set(s,{pickedColor:a,pickedLayer:l,pickedObjectIndex:l.decodePickingColor(a)}):Ox.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}({pickedColors:this._drawAndSample({layers:t,views:n,viewports:r,onViewportActive:p,deviceRect:w,pass:"picking:".concat(f),redrawReason:f}),layers:t}),S=new Map,E=Number.isFinite(d),P=0;P<k.length&&!(E&&S.size>=d);P++){var C=k[P],A={color:C.pickedColor,layer:null,index:C.pickedObjectIndex,picked:!0,x:i,y:o,width:s,height:u,pixelRatio:v};A=YR({layer:C.pickedLayer,info:A,mode:f}),S.has(A.object)||S.set(A.object,A)}return Array.from(S.values())}},{key:"_drawAndSample",value:function(e){var t=e.layers,n=e.views,r=e.viewports,i=e.onViewportActive,o=e.deviceRect,a=e.pass,s=e.redrawReason,l=e.pickZ;if(PC(o.width>0&&o.height>0),t.length<1)return null;var u=l?this.depthFBO:this.pickingFBO;this.pickLayersPass.render({layers:t,layerFilter:this.layerFilter,onError:this._onError,views:n,viewports:r,onViewportActive:i,pickingFBO:u,deviceRect:o,pass:a,redrawReason:s,pickZ:l});var c=o.x,f=o.y,h=o.width,d=o.height,p=new(l?Float32Array:Uint8Array)(h*d*4);return iw(u,{sourceX:c,sourceY:f,sourceWidth:h,sourceHeight:d,target:p}),p}},{key:"_getPickingRect",value:function(e){var t=e.deviceX,n=e.deviceY,r=e.deviceRadius,i=e.deviceWidth,o=e.deviceHeight,a=Math.max(0,t-r),s=Math.max(0,n-r),l=Math.min(i,t+r+1)-a,u=Math.min(o,n+r+1)-s;return l<=0||u<=0?null:{x:a,y:s,width:l,height:u}}}]),e}(),eI={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"},tI=function(){function e(t){Np(this,e);var n=t.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,eI),n.appendChild(this.el))}return Tf(e,[{key:"setTooltip",value:function(e,t,n){var r=this.el;if("string"==typeof e)r.innerText=e;else{if(!e)return void(r.style.display="none");"text"in e&&(r.innerText=e.text),"html"in e&&(r.innerHTML=e.html),"className"in e&&(r.className=e.className),Object.assign(r.style,e.style)}r.style.display="block",r.style.transform="translate(".concat(t,"px, ").concat(n,"px)")}},{key:"remove",value:function(){this.el&&this.el.remove()}}]),e}(),nI={exports:{}};
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
QR=nI,function(e,t,n,r){var i,o=["","webkit","Moz","MS","ms","o"],a=t.createElement("div"),s=Math.round,l=Math.abs,u=Date.now;function c(e,t,n){return setTimeout(g(e,n),t)}function f(e,t,n){return!!Array.isArray(e)&&(h(e,n[t],n),!0)}function h(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==r)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function d(t,n,r){var i="DEPRECATED METHOD: "+n+"\n"+r+" AT \n";return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=e.console&&(e.console.warn||e.console.log);return o&&o.call(e.console,i,r),t.apply(this,arguments)}}i="function"!=typeof Object.assign?function(e){if(e===r||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==r&&null!==i)for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])}return t}:Object.assign;var p=d((function(e,t,n){for(var i=Object.keys(t),o=0;o<i.length;)(!n||n&&e[i[o]]===r)&&(e[i[o]]=t[i[o]]),o++;return e}),"extend","Use `assign`."),v=d((function(e,t){return p(e,t,!0)}),"merge","Use `assign`.");function m(e,t,n){var r,o=t.prototype;(r=e.prototype=Object.create(o)).constructor=e,r._super=o,n&&i(r,n)}function g(e,t){return function(){return e.apply(t,arguments)}}function y(e,t){return"function"==typeof e?e.apply(t&&t[0]||r,t):e}function x(e,t){return e===r?t:e}function b(e,t,n){h(S(t),(function(t){e.addEventListener(t,n,!1)}))}function _(e,t,n){h(S(t),(function(t){e.removeEventListener(t,n,!1)}))}function w(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function k(e,t){return e.indexOf(t)>-1}function S(e){return e.trim().split(/\s+/g)}function E(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function P(e){return Array.prototype.slice.call(e,0)}function C(e,t,n){for(var r=[],i=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];E(i,a)<0&&r.push(e[o]),i[o]=a,o++}return n&&(r=t?r.sort((function(e,n){return e[t]>n[t]})):r.sort()),r}function A(e,t){for(var n,i,a=t[0].toUpperCase()+t.slice(1),s=0;s<o.length;){if((i=(n=o[s])?n+a:t)in e)return i;s++}return r}var O=1;function T(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}var M="ontouchstart"in e,R=A(e,"PointerEvent")!==r,I=M&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),L="touch",j="mouse",D=24,N=["x","y"],F=["clientX","clientY"];function z(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){y(e.options.enable,[e])&&n.handler(t)},this.init()}function B(e,t,n){var i=n.pointers.length,o=n.changedPointers.length,a=1&t&&i-o==0,s=12&t&&i-o==0;n.isFirst=!!a,n.isFinal=!!s,a&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,i=t.pointers,o=i.length;n.firstInput||(n.firstInput=V(t)),o>1&&!n.firstMultiple?n.firstMultiple=V(t):1===o&&(n.firstMultiple=!1);var a=n.firstInput,s=n.firstMultiple,c=s?s.center:a.center,f=t.center=U(i);t.timeStamp=u(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=q(c,f),t.distance=H(c,f),function(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},o=e.prevInput||{};1!==t.eventType&&4!==o.eventType||(i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}(n,t),t.offsetDirection=G(t.deltaX,t.deltaY);var h,d,p=W(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=p.x,t.overallVelocityY=p.y,t.overallVelocity=l(p.x)>l(p.y)?p.x:p.y,t.scale=s?(h=s.pointers,H((d=i)[0],d[1],F)/H(h[0],h[1],F)):1,t.rotation=s?function(e,t){return q(t[1],t[0],F)+q(e[1],e[0],F)}(s.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,i,o,a,s=e.lastInterval||t,u=t.timeStamp-s.timeStamp;if(8!=t.eventType&&(u>25||s.velocity===r)){var c=t.deltaX-s.deltaX,f=t.deltaY-s.deltaY,h=W(u,c,f);i=h.x,o=h.y,n=l(h.x)>l(h.y)?h.x:h.y,a=G(c,f),e.lastInterval=t}else n=s.velocity,i=s.velocityX,o=s.velocityY,a=s.direction;t.velocity=n,t.velocityX=i,t.velocityY=o,t.direction=a}(n,t);var v=e.element;w(t.srcEvent.target,v)&&(v=t.srcEvent.target),t.target=v}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function V(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:s(e.pointers[n].clientX),clientY:s(e.pointers[n].clientY)},n++;return{timeStamp:u(),pointers:t,center:U(t),deltaX:e.deltaX,deltaY:e.deltaY}}function U(e){var t=e.length;if(1===t)return{x:s(e[0].clientX),y:s(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:s(n/t),y:s(r/t)}}function W(e,t,n){return{x:t/e||0,y:n/e||0}}function G(e,t){return e===t?1:l(e)>=l(t)?e<0?2:4:t<0?8:16}function H(e,t,n){n||(n=N);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function q(e,t,n){n||(n=N);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}z.prototype={handler:function(){},init:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(T(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(T(this.element),this.evWin,this.domHandler)}};var $={mousedown:1,mousemove:2,mouseup:4},X="mousedown",Y="mousemove mouseup";function Z(){this.evEl=X,this.evWin=Y,this.pressed=!1,z.apply(this,arguments)}m(Z,z,{handler:function(e){var t=$[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:j,srcEvent:e}))}});var K={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Q={2:L,3:"pen",4:j,5:"kinect"},J="pointerdown",ee="pointermove pointerup pointercancel";function te(){this.evEl=J,this.evWin=ee,z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(J="MSPointerDown",ee="MSPointerMove MSPointerUp MSPointerCancel"),m(te,z,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=K[r],o=Q[e.pointerType]||e.pointerType,a=o==L,s=E(t,e.pointerId,"pointerId");1&i&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):12&i&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(s,1))}});var ne={touchstart:1,touchmove:2,touchend:4,touchcancel:8},re="touchstart",ie="touchstart touchmove touchend touchcancel";function oe(){this.evTarget=re,this.evWin=ie,this.started=!1,z.apply(this,arguments)}function ae(e,t){var n=P(e.touches),r=P(e.changedTouches);return 12&t&&(n=C(n.concat(r),"identifier",!0)),[n,r]}m(oe,z,{handler:function(e){var t=ne[e.type];if(1===t&&(this.started=!0),this.started){var n=ae.call(this,e,t);12&t&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:L,srcEvent:e})}}});var se={touchstart:1,touchmove:2,touchend:4,touchcancel:8},le="touchstart touchmove touchend touchcancel";function ue(){this.evTarget=le,this.targetIds={},z.apply(this,arguments)}function ce(e,t){var n=P(e.touches),r=this.targetIds;if(3&t&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=P(e.changedTouches),s=[],l=this.target;if(o=n.filter((function(e){return w(e.target,l)})),1===t)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),12&t&&delete r[a[i].identifier],i++;return s.length?[C(o.concat(s),"identifier",!0),s]:void 0}function fe(){z.apply(this,arguments);var e=g(this.handler,this);this.touch=new ue(this.manager,e),this.mouse=new Z(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function he(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,de.call(this,t)):12&e&&de.call(this,t)}function de(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)}),2500)}}function pe(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(t-i.x),a=Math.abs(n-i.y);if(o<=25&&a<=25)return!0}return!1}m(ue,z,{handler:function(e){var t=se[e.type],n=ce.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:L,srcEvent:e})}}),m(fe,z,{handler:function(e,t,n){var r=n.pointerType==L,i=n.pointerType==j;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)he.call(this,t,n);else if(i&&pe.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ve=A(a.style,"touchAction"),me=ve!==r,ge="compute",ye="auto",xe="manipulation",be="none",_e="pan-x",we="pan-y",ke=function(){if(!me)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(r){t[r]=!n||e.CSS.supports("touch-action",r)})),t}();function Se(e,t){this.manager=e,this.set(t)}Se.prototype={set:function(e){e==ge&&(e=this.compute()),me&&this.manager.element.style&&ke[e]&&(this.manager.element.style[ve]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return h(this.manager.recognizers,(function(t){y(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(k(e,be))return be;var t=k(e,_e),n=k(e,we);return t&&n?be:t||n?t?_e:we:k(e,xe)?xe:ye}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,i=k(r,be)&&!ke.none,o=k(r,we)&&!ke["pan-y"],a=k(r,_e)&&!ke["pan-x"];if(i){var s=1===e.pointers.length,l=e.distance<2,u=e.deltaTime<250;if(s&&l&&u)return}if(!a||!o)return i||o&&6&n||a&&n&D?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Ee=32;function Pe(e){this.options=i({},this.defaults,e||{}),this.id=O++,this.manager=null,this.options.enable=x(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Ce(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function Ae(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function Oe(e,t){var n=t.manager;return n?n.get(e):e}function Te(){Pe.apply(this,arguments)}function Me(){Te.apply(this,arguments),this.pX=null,this.pY=null}function Re(){Te.apply(this,arguments)}function Ie(){Pe.apply(this,arguments),this._timer=null,this._input=null}function Le(){Te.apply(this,arguments)}function je(){Te.apply(this,arguments)}function De(){Pe.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ne(e,t){return(t=t||{}).recognizers=x(t.recognizers,Ne.defaults.preset),new Fe(e,t)}function Fe(e,t){var n;this.options=i({},Ne.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(R?te:I?ue:M?fe:Z))(n,B),this.touchAction=new Se(this,this.options.touchAction),ze(this,!0),h(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function ze(e,t){var n,r=e.element;r.style&&(h(e.options.cssProps,(function(i,o){n=A(r.style,o),t?(e.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}Pe.prototype={defaults:{},set:function(e){return i(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(f(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Oe(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return f(e,"dropRecognizeWith",this)||(e=Oe(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(f(e,"requireFailure",this))return this;var t=this.requireFail;return-1===E(t,e=Oe(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(f(e,"dropRequireFailure",this))return this;e=Oe(e,this);var t=E(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<8&&r(t.options.event+Ce(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=8&&r(t.options.event+Ce(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Ee},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=i({},e);if(!y(this.options.enable,[this,t]))return this.reset(),void(this.state=Ee);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},m(Te,Pe,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=6&t,i=this.attrTest(e);return r&&(8&n||!i)?16|t:r||i?4&n?8|t:2&t?4|t:2:Ee}}),m(Me,Te,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push(we),e&D&&t.push(_e),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,o=e.deltaX,a=e.deltaY;return i&t.direction||(6&t.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,r=Math.abs(e.deltaX)):(i=0===a?1:a<0?8:16,n=a!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return Te.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Ae(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),m(Re,Te,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[be]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),m(Ie,Pe,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ye]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||12&e.eventType&&!i)this.reset();else if(1&e.eventType)this.reset(),this._timer=c((function(){this.state=8,this.tryEmit()}),t.time,this);else if(4&e.eventType)return 8;return Ee},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}}),m(Le,Te,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[be]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),m(je,Te,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Me.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return 30&n?t=e.overallVelocity:6&n?t=e.overallVelocityX:n&D&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&l(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=Ae(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),m(De,Pe,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[xe]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=e.eventType)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||H(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&o?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=c((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return Ee},failTimeout:function(){return this._timer=c((function(){this.state=Ee}),this.options.interval,this),Ee},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ne.VERSION="2.0.7",Ne.defaults={domEvents:!1,touchAction:ge,enable:!0,inputTarget:null,inputClass:null,preset:[[Le,{enable:!1}],[Re,{enable:!1},["rotate"]],[je,{direction:6}],[Me,{direction:6},["swipe"]],[De],[De,{event:"doubletap",taps:2},["tap"]],[Ie]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Fe.prototype={set:function(e){return i(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,i=t.curRecognizer;(!i||i&&8&i.state)&&(i=t.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&14&n.state&&(i=t.curRecognizer=n),o++}},get:function(e){if(e instanceof Pe)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(f(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(f(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=E(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==r&&t!==r){var n=this.handlers;return h(S(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(e!==r){var n=this.handlers;return h(S(e),(function(e){t?n[e]&&n[e].splice(E(n[e],t),1):delete n[e]})),this}},emit:function(e,n){this.options.domEvents&&function(e,n){var r=t.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=n,n.target.dispatchEvent(r)}(e,n);var r=this.handlers[e]&&this.handlers[e].slice();if(r&&r.length){n.type=e,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var i=0;i<r.length;)r[i](n),i++}},destroy:function(){this.element&&ze(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},i(Ne,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Ee,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:D,DIRECTION_ALL:30,Manager:Fe,Input:z,TouchAction:Se,TouchInput:ue,MouseInput:Z,PointerEventInput:te,TouchMouseInput:fe,SingleTouchInput:oe,Recognizer:Pe,AttrRecognizer:Te,Tap:De,Pan:Me,Swipe:je,Pinch:Re,Rotate:Le,Press:Ie,on:b,off:_,each:h,merge:v,extend:p,assign:i,inherit:m,bindFn:g,prefixed:A}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=Ne,QR.exports?QR.exports=Ne:e.Hammer=Ne}(window,document);var rI,iI,oI=nI.exports,aI={mousedown:1,mousemove:2,mouseup:4};rI=oI.PointerEventInput,iI=rI.prototype.handler,rI.prototype.handler=function(e){var t=this.store;e.button>0&&(function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}(t,(function(t){return t.pointerId===e.pointerId}))||t.push(e)),iI.call(this,e)},oI.MouseInput.prototype.handler=function(e){var t=aI[e.type];1&t&&e.button>=0&&(this.pressed=!0),2&t&&0===e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))};var sI=oI.Manager,lI=oI?[[oI.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[oI.Rotate,{enable:!1}],[oI.Pinch,{enable:!1}],[oI.Swipe,{enable:!1}],[oI.Pan,{threshold:0,enable:!1}],[oI.Press,{enable:!1}],[oI.Tap,{event:"doubletap",taps:2,enable:!1}],[oI.Tap,{event:"anytap",enable:!1}],[oI.Tap,{enable:!1}]]:null,uI={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},cI={doubletap:["tap"]},fI={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},hI=["keydown","keyup"],dI=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],pI=["wheel","mousewheel","DOMMouseScroll"],vI={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},mI={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},gI="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",yI="undefined"!=typeof window?window:global,xI=!1;try{var bI={get passive(){return xI=!0,!0}};yI.addEventListener("test",bI,bI),yI.removeEventListener("test",bI,bI)}catch(s$){}var _I=-1!==gI.indexOf("firefox"),wI=pI,kI=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Np(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},i),this.events=wI.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(e){return t.addEventListener(e,r.handleEvent,!!xI&&{passive:!1})}))}return Tf(e,[{key:"destroy",value:function(){var e=this;this.events.forEach((function(t){return e.element.removeEventListener(t,e.handleEvent)}))}},{key:"enableEventType",value:function(e,t){"wheel"===e&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){if(this.options.enable){var t=e.deltaY;yI.WheelEvent&&(_I&&e.deltaMode===yI.WheelEvent.DOM_DELTA_PIXEL&&(t/=yI.devicePixelRatio),e.deltaMode===yI.WheelEvent.DOM_DELTA_LINE&&(t*=40));var n={x:e.clientX,y:e.clientY};0!==t&&t%4.000244140625==0&&(t=Math.floor(t/4.000244140625)),e.shiftKey&&t&&(t*=.25),this._onWheel(e,-t,n)}}},{key:"_onWheel",value:function(e,t,n){this.callback({type:"wheel",center:n,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}]),e}(),SI=dI,EI=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Np(this,e),this.element=t,this.callback=n,this.pressed=!1,this.options=Object.assign({enable:!0},i),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=SI.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(e){return t.addEventListener(e,r.handleEvent)}))}return Tf(e,[{key:"destroy",value:function(){var e=this;this.events.forEach((function(t){return e.element.removeEventListener(t,e.handleEvent)}))}},{key:"enableEventType",value:function(e,t){"pointermove"===e&&(this.enableMoveEvent=t),"pointerover"===e&&(this.enableOverEvent=t),"pointerout"===e&&(this.enableOutEvent=t),"pointerleave"===e&&(this.enableLeaveEvent=t)}},{key:"handleEvent",value:function(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}},{key:"handleOverEvent",value:function(e){this.enableOverEvent&&"mouseover"===e.type&&this.callback({type:"pointerover",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleOutEvent",value:function(e){this.enableOutEvent&&"mouseout"===e.type&&this.callback({type:"pointerout",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleLeaveEvent",value:function(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:"pointerleave",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleMoveEvent",value:function(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:"pointermove",srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}]),e}(),PI=hI,CI=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Np(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},i),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=PI.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),t.tabIndex=i.tabIndex||0,t.style.outline="none",this.events.forEach((function(e){return t.addEventListener(e,r.handleEvent)}))}return Tf(e,[{key:"destroy",value:function(){var e=this;this.events.forEach((function(t){return e.element.removeEventListener(t,e.handleEvent)}))}},{key:"enableEventType",value:function(e,t){"keydown"===e&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}},{key:"handleEvent",value:function(e){var t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:"keydown",srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:"keyup",srcEvent:e,key:e.key,target:e.target}))}}]),e}(),AI=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Np(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},r),this.handleEvent=this.handleEvent.bind(this),t.addEventListener("contextmenu",this.handleEvent)}return Tf(e,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function(e,t){"contextmenu"===e&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){this.options.enable&&this.callback({type:"contextmenu",center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}]),e}(),OI={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};var TI={srcElement:"root",priority:0},MI=function(){function e(t){Np(this,e),this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}return Tf(e,[{key:"isEmpty",value:function(){return!this._active}},{key:"add",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.handlers,a=this.handlersByElement;n&&("object"!==Hc(n)||n.addEventListener)&&(n={srcElement:n}),n=n?Object.assign({},TI,n):TI;var s=a.get(n.srcElement);s||(s=[],a.set(n.srcElement,s));var l={type:e,handler:t,srcElement:n.srcElement,priority:n.priority};r&&(l.once=!0),i&&(l.passive=!0),o.push(l),this._active=this._active||!l.passive;for(var u=s.length-1;u>=0&&!(s[u].priority>=l.priority);)u--;s.splice(u+1,0,l)}},{key:"remove",value:function(e,t){for(var n=this.handlers,r=this.handlersByElement,i=n.length-1;i>=0;i--){var o=n[i];if(o.type===e&&o.handler===t){n.splice(i,1);var a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}this._active=n.some((function(e){return!e.passive}))}},{key:"handleEvent",value:function(e){if(!this.isEmpty()){for(var t=this._normalizeEvent(e),n=e.srcEvent.target;n&&n!==t.rootElement;){if(this._emit(t,n),t.handled)return;n=n.parentNode}this._emit(t,"root")}}},{key:"_emit",value:function(e,t){var n=this.handlersByElement.get(t);if(n){for(var r=!1,i=function(){e.handled=!0},o=function(){e.handled=!0,r=!0},a=[],s=0;s<n.length;s++){var l=n[s],u=l.type,c=l.handler,f=l.once;if(c(Object.assign({},e,{type:u,stopPropagation:i,stopImmediatePropagation:o})),f&&a.push(n[s]),r)break}for(var h=0;h<a.length;h++){var d=a[h],p=d.type,v=d.handler;this.remove(p,v)}}}},{key:"_normalizeEvent",value:function(e){var t=this.eventManager.element;return Object.assign({},e,function(e){var t=OI[e.srcEvent.type];if(!t)return null;var n=e.srcEvent,r=n.buttons,i=n.button,o=n.which,a=!1,s=!1,l=!1;return 4===t||2===t&&!Number.isFinite(r)?(a=1===o,s=2===o,l=3===o):2===t?(a=Boolean(1&r),s=Boolean(4&r),l=Boolean(2&r)):1===t&&(a=0===i,s=1===i,l=2===i),{leftButton:a,middleButton:s,rightButton:l}}(e),function(e,t){var n=e.srcEvent;if(!e.center&&!Number.isFinite(n.clientX))return null;var r=e.center||{x:n.clientX,y:n.clientY},i=t.getBoundingClientRect(),o=i.width/t.offsetWidth,a=i.height/t.offsetHeight;return{center:r,offsetCenter:{x:(r.x-i.left-t.clientLeft)/o,y:(r.y-i.top-t.clientTop)/a}}}(e,t),{handled:!1,rootElement:t})}}]),e}();function RI(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return II(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return II(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function II(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var LI={events:null,recognizers:null,recognizerOptions:{},Manager:sI,touchAction:"none",tabIndex:0},jI=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Np(this,e),this.options=Object.assign({},LI,n),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(t);var r=n.events;r&&this.on(r)}return Tf(e,[{key:"setElement",value:function(e){var t=this;if(this.element&&this.destroy(),this.element=e,e){var n=this.options,r=n.Manager;for(var i in this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||lI}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(uI).forEach((function(e){var n=t.manager.get(e);n&&uI[e].forEach((function(e){n.recognizeWith(e)}))})),n.recognizerOptions){var o=this.manager.get(i);if(o){var a=n.recognizerOptions[i];delete a.enable,o.set(a)}}this.wheelInput=new kI(e,this._onOtherEvent,{enable:!1}),this.moveInput=new EI(e,this._onOtherEvent,{enable:!1}),this.keyInput=new CI(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new AI(e,this._onOtherEvent,{enable:!1});var s,l=RI(this.events);try{for(l.s();!(s=l.n()).done;){var u=ob(s.value,2),c=u[0],f=u[1];f.isEmpty()||(this._toggleRecognizer(f.recognizerName,!0),this.manager.on(c,f.handleEvent))}}catch(s$){l.e(s$)}finally{l.f()}}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(e,t,n){this._addEventHandler(e,t,n,!1)}},{key:"once",value:function(e,t,n){this._addEventHandler(e,t,n,!0)}},{key:"watch",value:function(e,t,n){this._addEventHandler(e,t,n,!1,!0)}},{key:"off",value:function(e,t){this._removeEventHandler(e,t)}},{key:"_toggleRecognizer",value:function(e,t){var n=this.manager;if(n){var r=n.get(e);if(r&&r.options.enable!==t){r.set({enable:t});var i=cI[e];i&&!this.options.recognizers&&i.forEach((function(i){var o=n.get(i);t?(o.requireFailure(e),r.dropRequireFailure(i)):o.dropRequireFailure(e)}))}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}}},{key:"_addEventHandler",value:function(e,t,n,r,i){if("string"==typeof e){var o=this.manager,a=this.events,s=mI[e]||e,l=a.get(s);l||(l=new MI(this),a.set(s,l),l.recognizerName=vI[s]||s,o&&o.on(s,l.handleEvent)),l.add(e,t,n,r,i),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}else for(var u in n=t,e)this._addEventHandler(u,e[u],n,r,i)}},{key:"_removeEventHandler",value:function(e,t){if("string"==typeof e){var n=this.events,r=mI[e]||e,i=n.get(r);if(i&&(i.remove(e,t),i.isEmpty())){var o,a=i.recognizerName,s=!1,l=RI(n.values());try{for(l.s();!(o=l.n()).done;){var u=o.value;if(u.recognizerName===a&&!u.isEmpty()){s=!0;break}}}catch(s$){l.e(s$)}finally{l.f()}s||this._toggleRecognizer(a,!1)}}else for(var c in e)this._removeEventHandler(c,e[c])}},{key:"_onBasicInput",value:function(e){var t=e.srcEvent,n=fI[t.type];n&&this.manager.emit(n,e)}},{key:"_onOtherEvent",value:function(e){this.manager.emit(e.type,e)}}]),e}();function DI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function NI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DI(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function FI(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return zI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zI(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function zI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function BI(){}var VI={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},onWebGLInitialized:BI,onResize:BI,onViewStateChange:BI,onInteractionStateChange:BI,onBeforeRender:BI,onAfterRender:BI,onLoad:BI,onError:null,_onMetrics:null,getCursor:function(e){return e.isDragging?"grabbing":"grab"},debug:!1,drawPickingColors:!1},UI=function(){function e(t){Np(this,e),t=Object.assign({},VI,t),this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isHovering:!1,isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractionStateChange=this._onInteractionStateChange.bind(this),t.viewState&&t.initialViewState&&Ox.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===ex.getBrowser()&&Ox.warn("IE 11 support will be deprecated in v8.0")(),t.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new rm({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&qA.setProps(t._typedArrayManagerProps),this.animationLoop.start()}return Tf(e,[{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),this.props.canvas||this.props.gl||!this.canvas||(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}},{key:"setProps",value:function(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&Ox.removed("onLayerHover","onHover")(),"onLayerClick"in e&&Ox.removed("onLayerClick","onClick")(),e.initialViewState&&!OM(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);var t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return"Deck._animate";var t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var n=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),i=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return t=t||n||r||i||o}},{key:"redraw",value:function(e){if(this.layerManager){var t=e||this.needsRedraw({clearRedrawFlags:!0});t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}}},{key:"getViews",value:function(){return this.viewManager.views}},{key:"getViewports",value:function(e){return this.viewManager.getViewports(e)}},{key:"pickObject",value:function(e){var t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}},{key:"pickMultipleObjects",value:function(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}},{key:"pickObjects",value:function(e){return this._pick("pickObjects","pickObjects Time",e)}},{key:"_addResources",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in e)this.layerManager.resourceManager.add({resourceId:n,data:e[n],forceUpdate:t})}},{key:"_removeResources",value:function(e){var t,n=FI(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.layerManager.resourceManager.remove(r)}}catch(s$){n.e(s$)}finally{n.f()}}},{key:"_pick",value:function(e,t,n){var r=this.stats;r.get("Pick Count").incrementCount(),r.get(t).timeStart();var i=this.deckPicker[e](Object.assign({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport},n));return r.get(t).timeEnd(),i}},{key:"_createCanvas",value:function(e){var t=e.canvas;("string"==typeof t&&PC(t=document.getElementById(t)),t)||(t=document.createElement("canvas"),(e.parent||document.body).appendChild(t));var n=e.id,r=e.style;return t.id=n,Object.assign(t.style,r),t}},{key:"_setCanvasSize",value:function(e){if(this.canvas){var t=e.width,n=e.height;(t||0===t)&&(t=Number.isFinite(t)?"".concat(t,"px"):t,this.canvas.style.width=t),(n||0===n)&&(n=Number.isFinite(n)?"".concat(n,"px"):n,this.canvas.style.position="absolute",this.canvas.style.height=n)}}},{key:"_updateCanvasSize",value:function(){if(this._checkForCanvasSizeChange()){var e=this.width,t=this.height;this.viewManager.setProps({width:e,height:t}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function(){var e=this.canvas;if(!e)return!1;var t=e.clientWidth||e.width,n=e.clientHeight||e.height;return(t!==this.width||n!==this.height)&&(this.width=t,this.height=n,!0)}},{key:"_createAnimationLoop",value:function(e){var t=this,n=e.width,r=e.height,i=e.gl,o=e.glOptions,a=e.debug,s=e.useDevicePixels,l=e.autoResizeDrawingBuffer;return new Yk({width:n,height:r,useDevicePixels:s,autoResizeDrawingBuffer:l,autoResizeViewport:!1,gl:i,onCreateContext:function(e){return zb(Object.assign({},o,e,{canvas:t.canvas,debug:a}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:e.onBeforeRender,onAfterRender:e.onAfterRender,onError:e.onError})}},{key:"_getViewState",value:function(){return this.props.viewState||this.viewState}},{key:"_getViews",value:function(){var e=this.props.views||[new AR({id:"default-view"})];return(e=Array.isArray(e)?e:[e]).length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}},{key:"_onPointerMove",value:function(e){var t=this._pickRequest;if("pointerleave"===e.type)t.x=-1,t.y=-1,t.radius=0;else{if(e.leftButton||e.rightButton)return;var n=e.offsetCenter;if(!n)return;t.x=n.x,t.y=n.y,t.radius=this.props.pickingRadius}this.layerManager&&(this.layerManager.context.mousePosition={x:t.x,y:t.y}),t.event=e,t.mode="hover"}},{key:"_pickAndCallback",value:function(){var e=this._pickRequest;if(e.event){var t=this._pick("pickObject","pickObject Time",e),n=t.result,r=t.emptyInfo;this.interactiveState.isHovering=n.length>0;var i,o=r,a=!1,s=FI(n);try{for(s.s();!(i=s.n()).done;){var l=i.value;o=l,a=l.layer.onHover(l,e.event)}}catch(s$){s.e(s$)}finally{s.f()}if(!a&&this.props.onHover&&this.props.onHover(o,e.event),this.props.getTooltip){var u=this.props.getTooltip(o);this.tooltip.setTooltip(u,o.x,o.y)}e.event=null}}},{key:"_updateCursor",value:function(){var e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_setGLContext",value:function(e){if(!this.layerManager){this.canvas||(this.canvas=e.canvas,Bb(e,{enable:!0,copyState:!0})),this.tooltip=new tI(this.canvas),Cb(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);var t=new mC;for(var n in t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new jI(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}}),bC)this.eventManager.on(n,this._onEvent);this.viewManager=new RM({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractionStateChange:this._onInteractionStateChange,views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});var r=this.viewManager.getViewports()[0];this.layerManager=new AM(e,{deck:this,stats:this.stats,viewport:r,timeline:t}),this.effectManager=new RR,this.deckRenderer=new GR(e),this.deckPicker=new JR(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function(e,t){var n=this.layerManager.context.gl;Cb(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers(Object.assign({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects()},t)),this.props.onAfterRender({gl:n})}},{key:"_onRendererInitialized",value:function(e){var t=e.gl;this._setGLContext(t)}},{key:"_onRenderFrame",value:function(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),Ox.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}},{key:"_onViewStateChange",value:function(e){var t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState=NI(NI({},this.viewState),{},Qc({},e.viewId,t)),this.props.viewState||this.viewManager.setProps({viewState:this.viewState}))}},{key:"_onInteractionStateChange",value:function(e){this.interactiveState.isDragging=e.isDragging,this.props.onInteractionStateChange(e)}},{key:"_onEvent",value:function(e){var t=bC[e.type],n=e.offsetCenter;if(t&&n){var r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),o=i.layer,a=o&&(o[t.handler]||o.props[t.handler]),s=this.props[t.handler],l=!1;a&&(l=a.call(o,i,e)),!l&&s&&s(i,e)}}},{key:"_onPointerDown",value:function(e){var t=e.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:t.x,y:t.y,radius:this.props.pickingRadius})}},{key:"_getFrameStats",value:function(){var e=this.stats;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();var t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}},{key:"_getMetrics",value:function(){var e=this.metrics,t=this.stats;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();var n=qb.get("Memory Usage");e.bufferMemory=n.get("Buffer Memory").count,e.textureMemory=n.get("Texture Memory").count,e.renderbufferMemory=n.get("Renderbuffer Memory").count,e.gpuMemory=n.get("GPU Memory").count}}]),e}();function WI(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return GI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GI(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function GI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function HI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}UI.getPropTypes=function(e){return{id:e.string,width:e.oneOfType([e.number,e.string]),height:e.oneOfType([e.number,e.string]),layers:e.oneOfType([e.object,e.array]),layerFilter:e.func,views:e.oneOfType([e.object,e.array]),viewState:e.object,effects:e.arrayOf(e.instanceOf(AA)),controller:e.oneOfType([e.func,e.bool,e.object]),gl:e.object,glOptions:e.object,parameters:e.object,pickingRadius:e.number,useDevicePixels:e.oneOfType([e.bool,e.number]),touchAction:e.string,eventRecognizerOptions:e.object,onWebGLInitialized:e.func,onResize:e.func,onViewStateChange:e.func,onInteractionStateChange:e.func,onBeforeRender:e.func,onAfterRender:e.func,onLoad:e.func,onError:e.func,debug:e.bool,drawPickingColors:e.bool,_framebuffer:e.object,_animate:e.bool,_pickable:e.bool,_typedArrayManagerProps:e.object}},UI.defaultProps=VI,UI.VERSION=Lx.VERSION;var qI=function(e){Xb(n,xM);var t=HI(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"getSubLayers",value:function(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function(){}},{key:"setState",value:function(e){Y_(Zb(n.prototype),"setState",this).call(this,e),this.setNeedsUpdate()}},{key:"getPickingInfo",value:function(e){var t=e.info,n=t.object;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id?Object.assign(t,{object:n.__source.object,index:n.__source.index}):t}},{key:"renderLayers",value:function(){return null}},{key:"shouldRenderSubLayer",value:function(e,t){var n=this.props._subLayerProps;return t&&t.length||n&&n[e]}},{key:"getSubLayerClass",value:function(e,t){var n=this.props._subLayerProps;return n&&n[e]&&n[e].type||t}},{key:"getSubLayerRow",value:function(e,t,n){return e.__source={parent:this,object:t,index:n},e}},{key:"getSubLayerAccessor",value:function(e){if("function"==typeof e){var t={data:this.props.data,target:[]};return function(n,r){return n&&n.__source?(t.index=n.__source.index,e(n.__source.object,t)):e(n,r)}}return e}},{key:"getSubLayerProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,n=t.opacity,r=t.pickable,i=t.visible,o=t.parameters,a=t.getPolygonOffset,s=t.highlightedObjectIndex,l=t.autoHighlight,u=t.highlightColor,c=t.coordinateSystem,f=t.coordinateOrigin,h=t.wrapLongitude,d=t.positionFormat,p=t.modelMatrix,v=t.extensions,m=t._subLayerProps,g={opacity:n,pickable:r,visible:i,parameters:o,getPolygonOffset:a,highlightedObjectIndex:s,autoHighlight:l,highlightColor:u,coordinateSystem:c,coordinateOrigin:f,wrapLongitude:h,positionFormat:d,modelMatrix:p,extensions:v},y=m&&m[e.id],x=y&&y.updateTriggers,b=e.id||"sublayer";if(y){var _=this.constructor._propTypes;for(var w in y){var k=_[w];k&&"accessor"===k.type&&(y[w]=this.getSubLayerAccessor(y[w]))}}Object.assign(g,e,y,{id:"".concat(this.props.id,"-").concat(b),updateTriggers:Object.assign({all:this.props.updateTriggers.all},e.updateTriggers,x)});var S,E=WI(v);try{for(E.s();!(S=E.n()).done;){var P=S.value,C=P.getSubLayerProps.call(this,P);C&&Object.assign(g,C,{updateTriggers:Object.assign(g.updateTriggers,C.updateTriggers)})}}catch(s$){E.e(s$)}finally{E.f()}return g}},{key:"_getAttributeManager",value:function(){return null}},{key:"_renderLayers",value:function(){var e=this.internalState.subLayers,t=!e||this.needsUpdate();t&&(e=wO(e=this.renderLayers(),Boolean),this.internalState.subLayers=e),Mx("compositeLayer.renderLayers",this,t,e);var n,r=WI(e);try{for(r.s();!(n=r.n()).done;){n.value.parent=this}}catch(s$){r.e(s$)}finally{r.f()}}},{key:"isComposite",get:function(){return!0}},{key:"isLoaded",get:function(){return Y_(Zb(n.prototype),"isLoaded",this)&&this.getSubLayers().every((function(e){return e.isLoaded}))}}]),n}();function $I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}qI.layerName="CompositeLayer";var XI={orbitAxis:"Z",rotationX:0,rotationOrbit:0,zoom:0,target:[0,0,0],minRotationX:-90,maxRotationX:90,minZoom:-1/0,maxZoom:1/0},YI={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new dR(["target","zoom","rotationX","rotationOrbit"]),transitionInterruption:BM},ZI=function(e){return Math.pow(2,e)},KI=function(e){Xb(n,nR);var t=$I(n);function n(e){var r,i=e.makeViewport,o=e.width,a=e.height,s=e.orbitAxis,l=void 0===s?XI.orbitAxis:s,u=e.rotationX,c=void 0===u?XI.rotationX:u,f=e.rotationOrbit,h=void 0===f?XI.rotationOrbit:f,d=e.target,p=void 0===d?XI.target:d,v=e.zoom,m=void 0===v?XI.zoom:v,g=e.minRotationX,y=void 0===g?XI.minRotationX:g,x=e.maxRotationX,b=void 0===x?XI.maxRotationX:x,_=e.minZoom,w=void 0===_?XI.minZoom:_,k=e.maxZoom,S=void 0===k?XI.maxZoom:k,E=e.startPanPosition,P=e.startTarget,C=e.startRotatePos,A=e.startRotationX,O=e.startRotationOrbit,T=e.startZoomPosition,M=e.startZoom;return Np(this,n),(r=t.call(this,{width:o,height:a,orbitAxis:l,rotationX:c,rotationOrbit:h,target:p,zoom:m,minRotationX:y,maxRotationX:b,minZoom:w,maxZoom:S}))._state={startPanPosition:E,startTarget:P,startRotatePos:C,startRotationX:A,startRotationOrbit:O,startZoomPosition:T,startZoom:M},r.makeViewport=i,r}return Tf(n,[{key:"panStart",value:function(e){var t=e.pos,n=this._viewportProps.target;return this._getUpdatedState({startPanPosition:t,startTarget:n})}},{key:"pan",value:function(e){var t=e.pos;e.startPos;var n=this._state,r=n.startPanPosition,i=n.startTarget,o=new wE(t).subtract(r);return this._getUpdatedState({target:this._calculateNewTarget({startTarget:i,pixelOffset:o})})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startTarget:null})}},{key:"rotateStart",value:function(e){var t=e.pos;return this._getUpdatedState({startRotatePos:t,startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}},{key:"rotate",value:function(e){var t,n=e.pos,r=e.deltaAngleX,i=void 0===r?0:r,o=e.deltaAngleY,a=void 0===o?0:o,s=this._state,l=s.startRotatePos,u=s.startRotationX,c=s.startRotationOrbit,f=this._viewportProps,h=f.width,d=f.height;if(!l||!Number.isFinite(u)||!Number.isFinite(c))return this;if(n){var p=(n[0]-l[0])/h;(u<-90||u>90)&&(p*=-1),t={rotationX:u+180*((n[1]-l[1])/d),rotationOrbit:c+180*p}}else t={rotationX:u+a,rotationOrbit:c+i};return this._getUpdatedState(t)}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}},{key:"shortestPathFrom",value:function(e){var t=e.getViewportProps(),n=Object.assign({},this._viewportProps),r=n.rotationOrbit;return Math.abs(r-t.rotationOrbit)>180&&(n.rotationOrbit=r<0?r+360:r-360),n}},{key:"zoomStart",value:function(e){var t=e.pos;return this._getUpdatedState({startZoomPosition:t,startTarget:this._viewportProps.target,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(e){var t=e.pos,n=e.startPos,r=e.scale,i=this._viewportProps,o=i.zoom,a=i.width,s=i.height,l=i.target,u=this._state,c=u.startZoom,f=u.startZoomPosition,h=u.startTarget;Number.isFinite(c)||(c=o,h=l,f=n||t);var d=this._calculateNewZoom({scale:r,startZoom:c}),p=ZI(c),v=ZI(d),m=(a/2-f[0])*(v/p-1),g=(s/2-f[1])*(v/p-1);return this._getUpdatedState({zoom:d,target:this._calculateNewTarget({startTarget:h,zoom:d,pixelOffset:[m,g]})})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startTarget:null,startZoom:null})}},{key:"zoomIn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}},{key:"zoomOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}},{key:"moveLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=[-e,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"moveRight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=[e,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"moveUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=[0,-e];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"moveDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=[0,e];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"rotateLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-e})}},{key:"rotateRight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+e})}},{key:"rotateUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this._viewportProps.rotationX-e})}},{key:"rotateDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this._viewportProps.rotationX+e})}},{key:"_calculateNewZoom",value:function(e){var t=e.scale,n=e.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom;return Number.isFinite(n)||(n=this._viewportProps.zoom),JS(n+Math.log2(t),o,i)}},{key:"_calculateNewTarget",value:function(e){var t=e.startTarget,n=e.zoom,r=e.pixelOffset,i=Object.assign({},this._viewportProps);Number.isFinite(n)&&(i.zoom=n),t&&(i.target=t);var o=this.makeViewport(i),a=o.project(i.target);return o.unproject([a[0]-r[0],a[1]-r[1],a[2]])}},{key:"_getUpdatedState",value:function(e){return new n(Object.assign({},this._viewportProps,this._state,e))}},{key:"_applyConstraints",value:function(e){var t,n,r=e.maxZoom,i=e.minZoom,o=e.zoom,a=e.maxRotationX,s=e.minRotationX,l=e.rotationOrbit;return e.zoom=JS(o,i,r),e.rotationX=JS(e.rotationX,s,a),(l<-180||l>180)&&(e.rotationOrbit=((n=(l+180)%(t=360))<0?t+n:n)-180),e}}]),n}();function QI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}!function(e){Xb(n,tR);var t=$I(n);function n(e){return Np(this,n),t.call(this,KI,e)}Tf(n,[{key:"_getTransitionProps",value:function(){return YI}}])}();var JI={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new dR(["target","zoom"]),transitionInterruption:BM},eL=function(e){Xb(n,tR);var t=QI(n);function n(e){return Np(this,n),e.dragMode=e.dragMode||"pan",t.call(this,KI,e)}return Tf(n,[{key:"_onPanRotate",value:function(e){return!1}},{key:"_getTransitionProps",value:function(){return JI}}]),n}();function tL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tL(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var iL=(new lP).lookAt({eye:[0,0,1]});function oL(e){var t=e.width,n=e.height,r=e.near,i=e.far;return t=t||1,n=n||1,(new lP).ortho({left:-t/2,right:t/2,bottom:-n/2,top:n/2,near:r,far:i})}var aL=function(e){Xb(n,tO);var t=rL(n);function n(e){Np(this,n);var r=e.width,i=e.height,o=e.near,a=void 0===o?.1:o,s=e.far,l=void 0===s?1e3:s,u=e.zoom,c=void 0===u?0:u,f=e.target,h=void 0===f?[0,0,0]:f,d=e.flipY,p=void 0===d||d,v=Math.pow(2,c);return t.call(this,nL(nL({},e),{},{position:h,viewMatrix:iL.clone().scale([v,v*(p?-1:1),v]),projectionMatrix:oL({width:r,height:i,near:a,far:l}),zoom:c}))}return n}(),sL=function(e){Xb(n,FM);var t=rL(n);function n(e){return Np(this,n),t.call(this,Object.assign({},e,{type:aL}))}return Tf(n,[{key:"controller",get:function(){return this._getControllerProps({type:eL})}}]),n}();function lL(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return uL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uL(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function uL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}sL.displayName="OrthographicView";var cL=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Np(this,e);var n=t.attributes,r=void 0===n?{}:n;this.typedArrayManager=qA,this.indexStarts=null,this.vertexStarts=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=r,this.opts=t,this.updateGeometry(t),Object.seal(this)}return Tf(e,[{key:"updateGeometry",value:function(e){Object.assign(this.opts,e);var t=this.opts,n=t.data,r=t.buffers,i=void 0===r?{}:r,o=t.getGeometry,a=t.geometryBuffer,s=t.positionFormat,l=t.dataChanged,u=t.normalize,c=void 0===u||u;if(this.data=n,this.getGeometry=o,this.positionSize=a&&a.size||("XY"===s?2:3),this.buffers=i,this.normalize=c,a&&(PC(n.startIndices,"binary data missing startIndices"),this.getGeometry=this.getGeometryFromBuffer(a),c||(i.positions=a)),this.geometryBuffer=i.positions,Array.isArray(l)){var f,h=lL(l);try{for(h.s();!(f=h.n()).done;){var d=f.value;this._rebuildGeometry(d)}}catch(s$){h.e(s$)}finally{h.f()}}else this._rebuildGeometry()}},{key:"updatePartialGeometry",value:function(e){var t=e.startRow,n=e.endRow;this._rebuildGeometry({startRow:t,endRow:n})}},{key:"normalizeGeometry",value:function(e){return e}},{key:"updateGeometryAttributes",value:function(e,t,n){throw new Error("Not implemented")}},{key:"getGeometrySize",value:function(e){throw new Error("Not implemented")}},{key:"getGeometryFromBuffer",value:function(e){var t=e.value||e;return PC(ArrayBuffer.isView(t),"cannot read geometries"),_O(t,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices})}},{key:"_allocate",value:function(e,t){var n=this.attributes,r=this.buffers,i=this._attributeDefs,o=this.typedArrayManager;for(var a in i)if(a in r)o.release(n[a]),n[a]=null;else{var s=i[a];s.copy=t,n[a]=o.allocate(n[a],e,s)}}},{key:"_forEachGeometry",value:function(e,t,n){var r,i=this.data,o=this.getGeometry,a=xO(i,t,n),s=a.iterable,l=a.objectInfo,u=lL(s);try{for(u.s();!(r=u.n()).done;){var c=r.value;l.index++,e(o(c,l),l.index)}}catch(s$){u.e(s$)}finally{u.f()}}},{key:"_rebuildGeometry",value:function(e){var t=this;if(this.data&&this.getGeometry){var n=this.indexStarts,r=this.vertexStarts,i=this.instanceCount,o=this.data,a=this.geometryBuffer,s=e||{},l=s.startRow,u=void 0===l?0:l,c=s.endRow,f=void 0===c?1/0:c,h={};if(e||(n=[0],r=[0]),this.normalize||!a)this._forEachGeometry((function(e,n){e=t.normalizeGeometry(e),h[n]=e,r[n+1]=r[n]+t.getGeometrySize(e)}),u,f),i=r[r.length-1];else if(a.buffer instanceof A_){var d=a.stride||4*this.positionSize;r=o.startIndices,i=r[o.length]||a.buffer.byteLength/d}else{var p=a.value||a,v=a.stride/p.BYTES_PER_ELEMENT||this.positionSize;r=o.startIndices,i=r[o.length]||p.length/v}this._allocate(i,Boolean(e)),this.indexStarts=n,this.vertexStarts=r,this.instanceCount=i;var m={};this._forEachGeometry((function(e,o){e=h[o]||e,m.vertexStart=r[o],m.indexStart=n[o];var a=o<r.length-1?r[o+1]:i;m.geometrySize=a-r[o],m.geometryIndex=o,t.updateGeometryAttributes(e,m)}),u,f),this.vertexCount=n[n.length-1]}}}]),e}(),fL=4,hL=6,dL=1,pL=770,vL=2885,mL=3317,gL=3333,yL=2884,xL=1028,bL=2929,_L=5120,wL=5121,kL=5122,SL=5123,EL=5124,PL=5125,CL=5126,AL=5130,OL=6407,TL=6409,ML=9728,RL=9729,IL=10240,LL=10241,jL=10242,DL=10243,NL=33071,FL=6403,zL=32882,BL=36244,VL=33326,UL=33329,WL=33330,GL=33331,HL=33332,qL=33333,$L=33334,XL=new Uint16Array([0,2,1,0,3,2]),YL=new Float32Array([0,1,0,0,1,0,1,1]);function ZL(e,t){if(!t)return function(e){for(var t=new Float64Array(12),n=0;n<e.length;n++)t[3*n+0]=e[n][0],t[3*n+1]=e[n][1],t[3*n+2]=e[n][2]||0;return{vertexCount:6,positions:t,indices:XL,texCoords:YL}}(e);for(var n=Math.max(Math.abs(e[0][0]-e[3][0]),Math.abs(e[1][0]-e[2][0])),r=Math.max(Math.abs(e[1][1]-e[0][1]),Math.abs(e[2][1]-e[3][1])),i=Math.ceil(n/t)+1,o=Math.ceil(r/t)+1,a=(i-1)*(o-1)*6,s=new Uint32Array(a),l=new Float32Array(i*o*2),u=new Float64Array(i*o*3),c=0,f=0,h=0;h<i;h++)for(var d=h/(i-1),p=0;p<o;p++){var v=p/(o-1),m=KL(e,d,v);u[3*c+0]=m[0],u[3*c+1]=m[1],u[3*c+2]=m[2]||0,l[2*c+0]=d,l[2*c+1]=1-v,h>0&&p>0&&(s[f++]=c-o,s[f++]=c-o-1,s[f++]=c-1,s[f++]=c-o,s[f++]=c-1,s[f++]=c),c++}return{vertexCount:a,positions:u,indices:s,texCoords:l}}function KL(e,t,n){return eE(eE(e[0],e[1],n),eE(e[3],e[2],n),t)}var QL="\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D bitmapTexture;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float desaturate;\nuniform vec4 transparentColor;\nuniform vec3 tintColor;\nuniform float opacity;\n\nuniform float coordinateConversion;\nuniform vec4 bounds;\n\n/* projection utils */\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / PI / 2.0;\n\n// from degrees to Web Mercator\nvec2 lnglat_to_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\n// from Web Mercator to degrees\nvec2 mercator_to_lnglat(vec2 xy) {\n  xy /= WORLD_SCALE;\n  return degrees(vec2(\n    xy.x - PI,\n    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5\n  ));\n}\n/* End projection utils */\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * tintColor;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  return mix(transparentColor, vec4(color, 1.0), alpha);\n}\n\nvec2 getUV(vec2 pos) {\n  return vec2(\n    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),\n    (pos.y - bounds[3]) / (bounds[1] - bounds[3])\n  );\n}\n\n".concat("\nvec3 packUVsIntoRGB(vec2 uv) {\n  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction\n  vec2 uv8bit = floor(uv * 256.);\n\n  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits\n  // Scale and clamp to 0-1 range\n  vec2 uvFraction = fract(uv * 256.);\n  vec2 uvFraction4bit = floor(uvFraction * 16.);\n\n  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates\n  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;\n\n  return vec3(uv8bit, fractions) / 255.;\n}\n","\n\nvoid main(void) {\n  vec2 uv = vTexCoord;\n  if (coordinateConversion < -0.5) {\n    vec2 lnglat = mercator_to_lnglat(vTexPos);\n    uv = getUV(lnglat);\n  } else if (coordinateConversion > 0.5) {\n    vec2 commonPos = lnglat_to_mercator(vTexPos);\n    uv = getUV(commonPos);\n  }\n  vec4 bitmapColor = texture2D(bitmapTexture, uv);\n\n  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);\n\n  geometry.uv = uv;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n\n  if (picking_uActive) {\n    // Since instance information is not used, we can use picking color for pixel index\n    gl_FragColor.rgb = packUVsIntoRGB(uv);\n  }\n}\n");function JL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ej(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var tj={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:yC.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}},nj=function(e){Xb(n,xM);var t=ej(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"getShaders",value:function(){return Y_(Zb(n.prototype),"getShaders",this).call(this,{vs:"\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float coordinateConversion;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  if (coordinateConversion < -0.5) {\n    vTexPos = geometry.position.xy;\n  } else if (coordinateConversion > 0.5) {\n    vTexPos = geometry.worldPosition.xy;\n  }\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n",fs:QL,modules:[NC,vA]})}},{key:"initializeState",value:function(){var e=this,t=this.getAttributeManager();t.remove(["instancePickingColors"]);var n=!0;t.add({indices:{size:1,isIndexed:!0,update:function(t){return t.value=e.state.mesh.indices},noAlloc:n},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:function(t){return t.value=e.state.mesh.positions},noAlloc:n},texCoords:{size:2,update:function(t){return t.value=e.state.mesh.texCoords},noAlloc:n}})}},{key:"updateState",value:function(e){var t=e.props,n=e.oldProps;if(e.changeFlags.extensionsChanged){var r=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(r)}),this.getAttributeManager().invalidateAll()}var i=this.getAttributeManager();if(t.bounds!==n.bounds){var o=this.state.mesh,a=this._createMesh();for(var s in this.state.model.setVertexCount(a.vertexCount),a)o&&o[s]!==a[s]&&i.invalidate(s);this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JL(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({mesh:a},this._getCoordinateUniforms()))}else t._imageCoordinateSystem!==n._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}},{key:"getPickingInfo",value:function(e){var t=e.info,n=this.props.image;if(!t.color||!n)return t.bitmap=null,t;var r=n.width,i=n.height;t.index=0;var o,a,s,l,u,c=(o=t.color,a=ob(o,3),s=a[0],l=a[1],u=a[2],[(s+(15&u)/16)/256,(l+(240&u)/256)/256]),f=[Math.floor(c[0]*r),Math.floor(c[1]*i)];return t.bitmap={size:{width:r,height:i},uv:c,pixel:f},t}},{key:"_createMesh",value:function(){var e=this.props.bounds,t=e;return Number.isFinite(e[0])&&(t=[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]]]),ZL(t,this.context.viewport.resolution)}},{key:"_getModel",value:function(e){return e?new KP(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new fC({drawMode:4,vertexCount:6}),isInstanced:!1})):null}},{key:"draw",value:function(e){var t=e.uniforms,n=this.state,r=n.model,i=n.coordinateConversion,o=n.bounds,a=this.props,s=a.image,l=a.desaturate,u=a.transparentColor,c=a.tintColor;s&&r&&r.setUniforms(t).setUniforms({bitmapTexture:s,desaturate:l,transparentColor:u.map((function(e){return e/255})),tintColor:c.slice(0,3).map((function(e){return e/255})),coordinateConversion:i,bounds:o}).draw()}},{key:"_getCoordinateUniforms",value:function(){var e=yC.LNGLAT,t=yC.CARTESIAN,n=yC.DEFAULT,r=this.props._imageCoordinateSystem;if(r!==n){var i=this.props.bounds;if(!Number.isFinite(i[0]))throw new Error("_imageCoordinateSystem only supports rectangular bounds");var o=this.context.viewport.resolution?e:t;if((r=r===e?e:t)===e&&o===t)return{coordinateConversion:-1,bounds:i};if(r===t&&o===e){var a=qC([i[0],i[1]]),s=qC([i[2],i[3]]);return{coordinateConversion:1,bounds:[a[0],a[1],s[0],s[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}]),n}();nj.layerName="BitmapLayer",nj.defaultProps=tj;var rj;function ij(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ij(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ij(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aj(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return sj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sj(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function sj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lj=function(){},uj=(Qc(rj={},10241,9987),Qc(rj,10240,9729),Qc(rj,10242,33071),Qc(rj,10243,33071),rj);function cj(e){return e&&(e.id||e.url)}function fj(e,t,n,r){var i=t.width,o=t.height,a=zw(t,{width:n,height:r});return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.sourceX,i=void 0===r?0:r,o=n.sourceY,a=void 0===o?0:o,s=n.targetMipmaplevel,l=void 0===s?0:s,u=n.targetInternalFormat,c=void 0===u?6408:u,f=n.targetX,h=n.targetY,d=n.targetZ,p=n.width,v=n.height,m=aw(e),g=m.framebuffer,y=m.deleteFramebuffer;t_(g);var x=g.gl,b=g.handle,_=void 0!==f||void 0!==h||void 0!==d;f=f||0,h=h||0,d=d||0;var w=x.bindFramebuffer(36160,b);t_(t);var k=null;if(t instanceof z_&&(k=t,p=Number.isFinite(p)?p:k.width,v=Number.isFinite(v)?v:k.height,k.bind(0),t=k.target),_)switch(t){case 3553:case 34067:x.copyTexSubImage2D(t,l,f,h,i,a,p,v);break;case 35866:case 32879:Bx(x).copyTexSubImage3D(t,l,f,h,d,i,a,p,v)}else x.copyTexImage2D(t,l,c,i,a,p,v,0);k&&k.unbind(),x.bindFramebuffer(36160,w||null),y&&g.delete()}(t,a,{targetY:0,width:i,height:o}),t.delete(),a}function hj(e,t,n){for(var r=0;r<t.length;r++){var i=t[r],o=i.icon,a=i.xOffset;e[cj(o)]=Object.assign({},o,{x:a,y:n})}}var dj=function(){function e(t,n){var r=n.onUpdate,i=void 0===r?lj:r,o=n.onError,a=void 0===o?lj:o;Np(this,e),this.gl=t,this.onUpdate=i,this.onError=a,this._loadOptions=null,this._getIcon=null,this._texture=null,this._externalTexture=null,this._mapping={},this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=4,this._canvasWidth=1024,this._canvasHeight=0,this._canvas=null}return Tf(e,[{key:"finalize",value:function(){this._texture&&this._texture.delete()}},{key:"getTexture",value:function(){return this._texture||this._externalTexture}},{key:"getIconMapping",value:function(e){var t=this._autoPacking?cj(e):e;return this._mapping[t]||{}}},{key:"setProps",value:function(e){var t=e.loadOptions,n=e.autoPacking,r=e.iconAtlas,i=e.iconMapping,o=e.data,a=e.getIcon;t&&(this._loadOptions=t),void 0!==n&&(this._autoPacking=n),a&&(this._getIcon=a),i&&(this._mapping=i),r&&this._updateIconAtlas(r),this._autoPacking&&(o||a)&&"undefined"!=typeof document&&(this._canvas=this._canvas||document.createElement("canvas"),this._updateAutoPacking(o))}},{key:"_updateIconAtlas",value:function(e){this._texture&&(this._texture.delete(),this._texture=null),this._externalTexture=e,this.onUpdate()}},{key:"_updateAutoPacking",value:function(e){var t=Object.values(function(e,t,n){if(!e||!t)return null;n=n||{};var r,i={},o=xO(e),a=o.iterable,s=o.objectInfo,l=aj(a);try{for(l.s();!(r=l.n()).done;){var u=r.value;s.index++;var c=t(u,s),f=cj(c);if(!c)throw new Error("Icon is missing.");if(!c.url)throw new Error("Icon url is missing.");i[f]||n[f]&&c.url===n[f].url||(i[f]=oj(oj({},c),{},{source:u,sourceIndex:s.index}))}}catch(s$){l.e(s$)}finally{l.f()}return i}(e,this._getIcon,this._mapping)||{});if(t.length>0){var n=function(e){for(var t,n=e.icons,r=e.buffer,i=e.mapping,o=void 0===i?{}:i,a=e.xOffset,s=void 0===a?0:a,l=e.yOffset,u=void 0===l?0:l,c=e.rowHeight,f=void 0===c?0:c,h=e.canvasWidth,d=[],p=0;p<n.length;p++){var v=n[p];if(!o[cj(v)]){var m=v.height,g=v.width;s+g+r>h&&(hj(o,d,u),s=0,u=f+u+r,f=0,d=[]),d.push({icon:v,xOffset:s}),s=s+g+r,f=Math.max(f,m)}}return d.length>0&&hj(o,d,u),{mapping:o,rowHeight:f,xOffset:s,yOffset:u,canvasWidth:h,canvasHeight:(t=f+u+r,Math.pow(2,Math.ceil(Math.log2(t))))}}({icons:t,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset}),r=n.mapping,i=n.xOffset,o=n.yOffset,a=n.rowHeight,s=n.canvasHeight;this._rowHeight=a,this._mapping=r,this._xOffset=i,this._yOffset=o,this._canvasHeight=s,this._texture||(this._texture=new U_(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:uj})),this._texture.height!==this._canvasHeight&&(this._texture=fj(this.gl,this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._loadIcons(t)}}},{key:"_loadIcons",value:function(e){var t,n=this,r=this._canvas.getContext("2d"),i=aj(e);try{var o=function(){var e=t.value;n._pendingCount++,Qg(e.url,Iy,n._loadOptions).then((function(t){var i=cj(e),o=n._mapping[i],a=o.x,s=o.y,l=o.width,u=o.height,c=function(e,t,n,r){return n===t.width&&r===t.height?t:(e.canvas.height=r,e.canvas.width=n,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t,0,0,t.width,t.height,0,0,n,r),e.canvas)}(r,t,l,u);n._texture.setSubImageData({data:c,x:a,y:s,width:l,height:u}),n._texture.generateMipmap(),n.onUpdate()})).catch((function(t){n.onError({url:e.url,source:e.source,sourceIndex:e.sourceIndex,loadOptions:n._loadOptions,error:t})})).finally((function(){n._pendingCount--}))};for(i.s();!(t=i.n()).done;)o()}catch(s$){i.e(s$)}finally{i.f()}}},{key:"isLoaded",get:function(){return 0===this._pendingCount}}]),e}();function pj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var vj=[0,0,0,255],mj={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:function(e){return e.position}},getIcon:{type:"accessor",value:function(e){return e.icon}},getColor:{type:"accessor",value:vj},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}},gj=function(e){Xb(n,xM);var t=pj(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"getShaders",value:function(){return Y_(Zb(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[NC,vA]})}},{key:"initializeState",value:function(){this.state={iconManager:new dj(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:vj},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}},{key:"updateState",value:function(e){var t=e.oldProps,r=e.props,i=e.changeFlags;Y_(Zb(n.prototype),"updateState",this).call(this,{props:r,oldProps:t,changeFlags:i});var o=this.getAttributeManager(),a=r.iconAtlas,s=r.iconMapping,l=r.data,u=r.getIcon,c=this.state.iconManager;c.setProps({loadOptions:r.loadOptions});var f=!1;if(a||this.internalState.isAsyncPropLoading("iconAtlas")?(t.iconAtlas!==r.iconAtlas&&c.setProps({iconAtlas:a,autoPacking:!1}),t.iconMapping!==r.iconMapping&&(c.setProps({iconMapping:s}),f=!0)):c.setProps({autoPacking:!0}),(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&c.setProps({data:l,getIcon:u}),f&&(o.invalidate("instanceOffsets"),o.invalidate("instanceIconFrames"),o.invalidate("instanceColorModes")),i.extensionsChanged){var h=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(h)}),o.invalidateAll()}}},{key:"finalizeState",value:function(){Y_(Zb(n.prototype),"finalizeState",this).call(this),this.state.iconManager.finalize()}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props,r=n.sizeScale,i=n.sizeMinPixels,o=n.sizeMaxPixels,a=n.sizeUnits,s=n.billboard,l=n.alphaCutoff,u=this.state.iconManager,c=this.context.viewport,f=u.getTexture();f&&this.state.model.setUniforms(Object.assign({},t,{iconsTexture:f,iconsTextureDim:[f.width,f.height],sizeScale:r*("pixels"===a?c.metersPerPixel:1),sizeMinPixels:i,sizeMaxPixels:o,billboard:s,alphaCutoff:l})).draw()}},{key:"_getModel",value:function(e){return new KP(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new fC({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0}))}},{key:"_onUpdate",value:function(){this.setNeedsRedraw()}},{key:"_onError",value:function(e){var t=this.getCurrentLayer().props.onIconError;t?t(e):Ox.error(e.error)()}},{key:"getInstanceOffset",value:function(e){var t=this.state.iconManager.getIconMapping(e);return[t.width/2-t.anchorX||0,t.height/2-t.anchorY||0]}},{key:"getInstanceColorMode",value:function(e){return this.state.iconManager.getIconMapping(e).mask?1:0}},{key:"getInstanceIconFrame",value:function(e){var t=this.state.iconManager.getIconMapping(e);return[t.x||0,t.y||0,t.width||0,t.height||0]}},{key:"isLoaded",get:function(){return Y_(Zb(n.prototype),"isLoaded",this)&&this.state.iconManager.isLoaded}}]),n}();gj.layerName="IconLayer",gj.defaultProps=mj;function yj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var xj={getSourcePosition:{type:"accessor",value:function(e){return e.sourcePosition}},getTargetPosition:{type:"accessor",value:function(e){return e.targetPosition}},getColor:{type:"accessor",value:[0,0,0,255]},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}},bj=function(e){Xb(n,xM);var t=yj(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"getShaders",value:function(){return Y_(Zb(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float useShortestPath;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nvec3 splitLine(vec3 a, vec3 b, float x) {\n  float t = (x - a.x) / (b.x - a.x);\n  return vec3(x, mix(a.yz, b.yz, t));\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  vec3 source_world = instanceSourcePositions;\n  vec3 target_world = instanceTargetPositions;\n  vec3 source_world_64low = instanceSourcePositions64Low;\n  vec3 target_world_64low = instanceTargetPositions64Low;\n\n  if (useShortestPath > 0.5 || useShortestPath < -0.5) {\n    source_world.x = mod(source_world.x + 180., 360.0) - 180.;\n    target_world.x = mod(target_world.x + 180., 360.0) - 180.;\n    float deltaLng = target_world.x - source_world.x;\n\n    if (deltaLng * useShortestPath > 180.) {\n      source_world.x += 360. * useShortestPath;\n      source_world = splitLine(source_world, target_world, 180. * useShortestPath);\n      source_world_64low = vec3(0.0);\n    } else if (deltaLng * useShortestPath < -180.) {\n      target_world.x += 360. * useShortestPath;\n      target_world = splitLine(source_world, target_world, 180. * useShortestPath);\n      target_world_64low = vec3(0.0);\n    } else if (useShortestPath < 0.) {\n      gl_Position = vec4(0.);\n      return;\n    }\n  }\n  vec4 source_commonspace;\n  vec4 target_commonspace;\n  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);\n  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale),\n    widthMinPixels, widthMaxPixels\n  );\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);\n  uv = positions.xy;\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n  vec3 offset = vec3(\n    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME line-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[NC,vA]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}},{key:"updateState",value:function(e){var t=e.props,r=e.oldProps,i=e.changeFlags;if(Y_(Zb(n.prototype),"updateState",this).call(this,{props:t,oldProps:r,changeFlags:i}),i.extensionsChanged){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,n=this.context.viewport,r=this.props,i=r.widthUnits,o=r.widthScale,a=r.widthMinPixels,s=r.widthMaxPixels,l=r.wrapLongitude,u="pixels"===i?n.metersPerPixel:1;this.state.model.setUniforms(t).setUniforms({widthScale:o*u,widthMinPixels:a,widthMaxPixels:s,useShortestPath:l?1:0}).draw(),l&&this.state.model.setUniforms({useShortestPath:-1}).draw()}},{key:"_getModel",value:function(e){return new KP(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new fC({drawMode:5,attributes:{positions:new Float32Array([0,-1,0,0,1,0,1,-1,0,1,1,0])}}),isInstanced:!0}))}},{key:"wrapLongitude",get:function(){return!1}}]),n}();bj.layerName="LineLayer",bj.defaultProps=xj;function _j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var wj=[0,0,0,255],kj={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,getPosition:{type:"accessor",value:function(e){return e.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:wj},getLineColor:{type:"accessor",value:wj},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},Sj=function(e){Xb(n,xM);var t=_j(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"getShaders",value:function(){return Y_(Zb(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = smoothedge(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter);\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[NC,vA]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function(e){var t=e.props,r=e.oldProps,i=e.changeFlags;if(Y_(Zb(n.prototype),"updateState",this).call(this,{props:t,oldProps:r,changeFlags:i}),i.extensionsChanged){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,n=this.context.viewport,r=this.props,i=r.radiusUnits,o=r.radiusScale,a=r.radiusMinPixels,s=r.radiusMaxPixels,l=r.stroked,u=r.filled,c=r.lineWidthUnits,f=r.lineWidthScale,h=r.lineWidthMinPixels,d=r.lineWidthMaxPixels,p="pixels"===i?n.metersPerPixel:1,v="pixels"===c?n.metersPerPixel:1;this.state.model.setUniforms(t).setUniforms({stroked:l?1:0,filled:u,radiusScale:o*p,radiusMinPixels:a,radiusMaxPixels:s,lineWidthScale:f*v,lineWidthMinPixels:h,lineWidthMaxPixels:d}).draw()}},{key:"_getModel",value:function(e){return new KP(e,Object.assign(this.getShaders(),{id:this.props.id,geometry:new fC({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0}))}}]),n}();Sj.layerName="ScatterplotLayer",Sj.defaultProps=kj;var Ej=1,Pj=-1;function Cj(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Aj(e,n);return r!==t&&(Mj(e,n),!0)}function Aj(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Math.sign(Oj(e,t))}function Oj(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0;return Tj(e,(function(e,t,r,i){n+=jj(e,t,r,i)}),t),n/2}function Tj(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.start,i=void 0===r?0:r,o=n.end,a=void 0===o?e.length:o,s=n.size,l=void 0===s?2:s,u=n.isClosed,c=(a-i)/l,f=0;f<c-1;++f)t(e[i+f*l],e[i+f*l+1],e[i+(f+1)*l],e[i+(f+1)*l+1],f,f+1);var h=i+(c-1)*l,d=u||tE(e[i],e[h])&&tE(e[i+1],e[h+1]);d||t(e[h],e[h+1],e[i],e[i+1],c-1,0)}function Mj(e,t){for(var n=t.start,r=void 0===n?0:n,i=t.end,o=void 0===i?e.length:i,a=t.size,s=void 0===a?2:a,l=(o-r)/s,u=Math.floor(l/2),c=0;c<u;++c)for(var f=r+c*s,h=r+(l-1-c)*s,d=0;d<s;++d){var p=e[f+d];e[f+d]=e[h+d],e[h+d]=p}}function Rj(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Math.sign(Ij(e,t))}function Ij(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0;return Lj(e,(function(e,t){n+=jj(e[0],e[1],t[0],t[1])}),t),n/2}function Lj(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.start,i=void 0===r?0:r,o=n.end,a=void 0===o?e.length:o,s=n.isClosed,l=i;l<a-1;++l)t(e[l],e[l+1],l,l+1);var u=s||tE(e[a-1],e[0]);u||t(e[a-1],e[0],a-1,0)}function jj(e,t,n,r){return(e+n)*(t-r)}function Dj(e,t){var n=t.length,r=e.length;if(r>0){for(var i=!0,o=0;o<n;o++)if(e[r-n+o]!==t[o]){i=!1;break}if(i)return!1}for(var a=0;a<n;a++)e[r+a]=t[a];return!0}function Nj(e,t){for(var n=t.length,r=0;r<n;r++)e[r]=t[r]}function Fj(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=r+t*n,a=0;a<n;a++)i[a]=e[o+a];return i}function zj(e,t,n,r){var i,o,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(8&n)i=(r[3]-e[1])/(t[1]-e[1]),o=3;else if(4&n)i=(r[1]-e[1])/(t[1]-e[1]),o=1;else if(2&n)i=(r[2]-e[0])/(t[0]-e[0]),o=2;else{if(!(1&n))return null;i=(r[0]-e[0])/(t[0]-e[0]),o=0}for(var s=0;s<e.length;s++)a[s]=(1&o)===s?r[o]:i*(t[s]-e[s])+e[s];return a}function Bj(e,t){var n=0;return e[0]<t[0]?n|=1:e[0]>t[2]&&(n|=2),e[1]<t[1]?n|=4:e[1]>t[3]&&(n|=8),n}function Vj(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.size,o=void 0===i?2:i,a=r.broken,s=void 0!==a&&a,l=r.gridResolution,u=void 0===l?10:l,c=r.gridOffset,f=void 0===c?[0,0]:c,h=r.startIndex,d=void 0===h?0:h,p=r.endIndex,v=void 0===p?e.length:p,m=(v-d)/o,g=[],y=[g],x=Fj(e,0,o,d),b=Hj(x,u,f,[]),_=[];Dj(g,x);for(var w=1;w<m;w++){for(n=Bj(t=Fj(e,w,o,d,t),b);n;){zj(x,t,n,b,_);var k=Bj(_,b);k&&(zj(x,_,k,b,_),n=k),Dj(g,_),Nj(x,_),qj(b,u,n),s&&g.length>o&&(g=[],y.push(g),Dj(g,x)),n=Bj(t,b)}Dj(g,t),Nj(x,t)}return s?y:y[0]}!function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Np(this,e),this.points=t,this.isFlatArray=!KS(t[0]),this.options={start:n.start||0,end:n.end||t.length,size:n.size||2,isClosed:n.isClosed},Object.freeze(this)}Tf(e,[{key:"getSignedArea",value:function(){return this.isFlatArray?Oj(this.points,this.options):Ij(this.points,this.options)}},{key:"getArea",value:function(){return Math.abs(this.getSignedArea())}},{key:"getWindingDirection",value:function(){return Math.sign(this.getSignedArea())}},{key:"forEachSegment",value:function(e){this.isFlatArray?Tj(this.points,(function(t,n,r,i,o,a){e([t,n],[r,i],o,a)}),this.options):Lj(this.points,e,this.options)}},{key:"modifyWindingDirection",value:function(e){return this.isFlatArray?Cj(this.points,e,this.options):function(e,t){return Rj(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})!==t&&(e.reverse(),!0)}(this.points,e,this.options)}}])}();function Uj(e,t){for(var n=0;n<t.length;n++)e.push(t[n]);return e}function Wj(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.length)return[];for(var r=n.size,i=void 0===r?2:r,o=n.gridResolution,a=void 0===o?10:o,s=n.gridOffset,l=void 0===s?[0,0]:s,u=n.edgeTypes,c=void 0!==u&&u,f=[],h=[{pos:e,types:c&&new Array(e.length/i).fill(1),holes:t||[]}],d=[[],[]],p=[];h.length;){var v=h.shift(),m=v.pos,g=v.types,y=v.holes;$j(m,i,y[0]||m.length,d),p=Hj(d[0],a,l,p);var x=Bj(d[1],p);if(x){var b=Gj(m,g,i,0,y[0]||m.length,p,x),_={pos:b[0].pos,types:b[0].types,holes:[]},w={pos:b[1].pos,types:b[1].types,holes:[]};h.push(_,w);for(var k=0;k<y.length;k++)(b=Gj(m,g,i,y[k],y[k+1]||m.length,p,x))[0]&&(_.holes.push(_.pos.length),_.pos=Uj(_.pos,b[0].pos),c&&(_.types=Uj(_.types,b[0].types))),b[1]&&(w.holes.push(w.pos.length),w.pos=Uj(w.pos,b[1].pos),c&&(w.types=Uj(w.types,b[1].types)))}else{var S={positions:m};c&&(S.edgeTypes=g),y.length&&(S.holeIndices=y),f.push(S)}}return f}function Gj(e,t,n,r,i,o,a){for(var s,l,u,c=(i-r)/n,f=[],h=[],d=[],p=[],v=[],m=Fj(e,c-1,n,r),g=Math.sign(8&a?m[1]-o[3]:m[0]-o[2]),y=t&&t[c-1],x=0,b=0,_=0;_<c;_++)s=Fj(e,_,n,r,s),l=Math.sign(8&a?s[1]-o[3]:s[0]-o[2]),u=t&&t[r/n+_],l&&g&&g!==l&&(zj(m,s,a,o,v),Dj(f,v)&&d.push(y),Dj(h,v)&&p.push(y)),l<=0?(Dj(f,s)&&d.push(u),x-=l):d.length&&(d[d.length-1]=0),l>=0?(Dj(h,s)&&p.push(u),b+=l):p.length&&(p[p.length-1]=0),Nj(m,s),g=l,y=u;return[x?{pos:f,types:t&&d}:null,b?{pos:h,types:t&&p}:null]}function Hj(e,t,n,r){var i=Math.floor((e[0]-n[0])/t)*t+n[0],o=Math.floor((e[1]-n[1])/t)*t+n[1];return r[0]=i,r[1]=o,r[2]=i+t,r[3]=o+t,r}function qj(e,t,n){8&n?(e[1]+=t,e[3]+=t):4&n?(e[1]-=t,e[3]-=t):2&n?(e[0]+=t,e[2]+=t):1&n&&(e[0]-=t,e[2]-=t)}function $j(e,t,n,r){for(var i=1/0,o=-1/0,a=1/0,s=-1/0,l=0;l<n;l+=t){var u=e[l],c=e[l+1];i=u<i?u:i,o=u>o?u:o,a=c<a?c:a,s=c>s?c:s}return r[0][0]=i,r[0][1]=a,r[1][0]=o,r[1][1]=s,r}function Xj(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Yj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yj(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Yj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zj(e,t,n,r){for(var i=-1,o=-1,a=n+1;a<r;a+=t){var s=Math.abs(e[a]);s>i&&(i=s,o=a-1)}return o}function Kj(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:85.051129,o=e[n],a=e[r-t];if(Math.abs(o-a)>180){var s=Fj(e,0,t,n);s[0]+=360*Math.round((a-o)/360),Dj(e,s),s[1]=Math.sign(s[1])*i,Dj(e,s),s[0]=o,Dj(e,s)}}function Qj(e,t,n,r){for(var i,o=e[0],a=n;a<r;a+=t){var s=(i=e[a])-o;(s>180||s<-180)&&(i-=360*Math.round(s/360)),e[a]=o=i}}function Jj(e,t){for(var n,r=e.length/t,i=0;i<r&&((n=e[i*t])+180)%360==0;i++);var o=360*-Math.round(n/360);if(0!==o)for(var a=0;a<r;a++)e[a*t]+=o}function eD(e,t,n,r){var i=e;if(Array.isArray(e[0])){var o=e.length*t;i=new Array(o);for(var a=0;a<e.length;a++)for(var s=0;s<t;s++)i[a*t+s]=e[a][s]||0}return n?Vj(i,{size:t,gridResolution:n}):r?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.size,r=void 0===n?2:n,i=t.startIndex,o=void 0===i?0:i,a=t.endIndex,s=void 0===a?e.length:a,l=t.normalize,u=void 0===l||l,c=e.slice(o,s);Qj(c,r,0,s-o);var f=Vj(c,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(u){var h,d=Xj(f);try{for(d.s();!(h=d.n()).done;){Jj(h.value,r)}}catch(s$){d.e(s$)}finally{d.f()}}return f}(i,{size:t}):i}function tD(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return nD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nD(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function nD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rD(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var aD=function(e){Xb(n,cL);var t=oD(n);function n(e){return Np(this,n),t.call(this,iD(iD({},e),{},{attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}}))}return Tf(n,[{key:"getGeometryFromBuffer",value:function(e){return this.normalize?Y_(Zb(n.prototype),"getGeometryFromBuffer",this).call(this,e):function(){return null}}},{key:"normalizeGeometry",value:function(e){return this.normalize?eD(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}},{key:"get",value:function(e){return this.attributes[e]}},{key:"getGeometrySize",value:function(e){if(Array.isArray(e[0])){var t,n=0,r=tD(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=this.getGeometrySize(i)}}catch(s$){r.e(s$)}finally{r.f()}return n}var o=this.getPathLength(e);return o<2?0:this.isClosed(e)?o<3?0:o+2:o}},{key:"updateGeometryAttributes",value:function(e,t){if(0!==t.geometrySize)if(e&&Array.isArray(e[0])){var n,r=tD(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=this.getGeometrySize(i);t.geometrySize=o,this.updateGeometryAttributes(i,t),t.vertexStart+=o}}catch(s$){r.e(s$)}finally{r.f()}}else this._updateSegmentTypes(e,t),this._updatePositions(e,t)}},{key:"_updateSegmentTypes",value:function(e,t){var n=this.attributes.segmentTypes,r=this.isClosed(e),i=t.vertexStart,o=t.geometrySize;n.fill(0,i,i+o),r?(n[i]=4,n[i+o-2]=4):(n[i]+=1,n[i+o-2]+=2),n[i+o-1]=4}},{key:"_updatePositions",value:function(e,t){var n=this.attributes.positions;if(n)for(var r=t.vertexStart,i=t.geometrySize,o=new Array(3),a=r,s=0;s<i;a++,s++)this.getPointOnPath(e,s,o),n[3*a]=o[0],n[3*a+1]=o[1],n[3*a+2]=o[2]}},{key:"getPathLength",value:function(e){return e.length/this.positionSize}},{key:"getPointOnPath",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.positionSize;t*r>=e.length&&(t+=1-e.length/r);var i=t*r;return n[0]=e[i],n[1]=e[i+1],n[2]=3===r&&e[i+2]||0,n}},{key:"isClosed",value:function(e){if(!this.normalize)return this.opts.loop;var t=this.positionSize,n=e.length-t;return e[0]===e[n]&&e[1]===e[n+1]&&(2===t||e[2]===e[n+2])}}]),n}();function sD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var lD=[0,0,0,255],uD={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},rounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:function(e){return e.path}},getColor:{type:"accessor",value:lD},getWidth:{type:"accessor",value:1}},cD={enter:function(e,t){return t.length?t.subarray(t.length-e.length):e}},fD=function(e){Xb(n,xM);var t=sD(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"getShaders",value:function(){return Y_(Zb(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\nuniform bool billboard;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec3 deltaA3 = (currPoint - prevPoint);\n  vec3 deltaB3 = (nextPoint - currPoint);\n\n  mat3 rotationMatrix;\n  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\n  if (needsRotation) {\n    deltaA3 = deltaA3 * rotationMatrix;\n    deltaB3 = deltaB3 * rotationMatrix;\n  }\n  vec2 deltaA = deltaA3.xy / width;\n  vec2 deltaB = deltaB3.xy / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 dir = isEnd ? dirA : dirB;\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * jointType * 4.0 * flipIfTrue(isStartCap), isJoint);\n  }\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n\n  if (needsRotation) {\n    offset = rotationMatrix * offset;\n  }\n  return currPoint + offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.worldPosition = instanceStartPositions;\n  geometry.worldPositionAlt = instanceEndPositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec2 widthPixels = vec2(clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0);\n  vec3 width;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    width = vec3(widthPixels, 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 pos = lineJoin(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      project_pixel_size_to_clipspace(width.xy)\n    );\n\n    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    width = vec3(project_pixel_size(widthPixels), 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec4 pos = vec4(\n      lineJoin(prevPosition, currPosition, nextPosition, width.xy),\n      1.0);\n    geometry.position = pos;\n    gl_Position = project_common_position_to_clipspace(pos);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float jointType;\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    if (jointType > 0.0 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    if (jointType == 0.0 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[NC,vA]})}},{key:"initializeState",value:function(){var e=this;this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:cD,accessor:"getPath",update:this.calculatePositions,noAlloc:true,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:true},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:cD,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:cD,defaultValue:lD},instancePickingColors:{size:3,type:5121,accessor:function(t,n){var r=n.index,i=n.target;return e.encodePickingColor(t&&t.__source?t.__source.index:r,i)}}}),this.setState({pathTesselator:new aD({fp64:this.use64bitPositions()})}),this.props.getDashArray&&!this.props.extensions.length&&Ox.removed("getDashArray","PathStyleExtension")()}},{key:"updateState",value:function(e){var t=e.oldProps,r=e.props,i=e.changeFlags;Y_(Zb(n.prototype),"updateState",this).call(this,{props:r,oldProps:t,changeFlags:i});var o=this.getAttributeManager();if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPath)){var a=this.state.pathTesselator,s=r.data.attributes||{};a.updateGeometry({data:r.data,geometryBuffer:s.getPath,buffers:s,normalize:!r._pathType,loop:"loop"===r._pathType,getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:i.dataChanged}),this.setState({numInstances:a.instanceCount,startIndices:a.vertexStarts}),i.dataChanged||o.invalidateAll()}if(i.extensionsChanged){var l=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(l)}),o.invalidateAll()}}},{key:"getPickingInfo",value:function(e){var t=Y_(Zb(n.prototype),"getPickingInfo",this).call(this,e),r=t.index,i=this.props.data;return i[0]&&i[0].__source&&(t.object=i.find((function(e){return e.__source.index===r}))),t}},{key:"disablePickingIndex",value:function(e){var t=this.props.data;if(t[0]&&t[0].__source)for(var n=0;n<t.length;n++)t[n].__source.index===e&&this._disablePickingIndex(n);else this._disablePickingIndex(e)}},{key:"draw",value:function(e){var t=e.uniforms,n=this.context.viewport,r=this.props,i=r.rounded,o=r.billboard,a=r.miterLimit,s=r.widthUnits,l=r.widthScale,u=r.widthMinPixels,c=r.widthMaxPixels,f="pixels"===s?n.metersPerPixel:1;this.state.model.setUniforms(Object.assign({},t,{jointType:Number(i),billboard:o,widthScale:l*f,miterLimit:a,widthMinPixels:u,widthMaxPixels:c})).draw()}},{key:"_getModel",value:function(e){return new KP(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new fC({drawMode:4,attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0}))}},{key:"calculatePositions",value:function(e){var t=this.state.pathTesselator;e.startIndices=t.vertexStarts,e.value=t.get("positions")}},{key:"calculateSegmentTypes",value:function(e){var t=this.state.pathTesselator;e.startIndices=t.vertexStarts,e.value=t.get("segmentTypes")}},{key:"wrapLongitude",get:function(){return!1}}]),n}();fD.layerName="PathLayer",fD.defaultProps=uD;var hD={exports:{}};function dD(e,t,n){n=n||2;var r,i,o,a,s,l,u,c=t&&t.length,f=c?t[0]*n:e.length,h=pD(e,0,f,n,!0),d=[];if(!h||h.next===h.prev)return d;if(c&&(h=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=pD(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(ED(a));for(s.sort(_D),i=0;i<s.length;i++)wD(s[i],n),n=vD(n,n.next);return n}(e,t,h,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var p=n;p<f;p+=n)(s=e[p])<r&&(r=s),(l=e[p+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-r,a-i))?1/u:0}return mD(h,d,n,r,i,u),d}function pD(e,t,n,r,i){var o,a;if(i===FD(e,t,n,r)>0)for(o=t;o<n;o+=r)a=jD(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=jD(o,e[o],e[o+1],a);return a&&OD(a,a.next)&&(DD(a),a=a.next),a}function vD(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!OD(r,r.next)&&0!==AD(r.prev,r,r.next))r=r.next;else{if(DD(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function mD(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=SD(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,l,u=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(e,r,i,o);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?yD(e,r,i,o):gD(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),DD(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?mD(e=xD(vD(e),t,n),t,n,r,i,o,2):2===a&&bD(e,t,n,r,i,o):mD(vD(e),t,n,r,i,o,1);break}}}function gD(e){var t=e.prev,n=e,r=e.next;if(AD(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(PD(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&AD(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function yD(e,t,n,r){var i=e.prev,o=e,a=e.next;if(AD(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=SD(s,l,t,n,r),h=SD(u,c,t,n,r),d=e.prevZ,p=e.nextZ;d&&d.z>=f&&p&&p.z<=h;){if(d!==e.prev&&d!==e.next&&PD(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&AD(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==e.prev&&p!==e.next&&PD(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&AD(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=f;){if(d!==e.prev&&d!==e.next&&PD(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&AD(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&PD(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&AD(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function xD(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!OD(i,o)&&TD(i,r,r.next,o)&&ID(i,o)&&ID(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),DD(r),DD(r.next),r=e=o),r=r.next}while(r!==e);return vD(r)}function bD(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&CD(a,s)){var l=LD(a,s);return a=vD(a,a.next),l=vD(l,l.next),mD(a,t,n,r,i,o),void mD(l,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function _D(e,t){return e.x-t.x}function wD(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n;var l,u=n,c=n.x,f=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&PD(o<f?i:a,o,c,f,o<f?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),ID(r,e)&&(l<h||l===h&&(r.x>n.x||r.x===n.x&&kD(n,r)))&&(n=r,h=l)),r=r.next}while(r!==u);return n}(e,t)){var n=LD(t,e);vD(t,t.next),vD(n,n.next)}}function kD(e,t){return AD(e.prev,e,t.prev)<0&&AD(t.next,e,e.next)<0}function SD(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ED(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function PD(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function CD(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&TD(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(ID(e,t)&&ID(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(AD(e.prev,e,t.prev)||AD(e,t.prev,t))||OD(e,t)&&AD(e.prev,e,e.next)>0&&AD(t.prev,t,t.next)>0)}function AD(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function OD(e,t){return e.x===t.x&&e.y===t.y}function TD(e,t,n,r){var i=RD(AD(e,t,n)),o=RD(AD(e,t,r)),a=RD(AD(n,r,e)),s=RD(AD(n,r,t));return i!==o&&a!==s||(!(0!==i||!MD(e,n,t))||(!(0!==o||!MD(e,r,t))||(!(0!==a||!MD(n,e,r))||!(0!==s||!MD(n,t,r)))))}function MD(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function RD(e){return e>0?1:e<0?-1:0}function ID(e,t){return AD(e.prev,e,e.next)<0?AD(e,t,e.next)>=0&&AD(e,e.prev,t)>=0:AD(e,t,e.prev)<0||AD(e,e.next,t)<0}function LD(e,t){var n=new ND(e.i,e.x,e.y),r=new ND(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function jD(e,t,n,r){var i=new ND(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function DD(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ND(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function FD(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}hD.exports=dD,hD.exports.default=dD,dD.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(FD(e,0,o,n));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*n,c=s<l-1?t[s+1]*n:e.length;a-=Math.abs(FD(e,u,c,n))}var f=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,d=r[s+1]*n,p=r[s+2]*n;f+=Math.abs((e[h]-e[p])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[p+1]-e[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},dD.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n};var zD=hD.exports;function BD(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return VD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VD(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function VD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var UD=Ej,WD=Pj,GD={isClosed:!0};function HD(e,t,n,r){for(var i=0;i<t;i++)if(e[n+i]!==e[r-t+i])return!1;return!0}function qD(e,t,n,r,i){for(var o=t,a=n.length,s=0;s<a;s++)for(var l=0;l<r;l++)e[o++]=n[s][l]||0;if(!function(e){var t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}(n))for(var u=0;u<r;u++)e[o++]=n[0][u]||0;return GD.start=t,GD.end=o,GD.size=r,Cj(e,i,GD),o}function $D(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=(o=o||n.length)-i;if(s<=0)return t;for(var l=t,u=0;u<s;u++)e[l++]=n[i+u];if(!HD(n,r,i,o))for(var c=0;c<r;c++)e[l++]=n[i+c];return GD.start=t,GD.end=l,GD.size=r,Cj(e,a,GD),l}function XD(e,t){!function(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}(e);var n=[],r=[];if(e.positions){var i=e,o=i.positions,a=i.holeIndices;if(a){for(var s=0,l=0;l<=a.length;l++)s=$D(n,s,o,t,a[l-1],a[l],0===l?UD:WD),r.push(s);return r.pop(),{positions:n,holeIndices:r}}e=o}if(Number.isFinite(e[0]))return $D(n,0,e,t,0,n.length,UD),n;if(!function(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}(e)){var u,c=0,f=BD(e.entries());try{for(f.s();!(u=f.n()).done;){var h=ob(u.value,2),d=h[0];c=qD(n,c,h[1],t,0===d?UD:WD),r.push(c)}}catch(s$){f.e(s$)}finally{f.f()}return r.pop(),{positions:n,holeIndices:r}}return qD(n,0,e,t,UD),n}function YD(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ZD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZD(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ZD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function KD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KD(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function JD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var eN=function(e){Xb(n,cL);var t=JD(n);function n(e){Np(this,n);var r=e.fp64,i=e.IndexType,o=void 0===i?Uint32Array:i;return t.call(this,QD(QD({},e),{},{attributes:{positions:{size:3,type:r?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:o,size:1}}}))}return Tf(n,[{key:"get",value:function(e){var t=this.attributes;return"indices"===e?t.indices&&t.indices.subarray(0,this.vertexCount):t[e]}},{key:"updateGeometry",value:function(e){Y_(Zb(n.prototype),"updateGeometry",this).call(this,e);var t=this.buffers.indices;t&&(this.vertexCount=(t.value||t).length)}},{key:"normalizeGeometry",value:function(e){if(this.normalize){if(e=XD(e,this.positionSize),this.opts.resolution)return Wj(e.positions||e,e.holeIndices,{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0});if(this.opts.wrapLongitude)return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.size,i=void 0===r?2:r,o=n.normalize,a=void 0===o||o,s=n.edgeTypes,l=void 0!==s&&s;t=t||[];for(var u=[],c=[],f=0,h=0,d=0;d<=t.length;d++){for(var p=t[d]||e.length,v=h,m=Zj(e,i,f,p),g=m;g<p;g++)u[h++]=e[g];for(var y=f;y<m;y++)u[h++]=e[y];Qj(u,i,v,h),Kj(u,i,v,h,n.maxLatitude),f=p,c[d]=h}c.pop();var x=Wj(u,c,{size:i,gridResolution:360,gridOffset:[-180,-180],edgeTypes:l});if(a){var b,_=Xj(x);try{for(_.s();!(b=_.n()).done;){Jj(b.value.positions,i)}}catch(s$){_.e(s$)}finally{_.f()}}return x}(e.positions||e,e.holeIndices,{size:this.positionSize,maxLatitude:86,edgeTypes:!0})}return e}},{key:"getGeometrySize",value:function(e){if(Array.isArray(e)&&!Number.isFinite(e[0])){var t,n=0,r=YD(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=this.getGeometrySize(i)}}catch(s$){r.e(s$)}finally{r.f()}return n}return(e.positions||e).length/this.positionSize}},{key:"getGeometryFromBuffer",value:function(e){return this.normalize||!this.buffers.indices?Y_(Zb(n.prototype),"getGeometryFromBuffer",this).call(this,e):function(){return null}}},{key:"updateGeometryAttributes",value:function(e,t){if(Array.isArray(e)&&!Number.isFinite(e[0])){var n,r=YD(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=this.getGeometrySize(i);t.geometrySize=o,this.updateGeometryAttributes(i,t),t.vertexStart+=o,t.indexStart=this.indexStarts[t.geometryIndex+1]}}catch(s$){r.e(s$)}finally{r.f()}}else this._updateIndices(e,t),this._updatePositions(e,t),this._updateVertexValid(e,t)}},{key:"_updateIndices",value:function(e,t){var n=t.geometryIndex,r=t.vertexStart,i=t.indexStart,o=this.attributes,a=this.indexStarts,s=this.typedArrayManager,l=o.indices;if(l){var u=i,c=function(e,t,n){var r=null;e.holeIndices&&(r=e.holeIndices.map((function(e){return e/t})));var i=e.positions||e;if(n){var o=i.length;i=i.slice();for(var a=[],s=0;s<o;s+=t){a[0]=i[s],a[1]=i[s+1];var l=n(a);i[s]=l[0],i[s+1]=l[1]}}return zD(i,r,t)}(e,this.positionSize,this.opts.preproject);l=s.allocate(l,i+c.length,{copy:!0});for(var f=0;f<c.length;f++)l[u++]=c[f]+r;a[n+1]=i+c.length,o.indices=l}}},{key:"_updatePositions",value:function(e,t){var n=t.vertexStart,r=t.geometrySize,i=this.attributes.positions,o=this.positionSize;if(i)for(var a=e.positions||e,s=n,l=0;l<r;s++,l++){var u=a[l*o],c=a[l*o+1],f=o>2?a[l*o+2]:0;i[3*s]=u,i[3*s+1]=c,i[3*s+2]=f}}},{key:"_updateVertexValid",value:function(e,t){var n=t.vertexStart,r=t.geometrySize,i=this.attributes.vertexValid,o=this.positionSize,a=e&&e.holeIndices;if(e&&e.edgeTypes?i.set(e.edgeTypes,n):i.fill(1,n,n+r),a)for(var s=0;s<a.length;s++)i[n+a[s]/o-1]=0;i[n+r-1]=0}}]),n}(),tN="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec3 positions64Low;\n  vec3 nextPositions64Low;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n#ifdef IS_SIDE_VERTEX\n  if(vertexValid < 0.5){\n    gl_Position = vec4(0.);\n    return;\n  }\n#endif\n\n  vec3 pos;\n  vec3 pos64Low;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n  geometry.pickingColor = props.pickingColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);\n#else\n  pos = props.positions;\n  pos64Low = props.positions64Low;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n\n#ifdef IS_SIDE_VERTEX\n    normal = vec3(\n      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),\n      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),\n      0.0);\n    normal = project_offset_normal(normal);\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n    geometry.normal = normal;\n  }\n\n  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",nN="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(tN,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64Low = positions64Low;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),rN="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec3 nextPositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 nextPositions64Low;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(tN,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  #if RING_WINDING_ORDER_CW == 1\n    props.positions = instancePositions;\n    props.positions64Low = instancePositions64Low;\n    props.nextPositions = nextPositions;\n    props.nextPositions64Low = nextPositions64Low;\n  #else\n    props.positions = nextPositions;\n    props.positions64Low = nextPositions64Low;\n    props.nextPositions = instancePositions;\n    props.nextPositions64Low = instancePositions64Low;\n  #endif\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n\n  calculatePosition(props);\n}\n");function iN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var oN=[0,0,0,255],aN={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:function(e){return e.polygon}},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:oN},getLineColor:{type:"accessor",value:oN},material:!0},sN={enter:function(e,t){return t.length?t.subarray(t.length-e.length):e}},lN=function(e){Xb(n,xM);var t=iN(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"getShaders",value:function(e){return Y_(Zb(n.prototype),"getShaders",this).call(this,{vs:"top"===e?nN:rN,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[NC,zP,vA]})}},{key:"initializeState",value:function(){var e=this,t=this.context,n=t.gl,r=t.viewport,i=this.props.coordinateSystem;r.isGeospatial&&i===yC.DEFAULT&&(i=yC.LNGLAT),this.setState({numInstances:0,polygonTesselator:new eN({preproject:i===yC.LNGLAT&&r.projectFlat,fp64:this.use64bitPositions(),IndexType:!n||Iw(n,hw)?Uint32Array:Uint16Array})});var o=this.getAttributeManager(),a=!0;o.remove(["instancePickingColors"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:a},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:sN,accessor:"getPolygon",update:this.calculatePositions,noAlloc:a,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:a},elevations:{size:1,transition:sN,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:sN,accessor:"getFillColor",defaultValue:oN,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:sN,accessor:"getLineColor",defaultValue:oN,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:function(t,n){var r=n.index,i=n.target;return e.encodePickingColor(t&&t.__source?t.__source.index:r,i)},shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}},{key:"getPickingInfo",value:function(e){var t=Y_(Zb(n.prototype),"getPickingInfo",this).call(this,e),r=t.index,i=this.props.data;return i[0]&&i[0].__source&&(t.object=i.find((function(e){return e.__source.index===r}))),t}},{key:"disablePickingIndex",value:function(e){var t=this.props.data;if(t[0]&&t[0].__source)for(var n=0;n<t.length;n++)t[n].__source.index===e&&this._disablePickingIndex(n);else this._disablePickingIndex(e)}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props,r=n.extruded,i=n.filled,o=n.wireframe,a=n.elevationScale,s=this.state,l=s.topModel,u=s.sideModel,c=s.polygonTesselator,f=Object.assign({},t,{extruded:Boolean(r),elevationScale:a});u&&(u.setInstanceCount(c.instanceCount-1),u.setUniforms(f),o&&(u.setDrawMode(3),u.setUniforms({isWireframe:!0}).draw()),i&&(u.setDrawMode(6),u.setUniforms({isWireframe:!1}).draw())),l&&(l.setVertexCount(c.vertexCount),l.setUniforms(f).draw())}},{key:"updateState",value:function(e){Y_(Zb(n.prototype),"updateState",this).call(this,e),this.updateGeometry(e);var t=e.props,r=e.oldProps,i=e.changeFlags,o=this.getAttributeManager();(i.extensionsChanged||t.filled!==r.filled||t.extruded!==r.extruded)&&(this.state.models&&this.state.models.forEach((function(e){return e.delete()})),this.setState(this._getModels(this.context.gl)),o.invalidateAll())}},{key:"updateGeometry",value:function(e){var t=e.props;e.oldProps;var n=e.changeFlags;if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){var r=this.state.polygonTesselator,i=t.data.attributes||{};r.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:i.getPolygon,buffers:i,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged}),this.setState({numInstances:r.instanceCount,startIndices:r.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}},{key:"_getModels",value:function(e){var t,n,r=this.props,i=r.id,o=r.filled,a=r.extruded;if(o){var s=this.getShaders("top");s.defines.NON_INSTANCED_MODEL=1,t=new KP(e,Object.assign({},s,{id:"".concat(i,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0}))}return a&&((n=new KP(e,Object.assign({},this.getShaders("side"),{id:"".concat(i,"-side"),geometry:new fC({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}))).userData.excludeAttributes={indices:!0}),{models:[n,t].filter(Boolean),topModel:t,sideModel:n}}},{key:"calculateIndices",value:function(e){var t=this.state.polygonTesselator;e.startIndices=t.indexStarts,e.value=t.get("indices")}},{key:"calculatePositions",value:function(e){var t=this.state.polygonTesselator;e.startIndices=t.vertexStarts,e.value=t.get("positions")}},{key:"calculateVertexValid",value:function(e){e.value=this.state.polygonTesselator.get("vertexValid")}},{key:"wrapLongitude",get:function(){return!1}}]),n}();function uN(e){for(var t=e.data,n=e.getIndex,r=e.dataRange,i=e.replace,o=r.startRow,a=void 0===o?0:o,s=r.endRow,l=void 0===s?1/0:s,u=t.length,c=u,f=u,h=0;h<u;h++){var d=n(t[h]);if(c>h&&d>=a&&(c=h),d>=l){f=h;break}}for(var p=c,v=f-c!==i.length,m=v&&t.slice(f),g=0;g<i.length;g++)t[p++]=i[g];if(v){for(var y=0;y<m.length;y++)t[p++]=m[y];t.length=p}return{startRow:c,endRow:c+i.length}}function cN(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return fN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fN(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function fN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}lN.layerName="SolidPolygonLayer",lN.defaultProps=aN;var dN=[0,0,0,255],pN={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:function(e){return e.polygon}},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:dN},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0},vN=function(e){Xb(n,qI);var t=hN(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"initializeState",value:function(){this.state={paths:[]},this.props.getLineDashArray&&Ox.removed("getLineDashArray","PathStyleExtension")()}},{key:"updateState",value:function(e){var t=this;e.oldProps,e.props;var n=e.changeFlags,r=n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon);if(r&&Array.isArray(n.dataChanged)){var i=this.state.paths.slice(),o=n.dataChanged.map((function(e){return uN({data:i,getIndex:function(e){return e.__source.index},dataRange:e,replace:t._getPaths(e)})}));this.setState({paths:i,pathsDiff:o})}else r&&this.setState({paths:this._getPaths(),pathsDiff:null})}},{key:"_getPaths",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.props,r=n.data,i=n.getPolygon,o=n.positionFormat,a=n._normalize,s=[],l="XY"===o?2:3,u=t.startRow,c=t.endRow,f=xO(r,u,c),h=f.iterable,d=f.objectInfo,p=cN(h);try{for(p.s();!(e=p.n()).done;){var v=e.value;d.index++;var m=i(v,d);a&&(m=XD(m,l));var g=m,y=g.holeIndices,x=m.positions||m;if(y)for(var b=0;b<=y.length;b++){var _=x.slice(y[b-1]||0,y[b]||x.length);s.push(this.getSubLayerRow({path:_},v,d.index))}else s.push(this.getSubLayerRow({path:x},v,d.index))}}catch(s$){p.e(s$)}finally{p.f()}return s}},{key:"renderLayers",value:function(){var e=this.props,t=e.data,n=e._dataDiff,r=e.stroked,i=e.filled,o=e.extruded,a=e.wireframe,s=e._normalize,l=e._windingOrder,u=e.elevationScale,c=e.transitions,f=e.positionFormat,h=this.props,d=h.lineWidthUnits,p=h.lineWidthScale,v=h.lineWidthMinPixels,m=h.lineWidthMaxPixels,g=h.lineJointRounded,y=h.lineMiterLimit,x=h.lineDashJustified,b=this.props,_=b.getFillColor,w=b.getLineColor,k=b.getLineWidth,S=b.getLineDashArray,E=b.getElevation,P=b.getPolygon,C=b.updateTriggers,A=b.material,O=this.state,T=O.paths,M=O.pathsDiff,R=this.getSubLayerClass("fill",lN),I=this.getSubLayerClass("stroke",fD),L=this.shouldRenderSubLayer("fill",T)&&new R({_dataDiff:n,extruded:o,elevationScale:u,filled:i,wireframe:a,_normalize:s,_windingOrder:l,getElevation:E,getFillColor:_,getLineColor:o&&a?w:dN,material:A,transitions:c},this.getSubLayerProps({id:"fill",updateTriggers:{getPolygon:C.getPolygon,getElevation:C.getElevation,getFillColor:C.getFillColor,lineColors:o&&a,getLineColor:C.getLineColor}}),{data:t,positionFormat:f,getPolygon:P});return[!o&&L,!o&&r&&this.shouldRenderSubLayer("stroke",T)&&new I({_dataDiff:M&&function(){return M},widthUnits:d,widthScale:p,widthMinPixels:v,widthMaxPixels:m,rounded:g,miterLimit:y,dashJustified:x,_pathType:"loop",transitions:c&&{getWidth:c.getLineWidth,getColor:c.getLineColor,getPath:c.getPolygon},getColor:this.getSubLayerAccessor(w),getWidth:this.getSubLayerAccessor(k),getDashArray:this.getSubLayerAccessor(S)},this.getSubLayerProps({id:"stroke",updateTriggers:{getWidth:C.getLineWidth,getColor:C.getLineColor,getDashArray:C.getLineDashArray}}),{data:T,positionFormat:f,getPath:function(e){return e.path}}),o&&L]}}]),n}();function mN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mN(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yN(e,t){if(!e)return null;var n="startIndices"in e?e.startIndices[t]:t,r=e.featureIds.value[n];return-1!==n?function(e,t,n){var r={properties:gN({},e.properties[t])};for(var i in e.numericProps)r.properties[i]=e.numericProps[i].value[n];return r}(e,r,n):null}function xN(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},i=n.startRow,o=void 0===i?0:i,a=n.endRow,s=void 0===a?e.length:a,l=o;l<s;l++){var u=e[l];Ox.assert(u&&u.geometry,"GeoJSON does not have geometry");var c=u.geometry;if("GeometryCollection"===c.type){Ox.assert(Array.isArray(c.geometries),"GeoJSON does not have geometries array");for(var f=c.geometries,h=0;h<f.length;h++){var d=f[h];bN(d,r,t,u,l)}}else bN(c,r,t,u,l)}return r}function bN(e,t,n,r,i){var o=e.type,a=e.coordinates,s=t.pointFeatures,l=t.lineFeatures,u=t.polygonFeatures,c=t.polygonOutlineFeatures;if(function(e,t){var n=_N[e];Ox.assert(n,"Unknown GeoJSON type ".concat(e));for(;t&&--n>0;)t=t[0];return t&&Number.isFinite(t[0])}(o,a))switch(o){case"Point":s.push(n({geometry:e},r,i));break;case"MultiPoint":a.forEach((function(e){s.push(n({geometry:{type:"Point",coordinates:e}},r,i))}));break;case"LineString":l.push(n({geometry:e},r,i));break;case"MultiLineString":a.forEach((function(e){l.push(n({geometry:{type:"LineString",coordinates:e}},r,i))}));break;case"Polygon":u.push(n({geometry:e},r,i)),a.forEach((function(e){c.push(n({geometry:{type:"LineString",coordinates:e}},r,i))}));break;case"MultiPolygon":a.forEach((function(e){u.push(n({geometry:{type:"Polygon",coordinates:e}},r,i)),e.forEach((function(e){c.push(n({geometry:{type:"LineString",coordinates:e}},r,i))}))}))}else Ox.warn("".concat(o," coordinates are malformed"))()}vN.layerName="PolygonLayer",vN.defaultProps=pN;var _N={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function wN(e){return e.geometry.coordinates}function kN(e,t,n){var r={points:{},lines:{},polygons:{},polygonsOutline:{}},i=e.points,o=e.lines,a=e.polygons,s=function(e,t){var n={points:null,lines:null,polygons:null};for(var r in n){var i=e[r].featureIds.value;n[r]=new Uint8ClampedArray(3*i.length);for(var o=[],a=0;a<i.length;a++)t(i[a],o),n[r][3*a+0]=o[0],n[r][3*a+1]=o[1],n[r][3*a+2]=o[2]}return n}(e,t);return r.points.data={length:i.positions.value.length/i.positions.size,attributes:{getPosition:i.positions,pickingColors:{size:3,value:s.points}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},r.lines.data={length:o.pathIndices.value.length-1,startIndices:o.pathIndices.value,attributes:{getPath:o.positions,pickingColors:{size:3,value:s.lines}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.lines._pathType="open",r.polygons.data={length:a.primitivePolygonIndices.value.length,startIndices:a.primitivePolygonIndices.value,attributes:{getPolygon:a.positions,pickingColors:{size:3,value:s.polygons}},properties:a.properties,numericProps:a.numericProps,featureIds:a.featureIds},r.polygons._normalize=!1,r.polygonsOutline.data={length:a.primitivePolygonIndices.value.length,startIndices:a.primitivePolygonIndices.value,attributes:{getPath:a.positions,instancePickingColors:{size:3,value:s.polygons}},properties:a.properties,numericProps:a.numericProps,featureIds:a.featureIds},r.polygonsOutline._pathType="open",r}function SN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SN(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PN(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return CN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CN(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function CN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function AN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var ON=[0,0,0,255],TN={stroked:!0,filled:!0,extruded:!1,wireframe:!1,lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,elevationScale:1,pointRadiusUnits:"meters",pointRadiusScale:1,pointRadiusMinPixels:0,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,getLineColor:{type:"accessor",value:ON},getFillColor:{type:"accessor",value:[0,0,0,255]},getRadius:{type:"accessor",value:1},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0},MN=function(e){Xb(n,qI);var t=AN(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"initializeState",value:function(){this.state={layerProps:{},features:{}},this.props.getLineDashArray&&Ox.removed("getLineDashArray","PathStyleExtension")()}},{key:"updateState",value:function(e){var t=e.props,n=e.changeFlags;if(n.dataChanged){var r=this.props.data,i=r&&"points"in r&&"polygons"in r&&"lines"in r;this.setState({binary:i}),i?this._updateStateBinary({props:t,changeFlags:n}):this._updateStateJSON({props:t,changeFlags:n})}}},{key:"_updateStateBinary",value:function(e){var t=e.props;e.changeFlags;var n=kN(t.data,this.encodePickingColor);this.setState({layerProps:n})}},{key:"_updateStateJSON",value:function(e){var t=e.props,n=e.changeFlags,r=function(e){if(Array.isArray(e))return e;switch(Ox.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return Ox.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}(t.data),i=this.getSubLayerRow.bind(this),o={},a={};if(Array.isArray(n.dataChanged)){var s=this.state.features;for(var l in s)o[l]=s[l].slice(),a[l]=[];var u,c=PN(n.dataChanged);try{for(c.s();!(u=c.n()).done;){var f=u.value,h=xN(r,i,f);for(var d in s)a[d].push(uN({data:o[d],getIndex:function(e){return e.__source.index},dataRange:f,replace:h[d]}))}}catch(s$){c.e(s$)}finally{c.f()}}else o=xN(r,i);var p=function(e,t){var n={points:{},lines:{},polygons:{},polygonsOutline:{}},r=e.pointFeatures,i=e.lineFeatures,o=e.polygonFeatures,a=e.polygonOutlineFeatures;return n.points.data=r,n.points._dataDiff=t.pointFeatures&&function(){return t.pointFeatures},n.points.getPosition=wN,n.lines.data=i,n.lines._dataDiff=t.lineFeatures&&function(){return t.lineFeatures},n.lines.getPath=wN,n.polygons.data=o,n.polygons._dataDiff=t.polygonFeatures&&function(){return t.polygonFeatures},n.polygons.getPolygon=wN,n.polygonsOutline.data=a,n.polygonsOutline._dataDiff=t.polygonOutlineFeatures&&function(){return t.polygonOutlineFeatures},n.polygonsOutline.getPath=wN,n}(o,a);this.setState({features:o,featuresDiff:a,layerProps:p})}},{key:"renderLayers",value:function(){var e=this.props,t=e.stroked,n=e.filled,r=e.extruded,i=e.wireframe,o=e.material,a=e.transitions,s=this.props,l=s.lineWidthUnits,u=s.lineWidthScale,c=s.lineWidthMinPixels,f=s.lineWidthMaxPixels,h=s.lineJointRounded,d=s.lineMiterLimit,p=s.pointRadiusUnits,v=s.pointRadiusScale,m=s.pointRadiusMinPixels,g=s.pointRadiusMaxPixels,y=s.elevationScale,x=s.lineDashJustified,b=this.props,_=b.getLineColor,w=b.getFillColor,k=b.getRadius,S=b.getLineWidth,E=b.getLineDashArray,P=b.getElevation,C=b.updateTriggers,A=this.getSubLayerClass("polygons-fill",lN),O=this.getSubLayerClass("polygons-stroke",fD),T=this.getSubLayerClass("line-strings",fD),M=this.getSubLayerClass("points",Sj),R=this.state.layerProps,I=this.shouldRenderSubLayer("polygons-fill",R.polygons.data)&&new A({extruded:r,elevationScale:y,filled:n,wireframe:i,material:o,getElevation:this.getSubLayerAccessor(P),getFillColor:this.getSubLayerAccessor(w),getLineColor:this.getSubLayerAccessor(r&&i?_:ON),transitions:a&&{getPolygon:a.geometry,getElevation:a.getElevation,getFillColor:a.getFillColor,getLineColor:a.getLineColor}},this.getSubLayerProps({id:"polygons-fill",updateTriggers:{getElevation:C.getElevation,getFillColor:C.getFillColor,lineColors:r&&i,getLineColor:C.getLineColor}}),R.polygons);return[!r&&I,!r&&t&&this.shouldRenderSubLayer("polygons-stroke",R.polygonsOutline.data)&&new O({widthUnits:l,widthScale:u,widthMinPixels:c,widthMaxPixels:f,rounded:h,miterLimit:d,dashJustified:x,getColor:this.getSubLayerAccessor(_),getWidth:this.getSubLayerAccessor(S),getDashArray:this.getSubLayerAccessor(E),transitions:a&&{getPath:a.geometry,getColor:a.getLineColor,getWidth:a.getLineWidth}},this.getSubLayerProps({id:"polygons-stroke",updateTriggers:{getColor:C.getLineColor,getWidth:C.getLineWidth,getDashArray:C.getLineDashArray}}),R.polygonsOutline),this.shouldRenderSubLayer("linestrings",R.lines.data)&&new T({widthUnits:l,widthScale:u,widthMinPixels:c,widthMaxPixels:f,rounded:h,miterLimit:d,dashJustified:x,getColor:this.getSubLayerAccessor(_),getWidth:this.getSubLayerAccessor(S),getDashArray:this.getSubLayerAccessor(E),transitions:a&&{getPath:a.geometry,getColor:a.getLineColor,getWidth:a.getLineWidth}},this.getSubLayerProps({id:"line-strings",updateTriggers:{getColor:C.getLineColor,getWidth:C.getLineWidth,getDashArray:C.getLineDashArray}}),R.lines),this.shouldRenderSubLayer("points",R.points.data)&&new M({stroked:t,filled:n,radiusUnits:p,radiusScale:v,radiusMinPixels:m,radiusMaxPixels:g,lineWidthUnits:l,lineWidthScale:u,lineWidthMinPixels:c,lineWidthMaxPixels:f,getFillColor:this.getSubLayerAccessor(w),getLineColor:this.getSubLayerAccessor(_),getRadius:this.getSubLayerAccessor(k),getLineWidth:this.getSubLayerAccessor(S),transitions:a&&{getPosition:a.geometry,getFillColor:a.getFillColor,getLineColor:a.getLineColor,getRadius:a.getRadius,getLineWidth:a.getLineWidth}},this.getSubLayerProps({id:"points",updateTriggers:{getFillColor:C.getFillColor,getLineColor:C.getLineColor,getRadius:C.getRadius,getLineWidth:C.getLineWidth}}),EN(EN({},R.points),{},{highlightedObjectIndex:this._getHighlightedIndex(R.points.data)})),r&&I]}},{key:"_getHighlightedIndex",value:function(e){var t=this.props.highlightedObjectIndex;return this.state.binary?t:Number.isFinite(t)?e.findIndex((function(e){return e.__source.index===t})):null}},{key:"getSubLayerAccessor",value:function(e){return this.state.binary&&"function"==typeof e?function(t,n){var r=yN(n.data,n.index);return e(r,n)}:Y_(Zb(n.prototype),"getSubLayerAccessor",this).call(this,e)}}]),n}();MN.layerName="GeoJsonLayer",MN.defaultProps=TN;function RN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var IN=[],LN=function(e){Xb(n,gj);var t=RN(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"getShaders",value:function(){return Object.assign({},Y_(Zb(n.prototype),"getShaders",this).call(this),{inject:{"vs:#decl":"\n  uniform float gamma;\n  varying float vGamma;\n","vs:#main-end":"\n  vGamma = gamma / (sizeScale * iconSize.y);\n"},fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float buffer;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform bool shouldDrawBackground;\nuniform vec3 backgroundColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying float vGamma;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    if (sdf) {\n      alpha = smoothstep(buffer - vGamma, buffer + vGamma, alpha);\n    }\n    float a = alpha * vColor.a;\n    \n    if (a < alphaCutoff) {\n      if (shouldDrawBackground) {\n        gl_FragColor = vec4(backgroundColor, vColor.a);\n      } else {\n        discard;\n      }\n    } else {\n      if (shouldDrawBackground) {\n        gl_FragColor = vec4(mix(backgroundColor, vColor.rgb, alpha), vColor.a * opacity);\n      } else {\n        gl_FragColor = vec4(vColor.rgb, a * opacity);\n      }\n      DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n    }\n  } else {\n    DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n  }\n}\n"})}},{key:"initializeState",value:function(){var e=this;Y_(Zb(n.prototype),"initializeState",this).call(this),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:function(t,n){var r=n.index,i=n.target;return e.encodePickingColor(r,i)}}})}},{key:"updateState",value:function(e){Y_(Zb(n.prototype),"updateState",this).call(this,e);var t=e.oldProps,r=e.props;if(r.backgroundColor!==t.backgroundColor){var i=Array.isArray(r.backgroundColor)?r.backgroundColor.map((function(e){return e/255})).slice(0,3):null;this.setState({backgroundColor:i})}}},{key:"draw",value:function(e){var t=e.uniforms,r=this.props.sdf,i=this.state.backgroundColor,o=Array.isArray(i);Y_(Zb(n.prototype),"draw",this).call(this,{uniforms:Object.assign({},t,{buffer:.75,gamma:.2,sdf:Boolean(r),backgroundColor:i||[0,0,0],shouldDrawBackground:o})})}},{key:"getInstanceOffset",value:function(e){var t=this;return e?Array.from(e).map((function(e){return Y_(Zb(n.prototype),"getInstanceOffset",t).call(t,e)})):IN}},{key:"getInstanceColorMode",value:function(e){return 1}},{key:"getInstanceIconFrame",value:function(e){var t=this;return e?Array.from(e).map((function(e){return Y_(Zb(n.prototype),"getInstanceIconFrame",t).call(t,e)})):IN}}]),n}();LN.layerName="MultiIconLayer",LN.defaultProps={backgroundColor:{type:"color",value:null,optional:!0},getIconOffsets:{type:"accessor",value:function(e){return e.offsets}},alphaCutoff:.001};var jN={exports:{}};jN.exports=NN,jN.exports.default=NN;var DN=1e20;function NN(e,t,n,r,i,o){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer,s=a+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function FN(e,t,n,r,i,o){for(var a=0;a<t;a++)zN(e,a,t,n,r,i,o);for(var s=0;s<n;s++)zN(e,s*t,1,t,r,i,o)}function zN(e,t,n,r,i,o,a){var s,l,u,c;for(o[0]=0,a[0]=-DN,a[1]=DN,s=0;s<r;s++)i[s]=e[t+s*n];for(s=1,l=0,u=0;s<r;s++){do{c=o[l],u=(i[s]-i[c]+s*s-c*c)/(s-c)/2}while(u<=a[l]&&--l>-1);o[++l]=s,a[l]=u,a[l+1]=DN}for(s=0,l=0;s<r;s++){for(;a[l+1]<s;)l++;c=o[l],e[t+s*n]=i[c]+(s-c)*(s-c)}}NN.prototype._draw=function(e,t){var n,r,i,o,a,s,l,u,c=this.ctx.measureText(e),f=c.width,h=2*this.buffer;t&&void 0!==c.actualBoundingBoxLeft?(a=Math.floor(c.actualBoundingBoxAscent)-this.middle,s=Math.max(0,this.middle-Math.ceil(c.actualBoundingBoxAscent)),l=this.buffer,n=(r=Math.min(this.size,Math.ceil(c.actualBoundingBoxRight-c.actualBoundingBoxLeft)))+h,i=(o=Math.min(this.size-s,Math.ceil(c.actualBoundingBoxAscent+c.actualBoundingBoxDescent)))+h):(n=r=this.size,i=o=this.size,a=0,s=l=0),r&&o&&(this.ctx.clearRect(l,s,r,o),this.ctx.fillText(e,this.buffer,this.middle),u=this.ctx.getImageData(l,s,r,o));var d=new Uint8ClampedArray(n*i);return function(e,t,n,r,i,o,a){o.fill(DN,0,t*n),a.fill(0,0,t*n);for(var s=(t-r)/2,l=0;l<i;l++)for(var u=0;u<r;u++){var c=(l+s)*t+u+s,f=e.data[4*(l*r+u)+3]/255;if(1===f)o[c]=0,a[c]=DN;else if(0===f)o[c]=DN,a[c]=0;else{var h=Math.max(0,.5-f),d=Math.max(0,f-.5);o[c]=h*h,a[c]=d*d}}}(u,n,i,r,o,this.gridOuter,this.gridInner),FN(this.gridOuter,n,i,this.f,this.v,this.z),FN(this.gridInner,n,i,this.f,this.v,this.z),function(e,t,n,r,i,o,a){for(var s=0;s<t*n;s++){var l=Math.sqrt(r[s])-Math.sqrt(i[s]);e[s]=Math.round(255-255*(l/o+a))}}(d,n,i,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:d,metrics:{width:r,height:o,sdfWidth:n,sdfHeight:i,top:a,left:0,advance:f,fontAscent:c.fontBoundingBoxAscent}}},NN.prototype.draw=function(e){return this._draw(e,!1).data},NN.prototype.drawWithMetrics=function(e){return this._draw(e,!0)};var BN=jN.exports;function VN(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return UN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UN(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function UN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var WN=[];function GN(e,t,n,r){for(var i=0,o=t;o<n;o++){var a=e[o],s=null,l=r&&r[a];l&&(s=l.width),i+=s}return i}function HN(e,t,n,r,i,o){for(var a=t,s=0,l=t;l<n;l++){var u=GN(e,l,l+1,i);s+u>r&&(a<l&&o.push(l),a=l,s=0),s+=u}return s}function qN(e,t,n,r,i,o){for(var a=t,s=t,l=t,u=0,c=t;c<n;c++)if(" "===e[c]?l=c+1:" "!==e[c+1]&&c+1!==n||(l=c+1),l>s){var f=GN(e,s,l,i);u+f>r&&(a<s&&(o.push(s),a=s,u=0),f>r&&(f=HN(e,s,l,r,i,o),a=o[o.length-1])),s=l,u+=f}return u}function $N(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;void 0===o&&(o=e.length);var a=[];return"break-all"===t?HN(e,i,o,n,r,a):qN(e,i,o,n,r,a),a}function XN(e,t,n,r,i,o){for(var a=0,s=0,l=t;l<n;l++){var u=e[l],c=r[u];c?(s||(s=c.height),i[l]=a+c.width/2,a+=c.width):(Ox.warn("Missing character: ".concat(u," (").concat(u.codePointAt(0),")"))(),i[l]=a,a+=32)}o[0]=a,o[1]=s}var YN=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;Np(this,e),this.limit=t,this.clear()}return Tf(e,[{key:"clear",value:function(){this._cache={},this._order=[]}},{key:"get",value:function(e){var t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}},{key:"set",value:function(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}},{key:"delete",value:function(e){this._cache[e]&&(this._deleteCache(e),this._deleteOrder(e))}},{key:"_deleteCache",value:function(e){delete this._cache[e]}},{key:"_deleteOrder",value:function(e){var t=this._order.findIndex((function(t){return t===e}));t>=0&&this._order.splice(t,1)}},{key:"_appendOrder",value:function(e){this._order.push(e)}}]),e}();function ZN(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return KN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KN(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function KN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var QN=function(){for(var e=[],t=32;t<128;t++)e.push(String.fromCharCode(t));return e}(),JN=new YN(3),eF=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function tF(e,t){var n=JN.get(e);if(!n)return t;var r=[],i=n.mapping,o=Object.keys(i);o=new Set(o);var a=t;return a instanceof Array&&(a=new Set(a)),a.forEach((function(e){o.has(e)||r.push(e)})),r}function nF(e,t){for(var n=0;n<e.length;n++)t.data[4*n+3]=e[n]}function rF(e,t,n,r){e.font="".concat(r," ").concat(n,"px ").concat(t),e.fillStyle="#000",e.textBaseline="baseline",e.textAlign="left"}var iF=function(){function e(){Np(this,e),this.props={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:QN,fontSize:64,buffer:2,sdf:!1,cutoff:.25,radius:3},this._key=null,this._atlas=null}return Tf(e,[{key:"setProps",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};eF.forEach((function(n){n in t&&(e.props[n]=t[n])}));var n=this._key;this._key=this._getKey();var r=tF(this._key,this.props.characterSet),i=JN.get(this._key);if(i&&0===r.length)this._key!==n&&(this._atlas=i);else{var o=this._generateFontAtlas(this._key,r,i);this._atlas=o,JN.set(this._key,o)}}},{key:"_generateFontAtlas",value:function(e,t,n){var r=this.props,i=r.fontFamily,o=r.fontWeight,a=r.fontSize,s=r.buffer,l=r.sdf,u=r.radius,c=r.cutoff,f=n&&n.data;f||((f=document.createElement("canvas")).width=1024);var h=f.getContext("2d");rF(h,i,a,o);var d=function(e){var t,n=e.characterSet,r=e.getFontWidth,i=e.fontHeight,o=e.buffer,a=e.maxCanvasWidth,s=e.mapping,l=void 0===s?{}:s,u=e.xOffset,c=void 0===u?0:u,f=e.yOffset,h=void 0===f?0:f,d=0,p=c,v=0,m=VN(n);try{for(m.s();!(t=m.n()).done;){var g=t.value;if(!l[g]){var y=r(g,v++);p+y+2*o>a&&(p=0,d++),l[g]={x:p+o,y:h+d*(i+2*o)+o,width:y,height:i},p+=y+2*o}}}catch(s$){m.e(s$)}finally{m.f()}var x,b=i+2*o;return{mapping:l,xOffset:p,yOffset:h+d*b,canvasHeight:(x=h+(d+1)*b,Math.pow(2,Math.ceil(Math.log2(x))))}}(Object.assign({getFontWidth:function(e){return h.measureText(e).width},fontHeight:1.2*a,buffer:s,characterSet:t,maxCanvasWidth:1024},n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset})),p=d.mapping,v=d.canvasHeight,m=d.xOffset,g=d.yOffset;if(f.height!==v){var y=h.getImageData(0,0,f.width,f.height);f.height=v,h.putImageData(y,0,0)}if(rF(h,i,a,o),l){var x,b=new BN(a,s,u,c,i,o),_=h.getImageData(0,0,b.size,b.size),w=ZN(t);try{for(w.s();!(x=w.n()).done;){var k=x.value;nF(b.draw(k),_),h.putImageData(_,p[k].x-s,p[k].y-s)}}catch(s$){w.e(s$)}finally{w.f()}}else{var S,E=ZN(t);try{for(E.s();!(S=E.n()).done;){var P=S.value;h.fillText(P,p[P].x,p[P].y+.9*a)}}catch(s$){E.e(s$)}finally{E.f()}}return{xOffset:m,yOffset:g,mapping:p,data:f,width:f.width,height:f.height}}},{key:"_getKey",value:function(){var e=this.props,t=e.fontFamily,n=e.fontWeight,r=e.fontSize,i=e.buffer,o=e.sdf,a=e.radius,s=e.cutoff;return o?"".concat(t," ").concat(n," ").concat(r," ").concat(i," ").concat(a," ").concat(s):"".concat(t," ").concat(n," ").concat(r," ").concat(i)}},{key:"texture",get:function(){return this._atlas}},{key:"mapping",get:function(){return this._atlas&&this._atlas.mapping}},{key:"scale",get:function(){return 1.2}}]),e}();function oF(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return aF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aF(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function aF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sF(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var cF={fontSize:64,buffer:2,sdf:!1,radius:3,cutoff:.25},fF={start:1,middle:0,end:-1},hF={top:1,center:0,bottom:-1},dF=["fontSize","buffer","sdf","radius","cutoff"],pF={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,backgroundColor:{type:"color",value:null,optional:!0},characterSet:QN,fontFamily:"Monaco, monospace",fontWeight:"normal",lineHeight:1,fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:function(e){return e.text}},getPosition:{type:"accessor",value:function(e){return e.position}},getColor:{type:"accessor",value:[0,0,0,255]},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]}},vF=function(e){Xb(n,qI);var t=uF(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"initializeState",value:function(){this.state={styleVersion:0,fontAtlasManager:new iF}}},{key:"updateState",value:function(e){var t=e.props,n=e.oldProps,r=e.changeFlags,i=this._fontChanged(n,t);i&&this._updateFontAtlas(n,t);var o=i||t.lineHeight!==n.lineHeight||t.wordBreak!==n.wordBreak||t.maxWidth!==n.maxWidth;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),o&&this.setState({styleVersion:this.state.styleVersion+1})}},{key:"getPickingInfo",value:function(e){var t=e.info;return Object.assign(t,{object:t.index>=0?this.props.data[t.index]:null})}},{key:"_updateFontAtlas",value:function(e,t){var n=t.characterSet,r=t.fontSettings,i=t.fontFamily,o=t.fontWeight;this.state.fontAtlasManager.setProps(Object.assign({},cF,r,{characterSet:n,fontFamily:i,fontWeight:o})),this.setNeedsRedraw(!0)}},{key:"_fontChanged",value:function(e,t){if(e.fontFamily!==t.fontFamily||e.characterSet!==t.characterSet||e.fontWeight!==t.fontWeight)return!0;if(e.fontSettings===t.fontSettings)return!1;var n=e.fontSettings||{},r=t.fontSettings||{};return dF.some((function(e){return n[e]!==r[e]}))}},{key:"_updateText",value:function(){var e,t=this.props.data,n=t.attributes&&t.attributes.getText,r=this.props.getText,i=t.startIndices;if(n&&i){var o=function(e){var t=e.value,n=e.length,r=e.stride,i=e.offset,o=e.startIndices,a=t.BYTES_PER_ELEMENT,s=r?r/a:1,l=i?i/a:0,u=o[n]||Math.floor((t.length-l-a)/s)+1,c=new Array(n),f=t;if(s>1||l>0){f=new t.constructor(u);for(var h=0;h<u;h++)f[h]=t[h*s+l]}for(var d=0;d<n;d++){var p=o[d],v=o[d+1]||u;c[d]=String.fromCodePoint.apply(null,f.subarray(p,v))}return{texts:c,characterCount:u}}(lF(lF({},ArrayBuffer.isView(n)?{value:n}:n),{},{length:t.length,startIndices:i})),a=o.texts;e=o.characterCount,r=function(e,t){var n=t.index;return a[n]}}else{var s=xO(t),l=s.iterable,u=s.objectInfo;i=[0],e=0;var c,f=oF(l);try{for(f.s();!(c=f.n()).done;){var h=c.value;u.index++;var d=r(h,u)||"";e+=Array.from(d).length,i.push(e)}}catch(s$){f.e(s$)}finally{f.f()}}this.setState({getText:r,startIndices:i,numInstances:e})}},{key:"getIconOffsets",value:function(e,t){for(var n=this.state.fontAtlasManager.mapping,r=this.state.getText,i=this.props,o=i.wordBreak,a=i.maxWidth,s=i.lineHeight,l=i.getTextAnchor,u=i.getAlignmentBaseline,c=function(e,t,n,r,i){for(var o=(e=Array.from(e)).length,a=new Array(o),s=new Array(o),l=new Array(o),u=("break-word"===n||"break-all"===n)&&isFinite(r)&&r>0,c=[0,0],f=[],h=0,d=0,p=0,v=0;v<=o;v++){var m=e[v];if("\n"!==m&&v!==o||(p=v),p>d){for(var g=u?$N(e,n,r,i,d,p):WN,y=0;y<=g.length;y++){var x=0===y?d:g[y-1],b=y<g.length?g[y]:p;XN(e,x,b,i,a,f);for(var _=x;_<b;_++)s[_]=h+f[1]/2,l[_]=f[0];h+=f[1]*t,c[0]=u?r:Math.max(c[0],f[0])}d=p}"\n"===m&&(a[d]=0,s[d]=0,l[d]=0,d++)}return c[1]=h,{x:a,y:s,rowWidth:l,size:c}}(r(e,t)||"",s,o,a,n),f=c.x,h=c.y,d=c.rowWidth,p=ob(c.size,2),v=p[0],m=p[1],g=fF["function"==typeof l?l(e,t):l],y=hF["function"==typeof u?u(e,t):u],x=f.length,b=new Array(2*x),_=0,w=0;w<x;w++){var k=(1-g)*(v-d[w])/2;b[_++]=(g-1)*v/2+k+f[w],b[_++]=(y-1)*m/2+h[w]}return b}},{key:"renderLayers",value:function(){var e=this.state,t=e.startIndices,n=e.numInstances,r=e.getText,i=e.fontAtlasManager,o=i.scale,a=i.texture,s=i.mapping,l=e.styleVersion,u=this.props,c=u.data,f=u._dataDiff,h=u.backgroundColor,d=u.getPosition,p=u.getColor,v=u.getSize,m=u.getAngle,g=u.getPixelOffset,y=u.billboard,x=u.fontSettings,b=u.sizeScale,_=u.sizeUnits,w=u.sizeMinPixels,k=u.sizeMaxPixels,S=u.transitions,E=u.updateTriggers,P=this.getIconOffsets.bind(this);return new(this.getSubLayerClass("characters",LN))({sdf:x.sdf,iconAtlas:a,iconMapping:s,backgroundColor:h,getPosition:d,getColor:p,getSize:v,getAngle:m,getPixelOffset:g,billboard:y,sizeScale:b*o,sizeUnits:_,sizeMinPixels:w*o,sizeMaxPixels:k*o,transitions:S&&{getPosition:S.getPosition,getAngle:S.getAngle,getColor:S.getColor,getSize:S.getSize,getPixelOffset:S.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:E.getText,getPosition:E.getPosition,getAngle:E.getAngle,getColor:E.getColor,getSize:E.getSize,getPixelOffset:E.getPixelOffset,getIconOffsets:{getText:E.getText,getTextAnchor:E.getTextAnchor,getAlignmentBaseline:E.getAlignmentBaseline,styleVersion:l}}}),{data:c,_dataDiff:f,startIndices:t,numInstances:n,getIconOffsets:P,getIcon:r})}}]),n}();vF.layerName="TextLayer",vF.defaultProps=pF;var mF=function(){function e(t){var n=t.x,r=t.y,i=t.z,o=t.onTileLoad,a=t.onTileError;Np(this,e),this.x=n,this.y=r,this.z=i,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._isLoaded=!1,this._isCancelled=!1,this.onTileLoad=o,this.onTileError=a}var t;return Tf(e,[{key:"_loadData",value:(t=Ov(Cv.mark((function e(t,n){var r,i,o,a,s,l,u,c;return Cv.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.x,i=this.y,o=this.z,a=this.bbox,this._abortController=new AbortController,s=this._abortController.signal,e.next=5,n.scheduleRequest(this,(function(e){return e.isSelected?1:-1}));case 5:if(l=e.sent){e.next=9;break}return this._isCancelled=!0,e.abrupt("return");case 9:if(!this._isCancelled){e.next=12;break}return l.done(),e.abrupt("return");case 12:return e.prev=12,e.next=15,t({x:r,y:i,z:o,bbox:a,signal:s});case 15:u=e.sent,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(12),c=e.t0||!0;case 21:return e.prev=21,l.done(),this._isCancelled&&!u?this._isLoaded=!1:(this._isLoaded=!0,this._isCancelled=!1),e.finish(21);case 25:if(this._isLoaded){e.next=27;break}return e.abrupt("return");case 27:c?this.onTileError(c,this):(this.content=u,this.onTileLoad(this));case 28:case"end":return e.stop()}}),e,this,[[12,18,21,25]])}))),function(e,n){return t.apply(this,arguments)})},{key:"loadData",value:function(e,t){var n=this;e&&(this._isCancelled=!1,this._loader=this._loadData(e,t),this._loader.finally((function(){n._loader=void 0})))}},{key:"abort",value:function(){this.isLoaded||(this._isCancelled=!0,this._abortController.abort())}},{key:"data",get:function(){return this._isLoaded?this.content:this._loader}},{key:"isLoaded",get:function(){return this._isLoaded}},{key:"isLoading",get:function(){return Boolean(this._loader)}},{key:"isCancelled",get:function(){return this._isCancelled}},{key:"byteLength",get:function(){var e=this.content?this.content.byteLength:0;return Number.isFinite(e)||Ox.error("byteLength not defined in tile data")(),e}}]),e}(),gF=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),yF=new LE,xF=new LE,bF=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Np(this,e),r=r||yF.copy(t).add(n).scale(.5),this.center=new LE(r),this.halfDiagonal=new LE(n).subtract(this.center),this.minimum=new LE(t),this.maximum=new LE(n)}return Tf(e,[{key:"clone",value:function(){return new e(this.minimum,this.maximum,this.center)}},{key:"equals",value:function(e){return this===e||Boolean(e)&&this.minimum.equals(e.minimum)&&this.maximum.equals(e.maximum)}},{key:"intersectPlane",value:function(e){var t=this.halfDiagonal,n=xF.from(e.normal),r=t.x*Math.abs(n.x)+t.y*Math.abs(n.y)+t.z*Math.abs(n.z),i=this.center.dot(n)+e.distance;return i-r>0?gF.INSIDE:i+r<0?gF.OUTSIDE:gF.INTERSECTING}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceSquaredTo(e))}},{key:"distanceSquaredTo",value:function(e){var t,n=yF.from(e).subtract(this.center),r=this.halfDiagonal,i=0;return(t=Math.abs(n.x)-r.x)>0&&(i+=t*t),(t=Math.abs(n.y)-r.y)>0&&(i+=t*t),(t=Math.abs(n.z)-r.z)>0&&(i+=t*t),i}}]),e}(),_F=new LE,wF=new LE,kF=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Np(this,e),this.radius=-0,this.center=new LE,this.fromCenterRadius(t,n)}return Tf(e,[{key:"fromCenterRadius",value:function(e,t){return this.center.from(e),this.radius=t,this}},{key:"fromCornerPoints",value:function(e,t){return t=_F.from(t),this.center=(new LE).from(e).add(t).scale(.5),this.radius=this.center.distance(t),this}},{key:"equals",value:function(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.radius===e.radius}},{key:"clone",value:function(){return new e(this.center,this.radius)}},{key:"union",value:function(e){var t=this.center,n=this.radius,r=e.center,i=e.radius,o=_F.copy(r).subtract(t),a=o.magnitude();if(n>=a+i)return this.clone();if(i>=a+n)return e.clone();var s=.5*(n+a+i);return wF.copy(o).scale((-n+s)/a).add(t),this.center.copy(wF),this.radius=s,this}},{key:"expand",value:function(e){var t=(e=_F.from(e)).subtract(this.center).magnitude();return t>this.radius&&(this.radius=t),this}},{key:"intersectPlane",value:function(e){var t=this.center,n=this.radius,r=e.normal.dot(t)+e.distance;return r<-n?gF.OUTSIDE:r<n?gF.INTERSECTING:gF.INSIDE}},{key:"transform",value:function(e){this.center.transform(e);var t=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[4],a=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(o,a,s),e[2]=Math.hypot(l,u,c),e}(_F,e);return this.radius=Math.max(t[0],Math.max(t[1],t[2]))*this.radius,this}},{key:"distanceSquaredTo",value:function(e){return(e=_F.from(e)).subtract(this.center).lengthSquared()-this.radius*this.radius}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceSquaredTo(e))}}]),e}(),SF=new LE,EF=new LE,PF=new LE,CF=new LE,AF=new LE,OF=new LE,TF=new LE,MF=new LE,RF=new LE,IF=new LE,LF=0,jF=1,DF=2,NF=3,FF=4,zF=5,BF=6,VF=7,UF=8;!function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0,0,0,0,0,0];Np(this,e),this.center=(new LE).from(t),this.halfAxes=new GE(n)}Tf(e,[{key:"fromCenterHalfSizeQuaternion",value:function(e,t,n){var r=new CP(n),i=(new GE).fromQuaternion(r);return i[0]=i[0]*t[0],i[1]=i[1]*t[0],i[2]=i[2]*t[0],i[3]=i[3]*t[1],i[4]=i[4]*t[1],i[5]=i[5]*t[1],i[6]=i[6]*t[2],i[7]=i[7]*t[2],i[8]=i[8]*t[2],this.center=(new LE).from(e),this.halfAxes=i,this}},{key:"clone",value:function(){return new e(this.center,this.halfAxes)}},{key:"equals",value:function(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}},{key:"getBoundingSphere",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kF,t=this.halfAxes,n=t.getColumn(0,MF),r=t.getColumn(1,RF),i=t.getColumn(2,IF),o=SF.copy(n).add(r).add(i);return e.center.copy(this.center),e.radius=o.magnitude(),e}},{key:"intersectPlane",value:function(e){var t=this.center,n=e.normal,r=this.halfAxes,i=n.x,o=n.y,a=n.z,s=Math.abs(i*r[LF]+o*r[jF]+a*r[DF])+Math.abs(i*r[NF]+o*r[FF]+a*r[zF])+Math.abs(i*r[BF]+o*r[VF]+a*r[UF]),l=n.dot(t)+e.distance;return l<=-s?gF.OUTSIDE:l>=s?gF.INSIDE:gF.INTERSECTING}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceSquaredTo(e))}},{key:"distanceSquaredTo",value:function(e){var t=EF.from(e).subtract(this.center),n=this.halfAxes,r=n.getColumn(0,PF),i=n.getColumn(1,CF),o=n.getColumn(2,AF),a=r.magnitude(),s=i.magnitude(),l=o.magnitude();r.normalize(),i.normalize(),o.normalize();var u,c=0;return(u=Math.abs(t.dot(r))-a)>0&&(c+=u*u),(u=Math.abs(t.dot(i))-s)>0&&(c+=u*u),(u=Math.abs(t.dot(o))-l)>0&&(c+=u*u),c}},{key:"computePlaneDistances",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-0,-0],r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,o=this.center,a=this.halfAxes,s=a.getColumn(0,PF),l=a.getColumn(1,CF),u=a.getColumn(2,AF),c=OF.copy(s).add(l).add(u).add(o),f=TF.copy(c).subtract(e),h=t.dot(f);return r=Math.min(h,r),i=Math.max(h,i),c.copy(o).add(s).add(l).subtract(u),f.copy(c).subtract(e),h=t.dot(f),r=Math.min(h,r),i=Math.max(h,i),c.copy(o).add(s).subtract(l).add(u),f.copy(c).subtract(e),h=t.dot(f),r=Math.min(h,r),i=Math.max(h,i),c.copy(o).add(s).subtract(l).subtract(u),f.copy(c).subtract(e),h=t.dot(f),r=Math.min(h,r),i=Math.max(h,i),o.copy(c).subtract(s).add(l).add(u),f.copy(c).subtract(e),h=t.dot(f),r=Math.min(h,r),i=Math.max(h,i),o.copy(c).subtract(s).add(l).subtract(u),f.copy(c).subtract(e),h=t.dot(f),r=Math.min(h,r),i=Math.max(h,i),o.copy(c).subtract(s).subtract(l).add(u),f.copy(c).subtract(e),h=t.dot(f),r=Math.min(h,r),i=Math.max(h,i),o.copy(c).subtract(s).subtract(l).subtract(u),f.copy(c).subtract(e),h=t.dot(f),r=Math.min(h,r),i=Math.max(h,i),n[0]=r,n[1]=i,n}},{key:"getTransform",value:function(){}},{key:"halfSize",get:function(){var e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new LE(e).len(),new LE(t).len(),new LE(n).len()]}},{key:"quaternion",get:function(){var e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),r=new LE(e).normalize(),i=new LE(t).normalize(),o=new LE(n).normalize();return(new CP).fromMatrix3(new GE([].concat(yd(r),yd(i),yd(o))))}}])}();var WF=new LE,GF=new LE,HF=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,1],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Np(this,e),this.normal=new LE,this.distance=-0,this.fromNormalDistance(t,n)}return Tf(e,[{key:"fromNormalDistance",value:function(e,t){return $S(Number.isFinite(t)),this.normal.from(e).normalize(),this.distance=t,this}},{key:"fromPointNormal",value:function(e,t){e=WF.from(e),this.normal.from(t).normalize();var n=-this.normal.dot(e);return this.distance=n,this}},{key:"fromCoefficients",value:function(e,t,n,r){return this.normal.set(e,t,n),$S(tE(this.normal.len(),1)),this.distance=r,this}},{key:"clone",value:function(t){return new e(this.normal,this.distance)}},{key:"equals",value:function(e){return tE(this.distance,e.distance)&&tE(this.normal,e.normal)}},{key:"getPointDistance",value:function(e){return this.normal.dot(e)+this.distance}},{key:"transform",value:function(e){var t=GF.copy(this.normal).transformAsVector(e).normalize(),n=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(n,t)}},{key:"projectPointOntoPlane",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];e=WF.from(e);var n=this.getPointDistance(e),r=GF.copy(this.normal).scale(n);return e.subtract(r).to(t)}}]),e}();function qF(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return $F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $F(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function $F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var XF=[new LE([1,0,0]),new LE([0,1,0]),new LE([0,0,1])],YF=new LE,ZF=new LE;new HF(new LE(1,0,0),0);var KF=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Np(this,e),this.planes=t,$S(this.planes.every((function(e){return e instanceof HF})))}return Tf(e,null,[{key:"MASK_OUTSIDE",get:function(){return 4294967295}},{key:"MASK_INSIDE",get:function(){return 0}},{key:"MASK_INDETERMINATE",get:function(){return 2147483647}}]),Tf(e,[{key:"fromBoundingSphere",value:function(e){this.planes.length=2*XF.length;var t,n=e.center,r=e.radius,i=0,o=qF(XF);try{for(o.s();!(t=o.n()).done;){var a=t.value,s=this.planes[i],l=this.planes[i+1];s||(s=this.planes[i]=new HF),l||(l=this.planes[i+1]=new HF);var u=YF.copy(a).scale(-r).add(n);a.dot(u);s.fromPointNormal(u,a);var c=YF.copy(a).scale(r).add(n),f=ZF.copy(a).negate();f.dot(c);l.fromPointNormal(c,f),i+=2}}catch(s$){o.e(s$)}finally{o.f()}return this}},{key:"computeVisibility",value:function(e){$S(e);var t,n=gF.INSIDE,r=qF(this.planes);try{for(r.s();!(t=r.n()).done;){var i=t.value;switch(e.intersectPlane(i)){case gF.OUTSIDE:return gF.OUTSIDE;case gF.INTERSECTING:n=gF.INTERSECTING}}}catch(s$){r.e(s$)}finally{r.f()}return n}},{key:"computeVisibilityWithPlaneMask",value:function(t,n){if($S(t,"boundingVolume is required."),$S(Number.isFinite(n),"parentPlaneMask is required."),n===e.MASK_OUTSIDE||n===e.MASK_INSIDE)return n;for(var r=e.MASK_INSIDE,i=this.planes,o=0;o<this.planes.length;++o){var a=o<31?1<<o:0;if(!(o<31&&0==(n&a))){var s=i[o],l=t.intersectPlane(s);if(l===gF.OUTSIDE)return e.MASK_OUTSIDE;l===gF.INTERSECTING&&(r|=a)}}return r}}]),e}();function QF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QF(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ez=new LE,tz=new LE,nz=new LE,rz=new LE,iz=new LE,oz=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Np(this,e),t=JF({near:1,far:5e8},t),this.left=t.left,this._left=void 0,this.right=t.right,this._right=void 0,this.top=t.top,this._top=void 0,this.bottom=t.bottom,this._bottom=void 0,this.near=t.near,this._near=this.near,this.far=t.far,this._far=this.far,this._cullingVolume=new KF([new HF,new HF,new HF,new HF,new HF,new HF]),this._perspectiveMatrix=new lP,this._infinitePerspective=new lP}return Tf(e,[{key:"clone",value:function(){return new e({right:this.right,left:this.left,top:this.top,bottom:this.bottom,near:this.near,far:this.far})}},{key:"equals",value:function(t){return t&&t instanceof e&&this.right===t.right&&this.left===t.left&&this.top===t.top&&this.bottom===t.bottom&&this.near===t.near&&this.far===t.far}},{key:"computeCullingVolume",value:function(e,t,n){$S(e,"position is required."),$S(t,"direction is required."),$S(n,"up is required.");var r=this._cullingVolume.planes;n=ez.copy(n).normalize();var i=tz.copy(t).cross(n).normalize(),o=nz.copy(t).multiplyByScalar(this.near).add(e),a=rz.copy(t).multiplyByScalar(this.far).add(e),s=iz;return s.copy(i).multiplyByScalar(this.left).add(o).subtract(e).cross(n),r[0].fromPointNormal(e,s),s.copy(i).multiplyByScalar(this.right).add(o).subtract(e).cross(n).negate(),r[1].fromPointNormal(e,s),s.copy(n).multiplyByScalar(this.bottom).add(o).subtract(e).cross(i).negate(),r[2].fromPointNormal(e,s),s.copy(n).multiplyByScalar(this.top).add(o).subtract(e).cross(i),r[3].fromPointNormal(e,s),s=(new LE).copy(t),r[4].fromPointNormal(o,s),s.negate(),r[5].fromPointNormal(a,s),this._cullingVolume}},{key:"getPixelDimensions",value:function(e,t,n,r){az(this),$S(Number.isFinite(e)&&Number.isFinite(t)),$S(e>0),$S(t>0),$S(n>0),$S(r);var i=1/this.near,o=this.top*i,a=2*n*o/t,s=2*n*(o=this.right*i)/e;return r.x=s,r.y=a,r}},{key:"projectionMatrix",get:function(){return az(this),this._perspectiveMatrix}},{key:"infiniteProjectionMatrix",get:function(){return az(this),this._infinitePerspective}}]),e}();function az(e){$S(Number.isFinite(e.right)&&Number.isFinite(e.left)&&Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.near)&&Number.isFinite(e.far));var t=e.top,n=e.bottom,r=e.right,i=e.left,o=e.near,a=e.far;t===e._top&&n===e._bottom&&i===e._left&&r===e._right&&o===e._near&&a===e._far||($S(e.near>0&&e.near<e.far,"near must be greater than zero and less than far."),e._left=i,e._right=r,e._top=t,e._bottom=n,e._near=o,e._far=a,e._perspectiveMatrix=(new lP).frustum({left:i,right:r,bottom:n,top:t,near:o,far:a}),e._infinitePerspective=(new lP).frustum({left:i,right:r,bottom:n,top:t,near:o,far:1/0}))}function sz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sz(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sz(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uz(e){$S(Number.isFinite(e.fov)&&Number.isFinite(e.aspectRatio)&&Number.isFinite(e.near)&&Number.isFinite(e.far));var t=e._offCenterFrustum;e.fov===e._fov&&e.aspectRatio===e._aspectRatio&&e.near===e._near&&e.far===e._far&&e.xOffset===e._xOffset&&e.yOffset===e._yOffset||($S(e.fov>=0&&e.fov<Math.PI),$S(e.aspectRatio>0),$S(e.near>=0&&e.near<e.far),e._aspectRatio=e.aspectRatio,e._fov=e.fov,e._fovy=e.aspectRatio<=1?e.fov:2*Math.atan(Math.tan(.5*e.fov)/e.aspectRatio),e._near=e.near,e._far=e.far,e._sseDenominator=2*Math.tan(.5*e._fovy),e._xOffset=e.xOffset,e._yOffset=e.yOffset,t.top=e.near*Math.tan(.5*e._fovy),t.bottom=-t.top,t.right=e.aspectRatio*t.top,t.left=-t.right,t.near=e.near,t.far=e.far,t.right+=e.xOffset,t.left+=e.xOffset,t.top+=e.yOffset,t.bottom+=e.yOffset)}function cz(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return fz(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fz(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function fz(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Np(this,e),t=lz({near:1,far:5e8,xOffset:0,yOffset:0},t),this._offCenterFrustum=new oz,this.fov=t.fov,this._fov=void 0,this._fovy=void 0,this._sseDenominator=void 0,this.aspectRatio=t.aspectRatio,this._aspectRatio=void 0,this.near=t.near,this._near=this.near,this.far=t.far,this._far=this.far,this.xOffset=t.xOffset,this._xOffset=this.xOffset,this.yOffset=t.yOffset,this._yOffset=this.yOffset}Tf(e,[{key:"clone",value:function(){return new e({aspectRatio:this.aspectRatio,fov:this.fov,near:this.near,far:this.far})}},{key:"equals",value:function(t){return null!=t&&t instanceof e&&(uz(this),uz(t),this.fov===t.fov&&this.aspectRatio===t.aspectRatio&&this.near===t.near&&this.far===t.far&&this._offCenterFrustum.equals(t._offCenterFrustum))}},{key:"computeCullingVolume",value:function(e,t,n){return uz(this),this._offCenterFrustum.computeCullingVolume(e,t,n)}},{key:"getPixelDimensions",value:function(e,t,n,r){return uz(this),this._offCenterFrustum.getPixelDimensions(e,t,n,r)}},{key:"projectionMatrix",get:function(){return uz(this),this._offCenterFrustum.projectionMatrix}},{key:"infiniteProjectionMatrix",get:function(){return uz(this),this._offCenterFrustum.infiniteProjectionMatrix}},{key:"fovy",get:function(){return uz(this),this._fovy}},{key:"sseDenominator",get:function(){return uz(this),this._sseDenominator}}])}(),new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new GE,new GE,new GE,new GE,new GE,new LE,new LE,new LE,new LE,new LE,new GE,new GE,new GE;var hz=function(){function e(t,n,r){Np(this,e),this.x=t,this.y=n,this.z=r}return Tf(e,[{key:"update",value:function(e){var t=e.viewport,n=e.cullingVolume,r=e.elevationBounds,i=e.minZ,o=e.maxZ,a=e.offset,s=e.project,l=this.getBoundingVolume(r,a,s);if(n.computeVisibility(l)<0)return!1;if(!this.childVisible){var u=this.z;if(u<o&&u>=i){var c=l.distanceTo(t.cameraPosition)*t.scale/t.height;u+=Math.floor(Math.log2(c))}if(u>=o)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;var f,h=cz(this.children);try{for(h.s();!(f=h.n()).done;){f.value.update(e)}}catch(s$){h.e(s$)}finally{h.f()}return!0}},{key:"getSelected",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.selected&&e.push(this),this._children){var t,n=cz(this._children);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.getSelected(e)}}catch(s$){n.e(s$)}finally{n.f()}}return e}},{key:"getBoundingVolume",value:function(e,t,n){if(n){var r=gz(this.x,this.y,this.z),i=gz(this.x+1,this.y+1,this.z),o=gz(this.x+.5,this.y+.5,this.z);r.z=e[1],i.z=e[1],o.z=e[0];var a=n(r),s=n(i),l=new LE(n(o)),u=Math.max(l.distance(a),l.distance(s));return new kF(l,u)}var c=512/Math.pow(2,this.z),f=this.x*c+512*t,h=512-(this.y+1)*c;return new bF([f,h,e[0]],[f+c,h+c,e[1]])}},{key:"children",get:function(){if(!this._children){var t=2*this.x,n=2*this.y,r=this.z+1;this._children=[new e(t,n,r),new e(t,n+1,r),new e(t+1,n,r),new e(t+1,n+1,r)]}return this._children}}]),e}();var dz=[-1/0,-1/0,1/0,1/0],pz={type:"url",value:"",validate:function(e){return"string"==typeof e||Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))},equals:function(e,t){if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t))return!1;var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}};function vz(e,t){var n=[t.transformPoint([e[0],e[1]]),t.transformPoint([e[2],e[1]]),t.transformPoint([e[0],e[3]]),t.transformPoint([e[2],e[3]])];return[Math.min.apply(Math,yd(n.map((function(e){return e[0]})))),Math.min.apply(Math,yd(n.map((function(e){return e[1]})))),Math.max.apply(Math,yd(n.map((function(e){return e[0]})))),Math.max.apply(Math,yd(n.map((function(e){return e[1]}))))]}function mz(e){return Math.pow(2,e)}function gz(e,t,n){var r=mz(n),i=e/r*360-180,o=Math.PI-2*Math.PI*t/r;return[i,180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)))]}function yz(e,t,n){var r=mz(n);return[e/r*512,t/r*512]}function xz(e,t,n,r){if(e.isGeospatial){var i=ob(gz(t,n,r),2),o=i[0],a=i[1],s=ob(gz(t+1,n+1,r),2);return{west:o,north:a,east:s[0],south:s[1]}}var l=ob(yz(t,n,r),2),u=l[0],c=l[1],f=ob(yz(t+1,n+1,r),2);return{left:u,top:c,right:f[0],bottom:f[1]}}function bz(e,t,n,r){for(var i=function(e,t,n){var r;if(t&&2===t.length){var i=ob(t,2),o=i[0],a=i[1],s=e.getBounds({z:o}),l=e.getBounds({z:a});r=[Math.min(s[0],l[0]),Math.min(s[1],l[1]),Math.max(s[2],l[2]),Math.max(s[3],l[3])]}else r=e.getBounds();return e.isGeospatial?[Math.max(r[0],n[0]),Math.max(r[1],n[1]),Math.min(r[2],n[2]),Math.min(r[3],n[3])]:[Math.max(Math.min(r[0],n[2]),n[0]),Math.max(Math.min(r[1],n[3]),n[1]),Math.min(Math.max(r[2],n[0]),n[2]),Math.min(Math.max(r[3],n[1]),n[3])]}(e,null,n),o=ob(function(e,t,n){return n?vz(e,n).map((function(e){return e*t/512})):e.map((function(e){return e*t/512}))}(i,mz(t),r),4),a=o[0],s=o[1],l=o[2],u=o[3],c=[],f=Math.floor(a);f<l;f++)for(var h=Math.floor(s);h<u;h++)c.push({x:f,y:h,z:t});return c}function _z(e){var t=e.viewport,n=e.maxZoom,r=e.minZoom,i=e.zRange,o=e.extent,a=e.tileSize,s=void 0===a?512:a,l=e.modelMatrix,u=e.modelMatrixInverse,c=Math.round(t.zoom+Math.log2(512/s));if(Number.isFinite(r)&&c<r){if(!o)return[];c=r}Number.isFinite(n)&&c>n&&(c=n);var f=o;return l&&u&&o&&!t.isGeospatial&&(f=vz(o,l)),t.isGeospatial?function(e,t,n){var r=e.resolution?e.projectPosition:null,i=Object.values(e.getFrustumPlanes()).map((function(e){var t=e.normal,n=e.distance;return new HF(t.clone().negate(),n)})),o=new KF(i),a=e.distanceScales.unitsPerMeter[2],s=n&&n[0]*a||0,l=n&&n[1]*a||0,u=e.pitch<=60?t:0,c=new hz(0,0,0),f={viewport:e,project:r,cullingVolume:o,elevationBounds:[s,l],minZ:u,maxZ:t,offset:0};if(c.update(f),e.subViewports&&e.subViewports.length>1){for(f.offset=-1;c.update(f)&&!(--f.offset<-3););for(f.offset=1;c.update(f)&&!(++f.offset>3););}return c.getSelected()}(t,c,i):bz(t,c,f||dz,u)}function wz(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return kz(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kz(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function kz(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Sz=function(){function e(t){var n=this;Np(this,e),this.opts=t,this._getTileData=t.getTileData,this.onTileError=t.onTileError,this.onTileLoad=function(e){t.onTileLoad(e),n.opts.maxCacheByteSize&&(n._cacheByteSize+=e.byteLength,n._resizeCache())},this.onTileUnload=t.onTileUnload,this._requestScheduler=new sm({maxRequests:t.maxRequests,throttleRequests:t.maxRequests>0}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this.setOptions(t)}return Tf(e,[{key:"setOptions",value:function(e){Object.assign(this.opts,e),Number.isFinite(e.maxZoom)&&(this._maxZoom=Math.floor(e.maxZoom)),Number.isFinite(e.minZoom)&&(this._minZoom=Math.ceil(e.minZoom))}},{key:"finalize",value:function(){var e,t=wz(this._cache.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.isLoading&&n.abort()}}catch(s$){t.e(s$)}finally{t.f()}}},{key:"update",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.zRange,i=n.modelMatrix,o=new lP(i),a=!o.equals(this._modelMatrix);if(!e.equals(this._viewport)||a){a&&(this._modelMatrixInverse=i&&o.clone().invert(),this._modelMatrix=i&&o),this._viewport=e;var s=this.getTileIndices({viewport:e,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:r,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=s.map((function(e){return t._getTile(e,!0)})),this._dirty&&this._rebuildTree()}var l=this.updateTileStates();return this._dirty&&this._resizeCache(),l&&this._frameNumber++,this._frameNumber}},{key:"getTileIndices",value:function(e){var t=e.viewport,n=e.maxZoom,r=e.minZoom,i=e.zRange,o=e.modelMatrix,a=e.modelMatrixInverse,s=this.opts;return _z({viewport:t,maxZoom:n,minZoom:r,zRange:i,tileSize:s.tileSize,extent:s.extent,modelMatrix:o,modelMatrixInverse:a})}},{key:"getTileMetadata",value:function(e){var t=e.x,n=e.y,r=e.z;return{bbox:xz(this._viewport,t,n,r)}}},{key:"getParentIndex",value:function(e){return e.x=Math.floor(e.x/2),e.y=Math.floor(e.y/2),e.z-=1,e}},{key:"updateTileStates",value:function(){this._updateTileStates(this.selectedTiles);var e,t=this.opts.maxRequests,n=[],r=0,i=!1,o=wz(this._cache.values());try{for(o.s();!(e=o.n()).done;){var a=e.value,s=Boolean(1&a.state);a.isVisible!==s&&(i=!0,a.isVisible=s),a.isSelected=5===a.state,a.isLoading&&(r++,a.isSelected||n.push(a))}}catch(s$){o.e(s$)}finally{o.f()}if(t>0)for(;r>t&&n.length>0;){n.shift().abort(),r--}return i}},{key:"_rebuildTree",value:function(){var e,t=this._cache,n=wz(t.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;r.parent=null,r.children.length=0}}catch(s$){n.e(s$)}finally{n.f()}var i,o=wz(t.values());try{for(o.s();!(i=o.n()).done;){var a=i.value,s=this._getNearestAncestor(a.x,a.y,a.z);a.parent=s,s&&s.children.push(a)}}catch(s$){o.e(s$)}finally{o.f()}}},{key:"_updateTileStates",value:function(e){var t,n=this._cache,r=this.opts.refinementStrategy||"best-available",i=wz(n.values());try{for(i.s();!(t=i.n()).done;){t.value.state=0}}catch(s$){i.e(s$)}finally{i.f()}var o,a=wz(e);try{for(a.s();!(o=a.n()).done;){o.value.state=5}}catch(s$){a.e(s$)}finally{a.f()}if("never"!==r){var s,l=wz(e);try{for(l.s();!(s=l.n()).done;){Pz(s.value,r)}}catch(s$){l.e(s$)}finally{l.f()}var u,c=wz(e);try{for(c.s();!(u=c.n()).done;){var f=u.value;Ez(f)&&Cz(f)}}catch(s$){c.e(s$)}finally{c.f()}}}},{key:"_resizeCache",value:function(){var e=this._cache,t=this.opts,n=t.maxCacheSize||(t.maxCacheByteSize?1/0:5*this.selectedTiles.length),r=t.maxCacheByteSize||1/0;if(e.size>n||this._cacheByteSize>r){var i,o=wz(e);try{for(o.s();!(i=o.n()).done;){var a=ob(i.value,2),s=a[0],l=a[1];if(l.isVisible||(this._cacheByteSize-=t.maxCacheByteSize?l.byteLength:0,e.delete(s),this.onTileUnload(l)),e.size<=n&&this._cacheByteSize<=r)break}}catch(s$){o.e(s$)}finally{o.f()}this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((function(e,t){return e.z-t.z})),this._dirty=!1)}},{key:"_getTile",value:function(e,t){var n=e.x,r=e.y,i=e.z,o="".concat(n,",").concat(r,",").concat(i),a=this._cache.get(o);return!a&&t?(a=new mF({x:n,y:r,z:i,onTileLoad:this.onTileLoad,onTileError:this.onTileError}),Object.assign(a,this.getTileMetadata(a)),a.loadData(this._getTileData,this._requestScheduler),this._cache.set(o,a),this._dirty=!0):a&&a.isCancelled&&!a.isLoading&&a.loadData(this._getTileData,this._requestScheduler),a}},{key:"_getNearestAncestor",value:function(e,t,n){for(var r=this._minZoom,i=void 0===r?0:r,o={x:e,y:t,z:n};o.z>i;){o=this.getParentIndex(o);var a=this._getTile(o);if(a)return a}return null}},{key:"tiles",get:function(){return this._tiles}},{key:"selectedTiles",get:function(){return this._selectedTiles}},{key:"isLoaded",get:function(){return this._selectedTiles.every((function(e){return e.isLoaded}))}}]),e}();function Ez(e){for(var t=e;t;){if(!1&t.state)return!0;if(t.isLoaded)return!1;t=t.parent}return!0}function Pz(e,t){for(var n,r=3;n=e.parent;){if(e.isLoaded&&(r=4,"best-available"===t))return;n.state=Math.max(n.state,r),e=n}}function Cz(e){var t,n=wz(e.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.state=Math.max(r.state,3),r.isLoaded||Cz(r)}}catch(s$){n.e(s$)}finally{n.f()}}function Az(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}function Oz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Tz={data:[],dataComparator:pz.equals,renderSubLayers:{type:"function",value:function(e){return new MN(e)},compare:!1},getTileData:{type:"function",optional:!0,value:null,compare:!1},onViewportLoad:{type:"function",optional:!0,value:null,compare:!1},onTileLoad:{type:"function",value:function(e){},compare:!1},onTileUnload:{type:"function",value:function(e){},compare:!1},onTileError:{type:"function",value:function(e){return console.error(e)},compare:!1},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,fetch:{type:"function",value:function(e,t){var n=t.layer;return Qg(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oz(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oz(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({signal:t.signal},n.getLoadOptions()||{}))},compare:!1},maxRequests:6},Mz=function(e){Xb(n,qI);var t=Az(n);function n(){return Np(this,n),t.apply(this,arguments)}return Tf(n,[{key:"initializeState",value:function(){this.state={tileset:null,isLoaded:!1}}},{key:"finalizeState",value:function(){var e=this.state.tileset;e&&e.finalize()}},{key:"shouldUpdateState",value:function(e){return e.changeFlags.somethingChanged}},{key:"updateState",value:function(e){var t=e.props;e.oldProps,e.context;var n=e.changeFlags,r=this.state.tileset;if(!r||n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getTileData)){r&&r.finalize();var i=Number.isFinite(this.state.maxZoom)?this.state.maxZoom:t.maxZoom,o=Number.isFinite(this.state.minZoom)?this.state.minZoom:t.minZoom,a=t.tileSize,s=t.maxCacheSize,l=t.maxCacheByteSize,u=t.refinementStrategy,c=t.extent,f=t.maxRequests;r=new Sz({getTileData:this.getTileData.bind(this),maxCacheSize:s,maxCacheByteSize:l,maxZoom:i,minZoom:o,tileSize:a,refinementStrategy:u,extent:c,onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this),maxRequests:f}),this.setState({tileset:r})}else(n.propsChanged||n.updateTriggersChanged)&&(r.setOptions(t),this.state.tileset.tiles.forEach((function(e){e.layers=null})));this._updateTileset()}},{key:"_updateTileset",value:function(){var e=this.state.tileset,t=this.props,n=t.zRange,r=t.modelMatrix,i=e.update(this.context.viewport,{zRange:n,modelMatrix:r}),o=e.isLoaded,a=this.state.isLoaded!==o,s=this.state.frameNumber!==i;o&&(a||s)&&this._onViewportLoad(),s&&this.setState({frameNumber:i}),this.state.isLoaded=o}},{key:"_onViewportLoad",value:function(){var e=this.state.tileset,t=this.props.onViewportLoad;t&&t(e.selectedTiles)}},{key:"_onTileLoad",value:function(e){this.getCurrentLayer().props.onTileLoad(e),e.isVisible&&this.setNeedsUpdate()}},{key:"_onTileError",value:function(e,t){var n=this.getCurrentLayer();n.props.onTileError(e),n._updateTileset(),t.isVisible&&this.setNeedsUpdate()}},{key:"_onTileUnload",value:function(e){this.getCurrentLayer().props.onTileUnload(e)}},{key:"getTileData",value:function(e){var t=this.props.data,n=this.getCurrentLayer().props,r=n.getTileData,i=n.fetch,o=e.signal;return e.url=function(e,t){if(!e||!e.length)return null;Array.isArray(e)&&(e=e[Math.abs(t.x+t.y)%e.length]);var n=t.x,r=t.y,i=t.z;return e.replace("{x}",n).replace("{y}",r).replace("{z}",i).replace("{-y}",Math.pow(2,i)-r-1)}(t,e),r?r(e):e.url?i(e.url,{layer:this,signal:o}):null}},{key:"renderSubLayers",value:function(e){return this.props.renderSubLayers(e)}},{key:"getHighlightedObjectIndex",value:function(){return-1}},{key:"getPickingInfo",value:function(e){var t=e.info,n=e.sourceLayer;return t.sourceLayer=n,t.tile=n.props.tile,t}},{key:"renderLayers",value:function(){var e=this,t=this.props.visible;return this.state.tileset.tiles.map((function(n){var r=t&&n.isVisible,i=e.getHighlightedObjectIndex(n);if(n.isLoaded)if(n.layers)!n.layers[0]||n.layers[0].props.visible===r&&n.layers[0].props.highlightedObjectIndex===i||(n.layers=n.layers.map((function(e){return e.clone({visible:r,highlightedObjectIndex:i})})));else{var o=e.renderSubLayers(Object.assign({},e.props,{id:"".concat(e.id,"-").concat(n.x,"-").concat(n.y,"-").concat(n.z),data:n.data,visible:r,_offset:0,tile:n,highlightedObjectIndex:i}));n.layers=wO(o,Boolean)}else;return n.layers}))}},{key:"isLoaded",get:function(){return this.state.tileset.selectedTiles.every((function(e){return e.layers&&e.layers.every((function(e){return e.isLoaded}))}))}}]),n}();function Rz(e,t){for(;e;){if(e===t)return!0;e=Object.getPrototypeOf(e)}return!1}function Iz(e){return e?"function"==typeof e?f.exports.createElement(FM,{},e):Array.isArray(e)?e.map(Iz):e.type===X.Fragment?Iz(e.props.children):(Rz(e.type,FM),e):e}function Lz(e){var t=e.children,n=e.layers,r=e.views,i=[],o=[],a={};return X.Children.forEach(Iz(t),(function(e){if(e){var t=e.type;if(Rz(t,xM)){var n=function(e,t){var n={},r=e.defaultProps||{};for(var i in t)r[i]!==t[i]&&(n[i]=t[i]);return new e(n)}(t,e.props);o.push(n)}else i.push(e);if(t!==FM&&Rz(t,FM)&&e.props.id){var r=new t(e.props);a[r.id]=r}}})),Object.keys(a).length>0&&(Array.isArray(r)?r.forEach((function(e){a[e.id]=e})):r&&(a[r.id]=r),r=Object.values(a)),{layers:n=o.length>0?[].concat(o,yd(n)):n,children:i,views:r}}Mz.layerName="TileLayer",Mz.defaultProps=Tz;var jz={position:"absolute",zIndex:-1};function Dz(e,t){return e?"function"==typeof e?e(t):Array.isArray(e)?e.map((function(e){return Dz(e,t)})):(r=(n=e)&&n.type,(i=r&&r.defaultProps)&&i.mapStyle?(t.style=jz,f.exports.cloneElement(e,t)):function(e){var t=e&&e.type;return t&&t.deckGLViewProps}(e)?f.exports.cloneElement(e,t):e):e;var n,r,i}function Nz(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Fz(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fz(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Fz(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zz(e){var t=e.children;e.viewports;var n=e.deck,r=e.ContextProvider,i=(n||{}).viewManager;if(!i||!i.views.length)return[];var o,a={},s=i.views[0].id,l=Nz(t);try{for(l.s();!(o=l.n()).done;){var u=o.value,c=s,h=u;Rz(u.type,FM)&&(c=u.props.id||s,h=u.props.children);var d=i.getViewport(c),p=i.getViewState(c);if(d)h=Dz(h,{x:d.x,y:d.y,width:d.width,height:d.height,viewport:d,viewState:p}),a[c]||(a[c]={viewport:d,children:[]}),a[c].children.push(h)}}catch(s$){l.e(s$)}finally{l.f()}return Object.keys(a).map((function(e){var t=a[e],i=t.viewport,o=t.children,s={position:"absolute",left:i.x,top:i.y,width:i.width,height:i.height},l="view-".concat(e),u=f.exports.createElement.apply(void 0,["div",{key:l,id:l,style:s}].concat(yd(o)));if(r){var c={viewport:i,container:n.canvas.offsetParent,eventManager:n.eventManager,onViewStateChange:function(t){t.viewId=e,n._onViewStateChange(t)}};return f.exports.createElement(r,{key:l,value:c},u)}return u}))}var Bz={mixBlendMode:null};function Vz(e){var t=e.width,n=e.height,r=e.style,i={position:"absolute",zIndex:0,left:0,top:0,width:t,height:n},o={left:0,top:0};if(r)for(var a in r)a in Bz?o[a]=r[a]:i[a]=r[a];return{containerStyle:i,canvasStyle:o}}function Uz(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zb(e);if(t){var i=Zb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yb(this,n)}}var Wz=UI.getPropTypes(Kc),Gz=UI.defaultProps,Hz=function(e){Xb(n,X.Component);var t=Uz(n);function n(e){var r;return Np(this,n),(r=t.call(this,e)).viewports=null,r.children=null,r._needsRedraw=null,r._containerRef=X.createRef(),r._canvasRef=X.createRef(),r.pickObject=r.pickObject.bind(If(r)),r.pickMultipleObjects=r.pickMultipleObjects.bind(If(r)),r.pickObjects=r.pickObjects.bind(If(r)),r._extractJSXLayers=EC(Lz),r._positionChildrenUnderViews=EC(zz),r._extractStyles=EC(Vz),r}return Tf(n,[{key:"componentDidMount",value:function(){var e=this.props.Deck||UI;this.deck=this.deck||new e(Object.assign({},this.props,{parent:this._containerRef.current,canvas:this._canvasRef.current,style:null,width:"100%",height:"100%",_customRender:this._customRender.bind(this)})),this._updateFromProps(this.props)}},{key:"shouldComponentUpdate",value:function(e){this._updateFromProps(e);var t=this.children!==this._parseJSX(e).children,n=this.deck.viewManager&&this.deck.viewManager.needsRedraw();return t&&!n}},{key:"componentDidUpdate",value:function(){this._redrawDeck()}},{key:"componentWillUnmount",value:function(){this.deck.finalize()}},{key:"pickObject",value:function(e){return this.deck.pickObject(e)}},{key:"pickMultipleObjects",value:function(e){return this.deck.pickMultipleObjects(e)}},{key:"pickObjects",value:function(e){return this.deck.pickObjects(e)}},{key:"_redrawDeck",value:function(){this._needsRedraw&&(this.deck._drawLayers(this._needsRedraw),this._needsRedraw=null)}},{key:"_customRender",value:function(e){this._needsRedraw=e,this.deck.viewManager.getViewports()!==this.viewports?this.forceUpdate():this._redrawDeck()}},{key:"_parseJSX",value:function(e){return this._extractJSXLayers({layers:e.layers,views:e.views,children:e.children})}},{key:"_updateFromProps",value:function(e){var t=this._parseJSX(e),n=t.layers,r=t.views,i=Object.assign({},e,{style:null,width:"100%",height:"100%",layers:n,views:r});this.deck.setProps(i)}},{key:"render",value:function(){var e=this.props,t=e.ContextProvider,n=e.width,r=e.height,i=e.style,o=(this.deck||{}).viewManager;this.viewports=o&&o.getViewports(),this.children=this._parseJSX(this.props).children;var a=this._positionChildrenUnderViews({children:this.children,viewports:this.viewports,deck:this.deck,ContextProvider:t}),s=this._extractStyles({width:n,height:r,style:i}),l=s.containerStyle,u=s.canvasStyle,c=f.exports.createElement("canvas",{key:"canvas",ref:this._canvasRef,style:u});return f.exports.createElement("div",{id:"deckgl-wrapper",ref:this._containerRef,style:l},[c,a])}}]),n}();Hz.propTypes=Wz,Hz.defaultProps=Gz;var qz={},$z={};!function(e){const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n="["+t+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",r=new RegExp("^"+n+"$");e.isExist=function(e){return void 0!==e},e.isEmptyObject=function(e){return 0===Object.keys(e).length},e.merge=function(e,t,n){if(t){const r=Object.keys(t),i=r.length;for(let o=0;o<i;o++)e[r[o]]="strict"===n?[t[r[o]]]:t[r[o]]}},e.getValue=function(t){return e.isExist(t)?t:""},e.buildOptions=function(e,t,n){var r={};if(!e)return t;for(let i=0;i<n.length;i++)void 0!==e[n[i]]?r[n[i]]=e[n[i]]:r[n[i]]=t[n[i]];return r},e.isTagNameInArrayMode=function(e,t,n){return!1!==t&&(t instanceof RegExp?t.test(e):"function"==typeof t?!!t(e,n):"strict"===t)},e.isName=function(e){const t=r.exec(e);return!(null==t)},e.getAllMatches=function(e,t){const n=[];let r=t.exec(e);for(;r;){const i=[],o=r.length;for(let e=0;e<o;e++)i.push(r[e]);n.push(i),r=t.exec(e)}return n},e.nameRegexp=n}($z);const Xz=$z,Yz=function(e,t,n){const r={};if((!e.child||Xz.isEmptyObject(e.child))&&(!e.attrsMap||Xz.isEmptyObject(e.attrsMap)))return Xz.isExist(e.val)?e.val:"";if(Xz.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)){const i=Xz.isTagNameInArrayMode(e.tagname,t.arrayMode,n);r[t.textNodeName]=i?[e.val]:e.val}Xz.merge(r,e.attrsMap,t.arrayMode);const i=Object.keys(e.child);for(let o=0;o<i.length;o++){const a=i[o];if(e.child[a]&&e.child[a].length>1){r[a]=[];for(let n in e.child[a])e.child[a].hasOwnProperty(n)&&r[a].push(Yz(e.child[a][n],t,a))}else{const i=Yz(e.child[a][0],t,a),o=!0===t.arrayMode&&"object"==typeof i||Xz.isTagNameInArrayMode(a,t.arrayMode,n);r[a]=o?[i]:i}}return r};qz.convertToJson=Yz;var Zz={};const Kz=$z,Qz=$z.buildOptions,Jz=function(e,t,n){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=n,this.addChild=function(e){Array.isArray(this.child[e.tagname])?this.child[e.tagname].push(e):this.child[e.tagname]=[e]}};"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,Kz.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const eB={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[]};Zz.defaultOptions=eB;const tB=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];function nB(e,t,n){return t&&(n.trimValues&&(t=t.trim()),t=iB(t=n.tagValueProcessor(t,e),n.parseNodeValue,n.parseTrueNumberOnly)),t}function rB(e,t){if(t.ignoreNameSpace){const t=e.split(":"),n="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=n+t[1])}return e}function iB(e,t,n){if(t&&"string"==typeof e){let t;return""===e.trim()||isNaN(e)?t="true"===e||"false"!==e&&e:(-1!==e.indexOf("0x")?t=Number.parseInt(e,16):-1!==e.indexOf(".")?(t=Number.parseFloat(e),e=e.replace(/\.?0+$/,"")):t=Number.parseInt(e,10),n&&(t=String(t)===e?t:e)),t}return Kz.isExist(e)?e:""}Zz.props=tB;const oB=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function aB(e,t){if(!t.ignoreAttributes&&"string"==typeof e){e=e.replace(/\r?\n/g," ");const n=Kz.getAllMatches(e,oB),r=n.length,i={};for(let e=0;e<r;e++){const r=rB(n[e][1],t);r.length&&(void 0!==n[e][4]?(t.trimValues&&(n[e][4]=n[e][4].trim()),n[e][4]=t.attrValueProcessor(n[e][4],r),i[t.attributeNamePrefix+r]=iB(n[e][4],t.parseAttributeValue,t.parseTrueNumberOnly)):t.allowBooleanAttributes&&(i[t.attributeNamePrefix+r]=!0))}if(!Object.keys(i).length)return;if(t.attrNodeName){const e={};return e[t.attrNodeName]=i,e}return i}}function sB(e,t){let n,r="";for(let i=t;i<e.length;i++){let t=e[i];if(n)t===n&&(n="");else if('"'===t||"'"===t)n=t;else{if(">"===t)return{data:r,index:i};"\t"===t&&(t=" ")}r+=t}}function lB(e,t,n,r){const i=e.indexOf(t,n);if(-1===i)throw new Error(r);return i+t.length-1}Zz.getTraversalObj=function(e,t){e=e.replace(/\r\n?/g,"\n"),t=Qz(t,eB,tB);const n=new Jz("!xml");let r=n,i="";for(let o=0;o<e.length;o++){if("<"===e[o])if("/"===e[o+1]){const n=lB(e,">",o,"Closing Tag is not closed.");let a=e.substring(o+2,n).trim();if(t.ignoreNameSpace){const e=a.indexOf(":");-1!==e&&(a=a.substr(e+1))}r&&(r.val?r.val=Kz.getValue(r.val)+""+nB(a,i,t):r.val=nB(a,i,t)),t.stopNodes.length&&t.stopNodes.includes(r.tagname)&&(r.child=[],null==r.attrsMap&&(r.attrsMap={}),r.val=e.substr(r.startIndex+1,o-r.startIndex-1)),r=r.parent,i="",o=n}else if("?"===e[o+1])o=lB(e,"?>",o,"Pi Tag is not closed.");else if("!--"===e.substr(o+1,3))o=lB(e,"--\x3e",o,"Comment is not closed.");else if("!D"===e.substr(o+1,2)){const t=lB(e,">",o,"DOCTYPE is not closed.");o=e.substring(o,t).indexOf("[")>=0?e.indexOf("]>",o)+1:t}else if("!["===e.substr(o+1,2)){const n=lB(e,"]]>",o,"CDATA is not closed.")-2,a=e.substring(o+9,n);if(i&&(r.val=Kz.getValue(r.val)+""+nB(r.tagname,i,t),i=""),t.cdataTagName){const e=new Jz(t.cdataTagName,r,a);r.addChild(e),r.val=Kz.getValue(r.val)+t.cdataPositionChar,a&&(e.val=a)}else r.val=(r.val||"")+(a||"");o=n+2}else{const n=sB(e,o+1);let a=n.data;const s=n.index,l=a.indexOf(" ");let u=a,c=!0;if(-1!==l&&(u=a.substr(0,l).replace(/\s\s*$/,""),a=a.substr(l+1)),t.ignoreNameSpace){const e=u.indexOf(":");-1!==e&&(u=u.substr(e+1),c=u!==n.data.substr(e+1))}if(r&&i&&"!xml"!==r.tagname&&(r.val=Kz.getValue(r.val)+""+nB(r.tagname,i,t)),a.length>0&&a.lastIndexOf("/")===a.length-1){"/"===u[u.length-1]?(u=u.substr(0,u.length-1),a=u):a=a.substr(0,a.length-1);const e=new Jz(u,r,"");u!==a&&(e.attrsMap=aB(a,t)),r.addChild(e)}else{const e=new Jz(u,r);t.stopNodes.length&&t.stopNodes.includes(e.tagname)&&(e.startIndex=s),u!==a&&c&&(e.attrsMap=aB(a,t)),r.addChild(e),r=e}i="",o=s}else i+=e[o]}return n};var uB={};const cB=$z,fB={allowBooleanAttributes:!1},hB=["allowBooleanAttributes"];function dB(e,t){for(var n=t;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{var r=e.substr(n,t-n);if(t>5&&"xml"===r)return xB("InvalidXml","XML declaration allowed only at the start of the document.",_B(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function pB(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&(n--,0===n))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}uB.validate=function(e,t){t=cB.buildOptions(t,fB,hB);const n=[];let r=!1,i=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let a=0;a<e.length;a++)if("<"===e[a]&&"?"===e[a+1]){if(a+=2,a=dB(e,a),a.err)return a}else{if("<"!==e[a]){if(" "===e[a]||"\t"===e[a]||"\n"===e[a]||"\r"===e[a])continue;return xB("InvalidChar","char '"+e[a]+"' is not expected.",_B(e,a))}if(a++,"!"===e[a]){a=pB(e,a);continue}{let s=!1;"/"===e[a]&&(s=!0,a++);let l="";for(;a<e.length&&">"!==e[a]&&" "!==e[a]&&"\t"!==e[a]&&"\n"!==e[a]&&"\r"!==e[a];a++)l+=e[a];if(l=l.trim(),"/"===l[l.length-1]&&(l=l.substring(0,l.length-1),a--),o=l,!cB.isName(o)){let t;return t=0===l.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+l+"' is an invalid name.",xB("InvalidTag",t,_B(e,a))}const u=vB(e,a);if(!1===u)return xB("InvalidAttr","Attributes for '"+l+"' have open quote.",_B(e,a));let c=u.value;if(a=u.index,"/"===c[c.length-1]){c=c.substring(0,c.length-1);const n=gB(c,t);if(!0!==n)return xB(n.err.code,n.err.msg,_B(e,a-c.length+n.err.line));r=!0}else if(s){if(!u.tagClosed)return xB("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",_B(e,a));if(c.trim().length>0)return xB("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",_B(e,a));{const t=n.pop();if(l!==t)return xB("InvalidTag","Closing tag '"+t+"' is expected inplace of '"+l+"'.",_B(e,a));0==n.length&&(i=!0)}}else{const o=gB(c,t);if(!0!==o)return xB(o.err.code,o.err.msg,_B(e,a-c.length+o.err.line));if(!0===i)return xB("InvalidXml","Multiple possible root nodes found.",_B(e,a));n.push(l),r=!0}for(a++;a<e.length;a++)if("<"===e[a]){if("!"===e[a+1]){a++,a=pB(e,a);continue}if("?"!==e[a+1])break;if(a=dB(e,++a),a.err)return a}else if("&"===e[a]){const t=yB(e,a);if(-1==t)return xB("InvalidChar","char '&' is not expected.",_B(e,a));a=t}"<"===e[a]&&a--}}var o;return r?!(n.length>0)||xB("InvalidXml","Invalid '"+JSON.stringify(n,null,4).replace(/\r?\n/g,"")+"' found.",1):xB("InvalidXml","Start tag expected.",1)};function vB(e,t){let n="",r="",i=!1;for(;t<e.length;t++){if('"'===e[t]||"'"===e[t])if(""===r)r=e[t];else{if(r!==e[t])continue;r=""}else if(">"===e[t]&&""===r){i=!0;break}n+=e[t]}return""===r&&{value:n,index:t,tagClosed:i}}const mB=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function gB(e,t){const n=cB.getAllMatches(e,mB),r={};for(let i=0;i<n.length;i++){if(0===n[i][1].length)return xB("InvalidAttr","Attribute '"+n[i][2]+"' has no space in starting.",wB(e,n[i][0]));if(void 0===n[i][3]&&!t.allowBooleanAttributes)return xB("InvalidAttr","boolean attribute '"+n[i][2]+"' is not allowed.",wB(e,n[i][0]));const o=n[i][2];if(!bB(o))return xB("InvalidAttr","Attribute '"+o+"' is an invalid name.",wB(e,n[i][0]));if(r.hasOwnProperty(o))return xB("InvalidAttr","Attribute '"+o+"' is repeated.",wB(e,n[i][0]));r[o]=1}return!0}function yB(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function xB(e,t,n){return{err:{code:e,msg:t,line:n}}}function bB(e){return cB.isName(e)}function _B(e,t){return e.substring(0,t).split(/\r?\n/).length}function wB(e,t){return e.indexOf(t)+t.length}var kB={};const SB=function(e){return String.fromCharCode(e)},EB={nilChar:SB(176),missingChar:SB(201),nilPremitive:SB(175),missingPremitive:SB(200),emptyChar:SB(178),emptyValue:SB(177),boundryChar:SB(179),objStart:SB(198),arrStart:SB(204),arrayEnd:SB(185)},PB=[EB.nilChar,EB.nilPremitive,EB.missingChar,EB.missingPremitive,EB.boundryChar,EB.emptyChar,EB.emptyValue,EB.arrayEnd,EB.objStart,EB.arrStart],CB=function(e,t,n){if("string"==typeof t)return e&&e[0]&&void 0!==e[0].val?AB(e[0].val):AB(e);{const i=void 0===(r=e)?EB.missingChar:null===r?EB.nilChar:!(r.child&&0===Object.keys(r.child).length&&(!r.attrsMap||0===Object.keys(r.attrsMap).length))||EB.emptyChar;if(!0===i){let r="";if(Array.isArray(t)){r+=EB.arrStart;const i=t[0],o=e.length;if("string"==typeof i)for(let t=0;t<o;t++){const n=AB(e[t].val);r=OB(r,n)}else for(let t=0;t<o;t++){const o=CB(e[t],i,n);r=OB(r,o)}r+=EB.arrayEnd}else{r+=EB.objStart;const i=Object.keys(t);Array.isArray(e)&&(e=e[0]);for(let o in i){const a=i[o];let s;s=!n.ignoreAttributes&&e.attrsMap&&e.attrsMap[a]?CB(e.attrsMap[a],t[a],n):a===n.textNodeName?CB(e.val,t[a],n):CB(e.child[a],t[a],n),r=OB(r,s)}}return r}return i}var r},AB=function(e){switch(e){case void 0:return EB.missingPremitive;case null:return EB.nilPremitive;case"":return EB.emptyValue;default:return e}},OB=function(e,t){return TB(t[0])||TB(e[e.length-1])||(e+=EB.boundryChar),e+t},TB=function(e){return-1!==PB.indexOf(e)};const MB=Zz,RB=$z.buildOptions;kB.convert2nimn=function(e,t,n){return n=RB(n,MB.defaultOptions,MB.props),CB(e,t,n)};var IB={};const LB=$z,jB=$z.buildOptions,DB=Zz,NB=function(e,t,n){let r="{";const i=Object.keys(e.child);for(let l=0;l<i.length;l++){var o=i[l];if(e.child[o]&&e.child[o].length>1){for(var a in r+='"'+o+'" : [ ',e.child[o])r+=NB(e.child[o][a],t)+" , ";r=r.substr(0,r.length-1)+" ] "}else r+='"'+o+'" : '+NB(e.child[o][0],t)+" ,"}return LB.merge(r,e.attrsMap),LB.isEmptyObject(r)?LB.isExist(e.val)?e.val:"":(LB.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&(r+='"'+t.textNodeName+'" : '+(!0!==(s=e.val)&&!1!==s&&isNaN(s)?'"'+s+'"':s)),","===r[r.length-1]&&(r=r.substr(0,r.length-2)),r+"}");var s};IB.convertToJsonString=function(e,t){return(t=jB(t,DB.defaultOptions,DB.props)).indentBy=t.indentBy||"",NB(e,t)};const FB=$z.buildOptions,zB={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},BB=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function VB(e){this.options=FB(e,zB,BB),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=YB),this.options.cdataTagName?this.isCDATA=ZB:this.isCDATA=function(){return!1},this.replaceCDATAstr=UB,this.replaceCDATAarr=WB,this.options.format?(this.indentate=XB,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=$B,this.buildObjNode=HB):(this.buildTextNode=qB,this.buildObjNode=GB),this.buildTextValNode=qB,this.buildObjectNode=GB}function UB(e,t){return e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e?e+"<![CDATA["+t+"]]"+this.tagEndChar:e.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function WB(e,t){if(e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e)return e+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let n in t)e=e.replace(this.options.cdataPositionChar,"<![CDATA["+t[n]+"]]>");return e+this.newLine}function GB(e,t,n,r){return n&&!e.includes("<")?this.indentate(r)+"<"+t+n+">"+e+"</"+t+this.tagEndChar:this.indentate(r)+"<"+t+n+this.tagEndChar+e+this.indentate(r)+"</"+t+this.tagEndChar}function HB(e,t,n,r){return""!==e?this.buildObjectNode(e,t,n,r):this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function qB(e,t,n,r){return this.indentate(r)+"<"+t+n+">"+this.options.tagValueProcessor(e)+"</"+t+this.tagEndChar}function $B(e,t,n,r){return""!==e?this.buildTextValNode(e,t,n,r):this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function XB(e){return this.options.indentBy.repeat(e)}function YB(e){return!!e.startsWith(this.options.attributeNamePrefix)&&e.substr(this.attrPrefixLen)}function ZB(e){return e===this.options.cdataTagName}VB.prototype.parse=function(e){return this.j2x(e,0).val},VB.prototype.j2x=function(e,t){let n="",r="";const i=Object.keys(e),o=i.length;for(let a=0;a<o;a++){const o=i[a];if(void 0===e[o]);else if(null===e[o])r+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)r+=this.buildTextNode(e[o],o,"",t);else if("object"!=typeof e[o]){const i=this.isAttribute(o);i?n+=" "+i+'="'+this.options.attrValueProcessor(""+e[o])+'"':this.isCDATA(o)?e[this.options.textNodeName]?r+=this.replaceCDATAstr(e[this.options.textNodeName],e[o]):r+=this.replaceCDATAstr("",e[o]):o===this.options.textNodeName?e[this.options.cdataTagName]||(r+=this.options.tagValueProcessor(""+e[o])):r+=this.buildTextNode(e[o],o,"",t)}else if(Array.isArray(e[o]))if(this.isCDATA(o))r+=this.indentate(t),e[this.options.textNodeName]?r+=this.replaceCDATAarr(e[this.options.textNodeName],e[o]):r+=this.replaceCDATAarr("",e[o]);else{const n=e[o].length;for(let i=0;i<n;i++){const n=e[o][i];if(void 0===n);else if(null===n)r+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if("object"==typeof n){const e=this.j2x(n,t+1);r+=this.buildObjNode(e.val,o,e.attrStr,t)}else r+=this.buildTextNode(n,o,"",t)}}else if(this.options.attrNodeName&&o===this.options.attrNodeName){const t=Object.keys(e[o]),r=t.length;for(let i=0;i<r;i++)n+=" "+t[i]+'="'+this.options.attrValueProcessor(""+e[o][t[i]])+'"'}else{const n=this.j2x(e[o],t+1);r+=this.buildObjNode(n.val,o,n.attrStr,t)}}return{attrStr:n,val:r}};var KB=VB;!function(e){const t=qz,n=Zz,r=Zz,i=$z.buildOptions,o=uB;e.parse=function(e,a,s){if(s){!0===s&&(s={});const t=o.validate(e,s);if(!0!==t)throw Error(t.err.msg)}a=i(a,r.defaultOptions,r.props);const l=n.getTraversalObj(e,a);return t.convertToJson(l,a)},e.convertTonimn=kB.convert2nimn,e.getTraversalObj=n.getTraversalObj,e.convertToJson=t.convertToJson,e.convertToJsonString=IB.convertToJsonString,e.validate=o.validate,e.j2xParser=KB,e.parseToNimn=function(t,n,r){return e.convertTonimn(e.getTraversalObj(t,r),n,r)}}({});class QB extends RangeError{constructor(e){super(e),this.__zarr__="BoundsCheckError",Object.setPrototypeOf(this,QB.prototype)}}class JB extends RangeError{constructor(e,t,n,r){super(`slice arguments slice(${e}, ${t}, ${n}) invalid: ${r}`),this.__zarr__="InvalidSliceError",Object.setPrototypeOf(this,JB.prototype)}}function eV(e,t,n=null){if(void 0===e)throw new JB(e,t,n,"The first argument must not be undefined");if("string"==typeof e&&":"!==e||"string"==typeof t&&":"!==t)throw new JB(e,t,n,'Arguments can only be integers, ":" or null');return void 0===t&&(t=e,e=null),{start:":"===e?null:e,stop:":"===t?null:t,step:n,_slice:!0}}function tV(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function nV(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof process&&process.versions&&process.versions.node;var rV=nV((function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,o),!0;case 6:return c.fn.call(c.context,t,r,i,o,a),!0}for(u=1,l=new Array(f-1);u<f;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,d=c.length;for(u=0;u<d;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),f){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(f-1);h<f;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var l=0,u=[],c=s.length;l<c;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&u.push(s[l]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}));class iV extends Error{constructor(e){super(e),this.name="TimeoutError"}}const oV=(e,t,n)=>new Promise(((r,i)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void r(e);const o=setTimeout((()=>{if("function"==typeof n){try{r(n())}catch(a){i(a)}return}const o=n instanceof Error?n:new iV("string"==typeof n?n:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),i(o)}),t);((e,t)=>{t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e}))))})(e.then(r,i),(()=>{clearTimeout(o)}))}));var aV=oV,sV=oV,lV=iV;aV.default=sV,aV.TimeoutError=lV;var uV=nV((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){let r=0,i=e.length;for(;i>0;){const o=i/2|0;let a=r+o;n(e[a],t)<=0?(r=++a,i-=o+1):i=o}return r}}));tV(uV);var cV,fV,hV=nV((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this._queue=[]}enqueue(e,t){const n={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(n);const r=uV.default(this._queue,n,((e,t)=>t.priority-e.priority));this._queue.splice(r,0,n)}dequeue(){const e=this._queue.shift();return e&&e.run}get size(){return this._queue.length}}}));tV(hV),tV(nV((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=()=>{},r=new aV.default.TimeoutError;t.default=class extends rV{constructor(e){if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=n,this._resolveIdle=n,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:hV.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother()}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=n,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=n)}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother)return this.emit("active"),this._queue.dequeue()(),e&&this._initializeIntervalIfNeeded(),!0}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise(((n,i)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const o=void 0===this._timeout&&void 0===t.timeout?e():aV.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&i(r)}));n(await o)}catch(o){i(o)}this._next()}),t),this._tryToStartAnother()}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this._queue.size}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}set timeout(e){this._timeout=e}get timeout(){return this._timeout}}}))),(fV=cV||(cV={})).HEAD="HEAD",fV.GET="GET",fV.PUT="PUT",cV.HEAD,cV.GET,cV.PUT;var dV={name:"channel-intensity-module",defines:{SAMPLER_TYPE:"usampler2D",COLORMAP_FUNCTION:""},fs:"#define GLSLIFY 1\nvec4 jet(float x_17){const float e0=0.0;const vec4 v0=vec4(0,0,0.5137254901960784,1);const float e1=0.125;const vec4 v1=vec4(0,0.23529411764705882,0.6666666666666666,1);const float e2=0.375;const vec4 v2=vec4(0.0196078431372549,1,1,1);const float e3=0.625;const vec4 v3=vec4(1,1,0,1);const float e4=0.875;const vec4 v4=vec4(0.9803921568627451,0,0,1);const float e5=1.0;const vec4 v5=vec4(0.5019607843137255,0,0,1);float a0=smoothstep(e0,e1,x_17);float a1=smoothstep(e1,e2,x_17);float a2=smoothstep(e2,e3,x_17);float a3=smoothstep(e3,e4,x_17);float a4=smoothstep(e4,e5,x_17);return max(mix(v0,v1,a0)*step(e0,x_17)*step(x_17,e1),max(mix(v1,v2,a1)*step(e1,x_17)*step(x_17,e2),max(mix(v2,v3,a2)*step(e2,x_17)*step(x_17,e3),max(mix(v3,v4,a3)*step(e3,x_17)*step(x_17,e4),mix(v4,v5,a4)*step(e4,x_17)*step(x_17,e5)))));}vec4 hsv_0(float x_18){const float e0=0.0;const vec4 v0=vec4(1,0,0,1);const float e1=0.169;const vec4 v1=vec4(0.9921568627450981,1,0.00784313725490196,1);const float e2=0.173;const vec4 v2=vec4(0.9686274509803922,1,0.00784313725490196,1);const float e3=0.337;const vec4 v3=vec4(0,0.9882352941176471,0.01568627450980392,1);const float e4=0.341;const vec4 v4=vec4(0,0.9882352941176471,0.0392156862745098,1);const float e5=0.506;const vec4 v5=vec4(0.00392156862745098,0.9764705882352941,1,1);const float e6=0.671;const vec4 v6=vec4(0.00784313725490196,0,0.9921568627450981,1);const float e7=0.675;const vec4 v7=vec4(0.03137254901960784,0,0.9921568627450981,1);const float e8=0.839;const vec4 v8=vec4(1,0,0.984313725490196,1);const float e9=0.843;const vec4 v9=vec4(1,0,0.9607843137254902,1);const float e10=1.0;const vec4 v10=vec4(1,0,0.023529411764705882,1);float a0=smoothstep(e0,e1,x_18);float a1=smoothstep(e1,e2,x_18);float a2=smoothstep(e2,e3,x_18);float a3=smoothstep(e3,e4,x_18);float a4=smoothstep(e4,e5,x_18);float a5=smoothstep(e5,e6,x_18);float a6=smoothstep(e6,e7,x_18);float a7=smoothstep(e7,e8,x_18);float a8=smoothstep(e8,e9,x_18);float a9=smoothstep(e9,e10,x_18);return max(mix(v0,v1,a0)*step(e0,x_18)*step(x_18,e1),max(mix(v1,v2,a1)*step(e1,x_18)*step(x_18,e2),max(mix(v2,v3,a2)*step(e2,x_18)*step(x_18,e3),max(mix(v3,v4,a3)*step(e3,x_18)*step(x_18,e4),max(mix(v4,v5,a4)*step(e4,x_18)*step(x_18,e5),max(mix(v5,v6,a5)*step(e5,x_18)*step(x_18,e6),max(mix(v6,v7,a6)*step(e6,x_18)*step(x_18,e7),max(mix(v7,v8,a7)*step(e7,x_18)*step(x_18,e8),max(mix(v8,v9,a8)*step(e8,x_18)*step(x_18,e9),mix(v9,v10,a9)*step(e9,x_18)*step(x_18,e10))))))))));}vec4 hot(float x_13){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.3;const vec4 v1=vec4(0.9019607843137255,0,0,1);const float e2=0.6;const vec4 v2=vec4(1,0.8235294117647058,0,1);const float e3=1.0;const vec4 v3=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_13);float a1=smoothstep(e1,e2,x_13);float a2=smoothstep(e2,e3,x_13);return max(mix(v0,v1,a0)*step(e0,x_13)*step(x_13,e1),max(mix(v1,v2,a1)*step(e1,x_13)*step(x_13,e2),mix(v2,v3,a2)*step(e2,x_13)*step(x_13,e3)));}vec4 cool(float x_24){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.13;const vec4 v1=vec4(0.4549019607843137,0,0.8549019607843137,1);const float e2=0.25;const vec4 v2=vec4(0.3843137254901961,0.2901960784313726,0.9294117647058824,1);const float e3=0.38;const vec4 v3=vec4(0.26666666666666666,0.5725490196078431,0.9058823529411765,1);const float e4=0.5;const vec4 v4=vec4(0,0.8,0.7725490196078432,1);const float e5=0.63;const vec4 v5=vec4(0,0.9686274509803922,0.5725490196078431,1);const float e6=0.75;const vec4 v6=vec4(0,1,0.34509803921568627,1);const float e7=0.88;const vec4 v7=vec4(0.1568627450980392,1,0.03137254901960784,1);const float e8=1.0;const vec4 v8=vec4(0.5764705882352941,1,0,1);float a0=smoothstep(e0,e1,x_24);float a1=smoothstep(e1,e2,x_24);float a2=smoothstep(e2,e3,x_24);float a3=smoothstep(e3,e4,x_24);float a4=smoothstep(e4,e5,x_24);float a5=smoothstep(e5,e6,x_24);float a6=smoothstep(e6,e7,x_24);float a7=smoothstep(e7,e8,x_24);return max(mix(v0,v1,a0)*step(e0,x_24)*step(x_24,e1),max(mix(v1,v2,a1)*step(e1,x_24)*step(x_24,e2),max(mix(v2,v3,a2)*step(e2,x_24)*step(x_24,e3),max(mix(v3,v4,a3)*step(e3,x_24)*step(x_24,e4),max(mix(v4,v5,a4)*step(e4,x_24)*step(x_24,e5),max(mix(v5,v6,a5)*step(e5,x_24)*step(x_24,e6),max(mix(v6,v7,a6)*step(e6,x_24)*step(x_24,e7),mix(v7,v8,a7)*step(e7,x_24)*step(x_24,e8))))))));}vec4 spring(float x_5){const float e0=0.0;const vec4 v0=vec4(1,0,1,1);const float e1=1.0;const vec4 v1=vec4(1,1,0,1);float a0=smoothstep(e0,e1,x_5);return mix(v0,v1,a0)*step(e0,x_5)*step(x_5,e1);}vec4 summer(float x_12){const float e0=0.0;const vec4 v0=vec4(0,0.5019607843137255,0.4,1);const float e1=1.0;const vec4 v1=vec4(1,1,0.4,1);float a0=smoothstep(e0,e1,x_12);return mix(v0,v1,a0)*step(e0,x_12)*step(x_12,e1);}vec4 autumn(float x_25){const float e0=0.0;const vec4 v0=vec4(1,0,0,1);const float e1=1.0;const vec4 v1=vec4(1,1,0,1);float a0=smoothstep(e0,e1,x_25);return mix(v0,v1,a0)*step(e0,x_25)*step(x_25,e1);}vec4 winter(float x_16){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=1.0;const vec4 v1=vec4(0,1,0.5019607843137255,1);float a0=smoothstep(e0,e1,x_16);return mix(v0,v1,a0)*step(e0,x_16)*step(x_16,e1);}vec4 bone(float x_15){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.376;const vec4 v1=vec4(0.32941176470588235,0.32941176470588235,0.4549019607843137,1);const float e2=0.753;const vec4 v2=vec4(0.6627450980392157,0.7843137254901961,0.7843137254901961,1);const float e3=1.0;const vec4 v3=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_15);float a1=smoothstep(e1,e2,x_15);float a2=smoothstep(e2,e3,x_15);return max(mix(v0,v1,a0)*step(e0,x_15)*step(x_15,e1),max(mix(v1,v2,a1)*step(e1,x_15)*step(x_15,e2),mix(v2,v3,a2)*step(e2,x_15)*step(x_15,e3)));}vec4 copper(float x_10){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.804;const vec4 v1=vec4(1,0.6274509803921569,0.4,1);const float e2=1.0;const vec4 v2=vec4(1,0.7803921568627451,0.4980392156862745,1);float a0=smoothstep(e0,e1,x_10);float a1=smoothstep(e1,e2,x_10);return max(mix(v0,v1,a0)*step(e0,x_10)*step(x_10,e1),mix(v1,v2,a1)*step(e1,x_10)*step(x_10,e2));}vec4 greys(float x_4){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=1.0;const vec4 v1=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_4);return mix(v0,v1,a0)*step(e0,x_4)*step(x_4,e1);}vec4 yignbu(float x_32){const float e0=0.0;const vec4 v0=vec4(0.03137254901960784,0.11372549019607843,0.34509803921568627,1);const float e1=0.125;const vec4 v1=vec4(0.1450980392156863,0.20392156862745098,0.5803921568627451,1);const float e2=0.25;const vec4 v2=vec4(0.13333333333333333,0.3686274509803922,0.6588235294117647,1);const float e3=0.375;const vec4 v3=vec4(0.11372549019607843,0.5686274509803921,0.7529411764705882,1);const float e4=0.5;const vec4 v4=vec4(0.2549019607843137,0.7137254901960784,0.7686274509803922,1);const float e5=0.625;const vec4 v5=vec4(0.4980392156862745,0.803921568627451,0.7333333333333333,1);const float e6=0.75;const vec4 v6=vec4(0.7803921568627451,0.9137254901960784,0.7058823529411765,1);const float e7=0.875;const vec4 v7=vec4(0.9294117647058824,0.9725490196078431,0.8509803921568627,1);const float e8=1.0;const vec4 v8=vec4(1,1,0.8509803921568627,1);float a0=smoothstep(e0,e1,x_32);float a1=smoothstep(e1,e2,x_32);float a2=smoothstep(e2,e3,x_32);float a3=smoothstep(e3,e4,x_32);float a4=smoothstep(e4,e5,x_32);float a5=smoothstep(e5,e6,x_32);float a6=smoothstep(e6,e7,x_32);float a7=smoothstep(e7,e8,x_32);return max(mix(v0,v1,a0)*step(e0,x_32)*step(x_32,e1),max(mix(v1,v2,a1)*step(e1,x_32)*step(x_32,e2),max(mix(v2,v3,a2)*step(e2,x_32)*step(x_32,e3),max(mix(v3,v4,a3)*step(e3,x_32)*step(x_32,e4),max(mix(v4,v5,a4)*step(e4,x_32)*step(x_32,e5),max(mix(v5,v6,a5)*step(e5,x_32)*step(x_32,e6),max(mix(v6,v7,a6)*step(e6,x_32)*step(x_32,e7),mix(v7,v8,a7)*step(e7,x_32)*step(x_32,e8))))))));}vec4 greens(float x_34){const float e0=0.0;const vec4 v0=vec4(0,0.26666666666666666,0.10588235294117647,1);const float e1=0.125;const vec4 v1=vec4(0,0.42745098039215684,0.17254901960784313,1);const float e2=0.25;const vec4 v2=vec4(0.13725490196078433,0.5450980392156862,0.27058823529411763,1);const float e3=0.375;const vec4 v3=vec4(0.2549019607843137,0.6705882352941176,0.36470588235294116,1);const float e4=0.5;const vec4 v4=vec4(0.4549019607843137,0.7686274509803922,0.4627450980392157,1);const float e5=0.625;const vec4 v5=vec4(0.6313725490196078,0.8509803921568627,0.6078431372549019,1);const float e6=0.75;const vec4 v6=vec4(0.7803921568627451,0.9137254901960784,0.7529411764705882,1);const float e7=0.875;const vec4 v7=vec4(0.8980392156862745,0.9607843137254902,0.8784313725490196,1);const float e8=1.0;const vec4 v8=vec4(0.9686274509803922,0.9882352941176471,0.9607843137254902,1);float a0=smoothstep(e0,e1,x_34);float a1=smoothstep(e1,e2,x_34);float a2=smoothstep(e2,e3,x_34);float a3=smoothstep(e3,e4,x_34);float a4=smoothstep(e4,e5,x_34);float a5=smoothstep(e5,e6,x_34);float a6=smoothstep(e6,e7,x_34);float a7=smoothstep(e7,e8,x_34);return max(mix(v0,v1,a0)*step(e0,x_34)*step(x_34,e1),max(mix(v1,v2,a1)*step(e1,x_34)*step(x_34,e2),max(mix(v2,v3,a2)*step(e2,x_34)*step(x_34,e3),max(mix(v3,v4,a3)*step(e3,x_34)*step(x_34,e4),max(mix(v4,v5,a4)*step(e4,x_34)*step(x_34,e5),max(mix(v5,v6,a5)*step(e5,x_34)*step(x_34,e6),max(mix(v6,v7,a6)*step(e6,x_34)*step(x_34,e7),mix(v7,v8,a7)*step(e7,x_34)*step(x_34,e8))))))));}vec4 yiorrd(float x_41){const float e0=0.0;const vec4 v0=vec4(0.5019607843137255,0,0.14901960784313725,1);const float e1=0.125;const vec4 v1=vec4(0.7411764705882353,0,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.8901960784313725,0.10196078431372549,0.10980392156862745,1);const float e3=0.375;const vec4 v3=vec4(0.9882352941176471,0.3058823529411765,0.16470588235294117,1);const float e4=0.5;const vec4 v4=vec4(0.9921568627450981,0.5529411764705883,0.23529411764705882,1);const float e5=0.625;const vec4 v5=vec4(0.996078431372549,0.6980392156862745,0.2980392156862745,1);const float e6=0.75;const vec4 v6=vec4(0.996078431372549,0.8509803921568627,0.4627450980392157,1);const float e7=0.875;const vec4 v7=vec4(1,0.9294117647058824,0.6274509803921569,1);const float e8=1.0;const vec4 v8=vec4(1,1,0.8,1);float a0=smoothstep(e0,e1,x_41);float a1=smoothstep(e1,e2,x_41);float a2=smoothstep(e2,e3,x_41);float a3=smoothstep(e3,e4,x_41);float a4=smoothstep(e4,e5,x_41);float a5=smoothstep(e5,e6,x_41);float a6=smoothstep(e6,e7,x_41);float a7=smoothstep(e7,e8,x_41);return max(mix(v0,v1,a0)*step(e0,x_41)*step(x_41,e1),max(mix(v1,v2,a1)*step(e1,x_41)*step(x_41,e2),max(mix(v2,v3,a2)*step(e2,x_41)*step(x_41,e3),max(mix(v3,v4,a3)*step(e3,x_41)*step(x_41,e4),max(mix(v4,v5,a4)*step(e4,x_41)*step(x_41,e5),max(mix(v5,v6,a5)*step(e5,x_41)*step(x_41,e6),max(mix(v6,v7,a6)*step(e6,x_41)*step(x_41,e7),mix(v7,v8,a7)*step(e7,x_41)*step(x_41,e8))))))));}vec4 bluered(float x_23){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=1.0;const vec4 v1=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_23);return mix(v0,v1,a0)*step(e0,x_23)*step(x_23,e1);}vec4 rdbu(float x_1){const float e0=0.0;const vec4 v0=vec4(0.0196078431372549,0.0392156862745098,0.6745098039215687,1);const float e1=0.35;const vec4 v1=vec4(0.41568627450980394,0.5372549019607843,0.9686274509803922,1);const float e2=0.5;const vec4 v2=vec4(0.7450980392156863,0.7450980392156863,0.7450980392156863,1);const float e3=0.6;const vec4 v3=vec4(0.8627450980392157,0.6666666666666666,0.5176470588235295,1);const float e4=0.7;const vec4 v4=vec4(0.9019607843137255,0.5686274509803921,0.35294117647058826,1);const float e5=1.0;const vec4 v5=vec4(0.6980392156862745,0.0392156862745098,0.10980392156862745,1);float a0=smoothstep(e0,e1,x_1);float a1=smoothstep(e1,e2,x_1);float a2=smoothstep(e2,e3,x_1);float a3=smoothstep(e3,e4,x_1);float a4=smoothstep(e4,e5,x_1);return max(mix(v0,v1,a0)*step(e0,x_1)*step(x_1,e1),max(mix(v1,v2,a1)*step(e1,x_1)*step(x_1,e2),max(mix(v2,v3,a2)*step(e2,x_1)*step(x_1,e3),max(mix(v3,v4,a3)*step(e3,x_1)*step(x_1,e4),mix(v4,v5,a4)*step(e4,x_1)*step(x_1,e5)))));}vec4 picnic(float x_42){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=0.1;const vec4 v1=vec4(0.2,0.6,1,1);const float e2=0.2;const vec4 v2=vec4(0.4,0.8,1,1);const float e3=0.3;const vec4 v3=vec4(0.6,0.8,1,1);const float e4=0.4;const vec4 v4=vec4(0.8,0.8,1,1);const float e5=0.5;const vec4 v5=vec4(1,1,1,1);const float e6=0.6;const vec4 v6=vec4(1,0.8,1,1);const float e7=0.7;const vec4 v7=vec4(1,0.6,1,1);const float e8=0.8;const vec4 v8=vec4(1,0.4,0.8,1);const float e9=0.9;const vec4 v9=vec4(1,0.4,0.4,1);const float e10=1.0;const vec4 v10=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_42);float a1=smoothstep(e1,e2,x_42);float a2=smoothstep(e2,e3,x_42);float a3=smoothstep(e3,e4,x_42);float a4=smoothstep(e4,e5,x_42);float a5=smoothstep(e5,e6,x_42);float a6=smoothstep(e6,e7,x_42);float a7=smoothstep(e7,e8,x_42);float a8=smoothstep(e8,e9,x_42);float a9=smoothstep(e9,e10,x_42);return max(mix(v0,v1,a0)*step(e0,x_42)*step(x_42,e1),max(mix(v1,v2,a1)*step(e1,x_42)*step(x_42,e2),max(mix(v2,v3,a2)*step(e2,x_42)*step(x_42,e3),max(mix(v3,v4,a3)*step(e3,x_42)*step(x_42,e4),max(mix(v4,v5,a4)*step(e4,x_42)*step(x_42,e5),max(mix(v5,v6,a5)*step(e5,x_42)*step(x_42,e6),max(mix(v6,v7,a6)*step(e6,x_42)*step(x_42,e7),max(mix(v7,v8,a7)*step(e7,x_42)*step(x_42,e8),max(mix(v8,v9,a8)*step(e8,x_42)*step(x_42,e9),mix(v9,v10,a9)*step(e9,x_42)*step(x_42,e10))))))))));}vec4 rainbow(float x_31){const float e0=0.0;const vec4 v0=vec4(0.5882352941176471,0,0.35294117647058826,1);const float e1=0.125;const vec4 v1=vec4(0,0,0.7843137254901961,1);const float e2=0.25;const vec4 v2=vec4(0,0.09803921568627451,1,1);const float e3=0.375;const vec4 v3=vec4(0,0.596078431372549,1,1);const float e4=0.5;const vec4 v4=vec4(0.17254901960784313,1,0.5882352941176471,1);const float e5=0.625;const vec4 v5=vec4(0.592156862745098,1,0,1);const float e6=0.75;const vec4 v6=vec4(1,0.9176470588235294,0,1);const float e7=0.875;const vec4 v7=vec4(1,0.43529411764705883,0,1);const float e8=1.0;const vec4 v8=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_31);float a1=smoothstep(e1,e2,x_31);float a2=smoothstep(e2,e3,x_31);float a3=smoothstep(e3,e4,x_31);float a4=smoothstep(e4,e5,x_31);float a5=smoothstep(e5,e6,x_31);float a6=smoothstep(e6,e7,x_31);float a7=smoothstep(e7,e8,x_31);return max(mix(v0,v1,a0)*step(e0,x_31)*step(x_31,e1),max(mix(v1,v2,a1)*step(e1,x_31)*step(x_31,e2),max(mix(v2,v3,a2)*step(e2,x_31)*step(x_31,e3),max(mix(v3,v4,a3)*step(e3,x_31)*step(x_31,e4),max(mix(v4,v5,a4)*step(e4,x_31)*step(x_31,e5),max(mix(v5,v6,a5)*step(e5,x_31)*step(x_31,e6),max(mix(v6,v7,a6)*step(e6,x_31)*step(x_31,e7),mix(v7,v8,a7)*step(e7,x_31)*step(x_31,e8))))))));}vec4 portland(float x_21){const float e0=0.0;const vec4 v0=vec4(0.047058823529411764,0.2,0.5137254901960784,1);const float e1=0.25;const vec4 v1=vec4(0.0392156862745098,0.5333333333333333,0.7294117647058823,1);const float e2=0.5;const vec4 v2=vec4(0.9490196078431372,0.8274509803921568,0.2196078431372549,1);const float e3=0.75;const vec4 v3=vec4(0.9490196078431372,0.5607843137254902,0.2196078431372549,1);const float e4=1.0;const vec4 v4=vec4(0.8509803921568627,0.11764705882352941,0.11764705882352941,1);float a0=smoothstep(e0,e1,x_21);float a1=smoothstep(e1,e2,x_21);float a2=smoothstep(e2,e3,x_21);float a3=smoothstep(e3,e4,x_21);return max(mix(v0,v1,a0)*step(e0,x_21)*step(x_21,e1),max(mix(v1,v2,a1)*step(e1,x_21)*step(x_21,e2),max(mix(v2,v3,a2)*step(e2,x_21)*step(x_21,e3),mix(v3,v4,a3)*step(e3,x_21)*step(x_21,e4))));}vec4 blackbody(float x_38){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.2;const vec4 v1=vec4(0.9019607843137255,0,0,1);const float e2=0.4;const vec4 v2=vec4(0.9019607843137255,0.8235294117647058,0,1);const float e3=0.7;const vec4 v3=vec4(1,1,1,1);const float e4=1.0;const vec4 v4=vec4(0.6274509803921569,0.7843137254901961,1,1);float a0=smoothstep(e0,e1,x_38);float a1=smoothstep(e1,e2,x_38);float a2=smoothstep(e2,e3,x_38);float a3=smoothstep(e3,e4,x_38);return max(mix(v0,v1,a0)*step(e0,x_38)*step(x_38,e1),max(mix(v1,v2,a1)*step(e1,x_38)*step(x_38,e2),max(mix(v2,v3,a2)*step(e2,x_38)*step(x_38,e3),mix(v3,v4,a3)*step(e3,x_38)*step(x_38,e4))));}vec4 earth(float x_29){const float e0=0.0;const vec4 v0=vec4(0,0,0.5098039215686274,1);const float e1=0.1;const vec4 v1=vec4(0,0.7058823529411765,0.7058823529411765,1);const float e2=0.2;const vec4 v2=vec4(0.1568627450980392,0.8235294117647058,0.1568627450980392,1);const float e3=0.4;const vec4 v3=vec4(0.9019607843137255,0.9019607843137255,0.19607843137254902,1);const float e4=0.6;const vec4 v4=vec4(0.47058823529411764,0.27450980392156865,0.0784313725490196,1);const float e5=1.0;const vec4 v5=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_29);float a1=smoothstep(e1,e2,x_29);float a2=smoothstep(e2,e3,x_29);float a3=smoothstep(e3,e4,x_29);float a4=smoothstep(e4,e5,x_29);return max(mix(v0,v1,a0)*step(e0,x_29)*step(x_29,e1),max(mix(v1,v2,a1)*step(e1,x_29)*step(x_29,e2),max(mix(v2,v3,a2)*step(e2,x_29)*step(x_29,e3),max(mix(v3,v4,a3)*step(e3,x_29)*step(x_29,e4),mix(v4,v5,a4)*step(e4,x_29)*step(x_29,e5)))));}vec4 electric(float x_9){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.15;const vec4 v1=vec4(0.11764705882352941,0,0.39215686274509803,1);const float e2=0.4;const vec4 v2=vec4(0.47058823529411764,0,0.39215686274509803,1);const float e3=0.6;const vec4 v3=vec4(0.6274509803921569,0.35294117647058826,0,1);const float e4=0.8;const vec4 v4=vec4(0.9019607843137255,0.7843137254901961,0,1);const float e5=1.0;const vec4 v5=vec4(1,0.9803921568627451,0.8627450980392157,1);float a0=smoothstep(e0,e1,x_9);float a1=smoothstep(e1,e2,x_9);float a2=smoothstep(e2,e3,x_9);float a3=smoothstep(e3,e4,x_9);float a4=smoothstep(e4,e5,x_9);return max(mix(v0,v1,a0)*step(e0,x_9)*step(x_9,e1),max(mix(v1,v2,a1)*step(e1,x_9)*step(x_9,e2),max(mix(v2,v3,a2)*step(e2,x_9)*step(x_9,e3),max(mix(v3,v4,a3)*step(e3,x_9)*step(x_9,e4),mix(v4,v5,a4)*step(e4,x_9)*step(x_9,e5)))));}vec4 alpha(float x_0){const float e0=0.0;const vec4 v0=vec4(1,1,1,0);const float e1=1.0;const vec4 v1=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_0);return mix(v0,v1,a0)*step(e0,x_0)*step(x_0,e1);}vec4 viridis(float x_22){const float e0=0.0;const vec4 v0=vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);const float e1=0.13;const vec4 v1=vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);const float e2=0.25;const vec4 v2=vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);const float e4=0.5;const vec4 v4=vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);const float e5=0.63;const vec4 v5=vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);const float e6=0.75;const vec4 v6=vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);const float e7=0.88;const vec4 v7=vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);float a0=smoothstep(e0,e1,x_22);float a1=smoothstep(e1,e2,x_22);float a2=smoothstep(e2,e3,x_22);float a3=smoothstep(e3,e4,x_22);float a4=smoothstep(e4,e5,x_22);float a5=smoothstep(e5,e6,x_22);float a6=smoothstep(e6,e7,x_22);float a7=smoothstep(e7,e8,x_22);return max(mix(v0,v1,a0)*step(e0,x_22)*step(x_22,e1),max(mix(v1,v2,a1)*step(e1,x_22)*step(x_22,e2),max(mix(v2,v3,a2)*step(e2,x_22)*step(x_22,e3),max(mix(v3,v4,a3)*step(e3,x_22)*step(x_22,e4),max(mix(v4,v5,a4)*step(e4,x_22)*step(x_22,e5),max(mix(v5,v6,a5)*step(e5,x_22)*step(x_22,e6),max(mix(v6,v7,a6)*step(e6,x_22)*step(x_22,e7),mix(v7,v8,a7)*step(e7,x_22)*step(x_22,e8))))))));}vec4 inferno(float x_30){const float e0=0.0;const vec4 v0=vec4(0,0,0.01568627450980392,1);const float e1=0.13;const vec4 v1=vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);const float e2=0.25;const vec4 v2=vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);const float e3=0.38;const vec4 v3=vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);const float e4=0.5;const vec4 v4=vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);const float e5=0.63;const vec4 v5=vec4(0.8901960784313725,0.34901960784313724,0.2,1);const float e6=0.75;const vec4 v6=vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);const float e8=1.0;const vec4 v8=vec4(0.9882352941176471,1,0.6431372549019608,1);float a0=smoothstep(e0,e1,x_30);float a1=smoothstep(e1,e2,x_30);float a2=smoothstep(e2,e3,x_30);float a3=smoothstep(e3,e4,x_30);float a4=smoothstep(e4,e5,x_30);float a5=smoothstep(e5,e6,x_30);float a6=smoothstep(e6,e7,x_30);float a7=smoothstep(e7,e8,x_30);return max(mix(v0,v1,a0)*step(e0,x_30)*step(x_30,e1),max(mix(v1,v2,a1)*step(e1,x_30)*step(x_30,e2),max(mix(v2,v3,a2)*step(e2,x_30)*step(x_30,e3),max(mix(v3,v4,a3)*step(e3,x_30)*step(x_30,e4),max(mix(v4,v5,a4)*step(e4,x_30)*step(x_30,e5),max(mix(v5,v6,a5)*step(e5,x_30)*step(x_30,e6),max(mix(v6,v7,a6)*step(e6,x_30)*step(x_30,e7),mix(v7,v8,a7)*step(e7,x_30)*step(x_30,e8))))))));}vec4 magma(float x_33){const float e0=0.0;const vec4 v0=vec4(0,0,0.01568627450980392,1);const float e1=0.13;const vec4 v1=vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);const float e2=0.25;const vec4 v2=vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);const float e3=0.38;const vec4 v3=vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);const float e4=0.5;const vec4 v4=vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);const float e5=0.63;const vec4 v5=vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);const float e6=0.75;const vec4 v6=vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);const float e8=1.0;const vec4 v8=vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);float a0=smoothstep(e0,e1,x_33);float a1=smoothstep(e1,e2,x_33);float a2=smoothstep(e2,e3,x_33);float a3=smoothstep(e3,e4,x_33);float a4=smoothstep(e4,e5,x_33);float a5=smoothstep(e5,e6,x_33);float a6=smoothstep(e6,e7,x_33);float a7=smoothstep(e7,e8,x_33);return max(mix(v0,v1,a0)*step(e0,x_33)*step(x_33,e1),max(mix(v1,v2,a1)*step(e1,x_33)*step(x_33,e2),max(mix(v2,v3,a2)*step(e2,x_33)*step(x_33,e3),max(mix(v3,v4,a3)*step(e3,x_33)*step(x_33,e4),max(mix(v4,v5,a4)*step(e4,x_33)*step(x_33,e5),max(mix(v5,v6,a5)*step(e5,x_33)*step(x_33,e6),max(mix(v6,v7,a6)*step(e6,x_33)*step(x_33,e7),mix(v7,v8,a7)*step(e7,x_33)*step(x_33,e8))))))));}vec4 plasma(float x_3){const float e0=0.0;const vec4 v0=vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);const float e1=0.13;const vec4 v1=vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);const float e2=0.25;const vec4 v2=vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);const float e3=0.38;const vec4 v3=vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);const float e4=0.5;const vec4 v4=vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);const float e5=0.63;const vec4 v5=vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);const float e6=0.75;const vec4 v6=vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);const float e7=0.88;const vec4 v7=vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);const float e8=1.0;const vec4 v8=vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);float a0=smoothstep(e0,e1,x_3);float a1=smoothstep(e1,e2,x_3);float a2=smoothstep(e2,e3,x_3);float a3=smoothstep(e3,e4,x_3);float a4=smoothstep(e4,e5,x_3);float a5=smoothstep(e5,e6,x_3);float a6=smoothstep(e6,e7,x_3);float a7=smoothstep(e7,e8,x_3);return max(mix(v0,v1,a0)*step(e0,x_3)*step(x_3,e1),max(mix(v1,v2,a1)*step(e1,x_3)*step(x_3,e2),max(mix(v2,v3,a2)*step(e2,x_3)*step(x_3,e3),max(mix(v3,v4,a3)*step(e3,x_3)*step(x_3,e4),max(mix(v4,v5,a4)*step(e4,x_3)*step(x_3,e5),max(mix(v5,v6,a5)*step(e5,x_3)*step(x_3,e6),max(mix(v6,v7,a6)*step(e6,x_3)*step(x_3,e7),mix(v7,v8,a7)*step(e7,x_3)*step(x_3,e8))))))));}vec4 warm(float x_43){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.13;const vec4 v1=vec4(0.6745098039215687,0,0.7333333333333333,1);const float e2=0.25;const vec4 v2=vec4(0.8588235294117647,0,0.6666666666666666,1);const float e3=0.38;const vec4 v3=vec4(1,0,0.5098039215686274,1);const float e4=0.5;const vec4 v4=vec4(1,0.24705882352941178,0.2901960784313726,1);const float e5=0.63;const vec4 v5=vec4(1,0.4823529411764706,0,1);const float e6=0.75;const vec4 v6=vec4(0.9176470588235294,0.6901960784313725,0,1);const float e7=0.88;const vec4 v7=vec4(0.7450980392156863,0.8941176470588236,0,1);const float e8=1.0;const vec4 v8=vec4(0.5764705882352941,1,0,1);float a0=smoothstep(e0,e1,x_43);float a1=smoothstep(e1,e2,x_43);float a2=smoothstep(e2,e3,x_43);float a3=smoothstep(e3,e4,x_43);float a4=smoothstep(e4,e5,x_43);float a5=smoothstep(e5,e6,x_43);float a6=smoothstep(e6,e7,x_43);float a7=smoothstep(e7,e8,x_43);return max(mix(v0,v1,a0)*step(e0,x_43)*step(x_43,e1),max(mix(v1,v2,a1)*step(e1,x_43)*step(x_43,e2),max(mix(v2,v3,a2)*step(e2,x_43)*step(x_43,e3),max(mix(v3,v4,a3)*step(e3,x_43)*step(x_43,e4),max(mix(v4,v5,a4)*step(e4,x_43)*step(x_43,e5),max(mix(v5,v6,a5)*step(e5,x_43)*step(x_43,e6),max(mix(v6,v7,a6)*step(e6,x_43)*step(x_43,e7),mix(v7,v8,a7)*step(e7,x_43)*step(x_43,e8))))))));}vec4 rainbow_soft_1310269270(float x_14){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.1;const vec4 v1=vec4(0.7803921568627451,0,0.7058823529411765,1);const float e2=0.2;const vec4 v2=vec4(1,0,0.4745098039215686,1);const float e3=0.3;const vec4 v3=vec4(1,0.4235294117647059,0,1);const float e4=0.4;const vec4 v4=vec4(0.8705882352941177,0.7607843137254902,0,1);const float e5=0.5;const vec4 v5=vec4(0.5882352941176471,1,0,1);const float e6=0.6;const vec4 v6=vec4(0,1,0.21568627450980393,1);const float e7=0.7;const vec4 v7=vec4(0,0.9647058823529412,0.5882352941176471,1);const float e8=0.8;const vec4 v8=vec4(0.19607843137254902,0.6549019607843137,0.8705882352941177,1);const float e9=0.9;const vec4 v9=vec4(0.403921568627451,0.2,0.9215686274509803,1);const float e10=1.0;const vec4 v10=vec4(0.48627450980392156,0,0.7294117647058823,1);float a0=smoothstep(e0,e1,x_14);float a1=smoothstep(e1,e2,x_14);float a2=smoothstep(e2,e3,x_14);float a3=smoothstep(e3,e4,x_14);float a4=smoothstep(e4,e5,x_14);float a5=smoothstep(e5,e6,x_14);float a6=smoothstep(e6,e7,x_14);float a7=smoothstep(e7,e8,x_14);float a8=smoothstep(e8,e9,x_14);float a9=smoothstep(e9,e10,x_14);return max(mix(v0,v1,a0)*step(e0,x_14)*step(x_14,e1),max(mix(v1,v2,a1)*step(e1,x_14)*step(x_14,e2),max(mix(v2,v3,a2)*step(e2,x_14)*step(x_14,e3),max(mix(v3,v4,a3)*step(e3,x_14)*step(x_14,e4),max(mix(v4,v5,a4)*step(e4,x_14)*step(x_14,e5),max(mix(v5,v6,a5)*step(e5,x_14)*step(x_14,e6),max(mix(v6,v7,a6)*step(e6,x_14)*step(x_14,e7),max(mix(v7,v8,a7)*step(e7,x_14)*step(x_14,e8),max(mix(v8,v9,a8)*step(e8,x_14)*step(x_14,e9),mix(v9,v10,a9)*step(e9,x_14)*step(x_14,e10))))))))));}vec4 bathymetry(float x_36){const float e0=0.0;const vec4 v0=vec4(0.1568627450980392,0.10196078431372549,0.17254901960784313,1);const float e1=0.13;const vec4 v1=vec4(0.23137254901960785,0.19215686274509805,0.35294117647058826,1);const float e2=0.25;const vec4 v2=vec4(0.25098039215686274,0.2980392156862745,0.5450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.24705882352941178,0.43137254901960786,0.592156862745098,1);const float e4=0.5;const vec4 v4=vec4(0.2823529411764706,0.5568627450980392,0.6196078431372549,1);const float e5=0.63;const vec4 v5=vec4(0.3333333333333333,0.6823529411764706,0.6392156862745098,1);const float e6=0.75;const vec4 v6=vec4(0.47058823529411764,0.807843137254902,0.6392156862745098,1);const float e7=0.88;const vec4 v7=vec4(0.7333333333333333,0.9019607843137255,0.6745098039215687,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.996078431372549,0.8,1);float a0=smoothstep(e0,e1,x_36);float a1=smoothstep(e1,e2,x_36);float a2=smoothstep(e2,e3,x_36);float a3=smoothstep(e3,e4,x_36);float a4=smoothstep(e4,e5,x_36);float a5=smoothstep(e5,e6,x_36);float a6=smoothstep(e6,e7,x_36);float a7=smoothstep(e7,e8,x_36);return max(mix(v0,v1,a0)*step(e0,x_36)*step(x_36,e1),max(mix(v1,v2,a1)*step(e1,x_36)*step(x_36,e2),max(mix(v2,v3,a2)*step(e2,x_36)*step(x_36,e3),max(mix(v3,v4,a3)*step(e3,x_36)*step(x_36,e4),max(mix(v4,v5,a4)*step(e4,x_36)*step(x_36,e5),max(mix(v5,v6,a5)*step(e5,x_36)*step(x_36,e6),max(mix(v6,v7,a6)*step(e6,x_36)*step(x_36,e7),mix(v7,v8,a7)*step(e7,x_36)*step(x_36,e8))))))));}vec4 cdom(float x_7){const float e0=0.0;const vec4 v0=vec4(0.1843137254901961,0.058823529411764705,0.24313725490196078,1);const float e1=0.13;const vec4 v1=vec4(0.3411764705882353,0.09019607843137255,0.33725490196078434,1);const float e2=0.25;const vec4 v2=vec4(0.5098039215686274,0.10980392156862745,0.38823529411764707,1);const float e3=0.38;const vec4 v3=vec4(0.6705882352941176,0.1607843137254902,0.3764705882352941,1);const float e4=0.5;const vec4 v4=vec4(0.807843137254902,0.2627450980392157,0.33725490196078434,1);const float e5=0.63;const vec4 v5=vec4(0.9019607843137255,0.41568627450980394,0.32941176470588235,1);const float e6=0.75;const vec4 v6=vec4(0.9490196078431372,0.5843137254901961,0.403921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.7568627450980392,0.5294117647058824,1);const float e8=1.0;const vec4 v8=vec4(0.996078431372549,0.9294117647058824,0.6901960784313725,1);float a0=smoothstep(e0,e1,x_7);float a1=smoothstep(e1,e2,x_7);float a2=smoothstep(e2,e3,x_7);float a3=smoothstep(e3,e4,x_7);float a4=smoothstep(e4,e5,x_7);float a5=smoothstep(e5,e6,x_7);float a6=smoothstep(e6,e7,x_7);float a7=smoothstep(e7,e8,x_7);return max(mix(v0,v1,a0)*step(e0,x_7)*step(x_7,e1),max(mix(v1,v2,a1)*step(e1,x_7)*step(x_7,e2),max(mix(v2,v3,a2)*step(e2,x_7)*step(x_7,e3),max(mix(v3,v4,a3)*step(e3,x_7)*step(x_7,e4),max(mix(v4,v5,a4)*step(e4,x_7)*step(x_7,e5),max(mix(v5,v6,a5)*step(e5,x_7)*step(x_7,e6),max(mix(v6,v7,a6)*step(e6,x_7)*step(x_7,e7),mix(v7,v8,a7)*step(e7,x_7)*step(x_7,e8))))))));}vec4 chlorophyll(float x_6){const float e0=0.0;const vec4 v0=vec4(0.07058823529411765,0.1411764705882353,0.0784313725490196,1);const float e1=0.13;const vec4 v1=vec4(0.09803921568627451,0.24705882352941178,0.1607843137254902,1);const float e2=0.25;const vec4 v2=vec4(0.09411764705882353,0.3568627450980392,0.23137254901960785,1);const float e3=0.38;const vec4 v3=vec4(0.050980392156862744,0.4666666666666667,0.2823529411764706,1);const float e4=0.5;const vec4 v4=vec4(0.07058823529411765,0.5803921568627451,0.3137254901960784,1);const float e5=0.63;const vec4 v5=vec4(0.3137254901960784,0.6784313725490196,0.34901960784313724,1);const float e6=0.75;const vec4 v6=vec4(0.5176470588235295,0.7686274509803922,0.47843137254901963,1);const float e7=0.88;const vec4 v7=vec4(0.6862745098039216,0.8666666666666667,0.6352941176470588,1);const float e8=1.0;const vec4 v8=vec4(0.8431372549019608,0.9764705882352941,0.8156862745098039,1);float a0=smoothstep(e0,e1,x_6);float a1=smoothstep(e1,e2,x_6);float a2=smoothstep(e2,e3,x_6);float a3=smoothstep(e3,e4,x_6);float a4=smoothstep(e4,e5,x_6);float a5=smoothstep(e5,e6,x_6);float a6=smoothstep(e6,e7,x_6);float a7=smoothstep(e7,e8,x_6);return max(mix(v0,v1,a0)*step(e0,x_6)*step(x_6,e1),max(mix(v1,v2,a1)*step(e1,x_6)*step(x_6,e2),max(mix(v2,v3,a2)*step(e2,x_6)*step(x_6,e3),max(mix(v3,v4,a3)*step(e3,x_6)*step(x_6,e4),max(mix(v4,v5,a4)*step(e4,x_6)*step(x_6,e5),max(mix(v5,v6,a5)*step(e5,x_6)*step(x_6,e6),max(mix(v6,v7,a6)*step(e6,x_6)*step(x_6,e7),mix(v7,v8,a7)*step(e7,x_6)*step(x_6,e8))))))));}vec4 density(float x_19){const float e0=0.0;const vec4 v0=vec4(0.21176470588235294,0.054901960784313725,0.1411764705882353,1);const float e1=0.13;const vec4 v1=vec4(0.34901960784313724,0.09019607843137255,0.3137254901960784,1);const float e2=0.25;const vec4 v2=vec4(0.43137254901960786,0.17647058823529413,0.5176470588235295,1);const float e3=0.38;const vec4 v3=vec4(0.47058823529411764,0.30196078431372547,0.6980392156862745,1);const float e4=0.5;const vec4 v4=vec4(0.47058823529411764,0.44313725490196076,0.8352941176470589,1);const float e5=0.63;const vec4 v5=vec4(0.45098039215686275,0.592156862745098,0.8941176470588236,1);const float e6=0.75;const vec4 v6=vec4(0.5254901960784314,0.7254901960784313,0.8901960784313725,1);const float e7=0.88;const vec4 v7=vec4(0.6941176470588235,0.8392156862745098,0.8901960784313725,1);const float e8=1.0;const vec4 v8=vec4(0.9019607843137255,0.9450980392156862,0.9450980392156862,1);float a0=smoothstep(e0,e1,x_19);float a1=smoothstep(e1,e2,x_19);float a2=smoothstep(e2,e3,x_19);float a3=smoothstep(e3,e4,x_19);float a4=smoothstep(e4,e5,x_19);float a5=smoothstep(e5,e6,x_19);float a6=smoothstep(e6,e7,x_19);float a7=smoothstep(e7,e8,x_19);return max(mix(v0,v1,a0)*step(e0,x_19)*step(x_19,e1),max(mix(v1,v2,a1)*step(e1,x_19)*step(x_19,e2),max(mix(v2,v3,a2)*step(e2,x_19)*step(x_19,e3),max(mix(v3,v4,a3)*step(e3,x_19)*step(x_19,e4),max(mix(v4,v5,a4)*step(e4,x_19)*step(x_19,e5),max(mix(v5,v6,a5)*step(e5,x_19)*step(x_19,e6),max(mix(v6,v7,a6)*step(e6,x_19)*step(x_19,e7),mix(v7,v8,a7)*step(e7,x_19)*step(x_19,e8))))))));}vec4 freesurface_blue_3154355989(float x_35){const float e0=0.0;const vec4 v0=vec4(0.11764705882352941,0.01568627450980392,0.43137254901960786,1);const float e1=0.13;const vec4 v1=vec4(0.1843137254901961,0.054901960784313725,0.6901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.1607843137254902,0.17647058823529413,0.9254901960784314,1);const float e3=0.38;const vec4 v3=vec4(0.09803921568627451,0.38823529411764707,0.8313725490196079,1);const float e4=0.5;const vec4 v4=vec4(0.26666666666666666,0.5137254901960784,0.7843137254901961,1);const float e5=0.63;const vec4 v5=vec4(0.4470588235294118,0.611764705882353,0.7725490196078432,1);const float e6=0.75;const vec4 v6=vec4(0.615686274509804,0.7098039215686275,0.796078431372549,1);const float e7=0.88;const vec4 v7=vec4(0.7843137254901961,0.8156862745098039,0.8470588235294118,1);const float e8=1.0;const vec4 v8=vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);float a0=smoothstep(e0,e1,x_35);float a1=smoothstep(e1,e2,x_35);float a2=smoothstep(e2,e3,x_35);float a3=smoothstep(e3,e4,x_35);float a4=smoothstep(e4,e5,x_35);float a5=smoothstep(e5,e6,x_35);float a6=smoothstep(e6,e7,x_35);float a7=smoothstep(e7,e8,x_35);return max(mix(v0,v1,a0)*step(e0,x_35)*step(x_35,e1),max(mix(v1,v2,a1)*step(e1,x_35)*step(x_35,e2),max(mix(v2,v3,a2)*step(e2,x_35)*step(x_35,e3),max(mix(v3,v4,a3)*step(e3,x_35)*step(x_35,e4),max(mix(v4,v5,a4)*step(e4,x_35)*step(x_35,e5),max(mix(v5,v6,a5)*step(e5,x_35)*step(x_35,e6),max(mix(v6,v7,a6)*step(e6,x_35)*step(x_35,e7),mix(v7,v8,a7)*step(e7,x_35)*step(x_35,e8))))))));}vec4 freesurface_red_1679163293(float x_20){const float e0=0.0;const vec4 v0=vec4(0.23529411764705882,0.03529411764705882,0.07058823529411765,1);const float e1=0.13;const vec4 v1=vec4(0.39215686274509803,0.06666666666666667,0.10588235294117647,1);const float e2=0.25;const vec4 v2=vec4(0.5568627450980392,0.0784313725490196,0.11372549019607843,1);const float e3=0.38;const vec4 v3=vec4(0.6941176470588235,0.16862745098039217,0.10588235294117647,1);const float e4=0.5;const vec4 v4=vec4(0.7529411764705882,0.3411764705882353,0.24705882352941178,1);const float e5=0.63;const vec4 v5=vec4(0.803921568627451,0.49019607843137253,0.4117647058823529,1);const float e6=0.75;const vec4 v6=vec4(0.8470588235294118,0.6352941176470588,0.5803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.8901960784313725,0.7803921568627451,0.7568627450980392,1);const float e8=1.0;const vec4 v8=vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);float a0=smoothstep(e0,e1,x_20);float a1=smoothstep(e1,e2,x_20);float a2=smoothstep(e2,e3,x_20);float a3=smoothstep(e3,e4,x_20);float a4=smoothstep(e4,e5,x_20);float a5=smoothstep(e5,e6,x_20);float a6=smoothstep(e6,e7,x_20);float a7=smoothstep(e7,e8,x_20);return max(mix(v0,v1,a0)*step(e0,x_20)*step(x_20,e1),max(mix(v1,v2,a1)*step(e1,x_20)*step(x_20,e2),max(mix(v2,v3,a2)*step(e2,x_20)*step(x_20,e3),max(mix(v3,v4,a3)*step(e3,x_20)*step(x_20,e4),max(mix(v4,v5,a4)*step(e4,x_20)*step(x_20,e5),max(mix(v5,v6,a5)*step(e5,x_20)*step(x_20,e6),max(mix(v6,v7,a6)*step(e6,x_20)*step(x_20,e7),mix(v7,v8,a7)*step(e7,x_20)*step(x_20,e8))))))));}vec4 oxygen(float x_11){const float e0=0.0;const vec4 v0=vec4(0.25098039215686274,0.0196078431372549,0.0196078431372549,1);const float e1=0.13;const vec4 v1=vec4(0.41568627450980394,0.023529411764705882,0.058823529411764705,1);const float e2=0.25;const vec4 v2=vec4(0.5647058823529412,0.10196078431372549,0.027450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.6588235294117647,0.25098039215686274,0.011764705882352941,1);const float e4=0.5;const vec4 v4=vec4(0.7372549019607844,0.39215686274509803,0.01568627450980392,1);const float e5=0.63;const vec4 v5=vec4(0.807843137254902,0.5333333333333333,0.043137254901960784,1);const float e6=0.75;const vec4 v6=vec4(0.8627450980392157,0.6823529411764706,0.09803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.9058823529411765,0.8431372549019608,0.17254901960784313,1);const float e8=1.0;const vec4 v8=vec4(0.9725490196078431,0.996078431372549,0.4117647058823529,1);float a0=smoothstep(e0,e1,x_11);float a1=smoothstep(e1,e2,x_11);float a2=smoothstep(e2,e3,x_11);float a3=smoothstep(e3,e4,x_11);float a4=smoothstep(e4,e5,x_11);float a5=smoothstep(e5,e6,x_11);float a6=smoothstep(e6,e7,x_11);float a7=smoothstep(e7,e8,x_11);return max(mix(v0,v1,a0)*step(e0,x_11)*step(x_11,e1),max(mix(v1,v2,a1)*step(e1,x_11)*step(x_11,e2),max(mix(v2,v3,a2)*step(e2,x_11)*step(x_11,e3),max(mix(v3,v4,a3)*step(e3,x_11)*step(x_11,e4),max(mix(v4,v5,a4)*step(e4,x_11)*step(x_11,e5),max(mix(v5,v6,a5)*step(e5,x_11)*step(x_11,e6),max(mix(v6,v7,a6)*step(e6,x_11)*step(x_11,e7),mix(v7,v8,a7)*step(e7,x_11)*step(x_11,e8))))))));}vec4 par(float x_28){const float e0=0.0;const vec4 v0=vec4(0.2,0.0784313725490196,0.09411764705882353,1);const float e1=0.13;const vec4 v1=vec4(0.35294117647058826,0.12549019607843137,0.13725490196078433,1);const float e2=0.25;const vec4 v2=vec4(0.5058823529411764,0.17254901960784313,0.13333333333333333,1);const float e3=0.38;const vec4 v3=vec4(0.6235294117647059,0.26666666666666666,0.09803921568627451,1);const float e4=0.5;const vec4 v4=vec4(0.7137254901960784,0.38823529411764707,0.07450980392156863,1);const float e5=0.63;const vec4 v5=vec4(0.7803921568627451,0.5254901960784314,0.08627450980392157,1);const float e6=0.75;const vec4 v6=vec4(0.8313725490196079,0.6705882352941176,0.13725490196078433,1);const float e7=0.88;const vec4 v7=vec4(0.8666666666666667,0.8235294117647058,0.21176470588235294,1);const float e8=1.0;const vec4 v8=vec4(0.8823529411764706,0.9921568627450981,0.29411764705882354,1);float a0=smoothstep(e0,e1,x_28);float a1=smoothstep(e1,e2,x_28);float a2=smoothstep(e2,e3,x_28);float a3=smoothstep(e3,e4,x_28);float a4=smoothstep(e4,e5,x_28);float a5=smoothstep(e5,e6,x_28);float a6=smoothstep(e6,e7,x_28);float a7=smoothstep(e7,e8,x_28);return max(mix(v0,v1,a0)*step(e0,x_28)*step(x_28,e1),max(mix(v1,v2,a1)*step(e1,x_28)*step(x_28,e2),max(mix(v2,v3,a2)*step(e2,x_28)*step(x_28,e3),max(mix(v3,v4,a3)*step(e3,x_28)*step(x_28,e4),max(mix(v4,v5,a4)*step(e4,x_28)*step(x_28,e5),max(mix(v5,v6,a5)*step(e5,x_28)*step(x_28,e6),max(mix(v6,v7,a6)*step(e6,x_28)*step(x_28,e7),mix(v7,v8,a7)*step(e7,x_28)*step(x_28,e8))))))));}vec4 phase(float x_39){const float e0=0.0;const vec4 v0=vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);const float e1=0.13;const vec4 v1=vec4(0.7215686274509804,0.2784313725490196,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.7294117647058823,0.22745098039215686,0.45098039215686275,1);const float e3=0.38;const vec4 v3=vec4(0.6274509803921569,0.2784313725490196,0.7254901960784313,1);const float e4=0.5;const vec4 v4=vec4(0.43137254901960786,0.3803921568627451,0.8549019607843137,1);const float e5=0.63;const vec4 v5=vec4(0.19607843137254902,0.4823529411764706,0.6431372549019608,1);const float e6=0.75;const vec4 v6=vec4(0.12156862745098039,0.5137254901960784,0.43137254901960786,1);const float e7=0.88;const vec4 v7=vec4(0.30196078431372547,0.5058823529411764,0.13333333333333333,1);const float e8=1.0;const vec4 v8=vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);float a0=smoothstep(e0,e1,x_39);float a1=smoothstep(e1,e2,x_39);float a2=smoothstep(e2,e3,x_39);float a3=smoothstep(e3,e4,x_39);float a4=smoothstep(e4,e5,x_39);float a5=smoothstep(e5,e6,x_39);float a6=smoothstep(e6,e7,x_39);float a7=smoothstep(e7,e8,x_39);return max(mix(v0,v1,a0)*step(e0,x_39)*step(x_39,e1),max(mix(v1,v2,a1)*step(e1,x_39)*step(x_39,e2),max(mix(v2,v3,a2)*step(e2,x_39)*step(x_39,e3),max(mix(v3,v4,a3)*step(e3,x_39)*step(x_39,e4),max(mix(v4,v5,a4)*step(e4,x_39)*step(x_39,e5),max(mix(v5,v6,a5)*step(e5,x_39)*step(x_39,e6),max(mix(v6,v7,a6)*step(e6,x_39)*step(x_39,e7),mix(v7,v8,a7)*step(e7,x_39)*step(x_39,e8))))))));}vec4 salinity(float x_26){const float e0=0.0;const vec4 v0=vec4(0.16470588235294117,0.09411764705882353,0.4235294117647059,1);const float e1=0.13;const vec4 v1=vec4(0.12941176470588237,0.19607843137254902,0.6352941176470588,1);const float e2=0.25;const vec4 v2=vec4(0.058823529411764705,0.35294117647058826,0.5686274509803921,1);const float e3=0.38;const vec4 v3=vec4(0.1568627450980392,0.4627450980392157,0.5372549019607843,1);const float e4=0.5;const vec4 v4=vec4(0.23137254901960785,0.5725490196078431,0.5294117647058824,1);const float e5=0.63;const vec4 v5=vec4(0.30980392156862746,0.6862745098039216,0.49411764705882355,1);const float e6=0.75;const vec4 v6=vec4(0.47058823529411764,0.796078431372549,0.40784313725490196,1);const float e7=0.88;const vec4 v7=vec4(0.7568627450980392,0.8666666666666667,0.39215686274509803,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.9372549019607843,0.6039215686274509,1);float a0=smoothstep(e0,e1,x_26);float a1=smoothstep(e1,e2,x_26);float a2=smoothstep(e2,e3,x_26);float a3=smoothstep(e3,e4,x_26);float a4=smoothstep(e4,e5,x_26);float a5=smoothstep(e5,e6,x_26);float a6=smoothstep(e6,e7,x_26);float a7=smoothstep(e7,e8,x_26);return max(mix(v0,v1,a0)*step(e0,x_26)*step(x_26,e1),max(mix(v1,v2,a1)*step(e1,x_26)*step(x_26,e2),max(mix(v2,v3,a2)*step(e2,x_26)*step(x_26,e3),max(mix(v3,v4,a3)*step(e3,x_26)*step(x_26,e4),max(mix(v4,v5,a4)*step(e4,x_26)*step(x_26,e5),max(mix(v5,v6,a5)*step(e5,x_26)*step(x_26,e6),max(mix(v6,v7,a6)*step(e6,x_26)*step(x_26,e7),mix(v7,v8,a7)*step(e7,x_26)*step(x_26,e8))))))));}vec4 temperature(float x_8){const float e0=0.0;const vec4 v0=vec4(0.01568627450980392,0.13725490196078433,0.2,1);const float e1=0.13;const vec4 v1=vec4(0.09019607843137255,0.2,0.47843137254901963,1);const float e2=0.25;const vec4 v2=vec4(0.3333333333333333,0.23137254901960785,0.615686274509804,1);const float e3=0.38;const vec4 v3=vec4(0.5058823529411764,0.30980392156862746,0.5607843137254902,1);const float e4=0.5;const vec4 v4=vec4(0.6862745098039216,0.37254901960784315,0.5098039215686274,1);const float e5=0.63;const vec4 v5=vec4(0.8705882352941177,0.4392156862745098,0.396078431372549,1);const float e6=0.75;const vec4 v6=vec4(0.9764705882352941,0.5725490196078431,0.25882352941176473,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.7686274509803922,0.2549019607843137,1);const float e8=1.0;const vec4 v8=vec4(0.9098039215686274,0.9803921568627451,0.3568627450980392,1);float a0=smoothstep(e0,e1,x_8);float a1=smoothstep(e1,e2,x_8);float a2=smoothstep(e2,e3,x_8);float a3=smoothstep(e3,e4,x_8);float a4=smoothstep(e4,e5,x_8);float a5=smoothstep(e5,e6,x_8);float a6=smoothstep(e6,e7,x_8);float a7=smoothstep(e7,e8,x_8);return max(mix(v0,v1,a0)*step(e0,x_8)*step(x_8,e1),max(mix(v1,v2,a1)*step(e1,x_8)*step(x_8,e2),max(mix(v2,v3,a2)*step(e2,x_8)*step(x_8,e3),max(mix(v3,v4,a3)*step(e3,x_8)*step(x_8,e4),max(mix(v4,v5,a4)*step(e4,x_8)*step(x_8,e5),max(mix(v5,v6,a5)*step(e5,x_8)*step(x_8,e6),max(mix(v6,v7,a6)*step(e6,x_8)*step(x_8,e7),mix(v7,v8,a7)*step(e7,x_8)*step(x_8,e8))))))));}vec4 turbidity(float x_40){const float e0=0.0;const vec4 v0=vec4(0.13333333333333333,0.12156862745098039,0.10588235294117647,1);const float e1=0.13;const vec4 v1=vec4(0.2549019607843137,0.19607843137254902,0.1607843137254902,1);const float e2=0.25;const vec4 v2=vec4(0.3843137254901961,0.27058823529411763,0.20392156862745098,1);const float e3=0.38;const vec4 v3=vec4(0.5137254901960784,0.34901960784313724,0.2235294117647059,1);const float e4=0.5;const vec4 v4=vec4(0.6313725490196078,0.4392156862745098,0.23137254901960785,1);const float e5=0.63;const vec4 v5=vec4(0.7254901960784313,0.5490196078431373,0.25882352941176473,1);const float e6=0.75;const vec4 v6=vec4(0.792156862745098,0.6823529411764706,0.34509803921568627,1);const float e7=0.88;const vec4 v7=vec4(0.8470588235294118,0.8196078431372549,0.49411764705882355,1);const float e8=1.0;const vec4 v8=vec4(0.9137254901960784,0.9647058823529412,0.6705882352941176,1);float a0=smoothstep(e0,e1,x_40);float a1=smoothstep(e1,e2,x_40);float a2=smoothstep(e2,e3,x_40);float a3=smoothstep(e3,e4,x_40);float a4=smoothstep(e4,e5,x_40);float a5=smoothstep(e5,e6,x_40);float a6=smoothstep(e6,e7,x_40);float a7=smoothstep(e7,e8,x_40);return max(mix(v0,v1,a0)*step(e0,x_40)*step(x_40,e1),max(mix(v1,v2,a1)*step(e1,x_40)*step(x_40,e2),max(mix(v2,v3,a2)*step(e2,x_40)*step(x_40,e3),max(mix(v3,v4,a3)*step(e3,x_40)*step(x_40,e4),max(mix(v4,v5,a4)*step(e4,x_40)*step(x_40,e5),max(mix(v5,v6,a5)*step(e5,x_40)*step(x_40,e6),max(mix(v6,v7,a6)*step(e6,x_40)*step(x_40,e7),mix(v7,v8,a7)*step(e7,x_40)*step(x_40,e8))))))));}vec4 velocity_blue_297387650(float x_2){const float e0=0.0;const vec4 v0=vec4(0.06666666666666667,0.12549019607843137,0.25098039215686274,1);const float e1=0.13;const vec4 v1=vec4(0.13725490196078433,0.20392156862745098,0.4549019607843137,1);const float e2=0.25;const vec4 v2=vec4(0.11372549019607843,0.3176470588235294,0.611764705882353,1);const float e3=0.38;const vec4 v3=vec4(0.12156862745098039,0.44313725490196076,0.6352941176470588,1);const float e4=0.5;const vec4 v4=vec4(0.19607843137254902,0.5647058823529412,0.6627450980392157,1);const float e5=0.63;const vec4 v5=vec4(0.3411764705882353,0.6784313725490196,0.6901960784313725,1);const float e6=0.75;const vec4 v6=vec4(0.5843137254901961,0.7686274509803922,0.7411764705882353,1);const float e7=0.88;const vec4 v7=vec4(0.796078431372549,0.8666666666666667,0.8274509803921568,1);const float e8=1.0;const vec4 v8=vec4(0.996078431372549,0.984313725490196,0.9019607843137255,1);float a0=smoothstep(e0,e1,x_2);float a1=smoothstep(e1,e2,x_2);float a2=smoothstep(e2,e3,x_2);float a3=smoothstep(e3,e4,x_2);float a4=smoothstep(e4,e5,x_2);float a5=smoothstep(e5,e6,x_2);float a6=smoothstep(e6,e7,x_2);float a7=smoothstep(e7,e8,x_2);return max(mix(v0,v1,a0)*step(e0,x_2)*step(x_2,e1),max(mix(v1,v2,a1)*step(e1,x_2)*step(x_2,e2),max(mix(v2,v3,a2)*step(e2,x_2)*step(x_2,e3),max(mix(v3,v4,a3)*step(e3,x_2)*step(x_2,e4),max(mix(v4,v5,a4)*step(e4,x_2)*step(x_2,e5),max(mix(v5,v6,a5)*step(e5,x_2)*step(x_2,e6),max(mix(v6,v7,a6)*step(e6,x_2)*step(x_2,e7),mix(v7,v8,a7)*step(e7,x_2)*step(x_2,e8))))))));}vec4 velocity_green_2558432129(float x_27){const float e0=0.0;const vec4 v0=vec4(0.09019607843137255,0.13725490196078433,0.07450980392156863,1);const float e1=0.13;const vec4 v1=vec4(0.09411764705882353,0.25098039215686274,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.043137254901960784,0.37254901960784315,0.17647058823529413,1);const float e3=0.38;const vec4 v3=vec4(0.15294117647058825,0.4823529411764706,0.13725490196078433,1);const float e4=0.5;const vec4 v4=vec4(0.37254901960784315,0.5725490196078431,0.047058823529411764,1);const float e5=0.63;const vec4 v5=vec4(0.596078431372549,0.6470588235294118,0.07058823529411765,1);const float e6=0.75;const vec4 v6=vec4(0.788235294117647,0.7294117647058823,0.27058823529411763,1);const float e7=0.88;const vec4 v7=vec4(0.9137254901960784,0.8470588235294118,0.5372549019607843,1);const float e8=1.0;const vec4 v8=vec4(1,0.9921568627450981,0.803921568627451,1);float a0=smoothstep(e0,e1,x_27);float a1=smoothstep(e1,e2,x_27);float a2=smoothstep(e2,e3,x_27);float a3=smoothstep(e3,e4,x_27);float a4=smoothstep(e4,e5,x_27);float a5=smoothstep(e5,e6,x_27);float a6=smoothstep(e6,e7,x_27);float a7=smoothstep(e7,e8,x_27);return max(mix(v0,v1,a0)*step(e0,x_27)*step(x_27,e1),max(mix(v1,v2,a1)*step(e1,x_27)*step(x_27,e2),max(mix(v2,v3,a2)*step(e2,x_27)*step(x_27,e3),max(mix(v3,v4,a3)*step(e3,x_27)*step(x_27,e4),max(mix(v4,v5,a4)*step(e4,x_27)*step(x_27,e5),max(mix(v5,v6,a5)*step(e5,x_27)*step(x_27,e6),max(mix(v6,v7,a6)*step(e6,x_27)*step(x_27,e7),mix(v7,v8,a7)*step(e7,x_27)*step(x_27,e8))))))));}vec4 cubehelix(float x_37){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.07;const vec4 v1=vec4(0.08627450980392157,0.0196078431372549,0.23137254901960785,1);const float e2=0.13;const vec4 v2=vec4(0.23529411764705882,0.01568627450980392,0.4117647058823529,1);const float e3=0.2;const vec4 v3=vec4(0.42745098039215684,0.00392156862745098,0.5294117647058824,1);const float e4=0.27;const vec4 v4=vec4(0.6313725490196078,0,0.5764705882352941,1);const float e5=0.33;const vec4 v5=vec4(0.8235294117647058,0.00784313725490196,0.5568627450980392,1);const float e6=0.4;const vec4 v6=vec4(0.984313725490196,0.043137254901960784,0.4823529411764706,1);const float e7=0.47;const vec4 v7=vec4(1,0.11372549019607843,0.3803921568627451,1);const float e8=0.53;const vec4 v8=vec4(1,0.21176470588235294,0.27058823529411763,1);const float e9=0.6;const vec4 v9=vec4(1,0.3333333333333333,0.1803921568627451,1);const float e10=0.67;const vec4 v10=vec4(1,0.47058823529411764,0.13333333333333333,1);const float e11=0.73;const vec4 v11=vec4(1,0.615686274509804,0.1450980392156863,1);const float e12=0.8;const vec4 v12=vec4(0.9450980392156862,0.7490196078431373,0.2235294117647059,1);const float e13=0.87;const vec4 v13=vec4(0.8784313725490196,0.8627450980392157,0.36470588235294116,1);const float e14=0.93;const vec4 v14=vec4(0.8549019607843137,0.9450980392156862,0.5568627450980392,1);const float e15=1.0;const vec4 v15=vec4(0.8901960784313725,0.9921568627450981,0.7764705882352941,1);float a0=smoothstep(e0,e1,x_37);float a1=smoothstep(e1,e2,x_37);float a2=smoothstep(e2,e3,x_37);float a3=smoothstep(e3,e4,x_37);float a4=smoothstep(e4,e5,x_37);float a5=smoothstep(e5,e6,x_37);float a6=smoothstep(e6,e7,x_37);float a7=smoothstep(e7,e8,x_37);float a8=smoothstep(e8,e9,x_37);float a9=smoothstep(e9,e10,x_37);float a10=smoothstep(e10,e11,x_37);float a11=smoothstep(e11,e12,x_37);float a12=smoothstep(e12,e13,x_37);float a13=smoothstep(e13,e14,x_37);float a14=smoothstep(e14,e15,x_37);return max(mix(v0,v1,a0)*step(e0,x_37)*step(x_37,e1),max(mix(v1,v2,a1)*step(e1,x_37)*step(x_37,e2),max(mix(v2,v3,a2)*step(e2,x_37)*step(x_37,e3),max(mix(v3,v4,a3)*step(e3,x_37)*step(x_37,e4),max(mix(v4,v5,a4)*step(e4,x_37)*step(x_37,e5),max(mix(v5,v6,a5)*step(e5,x_37)*step(x_37,e6),max(mix(v6,v7,a6)*step(e6,x_37)*step(x_37,e7),max(mix(v7,v8,a7)*step(e7,x_37)*step(x_37,e8),max(mix(v8,v9,a8)*step(e8,x_37)*step(x_37,e9),max(mix(v9,v10,a9)*step(e9,x_37)*step(x_37,e10),max(mix(v10,v11,a10)*step(e10,x_37)*step(x_37,e11),max(mix(v11,v12,a11)*step(e11,x_37)*step(x_37,e12),max(mix(v12,v13,a12)*step(e12,x_37)*step(x_37,e13),max(mix(v13,v14,a13)*step(e13,x_37)*step(x_37,e14),mix(v14,v15,a14)*step(e14,x_37)*step(x_37,e15)))))))))))))));}vec3 hsv_to_rgb(vec3 c){vec4 K=vec4(1.0,2.0/3.0,1.0/3.0,3.0);vec3 p=abs(fract(c.xxx+K.xyz)*6.0-K.www);return c.z*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),c.y);}vec3 rgb_to_hsv(vec3 rgb){float Cmax=max(rgb.r,max(rgb.g,rgb.b));float Cmin=min(rgb.r,min(rgb.g,rgb.b));float delta=Cmax-Cmin;vec3 hsv=vec3(0.,0.,Cmax);if(Cmax>Cmin){hsv.y=delta/Cmax;if(rgb.r==Cmax){hsv.x=(rgb.g-rgb.b)/delta;}else{if(rgb.g==Cmax){hsv.x=2.+(rgb.b-rgb.r)/delta;}else{hsv.x=4.+(rgb.r-rgb.g)/delta;}}hsv.x=fract(hsv.x/6.);}return hsv;}float sample_and_apply_sliders(SAMPLER_TYPE channel,vec2 vTexCoord,vec2 sliderValues){float fragIntensity=float(texture(channel,vTexCoord).r);float slidersAppliedToIntensity=(fragIntensity-sliderValues[0])/max(0.0005,(sliderValues[1]-sliderValues[0]));return max(0.0,slidersAppliedToIntensity);}vec3 process_channel_intensity(float intensity,vec3 colorValues,int channelIndex,bool inLensAndUseLens,int lensSelection){float useColorValue=float(int((inLensAndUseLens&&channelIndex==lensSelection)||(!inLensAndUseLens)));vec3 hsvCombo=rgb_to_hsv(max(vec3(colorValues),(1.0-useColorValue)*vec3(255,255,255)));hsvCombo=vec3(hsvCombo.xy,max(0.0,intensity));return hsv_to_rgb(hsvCombo);}vec4 apply_opacity(vec3 color,bool useTransparentColor,vec3 transparentColor,float opacity){return vec4(color,(color==transparentColor&&useTransparentColor)? 0.0 : opacity);}vec4 colormap(float intensity,float opacity,bool useTransparentColor){return apply_opacity(COLORMAP_FUNCTION(min(1.0,intensity)).xyz,useTransparentColor,COLORMAP_FUNCTION(0.0).xyz,opacity);}"},pV={name:"lens-module",defines:{SAMPLER_TYPE:"usampler2D"},fs:"#define GLSLIFY 1\nbool frag_in_lens_bounds(vec2 lensCenter,vec2 vTexCoord,float majorLensAxis,float minorLensAxis,float lensBorderRadius){return pow((lensCenter.x-vTexCoord.x)/majorLensAxis,2.0)+pow((lensCenter.y-vTexCoord.y)/minorLensAxis,2.0)<(1.0-lensBorderRadius);}bool frag_on_lens_bounds(vec2 lensCenter,vec2 vTexCoord,float majorLensAxis,float minorLensAxis,float lensBorderRadius){float ellipseDistance=pow((lensCenter.x-vTexCoord.x)/majorLensAxis,2.0)+pow((lensCenter.y-vTexCoord.y)/minorLensAxis,2.0);return ellipseDistance<=1.0&&ellipseDistance>=(1.0-lensBorderRadius);}"};const vV=[0,0,0],mV={Uint8:{format:WL,dataFormat:BL,type:wL,max:255,sampler:"usampler2D"},Uint16:{format:HL,dataFormat:BL,type:SL,max:65535,sampler:"usampler2D"},Uint32:{format:$L,dataFormat:BL,type:PL,max:2**32-1,sampler:"usampler2D"},Float32:{format:VL,dataFormat:FL,type:CL,max:3.4*10**38,sampler:"sampler2D"},Int8:{format:UL,dataFormat:BL,type:_L,max:127,sampler:"isampler2D"},Int16:{format:GL,dataFormat:BL,type:kL,max:32767,sampler:"isampler2D"},Int32:{format:qL,dataFormat:BL,type:EL,max:2**31-1,sampler:"isampler2D"},Float64:{format:VL,dataFormat:FL,type:CL,max:3.4*10**38,sampler:"sampler2D",cast:e=>new Float32Array(e)}},gV=["jet","hsv","hot","cool","spring","summer","autumn","winter","bone","copper","greys","yignbu","greens","yiorrd","bluered","rdbu","picnic","rainbow","portland","blackbody","earth","electric","alpha","viridis","inferno","magma","plasma","warm","rainbow-soft","bathymetry","cdom","chlorophyll","density","freesurface-blue","freesurface-red","oxygen","par","phase","salinity","temperature","turbidity","velocity-blue","velocity-green","cubehelix"];var yV;function xV(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],o=e[r+1];if(r+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=o(n)):"call"!==i&&"optionalCall"!==i||(n=o(((...e)=>n.call(t,...e))),t=void 0)}return n}function bV(e,t,n){for(let r=0;r<n;r+=1)e.push(t);return e}function _V(e){const t=mV[e];if(!t){const t=Object.keys(mV);throw Error(`Dtype not supported, got ${e}. Must be one of ${t}.`)}return t}function wV({sliderValues:e,colorValues:t,channelIsOn:n,domain:r,dtype:i}){const o=[e.length,t.length];if(o.every((e=>e!==o[0])))throw Error("Inconsistent number of slider values and colors provided");const a=t.map(((e,t)=>n[t]?e.map((e=>e/255)):vV)),s=r&&r[1]||_V(i).max,l=e.map(((e,t)=>n[t]?e:[s,s])),u=6-a.length;if(u<0)throw Error(`${o} channels passed in, but only 6 are allowed.`);const c=bV(a,vV,u);return{paddedSliderValues:bV(l,[s,s],u).reduce(((e,t)=>e.concat(t)),[]),paddedColorValues:c.reduce(((e,t)=>e.concat(t)),[])}}function kV(e){const{viewportId:t,lensRadius:n}=e.props;if(!t)return void e.setState({unprojectLensBounds:[0,0,0,0]});const{mousePosition:r}=e.context,i=e.context.deck.viewManager.views.filter((e=>e.id===t))[0],o=e.context.deck.viewManager.viewState[t],a=i.makeViewport(l(s({},o),{viewState:o}));if(r&&a.containsPixel(r)){const t={x:r.x-a.x,y:r.y-a.y},i=[[t.x-n,t.y],[t.x,t.y+n],[t.x+n,t.y],[t.x,t.y-n]].map(((e,t)=>a.unproject(e)[t%2]));e.setState({unprojectLensBounds:i})}else e.setState({unprojectLensBounds:[0,0,0,0]})}function SV(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],o=e[r+1];if(r+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=o(n)):"call"!==i&&"optionalCall"!==i||(n=o(((...e)=>n.call(t,...e))),t=void 0)}return n}!function(e){e.MAX_INTENSITY_PROJECTION="Maximum Intensity Projection";e.MIN_INTENSITY_PROJECTION="Minimum Intensity Projection";e.ADDITIVE="Additive"}(yV||(yV={}));const EV=[{fs:"#define SHADER_NAME xr-layer-fragment-shader\nprecision highp float;\n#define GLSLIFY 1\nuniform sampler2D channel0;uniform sampler2D channel1;uniform sampler2D channel2;uniform sampler2D channel3;uniform sampler2D channel4;uniform sampler2D channel5;uniform vec2 sliderValues[6];uniform vec3 colorValues[6];uniform float intensityArray[6];uniform float opacity;uniform float majorLensAxis;uniform float minorLensAxis;uniform vec2 lensCenter;uniform bool isLensOn;uniform int lensSelection;uniform vec3 lensBorderColor;uniform float lensBorderRadius;uniform vec3 transparentColor;uniform bool useTransparentColor;varying vec2 vTexCoord;void main(){float intensityValue0=sample_and_apply_sliders(channel0,vTexCoord,sliderValues[0]);float intensityValue1=sample_and_apply_sliders(channel1,vTexCoord,sliderValues[1]);float intensityValue2=sample_and_apply_sliders(channel2,vTexCoord,sliderValues[2]);float intensityValue3=sample_and_apply_sliders(channel3,vTexCoord,sliderValues[3]);float intensityValue4=sample_and_apply_sliders(channel4,vTexCoord,sliderValues[4]);float intensityValue5=sample_and_apply_sliders(channel5,vTexCoord,sliderValues[5]);bool isFragInLensBounds=frag_in_lens_bounds(lensCenter,vTexCoord,majorLensAxis,minorLensAxis,lensBorderRadius);bool isFragOnLensBounds=frag_on_lens_bounds(lensCenter,vTexCoord,majorLensAxis,minorLensAxis,lensBorderRadius);bool inLensAndUseLens=isLensOn&&isFragInLensBounds;vec3 rgbCombo=process_channel_intensity(intensityValue0,colorValues[0],0,inLensAndUseLens,lensSelection);rgbCombo+=process_channel_intensity(intensityValue1,colorValues[1],1,inLensAndUseLens,lensSelection);rgbCombo+=process_channel_intensity(intensityValue2,colorValues[2],2,inLensAndUseLens,lensSelection);rgbCombo+=process_channel_intensity(intensityValue3,colorValues[3],3,inLensAndUseLens,lensSelection);rgbCombo+=process_channel_intensity(intensityValue4,colorValues[4],4,inLensAndUseLens,lensSelection);rgbCombo+=process_channel_intensity(intensityValue5,colorValues[5],5,inLensAndUseLens,lensSelection);rgbCombo=(isLensOn&&isFragOnLensBounds)? lensBorderColor : rgbCombo;gl_FragColor=apply_opacity(rgbCombo,useTransparentColor,transparentColor,opacity);geometry.uv=vTexCoord;DECKGL_FILTER_COLOR(gl_FragColor,geometry);}",fscmap:"#define SHADER_NAME xr-layer-fragment-shader-colormap\nprecision highp float;\n#define GLSLIFY 1\nuniform sampler2D channel0;uniform sampler2D channel1;uniform sampler2D channel2;uniform sampler2D channel3;uniform sampler2D channel4;uniform sampler2D channel5;uniform vec2 sliderValues[6];uniform float opacity;uniform float divisor;uniform bool useTransparentColor;varying vec2 vTexCoord;void main(){float intensityValue0=sample_and_apply_sliders(channel0,vTexCoord,sliderValues[0]);float intensityValue1=sample_and_apply_sliders(channel1,vTexCoord,sliderValues[1]);float intensityValue2=sample_and_apply_sliders(channel2,vTexCoord,sliderValues[2]);float intensityValue3=sample_and_apply_sliders(channel3,vTexCoord,sliderValues[3]);float intensityValue4=sample_and_apply_sliders(channel4,vTexCoord,sliderValues[4]);float intensityValue5=sample_and_apply_sliders(channel5,vTexCoord,sliderValues[5]);float intensityCombo=0.0;intensityCombo+=max(0.0,intensityValue0);intensityCombo+=max(0.0,intensityValue1);intensityCombo+=max(0.0,intensityValue2);intensityCombo+=max(0.0,intensityValue3);intensityCombo+=max(0.0,intensityValue4);intensityCombo+=max(0.0,intensityValue5);gl_FragColor=colormap(intensityCombo,opacity,useTransparentColor);geometry.uv=vTexCoord;DECKGL_FILTER_COLOR(gl_FragColor,geometry);}",vs:"#define GLSLIFY 1\n#define SHADER_NAME xr-layer-vertex-shader\nattribute vec2 texCoords;attribute vec3 positions;attribute vec3 positions64Low;attribute vec3 instancePickingColors;varying vec2 vTexCoord;void main(void){geometry.worldPosition=positions;geometry.uv=texCoords;geometry.pickingColor=instancePickingColors;gl_Position=project_position_to_clipspace(positions,positions64Low,vec3(0.0),geometry.position);DECKGL_FILTER_GL_POSITION(gl_Position,geometry);vTexCoord=texCoords;vec4 color=vec4(0.0);DECKGL_FILTER_COLOR(color,geometry);}"},{fs:"#version 300 es\n#define SHADER_NAME xr-layer-fragment-shader\nprecision highp float;precision highp int;precision highp SAMPLER_TYPE;\n#define GLSLIFY 1\nuniform SAMPLER_TYPE channel0;uniform SAMPLER_TYPE channel1;uniform SAMPLER_TYPE channel2;uniform SAMPLER_TYPE channel3;uniform SAMPLER_TYPE channel4;uniform SAMPLER_TYPE channel5;uniform vec2 sliderValues[6];uniform vec3 colorValues[6];uniform float opacity;uniform float majorLensAxis;uniform float minorLensAxis;uniform vec2 lensCenter;uniform bool isLensOn;uniform int lensSelection;uniform vec3 lensBorderColor;uniform float lensBorderRadius;uniform vec3 transparentColor;uniform bool useTransparentColor;in vec2 vTexCoord;out vec4 color;void main(){float intensityValue0=sample_and_apply_sliders(channel0,vTexCoord,sliderValues[0]);float intensityValue1=sample_and_apply_sliders(channel1,vTexCoord,sliderValues[1]);float intensityValue2=sample_and_apply_sliders(channel2,vTexCoord,sliderValues[2]);float intensityValue3=sample_and_apply_sliders(channel3,vTexCoord,sliderValues[3]);float intensityValue4=sample_and_apply_sliders(channel4,vTexCoord,sliderValues[4]);float intensityValue5=sample_and_apply_sliders(channel5,vTexCoord,sliderValues[5]);float intensityArray[6]=float[6](intensityValue0,intensityValue1,intensityValue2,intensityValue3,intensityValue4,intensityValue5);bool isFragInLensBounds=frag_in_lens_bounds(lensCenter,vTexCoord,majorLensAxis,minorLensAxis,lensBorderRadius);bool isFragOnLensBounds=frag_on_lens_bounds(lensCenter,vTexCoord,majorLensAxis,minorLensAxis,lensBorderRadius);bool inLensAndUseLens=isLensOn&&isFragInLensBounds;vec3 rgbCombo=vec3(0.0);for(int i=0;i<6;i++){rgbCombo+=process_channel_intensity(intensityArray[i],colorValues[i],i,inLensAndUseLens,lensSelection);}rgbCombo=(isLensOn&&isFragOnLensBounds)? lensBorderColor : rgbCombo;color=apply_opacity(rgbCombo,useTransparentColor,transparentColor,opacity);geometry.uv=vTexCoord;DECKGL_FILTER_COLOR(color,geometry);}",fscmap:"#version 300 es\n#define SHADER_NAME xr-layer-fragment-shader\nprecision highp float;precision highp int;precision highp SAMPLER_TYPE;\n#define GLSLIFY 1\nuniform SAMPLER_TYPE channel0;uniform SAMPLER_TYPE channel1;uniform SAMPLER_TYPE channel2;uniform SAMPLER_TYPE channel3;uniform SAMPLER_TYPE channel4;uniform SAMPLER_TYPE channel5;uniform vec2 sliderValues[6];uniform float opacity;uniform bool useTransparentColor;in vec2 vTexCoord;out vec4 color;void main(){float intensityValue0=sample_and_apply_sliders(channel0,vTexCoord,sliderValues[0]);float intensityValue1=sample_and_apply_sliders(channel1,vTexCoord,sliderValues[1]);float intensityValue2=sample_and_apply_sliders(channel2,vTexCoord,sliderValues[2]);float intensityValue3=sample_and_apply_sliders(channel3,vTexCoord,sliderValues[3]);float intensityValue4=sample_and_apply_sliders(channel4,vTexCoord,sliderValues[4]);float intensityValue5=sample_and_apply_sliders(channel5,vTexCoord,sliderValues[5]);float intensityArray[6]=float[6](intensityValue0,intensityValue1,intensityValue2,intensityValue3,intensityValue4,intensityValue5);float intensityCombo=0.0;for(int i=0;i<6;i++){intensityCombo+=max(0.0,intensityArray[i]);}color=colormap(intensityCombo,opacity,useTransparentColor);geometry.uv=vTexCoord;DECKGL_FILTER_COLOR(color,geometry);}",vs:"#version 300 es\n#define GLSLIFY 1\n#define SHADER_NAME xr-layer-vertex-shader\nin vec2 texCoords;in vec3 positions;in vec3 positions64Low;in vec3 instancePickingColors;out vec2 vTexCoord;void main(void){geometry.worldPosition=positions;geometry.uv=texCoords;geometry.pickingColor=instancePickingColors;gl_Position=project_position_to_clipspace(positions,positions64Low,vec3(0.0),geometry.position);DECKGL_FILTER_GL_POSITION(gl_Position,geometry);vTexCoord=texCoords;vec4 color=vec4(0.0);DECKGL_FILTER_COLOR(color,geometry);}"}];function PV(e,t){const n=Rw(e,gw),r=Rw(e,xw);if(!n)throw new Error("WebGL1 context does not support floating point textures.  Unable to display raster data.");return r||t!==RL?t:(console.warn("LINEAR filtering not supported in WebGL1 context.  Falling back to NEAREST."),ML)}function CV(e,t,n){const r=n===RL;if(!Fx(t))return{format:TL,dataFormat:TL,type:CL,sampler:"sampler2D",shaderModule:EV[0],filter:PV(t,n),cast:e=>new Float32Array(e)};const i=_V(r?"Float32":e);return l(s({},i),{shaderModule:EV[1],filter:n,cast:r?e=>new Float32Array(e):e=>e})}const AV={pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:yC.CARTESIAN,channelData:{type:"object",value:{},compare:!0},bounds:{type:"array",value:[0,0,1,1],compare:!0},colorValues:{type:"array",value:[],compare:!0},sliderValues:{type:"array",value:[],compare:!0},channelIsOn:{type:"array",value:[],compare:!0},opacity:{type:"number",value:1,compare:!0},dtype:{type:"string",value:"Uint16",compare:!0},colormap:{type:"string",value:"",compare:!0},isLensOn:{type:"boolean",value:!1,compare:!0},lensSelection:{type:"number",value:0,compare:!0},lensBorderColor:{type:"array",value:[255,255,255],compare:!0},lensBorderRadius:{type:"number",value:.02,compare:!0},unprojectLensBounds:{type:"array",value:[0,0,0,0],compare:!0},transparentColor:{type:"array",value:null,compare:!0},interpolation:{type:"number",value:ML,compare:!0}},OV=class extends xM{getShaders(){const{colormap:e,dtype:t,interpolation:n}=this.props,{shaderModule:r,sampler:i}=CV(t,this.context.gl,n);return super.getShaders({fs:e?r.fscmap:r.fs,vs:r.vs,defines:{SAMPLER_TYPE:i,COLORMAP_FUNCTION:e||"viridis"},modules:[NC,vA,dV,pV]})}initializeState(){const{gl:e}=this.context;e.pixelStorei(mL,1),e.pixelStorei(gL,1);this.getAttributeManager().add({positions:{size:3,type:AL,fp64:this.use64bitPositions(),update:this.calculatePositions,noAlloc:!0}}),this.setState({numInstances:1,positions:new Float64Array(12)})}finalizeState(){super.finalizeState(),this.state.textures&&Object.values(this.state.textures).forEach((e=>e&&e.delete()))}updateState({props:e,oldProps:t,changeFlags:n}){if(n.extensionsChanged||e.colormap!==t.colormap||e.interpolation!==t.interpolation){const{gl:e}=this.context;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(e)}),this.getAttributeManager().invalidateAll()}(e.channelData!==t.channelData&&SV([e,"access",e=>e.channelData,"optionalAccess",e=>e.data])!==SV([t,"access",e=>e.channelData,"optionalAccess",e=>e.data])||e.interpolation!==t.interpolation)&&this.loadChannelTextures(e.channelData);const r=this.getAttributeManager();e.bounds!==t.bounds&&r.invalidate("positions")}_getModel(e){return e?new KP(e,l(s({},this.getShaders()),{id:this.props.id,geometry:new fC({drawMode:hL,vertexCount:4,attributes:{texCoords:new Float32Array([0,1,0,0,1,0,1,1])}}),isInstanced:!1})):null}calculatePositions(e){const{positions:t}=this.state,{bounds:n}=this.props;t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[0],t[4]=n[3],t[5]=0,t[6]=n[2],t[7]=n[3],t[8]=0,t[9]=n[2],t[10]=n[1],t[11]=0,e.value=t}draw({uniforms:e}){const{textures:t,model:n}=this.state;if(t&&n){const{sliderValues:r,colorValues:i,opacity:o,domain:a,dtype:u,channelIsOn:c,unprojectLensBounds:f,bounds:h,isLensOn:d,lensSelection:p,lensBorderColor:v,lensBorderRadius:m,transparentColor:g}=this.props,y=Object.values(t).filter((e=>e)).length,{paddedSliderValues:x,paddedColorValues:b}=wV({sliderValues:r.slice(0,y),colorValues:i.slice(0,y),channelIsOn:c.slice(0,y),domain:a,dtype:u}),[_,w,k,S]=f,[E,P,C,A]=h,O=(_-E)/(C-E),T=(w-A)/(P-A),M=(k-E)/(C-E),R=(S-A)/(P-A);n.setUniforms(s(l(s({},e),{colorValues:b,sliderValues:x,opacity:o,majorLensAxis:(M-O)/2,minorLensAxis:(T-R)/2,lensCenter:[(M+O)/2,(T+R)/2],isLensOn:d,lensSelection:p,lensBorderColor:v,lensBorderRadius:m,transparentColor:(g||[0,0,0]).map((e=>e/255)),useTransparentColor:Boolean(g)}),t)).draw()}}loadChannelTextures(e){const t={channel0:null,channel1:null,channel2:null,channel3:null,channel4:null,channel5:null};this.state.textures&&Object.values(this.state.textures).forEach((e=>e&&e.delete())),e&&Object.keys(e).length>0&&e.data&&(e.data.forEach(((n,r)=>{t[`channel${r}`]=this.dataToTexture(n,e.width,e.height)}),this),this.setState({textures:t}))}dataToTexture(e,t,n){const{interpolation:r}=this.props,i=CV(this.props.dtype,this.context.gl,r);return new U_(this.context.gl,{width:t,height:n,data:(o=SV([i,"access",e=>e.cast,"optionalCall",t=>t(e)]),a=()=>e,null!=o?o:a()),mipmaps:!1,parameters:{[LL]:i.filter,[IL]:i.filter,[jL]:NL,[DL]:NL},format:i.format,dataFormat:i.dataFormat,type:i.type});var o,a}};OV.layerName="XRLayer",OV.defaultProps=AV;const TV={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},MV=l(s({},nj.defaultProps),{pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:yC.CARTESIAN});class RV extends nj{_getModel(e){const{photometricInterpretation:t,transparentColorInHook:n}=this.props,r=((e,t)=>{const n=t?"true":"false",r=`vec3(${(t||[0,0,0]).map((e=>String(e/255))).join(",")})`;switch(e){case TV.RGB:return`color[3] = (${n} && (color.rgb == ${r})) ? 0.0 : color.a;`;case TV.WhiteIsZero:return`          float value = 1.0 - (color.r / 256.0);\n          color = vec4(value, value, value, (${n} && vec3(value, value, value) == ${r}) ? 0.0 : color.a);\n        `;case TV.BlackIsZero:return`          float value = (color.r / 256.0);\n          color = vec4(value, value, value, (${n} && vec3(value, value, value) == ${r}) ? 0.0 : color.a);\n        `;case TV.YCbCr:return`          float y = color[0];\n          float cb = color[1];\n          float cr = color[2];\n          color[0] = (y + (1.40200 * (cr - .5)));\n          color[1] = (y - (0.34414 * (cb - .5)) - (0.71414 * (cr - .5)));\n          color[2] = (y + (1.77200 * (cb - .5)));\n          color[3] = (${n} && distance(color.rgb, ${r}) < 0.01) ? 0.0 : color.a;\n        `;default:return console.error("Unsupported photometric interpretation or none provided.  No transformation will be done to image data"),""}})(t,n);return e?new KP(e,l(s({},this.getShaders()),{id:this.props.id,geometry:new fC({drawMode:fL,vertexCount:6}),isInstanced:!1,inject:{"fs:DECKGL_FILTER_COLOR":r}})):null}}const IV=class extends qI{initializeState(e){const{gl:t}=this.context;t.pixelStorei(mL,1),t.pixelStorei(gL,1),super.initializeState(e)}renderLayers(){const{photometricInterpretation:e,transparentColor:t}=this.props,n=(e=>{switch(e){case TV.RGB:return[0,0,0,0];case TV.WhiteIsZero:return[255,255,255,0];case TV.BlackIsZero:return[0,0,0,0];case TV.YCbCr:return[16,128,128,0];default:return console.error("Unsupported photometric interpretation or none provided.  No transformation will be done to image data"),[0,0,0,0]}})(e);return new RV(this.props,{transparentColor:n,transparentColorInHook:t,id:`${this.props.id}-wrapped`})}};function LV(e){const t=e[e.length-1];return 3===t||4===t}function jV(e){const t=LV(e.shape),[n,r]=e.shape.slice(t?-3:-2);return{height:n,width:r}}IV.layerName="BitmapLayer",IV.PHOTOMETRIC_INTERPRETATIONS=TV,IV.defaultProps=l(s({},MV),{image:{type:"object",value:{},compare:!0},transparentColor:{type:"array",value:[0,0,0],compare:!0},photometricInterpretation:{type:"number",value:2,compare:!0}}),RV.defaultProps=MV,RV.layerName="BitmapLayerWrapper";const DV={pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:yC.CARTESIAN,sliderValues:{type:"array",value:[],compare:!0},colorValues:{type:"array",value:[],compare:!0},channelIsOn:{type:"array",value:[],compare:!0},renderSubLayers:{type:"function",value:function(e){const{bbox:{left:t,top:n,right:r,bottom:i},x:o,y:a,z:s}=e.tile,{data:l,id:u,loader:c,maxZoom:f}=e;if([t,i,r,n].some((e=>e<0))||!l)return null;const h=c[0],{height:d,width:p}=jV(h),v=[t,l.height<h.tileSize?d:i,l.width<h.tileSize?p:r,n];if(LV(h.shape)){const{photometricInterpretation:t=2}=h.meta;return new IV(e,{image:l,photometricInterpretation:t,bounds:v,id:`tile-sub-layer-${v}-${u}`,tileId:{x:o,y:a,z:s}})}return new OV(e,{channelData:l,bounds:v,id:`tile-sub-layer-${v}-${u}`,tileId:{x:o,y:a,z:s},interpolation:s===f?ML:RL})},compare:!1},colormap:{type:"string",value:"",compare:!0},dtype:{type:"string",value:"Uint16",compare:!0},domain:{type:"array",value:[],compare:!0},viewportId:{type:"string",value:"",compare:!0},unprojectLensBounds:{type:"array",value:[0,0,0,0],compare:!0},isLensOn:{type:"boolean",value:!1,compare:!0},lensSelection:{type:"number",value:0,compare:!0},lensRadius:{type:"number",value:100,compare:!0},lensBorderColor:{type:"array",value:[255,255,255],compare:!0},lensBorderRadius:{type:"number",value:.02,compare:!0},transparentColor:{type:"array",value:null,compare:!0},interpolation:{type:"number",value:null,compare:!0}};class NV extends Mz{_updateTileset(){this.props.viewportId||super._updateTileset(),(this.props.viewportId&&this.context.viewport.id===this.props.viewportId||!this.state.tileset._viewport)&&super._updateTileset()}}NV.layerName="MultiscaleImageLayerBase",NV.defaultProps=DV;const FV={pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:yC.CARTESIAN,sliderValues:{type:"array",value:[],compare:!0},channelIsOn:{type:"array",value:[],compare:!0},colorValues:{type:"array",value:[],compare:!0},loaderSelection:{type:"array",value:[],compare:!0},colormap:{type:"string",value:"",compare:!0},domain:{type:"array",value:[],compare:!0},viewportId:{type:"string",value:"",compare:!0},loader:{type:"object",value:{getRaster:async()=>({data:[],height:0,width:0}),dtype:"Uint16"},compare:!0},isLensOn:{type:"boolean",value:!1,compare:!0},lensSelection:{type:"number",value:0,compare:!0},lensRadius:{type:"number",value:100,compare:!0},lensBorderColor:{type:"array",value:[255,255,255],compare:!0},lensBorderRadius:{type:"number",value:.02,compare:!0},onClick:{type:"function",value:null,compare:!0},transparentColor:{type:"array",value:null,compare:!0},onViewportLoad:{type:"function",value:null,compare:!0},interpolation:{type:"number",value:ML,compare:!0}},zV=class extends qI{initializeState(){this.state={unprojectLensBounds:[0,0,0,0],width:0,height:0,data:[]},this.context.deck&&this.context.deck.eventManager.on({pointermove:()=>kV(this),pointerleave:()=>kV(this),wheel:()=>kV(this)})}finalizeState(){this.state.abortController.abort()}updateState({changeFlags:e,props:t,oldProps:n}){const{propsChanged:r}=e,i="string"==typeof r&&r.includes("props.loader"),o=t.loaderSelection!==n.loaderSelection;if(i||o){const{loader:e,loaderSelection:t=[],onViewportLoad:n}=this.props,r=new AbortController;this.setState({abortController:r});const{signal:i}=r,o=t=>e.getRaster({selection:t,signal:i}),a=t.map(o);Promise.all(a).then((t=>{const r={data:t.map((e=>e.data)),width:t[0].width,height:t[0].height};LV(e.shape)&&(r.data=r.data[0],r.data.length===r.width*r.height*3&&(r.format=OL,r.dataFormat=OL)),n&&n(r),this.setState(s({},r))})).catch((e=>{if("__vivSignalAborted"!==e)throw e}))}}getPickingInfo({info:e,sourceLayer:t}){return e.sourceLayer=t,e.tile=t.props.tile,e}renderLayers(){const{loader:e,id:t}=this.props,{dtype:n}=e,{width:r,height:i,data:o,unprojectLensBounds:a}=this.state;if(!r||!i)return null;const s=[0,i,r,0];if(LV(e.shape)){const{photometricInterpretation:n=2}=e.meta;return new IV(this.props,{image:this.state,photometricInterpretation:n,bounds:s,id:`image-sub-layer-${s}-${t}`})}return new OV(this.props,{channelData:{data:o,height:i,width:r},bounds:s,id:`image-sub-layer-${s}-${t}`,dtype:n,unprojectLensBounds:a})}};zV.layerName="ImageLayer",zV.defaultProps=FV;const BV=class extends qI{initializeState(){this.state={unprojectLensBounds:[0,0,0,0]},this.context.deck&&this.context.deck.eventManager.on({pointermove:()=>kV(this),pointerleave:()=>kV(this),wheel:()=>kV(this)})}renderLayers(){const{loader:e,loaderSelection:t,opacity:n,viewportId:r,onTileError:i,onHover:o,id:a,onClick:s,modelMatrix:l,transparentColor:u,excludeBackground:c,refinementStrategy:f}=this.props,{tileSize:h,dtype:d}=e[0],{unprojectLensBounds:p}=this.state,v=Math.log2(512/h),{height:m,width:g}=jV(e[0]),y=new NV(this.props,{id:`Tiled-Image-${a}`,getTileData:async({x:n,y:r,z:i,signal:o})=>{if(!t||0===t.length)return null;const a=Math.round(-i+v),s=t=>{const i={x:n,y:r,selection:t,signal:o};return e[a].getTile(i)};try{const n=await Promise.all(t.map(s)),r={data:n.map((e=>e.data)),width:n[0].width,height:n[0].height};return LV(e[a].shape)?(r.data=r.data[0],r.data.length===r.width*r.height*3&&(r.format=OL,r.dataFormat=OL),r):r}catch(s$){if("__vivSignalAborted"===s$)return null;throw s$}},dtype:d,tileSize:l?h*(1/l.getScale()[0]):h,extent:[0,0,g,m],minZoom:Math.round(-(e.length-1)+v),maxZoom:Math.round(v),refinementStrategy:f||(1===n?"best-available":"no-overlap"),updateTriggers:{getTileData:[e,t]},onTileError:i||e[0].onTileError,unprojectLensBounds:p}),x=e[e.length-1],b="function"==typeof x.getRaster,_=l?l.clone():new lP;return[b&&!c&&new zV(this.props,{id:`Background-Image-${a}`,loader:x,modelMatrix:_.scale(2**(e.length-1)),visible:!(1!==n||r&&this.context.viewport.id!==r||u),pickable:{type:"boolean",value:!0,compare:!0},onHover:o,onClick:s,interpolation:RL}),y]}};BV.layerName="MultiscaleImageLayer",BV.defaultProps={pickable:{type:"boolean",value:!0,compare:!0},onHover:{type:"function",value:null,compare:!1},sliderValues:{type:"array",value:[],compare:!0},colorValues:{type:"array",value:[],compare:!0},channelIsOn:{type:"array",value:[],compare:!0},opacity:{type:"number",value:1,compare:!0},colormap:{type:"string",value:"",compare:!0},domain:{type:"array",value:[],compare:!0},viewportId:{type:"string",value:"",compare:!0},isLensOn:{type:"boolean",value:!1,compare:!0},lensSelection:{type:"number",value:0,compare:!0},lensRadius:{type:"number",value:100,compare:!0},lensBorderColor:{type:"array",value:[255,255,255],compare:!0},lensBorderRadius:{type:"number",value:.02,compare:!0},maxRequests:{type:"number",value:10,compare:!0},onClick:{type:"function",value:null,compare:!0},transparentColor:{type:"array",value:null,compare:!0},refinementStrategy:{type:"string",value:null,compare:!0},excludeBackground:{type:"boolean",value:!1,compare:!0}};const VV=class extends qI{renderLayers(){const{loader:e,id:t,zoom:n,boundingBox:r,boundingBoxColor:i,boundingBoxOutlineWidth:o,viewportOutlineColor:a,viewportOutlineWidth:s,overviewScale:l}=this.props,{width:u,height:c}=jV(e[0]),f=e.length-1,h=e[f];return[new zV(this.props,{id:`viewport-${t}`,modelMatrix:(new lP).scale(2**f*l),loader:h}),new vN({id:`bounding-box-overview-${t}`,coordinateSystem:yC.CARTESIAN,data:[r],getPolygon:e=>e,filled:!1,stroked:!0,getLineColor:i,getLineWidth:o*2**n}),new vN({id:`viewport-outline-${t}`,coordinateSystem:yC.CARTESIAN,data:[[[0,0],[u*l,0],[u*l,c*l],[0,c*l]]],getPolygon:e=>e,filled:!1,stroked:!0,getLineColor:a,getLineWidth:s*2**n})]}};VV.layerName="OverviewLayer",VV.defaultProps={pickable:{type:"boolean",value:!0,compare:!0},loader:{type:"object",value:{getRaster:async()=>({data:[],height:0,width:0}),getRasterSize:()=>({height:0,width:0}),dtype:"<u2"},compare:!0},id:{type:"string",value:"",compare:!0},boundingBox:{type:"array",value:[[0,0],[0,1],[1,1],[1,0]],compare:!0},boundingBoxColor:{type:"array",value:[255,0,0],compare:!0},boundingBoxOutlineWidth:{type:"number",value:1,compare:!0},viewportOutlineColor:{type:"array",value:[255,190,0],compare:!0},viewportOutlineWidth:{type:"number",value:2,compare:!0},overviewScale:{type:"number",value:1,compare:!0},zoom:{type:"number",value:1,compare:!0}};const UV=class extends qI{renderLayers(){const{id:e,unit:t,size:n,position:r,viewState:i,length:o}=this.props,a=function(e){const t=(new sL).makeViewport({viewState:e,height:e.height,width:e.width});return[t.unproject([0,0]),t.unproject([t.width,0]),t.unproject([t.width,t.height]),t.unproject([0,t.height])]}(i),{zoom:s}=i,l=.05*(a[2][0]-a[0][0]),u=Math.max(2**(1.5-s),.007*(a[2][1]-a[0][1])),c=l*n,[f,h]=function(e,t,n){const r=e[2][0]-e[0][0];switch(t){case"bottom-right":return[e[2][1]-(e[2][1]-e[0][1])*n,e[2][0]-r*n];case"top-right":return[(e[2][1]-e[0][1])*n,e[2][0]-r*n];case"top-left":return[(e[2][1]-e[0][1])*n,r*n];case"bottom-left":return[e[2][1]-(e[2][1]-e[0][1])*n,r*n];default:throw new Error(`Position ${t} not found`)}}(a,r,o);var d;return[new bj({id:`scale-bar-length-${e}`,coordinateSystem:yC.CARTESIAN,data:[[[h,f],[h+l,f]]],getSourcePosition:e=>e[0],getTargetPosition:e=>e[1],getWidth:2,getColor:[220,220,220]}),new bj({id:`scale-bar-height-left-${e}`,coordinateSystem:yC.CARTESIAN,data:[[[h,f-u],[h,f+u]]],getSourcePosition:e=>e[0],getTargetPosition:e=>e[1],getWidth:2,getColor:[220,220,220]}),new bj({id:`scale-bar-height-right-${e}`,coordinateSystem:yC.CARTESIAN,data:[[[h+l,f-u],[h+l,f+u]]],getSourcePosition:e=>e[0],getTargetPosition:e=>e[1],getWidth:2,getColor:[220,220,220]}),new vF({id:`units-label-layer-${e}`,coordinateSystem:yC.CARTESIAN,data:[{text:String(c).slice(0,5).replace(/\.$/,"")+t,position:[h+.5*l,f+4*u]}],getColor:[220,220,220,255],getSize:12,fontFamily:"-apple-system, 'Helvetica Neue', Arial, sans-serif",sizeUnits:"meters",sizeScale:2**-s,characterSet:[...t.split(""),...(d=10,[...Array(d).keys()]).map((e=>String(e))),"."]})]}};UV.layerName="ScaleBarLayer",UV.defaultProps={pickable:{type:"boolean",value:!0,compare:!0},viewState:{type:"object",value:{zoom:0,target:[0,0,0]},compare:!0},unit:{type:"string",value:"",compare:!0},size:{type:"number",value:1,compare:!0},position:{type:"string",value:"bottom-right",compare:!0},length:{type:"number",value:.085,compare:!0}};var WV={name:"channel-intensity-module",fs:"#define GLSLIFY 1\nvec4 jet(float x_17){const float e0=0.0;const vec4 v0=vec4(0,0,0.5137254901960784,1);const float e1=0.125;const vec4 v1=vec4(0,0.23529411764705882,0.6666666666666666,1);const float e2=0.375;const vec4 v2=vec4(0.0196078431372549,1,1,1);const float e3=0.625;const vec4 v3=vec4(1,1,0,1);const float e4=0.875;const vec4 v4=vec4(0.9803921568627451,0,0,1);const float e5=1.0;const vec4 v5=vec4(0.5019607843137255,0,0,1);float a0=smoothstep(e0,e1,x_17);float a1=smoothstep(e1,e2,x_17);float a2=smoothstep(e2,e3,x_17);float a3=smoothstep(e3,e4,x_17);float a4=smoothstep(e4,e5,x_17);return max(mix(v0,v1,a0)*step(e0,x_17)*step(x_17,e1),max(mix(v1,v2,a1)*step(e1,x_17)*step(x_17,e2),max(mix(v2,v3,a2)*step(e2,x_17)*step(x_17,e3),max(mix(v3,v4,a3)*step(e3,x_17)*step(x_17,e4),mix(v4,v5,a4)*step(e4,x_17)*step(x_17,e5)))));}vec4 hsv_0(float x_18){const float e0=0.0;const vec4 v0=vec4(1,0,0,1);const float e1=0.169;const vec4 v1=vec4(0.9921568627450981,1,0.00784313725490196,1);const float e2=0.173;const vec4 v2=vec4(0.9686274509803922,1,0.00784313725490196,1);const float e3=0.337;const vec4 v3=vec4(0,0.9882352941176471,0.01568627450980392,1);const float e4=0.341;const vec4 v4=vec4(0,0.9882352941176471,0.0392156862745098,1);const float e5=0.506;const vec4 v5=vec4(0.00392156862745098,0.9764705882352941,1,1);const float e6=0.671;const vec4 v6=vec4(0.00784313725490196,0,0.9921568627450981,1);const float e7=0.675;const vec4 v7=vec4(0.03137254901960784,0,0.9921568627450981,1);const float e8=0.839;const vec4 v8=vec4(1,0,0.984313725490196,1);const float e9=0.843;const vec4 v9=vec4(1,0,0.9607843137254902,1);const float e10=1.0;const vec4 v10=vec4(1,0,0.023529411764705882,1);float a0=smoothstep(e0,e1,x_18);float a1=smoothstep(e1,e2,x_18);float a2=smoothstep(e2,e3,x_18);float a3=smoothstep(e3,e4,x_18);float a4=smoothstep(e4,e5,x_18);float a5=smoothstep(e5,e6,x_18);float a6=smoothstep(e6,e7,x_18);float a7=smoothstep(e7,e8,x_18);float a8=smoothstep(e8,e9,x_18);float a9=smoothstep(e9,e10,x_18);return max(mix(v0,v1,a0)*step(e0,x_18)*step(x_18,e1),max(mix(v1,v2,a1)*step(e1,x_18)*step(x_18,e2),max(mix(v2,v3,a2)*step(e2,x_18)*step(x_18,e3),max(mix(v3,v4,a3)*step(e3,x_18)*step(x_18,e4),max(mix(v4,v5,a4)*step(e4,x_18)*step(x_18,e5),max(mix(v5,v6,a5)*step(e5,x_18)*step(x_18,e6),max(mix(v6,v7,a6)*step(e6,x_18)*step(x_18,e7),max(mix(v7,v8,a7)*step(e7,x_18)*step(x_18,e8),max(mix(v8,v9,a8)*step(e8,x_18)*step(x_18,e9),mix(v9,v10,a9)*step(e9,x_18)*step(x_18,e10))))))))));}vec4 hot(float x_13){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.3;const vec4 v1=vec4(0.9019607843137255,0,0,1);const float e2=0.6;const vec4 v2=vec4(1,0.8235294117647058,0,1);const float e3=1.0;const vec4 v3=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_13);float a1=smoothstep(e1,e2,x_13);float a2=smoothstep(e2,e3,x_13);return max(mix(v0,v1,a0)*step(e0,x_13)*step(x_13,e1),max(mix(v1,v2,a1)*step(e1,x_13)*step(x_13,e2),mix(v2,v3,a2)*step(e2,x_13)*step(x_13,e3)));}vec4 cool(float x_24){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.13;const vec4 v1=vec4(0.4549019607843137,0,0.8549019607843137,1);const float e2=0.25;const vec4 v2=vec4(0.3843137254901961,0.2901960784313726,0.9294117647058824,1);const float e3=0.38;const vec4 v3=vec4(0.26666666666666666,0.5725490196078431,0.9058823529411765,1);const float e4=0.5;const vec4 v4=vec4(0,0.8,0.7725490196078432,1);const float e5=0.63;const vec4 v5=vec4(0,0.9686274509803922,0.5725490196078431,1);const float e6=0.75;const vec4 v6=vec4(0,1,0.34509803921568627,1);const float e7=0.88;const vec4 v7=vec4(0.1568627450980392,1,0.03137254901960784,1);const float e8=1.0;const vec4 v8=vec4(0.5764705882352941,1,0,1);float a0=smoothstep(e0,e1,x_24);float a1=smoothstep(e1,e2,x_24);float a2=smoothstep(e2,e3,x_24);float a3=smoothstep(e3,e4,x_24);float a4=smoothstep(e4,e5,x_24);float a5=smoothstep(e5,e6,x_24);float a6=smoothstep(e6,e7,x_24);float a7=smoothstep(e7,e8,x_24);return max(mix(v0,v1,a0)*step(e0,x_24)*step(x_24,e1),max(mix(v1,v2,a1)*step(e1,x_24)*step(x_24,e2),max(mix(v2,v3,a2)*step(e2,x_24)*step(x_24,e3),max(mix(v3,v4,a3)*step(e3,x_24)*step(x_24,e4),max(mix(v4,v5,a4)*step(e4,x_24)*step(x_24,e5),max(mix(v5,v6,a5)*step(e5,x_24)*step(x_24,e6),max(mix(v6,v7,a6)*step(e6,x_24)*step(x_24,e7),mix(v7,v8,a7)*step(e7,x_24)*step(x_24,e8))))))));}vec4 spring(float x_5){const float e0=0.0;const vec4 v0=vec4(1,0,1,1);const float e1=1.0;const vec4 v1=vec4(1,1,0,1);float a0=smoothstep(e0,e1,x_5);return mix(v0,v1,a0)*step(e0,x_5)*step(x_5,e1);}vec4 summer(float x_12){const float e0=0.0;const vec4 v0=vec4(0,0.5019607843137255,0.4,1);const float e1=1.0;const vec4 v1=vec4(1,1,0.4,1);float a0=smoothstep(e0,e1,x_12);return mix(v0,v1,a0)*step(e0,x_12)*step(x_12,e1);}vec4 autumn(float x_25){const float e0=0.0;const vec4 v0=vec4(1,0,0,1);const float e1=1.0;const vec4 v1=vec4(1,1,0,1);float a0=smoothstep(e0,e1,x_25);return mix(v0,v1,a0)*step(e0,x_25)*step(x_25,e1);}vec4 winter(float x_16){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=1.0;const vec4 v1=vec4(0,1,0.5019607843137255,1);float a0=smoothstep(e0,e1,x_16);return mix(v0,v1,a0)*step(e0,x_16)*step(x_16,e1);}vec4 bone(float x_15){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.376;const vec4 v1=vec4(0.32941176470588235,0.32941176470588235,0.4549019607843137,1);const float e2=0.753;const vec4 v2=vec4(0.6627450980392157,0.7843137254901961,0.7843137254901961,1);const float e3=1.0;const vec4 v3=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_15);float a1=smoothstep(e1,e2,x_15);float a2=smoothstep(e2,e3,x_15);return max(mix(v0,v1,a0)*step(e0,x_15)*step(x_15,e1),max(mix(v1,v2,a1)*step(e1,x_15)*step(x_15,e2),mix(v2,v3,a2)*step(e2,x_15)*step(x_15,e3)));}vec4 copper(float x_10){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.804;const vec4 v1=vec4(1,0.6274509803921569,0.4,1);const float e2=1.0;const vec4 v2=vec4(1,0.7803921568627451,0.4980392156862745,1);float a0=smoothstep(e0,e1,x_10);float a1=smoothstep(e1,e2,x_10);return max(mix(v0,v1,a0)*step(e0,x_10)*step(x_10,e1),mix(v1,v2,a1)*step(e1,x_10)*step(x_10,e2));}vec4 greys(float x_4){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=1.0;const vec4 v1=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_4);return mix(v0,v1,a0)*step(e0,x_4)*step(x_4,e1);}vec4 yignbu(float x_32){const float e0=0.0;const vec4 v0=vec4(0.03137254901960784,0.11372549019607843,0.34509803921568627,1);const float e1=0.125;const vec4 v1=vec4(0.1450980392156863,0.20392156862745098,0.5803921568627451,1);const float e2=0.25;const vec4 v2=vec4(0.13333333333333333,0.3686274509803922,0.6588235294117647,1);const float e3=0.375;const vec4 v3=vec4(0.11372549019607843,0.5686274509803921,0.7529411764705882,1);const float e4=0.5;const vec4 v4=vec4(0.2549019607843137,0.7137254901960784,0.7686274509803922,1);const float e5=0.625;const vec4 v5=vec4(0.4980392156862745,0.803921568627451,0.7333333333333333,1);const float e6=0.75;const vec4 v6=vec4(0.7803921568627451,0.9137254901960784,0.7058823529411765,1);const float e7=0.875;const vec4 v7=vec4(0.9294117647058824,0.9725490196078431,0.8509803921568627,1);const float e8=1.0;const vec4 v8=vec4(1,1,0.8509803921568627,1);float a0=smoothstep(e0,e1,x_32);float a1=smoothstep(e1,e2,x_32);float a2=smoothstep(e2,e3,x_32);float a3=smoothstep(e3,e4,x_32);float a4=smoothstep(e4,e5,x_32);float a5=smoothstep(e5,e6,x_32);float a6=smoothstep(e6,e7,x_32);float a7=smoothstep(e7,e8,x_32);return max(mix(v0,v1,a0)*step(e0,x_32)*step(x_32,e1),max(mix(v1,v2,a1)*step(e1,x_32)*step(x_32,e2),max(mix(v2,v3,a2)*step(e2,x_32)*step(x_32,e3),max(mix(v3,v4,a3)*step(e3,x_32)*step(x_32,e4),max(mix(v4,v5,a4)*step(e4,x_32)*step(x_32,e5),max(mix(v5,v6,a5)*step(e5,x_32)*step(x_32,e6),max(mix(v6,v7,a6)*step(e6,x_32)*step(x_32,e7),mix(v7,v8,a7)*step(e7,x_32)*step(x_32,e8))))))));}vec4 greens(float x_34){const float e0=0.0;const vec4 v0=vec4(0,0.26666666666666666,0.10588235294117647,1);const float e1=0.125;const vec4 v1=vec4(0,0.42745098039215684,0.17254901960784313,1);const float e2=0.25;const vec4 v2=vec4(0.13725490196078433,0.5450980392156862,0.27058823529411763,1);const float e3=0.375;const vec4 v3=vec4(0.2549019607843137,0.6705882352941176,0.36470588235294116,1);const float e4=0.5;const vec4 v4=vec4(0.4549019607843137,0.7686274509803922,0.4627450980392157,1);const float e5=0.625;const vec4 v5=vec4(0.6313725490196078,0.8509803921568627,0.6078431372549019,1);const float e6=0.75;const vec4 v6=vec4(0.7803921568627451,0.9137254901960784,0.7529411764705882,1);const float e7=0.875;const vec4 v7=vec4(0.8980392156862745,0.9607843137254902,0.8784313725490196,1);const float e8=1.0;const vec4 v8=vec4(0.9686274509803922,0.9882352941176471,0.9607843137254902,1);float a0=smoothstep(e0,e1,x_34);float a1=smoothstep(e1,e2,x_34);float a2=smoothstep(e2,e3,x_34);float a3=smoothstep(e3,e4,x_34);float a4=smoothstep(e4,e5,x_34);float a5=smoothstep(e5,e6,x_34);float a6=smoothstep(e6,e7,x_34);float a7=smoothstep(e7,e8,x_34);return max(mix(v0,v1,a0)*step(e0,x_34)*step(x_34,e1),max(mix(v1,v2,a1)*step(e1,x_34)*step(x_34,e2),max(mix(v2,v3,a2)*step(e2,x_34)*step(x_34,e3),max(mix(v3,v4,a3)*step(e3,x_34)*step(x_34,e4),max(mix(v4,v5,a4)*step(e4,x_34)*step(x_34,e5),max(mix(v5,v6,a5)*step(e5,x_34)*step(x_34,e6),max(mix(v6,v7,a6)*step(e6,x_34)*step(x_34,e7),mix(v7,v8,a7)*step(e7,x_34)*step(x_34,e8))))))));}vec4 yiorrd(float x_41){const float e0=0.0;const vec4 v0=vec4(0.5019607843137255,0,0.14901960784313725,1);const float e1=0.125;const vec4 v1=vec4(0.7411764705882353,0,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.8901960784313725,0.10196078431372549,0.10980392156862745,1);const float e3=0.375;const vec4 v3=vec4(0.9882352941176471,0.3058823529411765,0.16470588235294117,1);const float e4=0.5;const vec4 v4=vec4(0.9921568627450981,0.5529411764705883,0.23529411764705882,1);const float e5=0.625;const vec4 v5=vec4(0.996078431372549,0.6980392156862745,0.2980392156862745,1);const float e6=0.75;const vec4 v6=vec4(0.996078431372549,0.8509803921568627,0.4627450980392157,1);const float e7=0.875;const vec4 v7=vec4(1,0.9294117647058824,0.6274509803921569,1);const float e8=1.0;const vec4 v8=vec4(1,1,0.8,1);float a0=smoothstep(e0,e1,x_41);float a1=smoothstep(e1,e2,x_41);float a2=smoothstep(e2,e3,x_41);float a3=smoothstep(e3,e4,x_41);float a4=smoothstep(e4,e5,x_41);float a5=smoothstep(e5,e6,x_41);float a6=smoothstep(e6,e7,x_41);float a7=smoothstep(e7,e8,x_41);return max(mix(v0,v1,a0)*step(e0,x_41)*step(x_41,e1),max(mix(v1,v2,a1)*step(e1,x_41)*step(x_41,e2),max(mix(v2,v3,a2)*step(e2,x_41)*step(x_41,e3),max(mix(v3,v4,a3)*step(e3,x_41)*step(x_41,e4),max(mix(v4,v5,a4)*step(e4,x_41)*step(x_41,e5),max(mix(v5,v6,a5)*step(e5,x_41)*step(x_41,e6),max(mix(v6,v7,a6)*step(e6,x_41)*step(x_41,e7),mix(v7,v8,a7)*step(e7,x_41)*step(x_41,e8))))))));}vec4 bluered(float x_23){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=1.0;const vec4 v1=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_23);return mix(v0,v1,a0)*step(e0,x_23)*step(x_23,e1);}vec4 rdbu(float x_1){const float e0=0.0;const vec4 v0=vec4(0.0196078431372549,0.0392156862745098,0.6745098039215687,1);const float e1=0.35;const vec4 v1=vec4(0.41568627450980394,0.5372549019607843,0.9686274509803922,1);const float e2=0.5;const vec4 v2=vec4(0.7450980392156863,0.7450980392156863,0.7450980392156863,1);const float e3=0.6;const vec4 v3=vec4(0.8627450980392157,0.6666666666666666,0.5176470588235295,1);const float e4=0.7;const vec4 v4=vec4(0.9019607843137255,0.5686274509803921,0.35294117647058826,1);const float e5=1.0;const vec4 v5=vec4(0.6980392156862745,0.0392156862745098,0.10980392156862745,1);float a0=smoothstep(e0,e1,x_1);float a1=smoothstep(e1,e2,x_1);float a2=smoothstep(e2,e3,x_1);float a3=smoothstep(e3,e4,x_1);float a4=smoothstep(e4,e5,x_1);return max(mix(v0,v1,a0)*step(e0,x_1)*step(x_1,e1),max(mix(v1,v2,a1)*step(e1,x_1)*step(x_1,e2),max(mix(v2,v3,a2)*step(e2,x_1)*step(x_1,e3),max(mix(v3,v4,a3)*step(e3,x_1)*step(x_1,e4),mix(v4,v5,a4)*step(e4,x_1)*step(x_1,e5)))));}vec4 picnic(float x_42){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=0.1;const vec4 v1=vec4(0.2,0.6,1,1);const float e2=0.2;const vec4 v2=vec4(0.4,0.8,1,1);const float e3=0.3;const vec4 v3=vec4(0.6,0.8,1,1);const float e4=0.4;const vec4 v4=vec4(0.8,0.8,1,1);const float e5=0.5;const vec4 v5=vec4(1,1,1,1);const float e6=0.6;const vec4 v6=vec4(1,0.8,1,1);const float e7=0.7;const vec4 v7=vec4(1,0.6,1,1);const float e8=0.8;const vec4 v8=vec4(1,0.4,0.8,1);const float e9=0.9;const vec4 v9=vec4(1,0.4,0.4,1);const float e10=1.0;const vec4 v10=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_42);float a1=smoothstep(e1,e2,x_42);float a2=smoothstep(e2,e3,x_42);float a3=smoothstep(e3,e4,x_42);float a4=smoothstep(e4,e5,x_42);float a5=smoothstep(e5,e6,x_42);float a6=smoothstep(e6,e7,x_42);float a7=smoothstep(e7,e8,x_42);float a8=smoothstep(e8,e9,x_42);float a9=smoothstep(e9,e10,x_42);return max(mix(v0,v1,a0)*step(e0,x_42)*step(x_42,e1),max(mix(v1,v2,a1)*step(e1,x_42)*step(x_42,e2),max(mix(v2,v3,a2)*step(e2,x_42)*step(x_42,e3),max(mix(v3,v4,a3)*step(e3,x_42)*step(x_42,e4),max(mix(v4,v5,a4)*step(e4,x_42)*step(x_42,e5),max(mix(v5,v6,a5)*step(e5,x_42)*step(x_42,e6),max(mix(v6,v7,a6)*step(e6,x_42)*step(x_42,e7),max(mix(v7,v8,a7)*step(e7,x_42)*step(x_42,e8),max(mix(v8,v9,a8)*step(e8,x_42)*step(x_42,e9),mix(v9,v10,a9)*step(e9,x_42)*step(x_42,e10))))))))));}vec4 rainbow(float x_31){const float e0=0.0;const vec4 v0=vec4(0.5882352941176471,0,0.35294117647058826,1);const float e1=0.125;const vec4 v1=vec4(0,0,0.7843137254901961,1);const float e2=0.25;const vec4 v2=vec4(0,0.09803921568627451,1,1);const float e3=0.375;const vec4 v3=vec4(0,0.596078431372549,1,1);const float e4=0.5;const vec4 v4=vec4(0.17254901960784313,1,0.5882352941176471,1);const float e5=0.625;const vec4 v5=vec4(0.592156862745098,1,0,1);const float e6=0.75;const vec4 v6=vec4(1,0.9176470588235294,0,1);const float e7=0.875;const vec4 v7=vec4(1,0.43529411764705883,0,1);const float e8=1.0;const vec4 v8=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_31);float a1=smoothstep(e1,e2,x_31);float a2=smoothstep(e2,e3,x_31);float a3=smoothstep(e3,e4,x_31);float a4=smoothstep(e4,e5,x_31);float a5=smoothstep(e5,e6,x_31);float a6=smoothstep(e6,e7,x_31);float a7=smoothstep(e7,e8,x_31);return max(mix(v0,v1,a0)*step(e0,x_31)*step(x_31,e1),max(mix(v1,v2,a1)*step(e1,x_31)*step(x_31,e2),max(mix(v2,v3,a2)*step(e2,x_31)*step(x_31,e3),max(mix(v3,v4,a3)*step(e3,x_31)*step(x_31,e4),max(mix(v4,v5,a4)*step(e4,x_31)*step(x_31,e5),max(mix(v5,v6,a5)*step(e5,x_31)*step(x_31,e6),max(mix(v6,v7,a6)*step(e6,x_31)*step(x_31,e7),mix(v7,v8,a7)*step(e7,x_31)*step(x_31,e8))))))));}vec4 portland(float x_21){const float e0=0.0;const vec4 v0=vec4(0.047058823529411764,0.2,0.5137254901960784,1);const float e1=0.25;const vec4 v1=vec4(0.0392156862745098,0.5333333333333333,0.7294117647058823,1);const float e2=0.5;const vec4 v2=vec4(0.9490196078431372,0.8274509803921568,0.2196078431372549,1);const float e3=0.75;const vec4 v3=vec4(0.9490196078431372,0.5607843137254902,0.2196078431372549,1);const float e4=1.0;const vec4 v4=vec4(0.8509803921568627,0.11764705882352941,0.11764705882352941,1);float a0=smoothstep(e0,e1,x_21);float a1=smoothstep(e1,e2,x_21);float a2=smoothstep(e2,e3,x_21);float a3=smoothstep(e3,e4,x_21);return max(mix(v0,v1,a0)*step(e0,x_21)*step(x_21,e1),max(mix(v1,v2,a1)*step(e1,x_21)*step(x_21,e2),max(mix(v2,v3,a2)*step(e2,x_21)*step(x_21,e3),mix(v3,v4,a3)*step(e3,x_21)*step(x_21,e4))));}vec4 blackbody(float x_38){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.2;const vec4 v1=vec4(0.9019607843137255,0,0,1);const float e2=0.4;const vec4 v2=vec4(0.9019607843137255,0.8235294117647058,0,1);const float e3=0.7;const vec4 v3=vec4(1,1,1,1);const float e4=1.0;const vec4 v4=vec4(0.6274509803921569,0.7843137254901961,1,1);float a0=smoothstep(e0,e1,x_38);float a1=smoothstep(e1,e2,x_38);float a2=smoothstep(e2,e3,x_38);float a3=smoothstep(e3,e4,x_38);return max(mix(v0,v1,a0)*step(e0,x_38)*step(x_38,e1),max(mix(v1,v2,a1)*step(e1,x_38)*step(x_38,e2),max(mix(v2,v3,a2)*step(e2,x_38)*step(x_38,e3),mix(v3,v4,a3)*step(e3,x_38)*step(x_38,e4))));}vec4 earth(float x_29){const float e0=0.0;const vec4 v0=vec4(0,0,0.5098039215686274,1);const float e1=0.1;const vec4 v1=vec4(0,0.7058823529411765,0.7058823529411765,1);const float e2=0.2;const vec4 v2=vec4(0.1568627450980392,0.8235294117647058,0.1568627450980392,1);const float e3=0.4;const vec4 v3=vec4(0.9019607843137255,0.9019607843137255,0.19607843137254902,1);const float e4=0.6;const vec4 v4=vec4(0.47058823529411764,0.27450980392156865,0.0784313725490196,1);const float e5=1.0;const vec4 v5=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_29);float a1=smoothstep(e1,e2,x_29);float a2=smoothstep(e2,e3,x_29);float a3=smoothstep(e3,e4,x_29);float a4=smoothstep(e4,e5,x_29);return max(mix(v0,v1,a0)*step(e0,x_29)*step(x_29,e1),max(mix(v1,v2,a1)*step(e1,x_29)*step(x_29,e2),max(mix(v2,v3,a2)*step(e2,x_29)*step(x_29,e3),max(mix(v3,v4,a3)*step(e3,x_29)*step(x_29,e4),mix(v4,v5,a4)*step(e4,x_29)*step(x_29,e5)))));}vec4 electric(float x_9){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.15;const vec4 v1=vec4(0.11764705882352941,0,0.39215686274509803,1);const float e2=0.4;const vec4 v2=vec4(0.47058823529411764,0,0.39215686274509803,1);const float e3=0.6;const vec4 v3=vec4(0.6274509803921569,0.35294117647058826,0,1);const float e4=0.8;const vec4 v4=vec4(0.9019607843137255,0.7843137254901961,0,1);const float e5=1.0;const vec4 v5=vec4(1,0.9803921568627451,0.8627450980392157,1);float a0=smoothstep(e0,e1,x_9);float a1=smoothstep(e1,e2,x_9);float a2=smoothstep(e2,e3,x_9);float a3=smoothstep(e3,e4,x_9);float a4=smoothstep(e4,e5,x_9);return max(mix(v0,v1,a0)*step(e0,x_9)*step(x_9,e1),max(mix(v1,v2,a1)*step(e1,x_9)*step(x_9,e2),max(mix(v2,v3,a2)*step(e2,x_9)*step(x_9,e3),max(mix(v3,v4,a3)*step(e3,x_9)*step(x_9,e4),mix(v4,v5,a4)*step(e4,x_9)*step(x_9,e5)))));}vec4 alpha(float x_0){const float e0=0.0;const vec4 v0=vec4(1,1,1,0);const float e1=1.0;const vec4 v1=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_0);return mix(v0,v1,a0)*step(e0,x_0)*step(x_0,e1);}vec4 viridis(float x_22){const float e0=0.0;const vec4 v0=vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);const float e1=0.13;const vec4 v1=vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);const float e2=0.25;const vec4 v2=vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);const float e4=0.5;const vec4 v4=vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);const float e5=0.63;const vec4 v5=vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);const float e6=0.75;const vec4 v6=vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);const float e7=0.88;const vec4 v7=vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);float a0=smoothstep(e0,e1,x_22);float a1=smoothstep(e1,e2,x_22);float a2=smoothstep(e2,e3,x_22);float a3=smoothstep(e3,e4,x_22);float a4=smoothstep(e4,e5,x_22);float a5=smoothstep(e5,e6,x_22);float a6=smoothstep(e6,e7,x_22);float a7=smoothstep(e7,e8,x_22);return max(mix(v0,v1,a0)*step(e0,x_22)*step(x_22,e1),max(mix(v1,v2,a1)*step(e1,x_22)*step(x_22,e2),max(mix(v2,v3,a2)*step(e2,x_22)*step(x_22,e3),max(mix(v3,v4,a3)*step(e3,x_22)*step(x_22,e4),max(mix(v4,v5,a4)*step(e4,x_22)*step(x_22,e5),max(mix(v5,v6,a5)*step(e5,x_22)*step(x_22,e6),max(mix(v6,v7,a6)*step(e6,x_22)*step(x_22,e7),mix(v7,v8,a7)*step(e7,x_22)*step(x_22,e8))))))));}vec4 inferno(float x_30){const float e0=0.0;const vec4 v0=vec4(0,0,0.01568627450980392,1);const float e1=0.13;const vec4 v1=vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);const float e2=0.25;const vec4 v2=vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);const float e3=0.38;const vec4 v3=vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);const float e4=0.5;const vec4 v4=vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);const float e5=0.63;const vec4 v5=vec4(0.8901960784313725,0.34901960784313724,0.2,1);const float e6=0.75;const vec4 v6=vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);const float e8=1.0;const vec4 v8=vec4(0.9882352941176471,1,0.6431372549019608,1);float a0=smoothstep(e0,e1,x_30);float a1=smoothstep(e1,e2,x_30);float a2=smoothstep(e2,e3,x_30);float a3=smoothstep(e3,e4,x_30);float a4=smoothstep(e4,e5,x_30);float a5=smoothstep(e5,e6,x_30);float a6=smoothstep(e6,e7,x_30);float a7=smoothstep(e7,e8,x_30);return max(mix(v0,v1,a0)*step(e0,x_30)*step(x_30,e1),max(mix(v1,v2,a1)*step(e1,x_30)*step(x_30,e2),max(mix(v2,v3,a2)*step(e2,x_30)*step(x_30,e3),max(mix(v3,v4,a3)*step(e3,x_30)*step(x_30,e4),max(mix(v4,v5,a4)*step(e4,x_30)*step(x_30,e5),max(mix(v5,v6,a5)*step(e5,x_30)*step(x_30,e6),max(mix(v6,v7,a6)*step(e6,x_30)*step(x_30,e7),mix(v7,v8,a7)*step(e7,x_30)*step(x_30,e8))))))));}vec4 magma(float x_33){const float e0=0.0;const vec4 v0=vec4(0,0,0.01568627450980392,1);const float e1=0.13;const vec4 v1=vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);const float e2=0.25;const vec4 v2=vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);const float e3=0.38;const vec4 v3=vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);const float e4=0.5;const vec4 v4=vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);const float e5=0.63;const vec4 v5=vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);const float e6=0.75;const vec4 v6=vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);const float e8=1.0;const vec4 v8=vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);float a0=smoothstep(e0,e1,x_33);float a1=smoothstep(e1,e2,x_33);float a2=smoothstep(e2,e3,x_33);float a3=smoothstep(e3,e4,x_33);float a4=smoothstep(e4,e5,x_33);float a5=smoothstep(e5,e6,x_33);float a6=smoothstep(e6,e7,x_33);float a7=smoothstep(e7,e8,x_33);return max(mix(v0,v1,a0)*step(e0,x_33)*step(x_33,e1),max(mix(v1,v2,a1)*step(e1,x_33)*step(x_33,e2),max(mix(v2,v3,a2)*step(e2,x_33)*step(x_33,e3),max(mix(v3,v4,a3)*step(e3,x_33)*step(x_33,e4),max(mix(v4,v5,a4)*step(e4,x_33)*step(x_33,e5),max(mix(v5,v6,a5)*step(e5,x_33)*step(x_33,e6),max(mix(v6,v7,a6)*step(e6,x_33)*step(x_33,e7),mix(v7,v8,a7)*step(e7,x_33)*step(x_33,e8))))))));}vec4 plasma(float x_3){const float e0=0.0;const vec4 v0=vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);const float e1=0.13;const vec4 v1=vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);const float e2=0.25;const vec4 v2=vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);const float e3=0.38;const vec4 v3=vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);const float e4=0.5;const vec4 v4=vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);const float e5=0.63;const vec4 v5=vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);const float e6=0.75;const vec4 v6=vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);const float e7=0.88;const vec4 v7=vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);const float e8=1.0;const vec4 v8=vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);float a0=smoothstep(e0,e1,x_3);float a1=smoothstep(e1,e2,x_3);float a2=smoothstep(e2,e3,x_3);float a3=smoothstep(e3,e4,x_3);float a4=smoothstep(e4,e5,x_3);float a5=smoothstep(e5,e6,x_3);float a6=smoothstep(e6,e7,x_3);float a7=smoothstep(e7,e8,x_3);return max(mix(v0,v1,a0)*step(e0,x_3)*step(x_3,e1),max(mix(v1,v2,a1)*step(e1,x_3)*step(x_3,e2),max(mix(v2,v3,a2)*step(e2,x_3)*step(x_3,e3),max(mix(v3,v4,a3)*step(e3,x_3)*step(x_3,e4),max(mix(v4,v5,a4)*step(e4,x_3)*step(x_3,e5),max(mix(v5,v6,a5)*step(e5,x_3)*step(x_3,e6),max(mix(v6,v7,a6)*step(e6,x_3)*step(x_3,e7),mix(v7,v8,a7)*step(e7,x_3)*step(x_3,e8))))))));}vec4 warm(float x_43){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.13;const vec4 v1=vec4(0.6745098039215687,0,0.7333333333333333,1);const float e2=0.25;const vec4 v2=vec4(0.8588235294117647,0,0.6666666666666666,1);const float e3=0.38;const vec4 v3=vec4(1,0,0.5098039215686274,1);const float e4=0.5;const vec4 v4=vec4(1,0.24705882352941178,0.2901960784313726,1);const float e5=0.63;const vec4 v5=vec4(1,0.4823529411764706,0,1);const float e6=0.75;const vec4 v6=vec4(0.9176470588235294,0.6901960784313725,0,1);const float e7=0.88;const vec4 v7=vec4(0.7450980392156863,0.8941176470588236,0,1);const float e8=1.0;const vec4 v8=vec4(0.5764705882352941,1,0,1);float a0=smoothstep(e0,e1,x_43);float a1=smoothstep(e1,e2,x_43);float a2=smoothstep(e2,e3,x_43);float a3=smoothstep(e3,e4,x_43);float a4=smoothstep(e4,e5,x_43);float a5=smoothstep(e5,e6,x_43);float a6=smoothstep(e6,e7,x_43);float a7=smoothstep(e7,e8,x_43);return max(mix(v0,v1,a0)*step(e0,x_43)*step(x_43,e1),max(mix(v1,v2,a1)*step(e1,x_43)*step(x_43,e2),max(mix(v2,v3,a2)*step(e2,x_43)*step(x_43,e3),max(mix(v3,v4,a3)*step(e3,x_43)*step(x_43,e4),max(mix(v4,v5,a4)*step(e4,x_43)*step(x_43,e5),max(mix(v5,v6,a5)*step(e5,x_43)*step(x_43,e6),max(mix(v6,v7,a6)*step(e6,x_43)*step(x_43,e7),mix(v7,v8,a7)*step(e7,x_43)*step(x_43,e8))))))));}vec4 rainbow_soft_1310269270(float x_14){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.1;const vec4 v1=vec4(0.7803921568627451,0,0.7058823529411765,1);const float e2=0.2;const vec4 v2=vec4(1,0,0.4745098039215686,1);const float e3=0.3;const vec4 v3=vec4(1,0.4235294117647059,0,1);const float e4=0.4;const vec4 v4=vec4(0.8705882352941177,0.7607843137254902,0,1);const float e5=0.5;const vec4 v5=vec4(0.5882352941176471,1,0,1);const float e6=0.6;const vec4 v6=vec4(0,1,0.21568627450980393,1);const float e7=0.7;const vec4 v7=vec4(0,0.9647058823529412,0.5882352941176471,1);const float e8=0.8;const vec4 v8=vec4(0.19607843137254902,0.6549019607843137,0.8705882352941177,1);const float e9=0.9;const vec4 v9=vec4(0.403921568627451,0.2,0.9215686274509803,1);const float e10=1.0;const vec4 v10=vec4(0.48627450980392156,0,0.7294117647058823,1);float a0=smoothstep(e0,e1,x_14);float a1=smoothstep(e1,e2,x_14);float a2=smoothstep(e2,e3,x_14);float a3=smoothstep(e3,e4,x_14);float a4=smoothstep(e4,e5,x_14);float a5=smoothstep(e5,e6,x_14);float a6=smoothstep(e6,e7,x_14);float a7=smoothstep(e7,e8,x_14);float a8=smoothstep(e8,e9,x_14);float a9=smoothstep(e9,e10,x_14);return max(mix(v0,v1,a0)*step(e0,x_14)*step(x_14,e1),max(mix(v1,v2,a1)*step(e1,x_14)*step(x_14,e2),max(mix(v2,v3,a2)*step(e2,x_14)*step(x_14,e3),max(mix(v3,v4,a3)*step(e3,x_14)*step(x_14,e4),max(mix(v4,v5,a4)*step(e4,x_14)*step(x_14,e5),max(mix(v5,v6,a5)*step(e5,x_14)*step(x_14,e6),max(mix(v6,v7,a6)*step(e6,x_14)*step(x_14,e7),max(mix(v7,v8,a7)*step(e7,x_14)*step(x_14,e8),max(mix(v8,v9,a8)*step(e8,x_14)*step(x_14,e9),mix(v9,v10,a9)*step(e9,x_14)*step(x_14,e10))))))))));}vec4 bathymetry(float x_36){const float e0=0.0;const vec4 v0=vec4(0.1568627450980392,0.10196078431372549,0.17254901960784313,1);const float e1=0.13;const vec4 v1=vec4(0.23137254901960785,0.19215686274509805,0.35294117647058826,1);const float e2=0.25;const vec4 v2=vec4(0.25098039215686274,0.2980392156862745,0.5450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.24705882352941178,0.43137254901960786,0.592156862745098,1);const float e4=0.5;const vec4 v4=vec4(0.2823529411764706,0.5568627450980392,0.6196078431372549,1);const float e5=0.63;const vec4 v5=vec4(0.3333333333333333,0.6823529411764706,0.6392156862745098,1);const float e6=0.75;const vec4 v6=vec4(0.47058823529411764,0.807843137254902,0.6392156862745098,1);const float e7=0.88;const vec4 v7=vec4(0.7333333333333333,0.9019607843137255,0.6745098039215687,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.996078431372549,0.8,1);float a0=smoothstep(e0,e1,x_36);float a1=smoothstep(e1,e2,x_36);float a2=smoothstep(e2,e3,x_36);float a3=smoothstep(e3,e4,x_36);float a4=smoothstep(e4,e5,x_36);float a5=smoothstep(e5,e6,x_36);float a6=smoothstep(e6,e7,x_36);float a7=smoothstep(e7,e8,x_36);return max(mix(v0,v1,a0)*step(e0,x_36)*step(x_36,e1),max(mix(v1,v2,a1)*step(e1,x_36)*step(x_36,e2),max(mix(v2,v3,a2)*step(e2,x_36)*step(x_36,e3),max(mix(v3,v4,a3)*step(e3,x_36)*step(x_36,e4),max(mix(v4,v5,a4)*step(e4,x_36)*step(x_36,e5),max(mix(v5,v6,a5)*step(e5,x_36)*step(x_36,e6),max(mix(v6,v7,a6)*step(e6,x_36)*step(x_36,e7),mix(v7,v8,a7)*step(e7,x_36)*step(x_36,e8))))))));}vec4 cdom(float x_7){const float e0=0.0;const vec4 v0=vec4(0.1843137254901961,0.058823529411764705,0.24313725490196078,1);const float e1=0.13;const vec4 v1=vec4(0.3411764705882353,0.09019607843137255,0.33725490196078434,1);const float e2=0.25;const vec4 v2=vec4(0.5098039215686274,0.10980392156862745,0.38823529411764707,1);const float e3=0.38;const vec4 v3=vec4(0.6705882352941176,0.1607843137254902,0.3764705882352941,1);const float e4=0.5;const vec4 v4=vec4(0.807843137254902,0.2627450980392157,0.33725490196078434,1);const float e5=0.63;const vec4 v5=vec4(0.9019607843137255,0.41568627450980394,0.32941176470588235,1);const float e6=0.75;const vec4 v6=vec4(0.9490196078431372,0.5843137254901961,0.403921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.7568627450980392,0.5294117647058824,1);const float e8=1.0;const vec4 v8=vec4(0.996078431372549,0.9294117647058824,0.6901960784313725,1);float a0=smoothstep(e0,e1,x_7);float a1=smoothstep(e1,e2,x_7);float a2=smoothstep(e2,e3,x_7);float a3=smoothstep(e3,e4,x_7);float a4=smoothstep(e4,e5,x_7);float a5=smoothstep(e5,e6,x_7);float a6=smoothstep(e6,e7,x_7);float a7=smoothstep(e7,e8,x_7);return max(mix(v0,v1,a0)*step(e0,x_7)*step(x_7,e1),max(mix(v1,v2,a1)*step(e1,x_7)*step(x_7,e2),max(mix(v2,v3,a2)*step(e2,x_7)*step(x_7,e3),max(mix(v3,v4,a3)*step(e3,x_7)*step(x_7,e4),max(mix(v4,v5,a4)*step(e4,x_7)*step(x_7,e5),max(mix(v5,v6,a5)*step(e5,x_7)*step(x_7,e6),max(mix(v6,v7,a6)*step(e6,x_7)*step(x_7,e7),mix(v7,v8,a7)*step(e7,x_7)*step(x_7,e8))))))));}vec4 chlorophyll(float x_6){const float e0=0.0;const vec4 v0=vec4(0.07058823529411765,0.1411764705882353,0.0784313725490196,1);const float e1=0.13;const vec4 v1=vec4(0.09803921568627451,0.24705882352941178,0.1607843137254902,1);const float e2=0.25;const vec4 v2=vec4(0.09411764705882353,0.3568627450980392,0.23137254901960785,1);const float e3=0.38;const vec4 v3=vec4(0.050980392156862744,0.4666666666666667,0.2823529411764706,1);const float e4=0.5;const vec4 v4=vec4(0.07058823529411765,0.5803921568627451,0.3137254901960784,1);const float e5=0.63;const vec4 v5=vec4(0.3137254901960784,0.6784313725490196,0.34901960784313724,1);const float e6=0.75;const vec4 v6=vec4(0.5176470588235295,0.7686274509803922,0.47843137254901963,1);const float e7=0.88;const vec4 v7=vec4(0.6862745098039216,0.8666666666666667,0.6352941176470588,1);const float e8=1.0;const vec4 v8=vec4(0.8431372549019608,0.9764705882352941,0.8156862745098039,1);float a0=smoothstep(e0,e1,x_6);float a1=smoothstep(e1,e2,x_6);float a2=smoothstep(e2,e3,x_6);float a3=smoothstep(e3,e4,x_6);float a4=smoothstep(e4,e5,x_6);float a5=smoothstep(e5,e6,x_6);float a6=smoothstep(e6,e7,x_6);float a7=smoothstep(e7,e8,x_6);return max(mix(v0,v1,a0)*step(e0,x_6)*step(x_6,e1),max(mix(v1,v2,a1)*step(e1,x_6)*step(x_6,e2),max(mix(v2,v3,a2)*step(e2,x_6)*step(x_6,e3),max(mix(v3,v4,a3)*step(e3,x_6)*step(x_6,e4),max(mix(v4,v5,a4)*step(e4,x_6)*step(x_6,e5),max(mix(v5,v6,a5)*step(e5,x_6)*step(x_6,e6),max(mix(v6,v7,a6)*step(e6,x_6)*step(x_6,e7),mix(v7,v8,a7)*step(e7,x_6)*step(x_6,e8))))))));}vec4 density(float x_19){const float e0=0.0;const vec4 v0=vec4(0.21176470588235294,0.054901960784313725,0.1411764705882353,1);const float e1=0.13;const vec4 v1=vec4(0.34901960784313724,0.09019607843137255,0.3137254901960784,1);const float e2=0.25;const vec4 v2=vec4(0.43137254901960786,0.17647058823529413,0.5176470588235295,1);const float e3=0.38;const vec4 v3=vec4(0.47058823529411764,0.30196078431372547,0.6980392156862745,1);const float e4=0.5;const vec4 v4=vec4(0.47058823529411764,0.44313725490196076,0.8352941176470589,1);const float e5=0.63;const vec4 v5=vec4(0.45098039215686275,0.592156862745098,0.8941176470588236,1);const float e6=0.75;const vec4 v6=vec4(0.5254901960784314,0.7254901960784313,0.8901960784313725,1);const float e7=0.88;const vec4 v7=vec4(0.6941176470588235,0.8392156862745098,0.8901960784313725,1);const float e8=1.0;const vec4 v8=vec4(0.9019607843137255,0.9450980392156862,0.9450980392156862,1);float a0=smoothstep(e0,e1,x_19);float a1=smoothstep(e1,e2,x_19);float a2=smoothstep(e2,e3,x_19);float a3=smoothstep(e3,e4,x_19);float a4=smoothstep(e4,e5,x_19);float a5=smoothstep(e5,e6,x_19);float a6=smoothstep(e6,e7,x_19);float a7=smoothstep(e7,e8,x_19);return max(mix(v0,v1,a0)*step(e0,x_19)*step(x_19,e1),max(mix(v1,v2,a1)*step(e1,x_19)*step(x_19,e2),max(mix(v2,v3,a2)*step(e2,x_19)*step(x_19,e3),max(mix(v3,v4,a3)*step(e3,x_19)*step(x_19,e4),max(mix(v4,v5,a4)*step(e4,x_19)*step(x_19,e5),max(mix(v5,v6,a5)*step(e5,x_19)*step(x_19,e6),max(mix(v6,v7,a6)*step(e6,x_19)*step(x_19,e7),mix(v7,v8,a7)*step(e7,x_19)*step(x_19,e8))))))));}vec4 freesurface_blue_3154355989(float x_35){const float e0=0.0;const vec4 v0=vec4(0.11764705882352941,0.01568627450980392,0.43137254901960786,1);const float e1=0.13;const vec4 v1=vec4(0.1843137254901961,0.054901960784313725,0.6901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.1607843137254902,0.17647058823529413,0.9254901960784314,1);const float e3=0.38;const vec4 v3=vec4(0.09803921568627451,0.38823529411764707,0.8313725490196079,1);const float e4=0.5;const vec4 v4=vec4(0.26666666666666666,0.5137254901960784,0.7843137254901961,1);const float e5=0.63;const vec4 v5=vec4(0.4470588235294118,0.611764705882353,0.7725490196078432,1);const float e6=0.75;const vec4 v6=vec4(0.615686274509804,0.7098039215686275,0.796078431372549,1);const float e7=0.88;const vec4 v7=vec4(0.7843137254901961,0.8156862745098039,0.8470588235294118,1);const float e8=1.0;const vec4 v8=vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);float a0=smoothstep(e0,e1,x_35);float a1=smoothstep(e1,e2,x_35);float a2=smoothstep(e2,e3,x_35);float a3=smoothstep(e3,e4,x_35);float a4=smoothstep(e4,e5,x_35);float a5=smoothstep(e5,e6,x_35);float a6=smoothstep(e6,e7,x_35);float a7=smoothstep(e7,e8,x_35);return max(mix(v0,v1,a0)*step(e0,x_35)*step(x_35,e1),max(mix(v1,v2,a1)*step(e1,x_35)*step(x_35,e2),max(mix(v2,v3,a2)*step(e2,x_35)*step(x_35,e3),max(mix(v3,v4,a3)*step(e3,x_35)*step(x_35,e4),max(mix(v4,v5,a4)*step(e4,x_35)*step(x_35,e5),max(mix(v5,v6,a5)*step(e5,x_35)*step(x_35,e6),max(mix(v6,v7,a6)*step(e6,x_35)*step(x_35,e7),mix(v7,v8,a7)*step(e7,x_35)*step(x_35,e8))))))));}vec4 freesurface_red_1679163293(float x_20){const float e0=0.0;const vec4 v0=vec4(0.23529411764705882,0.03529411764705882,0.07058823529411765,1);const float e1=0.13;const vec4 v1=vec4(0.39215686274509803,0.06666666666666667,0.10588235294117647,1);const float e2=0.25;const vec4 v2=vec4(0.5568627450980392,0.0784313725490196,0.11372549019607843,1);const float e3=0.38;const vec4 v3=vec4(0.6941176470588235,0.16862745098039217,0.10588235294117647,1);const float e4=0.5;const vec4 v4=vec4(0.7529411764705882,0.3411764705882353,0.24705882352941178,1);const float e5=0.63;const vec4 v5=vec4(0.803921568627451,0.49019607843137253,0.4117647058823529,1);const float e6=0.75;const vec4 v6=vec4(0.8470588235294118,0.6352941176470588,0.5803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.8901960784313725,0.7803921568627451,0.7568627450980392,1);const float e8=1.0;const vec4 v8=vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);float a0=smoothstep(e0,e1,x_20);float a1=smoothstep(e1,e2,x_20);float a2=smoothstep(e2,e3,x_20);float a3=smoothstep(e3,e4,x_20);float a4=smoothstep(e4,e5,x_20);float a5=smoothstep(e5,e6,x_20);float a6=smoothstep(e6,e7,x_20);float a7=smoothstep(e7,e8,x_20);return max(mix(v0,v1,a0)*step(e0,x_20)*step(x_20,e1),max(mix(v1,v2,a1)*step(e1,x_20)*step(x_20,e2),max(mix(v2,v3,a2)*step(e2,x_20)*step(x_20,e3),max(mix(v3,v4,a3)*step(e3,x_20)*step(x_20,e4),max(mix(v4,v5,a4)*step(e4,x_20)*step(x_20,e5),max(mix(v5,v6,a5)*step(e5,x_20)*step(x_20,e6),max(mix(v6,v7,a6)*step(e6,x_20)*step(x_20,e7),mix(v7,v8,a7)*step(e7,x_20)*step(x_20,e8))))))));}vec4 oxygen(float x_11){const float e0=0.0;const vec4 v0=vec4(0.25098039215686274,0.0196078431372549,0.0196078431372549,1);const float e1=0.13;const vec4 v1=vec4(0.41568627450980394,0.023529411764705882,0.058823529411764705,1);const float e2=0.25;const vec4 v2=vec4(0.5647058823529412,0.10196078431372549,0.027450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.6588235294117647,0.25098039215686274,0.011764705882352941,1);const float e4=0.5;const vec4 v4=vec4(0.7372549019607844,0.39215686274509803,0.01568627450980392,1);const float e5=0.63;const vec4 v5=vec4(0.807843137254902,0.5333333333333333,0.043137254901960784,1);const float e6=0.75;const vec4 v6=vec4(0.8627450980392157,0.6823529411764706,0.09803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.9058823529411765,0.8431372549019608,0.17254901960784313,1);const float e8=1.0;const vec4 v8=vec4(0.9725490196078431,0.996078431372549,0.4117647058823529,1);float a0=smoothstep(e0,e1,x_11);float a1=smoothstep(e1,e2,x_11);float a2=smoothstep(e2,e3,x_11);float a3=smoothstep(e3,e4,x_11);float a4=smoothstep(e4,e5,x_11);float a5=smoothstep(e5,e6,x_11);float a6=smoothstep(e6,e7,x_11);float a7=smoothstep(e7,e8,x_11);return max(mix(v0,v1,a0)*step(e0,x_11)*step(x_11,e1),max(mix(v1,v2,a1)*step(e1,x_11)*step(x_11,e2),max(mix(v2,v3,a2)*step(e2,x_11)*step(x_11,e3),max(mix(v3,v4,a3)*step(e3,x_11)*step(x_11,e4),max(mix(v4,v5,a4)*step(e4,x_11)*step(x_11,e5),max(mix(v5,v6,a5)*step(e5,x_11)*step(x_11,e6),max(mix(v6,v7,a6)*step(e6,x_11)*step(x_11,e7),mix(v7,v8,a7)*step(e7,x_11)*step(x_11,e8))))))));}vec4 par(float x_28){const float e0=0.0;const vec4 v0=vec4(0.2,0.0784313725490196,0.09411764705882353,1);const float e1=0.13;const vec4 v1=vec4(0.35294117647058826,0.12549019607843137,0.13725490196078433,1);const float e2=0.25;const vec4 v2=vec4(0.5058823529411764,0.17254901960784313,0.13333333333333333,1);const float e3=0.38;const vec4 v3=vec4(0.6235294117647059,0.26666666666666666,0.09803921568627451,1);const float e4=0.5;const vec4 v4=vec4(0.7137254901960784,0.38823529411764707,0.07450980392156863,1);const float e5=0.63;const vec4 v5=vec4(0.7803921568627451,0.5254901960784314,0.08627450980392157,1);const float e6=0.75;const vec4 v6=vec4(0.8313725490196079,0.6705882352941176,0.13725490196078433,1);const float e7=0.88;const vec4 v7=vec4(0.8666666666666667,0.8235294117647058,0.21176470588235294,1);const float e8=1.0;const vec4 v8=vec4(0.8823529411764706,0.9921568627450981,0.29411764705882354,1);float a0=smoothstep(e0,e1,x_28);float a1=smoothstep(e1,e2,x_28);float a2=smoothstep(e2,e3,x_28);float a3=smoothstep(e3,e4,x_28);float a4=smoothstep(e4,e5,x_28);float a5=smoothstep(e5,e6,x_28);float a6=smoothstep(e6,e7,x_28);float a7=smoothstep(e7,e8,x_28);return max(mix(v0,v1,a0)*step(e0,x_28)*step(x_28,e1),max(mix(v1,v2,a1)*step(e1,x_28)*step(x_28,e2),max(mix(v2,v3,a2)*step(e2,x_28)*step(x_28,e3),max(mix(v3,v4,a3)*step(e3,x_28)*step(x_28,e4),max(mix(v4,v5,a4)*step(e4,x_28)*step(x_28,e5),max(mix(v5,v6,a5)*step(e5,x_28)*step(x_28,e6),max(mix(v6,v7,a6)*step(e6,x_28)*step(x_28,e7),mix(v7,v8,a7)*step(e7,x_28)*step(x_28,e8))))))));}vec4 phase(float x_39){const float e0=0.0;const vec4 v0=vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);const float e1=0.13;const vec4 v1=vec4(0.7215686274509804,0.2784313725490196,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.7294117647058823,0.22745098039215686,0.45098039215686275,1);const float e3=0.38;const vec4 v3=vec4(0.6274509803921569,0.2784313725490196,0.7254901960784313,1);const float e4=0.5;const vec4 v4=vec4(0.43137254901960786,0.3803921568627451,0.8549019607843137,1);const float e5=0.63;const vec4 v5=vec4(0.19607843137254902,0.4823529411764706,0.6431372549019608,1);const float e6=0.75;const vec4 v6=vec4(0.12156862745098039,0.5137254901960784,0.43137254901960786,1);const float e7=0.88;const vec4 v7=vec4(0.30196078431372547,0.5058823529411764,0.13333333333333333,1);const float e8=1.0;const vec4 v8=vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);float a0=smoothstep(e0,e1,x_39);float a1=smoothstep(e1,e2,x_39);float a2=smoothstep(e2,e3,x_39);float a3=smoothstep(e3,e4,x_39);float a4=smoothstep(e4,e5,x_39);float a5=smoothstep(e5,e6,x_39);float a6=smoothstep(e6,e7,x_39);float a7=smoothstep(e7,e8,x_39);return max(mix(v0,v1,a0)*step(e0,x_39)*step(x_39,e1),max(mix(v1,v2,a1)*step(e1,x_39)*step(x_39,e2),max(mix(v2,v3,a2)*step(e2,x_39)*step(x_39,e3),max(mix(v3,v4,a3)*step(e3,x_39)*step(x_39,e4),max(mix(v4,v5,a4)*step(e4,x_39)*step(x_39,e5),max(mix(v5,v6,a5)*step(e5,x_39)*step(x_39,e6),max(mix(v6,v7,a6)*step(e6,x_39)*step(x_39,e7),mix(v7,v8,a7)*step(e7,x_39)*step(x_39,e8))))))));}vec4 salinity(float x_26){const float e0=0.0;const vec4 v0=vec4(0.16470588235294117,0.09411764705882353,0.4235294117647059,1);const float e1=0.13;const vec4 v1=vec4(0.12941176470588237,0.19607843137254902,0.6352941176470588,1);const float e2=0.25;const vec4 v2=vec4(0.058823529411764705,0.35294117647058826,0.5686274509803921,1);const float e3=0.38;const vec4 v3=vec4(0.1568627450980392,0.4627450980392157,0.5372549019607843,1);const float e4=0.5;const vec4 v4=vec4(0.23137254901960785,0.5725490196078431,0.5294117647058824,1);const float e5=0.63;const vec4 v5=vec4(0.30980392156862746,0.6862745098039216,0.49411764705882355,1);const float e6=0.75;const vec4 v6=vec4(0.47058823529411764,0.796078431372549,0.40784313725490196,1);const float e7=0.88;const vec4 v7=vec4(0.7568627450980392,0.8666666666666667,0.39215686274509803,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.9372549019607843,0.6039215686274509,1);float a0=smoothstep(e0,e1,x_26);float a1=smoothstep(e1,e2,x_26);float a2=smoothstep(e2,e3,x_26);float a3=smoothstep(e3,e4,x_26);float a4=smoothstep(e4,e5,x_26);float a5=smoothstep(e5,e6,x_26);float a6=smoothstep(e6,e7,x_26);float a7=smoothstep(e7,e8,x_26);return max(mix(v0,v1,a0)*step(e0,x_26)*step(x_26,e1),max(mix(v1,v2,a1)*step(e1,x_26)*step(x_26,e2),max(mix(v2,v3,a2)*step(e2,x_26)*step(x_26,e3),max(mix(v3,v4,a3)*step(e3,x_26)*step(x_26,e4),max(mix(v4,v5,a4)*step(e4,x_26)*step(x_26,e5),max(mix(v5,v6,a5)*step(e5,x_26)*step(x_26,e6),max(mix(v6,v7,a6)*step(e6,x_26)*step(x_26,e7),mix(v7,v8,a7)*step(e7,x_26)*step(x_26,e8))))))));}vec4 temperature(float x_8){const float e0=0.0;const vec4 v0=vec4(0.01568627450980392,0.13725490196078433,0.2,1);const float e1=0.13;const vec4 v1=vec4(0.09019607843137255,0.2,0.47843137254901963,1);const float e2=0.25;const vec4 v2=vec4(0.3333333333333333,0.23137254901960785,0.615686274509804,1);const float e3=0.38;const vec4 v3=vec4(0.5058823529411764,0.30980392156862746,0.5607843137254902,1);const float e4=0.5;const vec4 v4=vec4(0.6862745098039216,0.37254901960784315,0.5098039215686274,1);const float e5=0.63;const vec4 v5=vec4(0.8705882352941177,0.4392156862745098,0.396078431372549,1);const float e6=0.75;const vec4 v6=vec4(0.9764705882352941,0.5725490196078431,0.25882352941176473,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.7686274509803922,0.2549019607843137,1);const float e8=1.0;const vec4 v8=vec4(0.9098039215686274,0.9803921568627451,0.3568627450980392,1);float a0=smoothstep(e0,e1,x_8);float a1=smoothstep(e1,e2,x_8);float a2=smoothstep(e2,e3,x_8);float a3=smoothstep(e3,e4,x_8);float a4=smoothstep(e4,e5,x_8);float a5=smoothstep(e5,e6,x_8);float a6=smoothstep(e6,e7,x_8);float a7=smoothstep(e7,e8,x_8);return max(mix(v0,v1,a0)*step(e0,x_8)*step(x_8,e1),max(mix(v1,v2,a1)*step(e1,x_8)*step(x_8,e2),max(mix(v2,v3,a2)*step(e2,x_8)*step(x_8,e3),max(mix(v3,v4,a3)*step(e3,x_8)*step(x_8,e4),max(mix(v4,v5,a4)*step(e4,x_8)*step(x_8,e5),max(mix(v5,v6,a5)*step(e5,x_8)*step(x_8,e6),max(mix(v6,v7,a6)*step(e6,x_8)*step(x_8,e7),mix(v7,v8,a7)*step(e7,x_8)*step(x_8,e8))))))));}vec4 turbidity(float x_40){const float e0=0.0;const vec4 v0=vec4(0.13333333333333333,0.12156862745098039,0.10588235294117647,1);const float e1=0.13;const vec4 v1=vec4(0.2549019607843137,0.19607843137254902,0.1607843137254902,1);const float e2=0.25;const vec4 v2=vec4(0.3843137254901961,0.27058823529411763,0.20392156862745098,1);const float e3=0.38;const vec4 v3=vec4(0.5137254901960784,0.34901960784313724,0.2235294117647059,1);const float e4=0.5;const vec4 v4=vec4(0.6313725490196078,0.4392156862745098,0.23137254901960785,1);const float e5=0.63;const vec4 v5=vec4(0.7254901960784313,0.5490196078431373,0.25882352941176473,1);const float e6=0.75;const vec4 v6=vec4(0.792156862745098,0.6823529411764706,0.34509803921568627,1);const float e7=0.88;const vec4 v7=vec4(0.8470588235294118,0.8196078431372549,0.49411764705882355,1);const float e8=1.0;const vec4 v8=vec4(0.9137254901960784,0.9647058823529412,0.6705882352941176,1);float a0=smoothstep(e0,e1,x_40);float a1=smoothstep(e1,e2,x_40);float a2=smoothstep(e2,e3,x_40);float a3=smoothstep(e3,e4,x_40);float a4=smoothstep(e4,e5,x_40);float a5=smoothstep(e5,e6,x_40);float a6=smoothstep(e6,e7,x_40);float a7=smoothstep(e7,e8,x_40);return max(mix(v0,v1,a0)*step(e0,x_40)*step(x_40,e1),max(mix(v1,v2,a1)*step(e1,x_40)*step(x_40,e2),max(mix(v2,v3,a2)*step(e2,x_40)*step(x_40,e3),max(mix(v3,v4,a3)*step(e3,x_40)*step(x_40,e4),max(mix(v4,v5,a4)*step(e4,x_40)*step(x_40,e5),max(mix(v5,v6,a5)*step(e5,x_40)*step(x_40,e6),max(mix(v6,v7,a6)*step(e6,x_40)*step(x_40,e7),mix(v7,v8,a7)*step(e7,x_40)*step(x_40,e8))))))));}vec4 velocity_blue_297387650(float x_2){const float e0=0.0;const vec4 v0=vec4(0.06666666666666667,0.12549019607843137,0.25098039215686274,1);const float e1=0.13;const vec4 v1=vec4(0.13725490196078433,0.20392156862745098,0.4549019607843137,1);const float e2=0.25;const vec4 v2=vec4(0.11372549019607843,0.3176470588235294,0.611764705882353,1);const float e3=0.38;const vec4 v3=vec4(0.12156862745098039,0.44313725490196076,0.6352941176470588,1);const float e4=0.5;const vec4 v4=vec4(0.19607843137254902,0.5647058823529412,0.6627450980392157,1);const float e5=0.63;const vec4 v5=vec4(0.3411764705882353,0.6784313725490196,0.6901960784313725,1);const float e6=0.75;const vec4 v6=vec4(0.5843137254901961,0.7686274509803922,0.7411764705882353,1);const float e7=0.88;const vec4 v7=vec4(0.796078431372549,0.8666666666666667,0.8274509803921568,1);const float e8=1.0;const vec4 v8=vec4(0.996078431372549,0.984313725490196,0.9019607843137255,1);float a0=smoothstep(e0,e1,x_2);float a1=smoothstep(e1,e2,x_2);float a2=smoothstep(e2,e3,x_2);float a3=smoothstep(e3,e4,x_2);float a4=smoothstep(e4,e5,x_2);float a5=smoothstep(e5,e6,x_2);float a6=smoothstep(e6,e7,x_2);float a7=smoothstep(e7,e8,x_2);return max(mix(v0,v1,a0)*step(e0,x_2)*step(x_2,e1),max(mix(v1,v2,a1)*step(e1,x_2)*step(x_2,e2),max(mix(v2,v3,a2)*step(e2,x_2)*step(x_2,e3),max(mix(v3,v4,a3)*step(e3,x_2)*step(x_2,e4),max(mix(v4,v5,a4)*step(e4,x_2)*step(x_2,e5),max(mix(v5,v6,a5)*step(e5,x_2)*step(x_2,e6),max(mix(v6,v7,a6)*step(e6,x_2)*step(x_2,e7),mix(v7,v8,a7)*step(e7,x_2)*step(x_2,e8))))))));}vec4 velocity_green_2558432129(float x_27){const float e0=0.0;const vec4 v0=vec4(0.09019607843137255,0.13725490196078433,0.07450980392156863,1);const float e1=0.13;const vec4 v1=vec4(0.09411764705882353,0.25098039215686274,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.043137254901960784,0.37254901960784315,0.17647058823529413,1);const float e3=0.38;const vec4 v3=vec4(0.15294117647058825,0.4823529411764706,0.13725490196078433,1);const float e4=0.5;const vec4 v4=vec4(0.37254901960784315,0.5725490196078431,0.047058823529411764,1);const float e5=0.63;const vec4 v5=vec4(0.596078431372549,0.6470588235294118,0.07058823529411765,1);const float e6=0.75;const vec4 v6=vec4(0.788235294117647,0.7294117647058823,0.27058823529411763,1);const float e7=0.88;const vec4 v7=vec4(0.9137254901960784,0.8470588235294118,0.5372549019607843,1);const float e8=1.0;const vec4 v8=vec4(1,0.9921568627450981,0.803921568627451,1);float a0=smoothstep(e0,e1,x_27);float a1=smoothstep(e1,e2,x_27);float a2=smoothstep(e2,e3,x_27);float a3=smoothstep(e3,e4,x_27);float a4=smoothstep(e4,e5,x_27);float a5=smoothstep(e5,e6,x_27);float a6=smoothstep(e6,e7,x_27);float a7=smoothstep(e7,e8,x_27);return max(mix(v0,v1,a0)*step(e0,x_27)*step(x_27,e1),max(mix(v1,v2,a1)*step(e1,x_27)*step(x_27,e2),max(mix(v2,v3,a2)*step(e2,x_27)*step(x_27,e3),max(mix(v3,v4,a3)*step(e3,x_27)*step(x_27,e4),max(mix(v4,v5,a4)*step(e4,x_27)*step(x_27,e5),max(mix(v5,v6,a5)*step(e5,x_27)*step(x_27,e6),max(mix(v6,v7,a6)*step(e6,x_27)*step(x_27,e7),mix(v7,v8,a7)*step(e7,x_27)*step(x_27,e8))))))));}vec4 cubehelix(float x_37){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.07;const vec4 v1=vec4(0.08627450980392157,0.0196078431372549,0.23137254901960785,1);const float e2=0.13;const vec4 v2=vec4(0.23529411764705882,0.01568627450980392,0.4117647058823529,1);const float e3=0.2;const vec4 v3=vec4(0.42745098039215684,0.00392156862745098,0.5294117647058824,1);const float e4=0.27;const vec4 v4=vec4(0.6313725490196078,0,0.5764705882352941,1);const float e5=0.33;const vec4 v5=vec4(0.8235294117647058,0.00784313725490196,0.5568627450980392,1);const float e6=0.4;const vec4 v6=vec4(0.984313725490196,0.043137254901960784,0.4823529411764706,1);const float e7=0.47;const vec4 v7=vec4(1,0.11372549019607843,0.3803921568627451,1);const float e8=0.53;const vec4 v8=vec4(1,0.21176470588235294,0.27058823529411763,1);const float e9=0.6;const vec4 v9=vec4(1,0.3333333333333333,0.1803921568627451,1);const float e10=0.67;const vec4 v10=vec4(1,0.47058823529411764,0.13333333333333333,1);const float e11=0.73;const vec4 v11=vec4(1,0.615686274509804,0.1450980392156863,1);const float e12=0.8;const vec4 v12=vec4(0.9450980392156862,0.7490196078431373,0.2235294117647059,1);const float e13=0.87;const vec4 v13=vec4(0.8784313725490196,0.8627450980392157,0.36470588235294116,1);const float e14=0.93;const vec4 v14=vec4(0.8549019607843137,0.9450980392156862,0.5568627450980392,1);const float e15=1.0;const vec4 v15=vec4(0.8901960784313725,0.9921568627450981,0.7764705882352941,1);float a0=smoothstep(e0,e1,x_37);float a1=smoothstep(e1,e2,x_37);float a2=smoothstep(e2,e3,x_37);float a3=smoothstep(e3,e4,x_37);float a4=smoothstep(e4,e5,x_37);float a5=smoothstep(e5,e6,x_37);float a6=smoothstep(e6,e7,x_37);float a7=smoothstep(e7,e8,x_37);float a8=smoothstep(e8,e9,x_37);float a9=smoothstep(e9,e10,x_37);float a10=smoothstep(e10,e11,x_37);float a11=smoothstep(e11,e12,x_37);float a12=smoothstep(e12,e13,x_37);float a13=smoothstep(e13,e14,x_37);float a14=smoothstep(e14,e15,x_37);return max(mix(v0,v1,a0)*step(e0,x_37)*step(x_37,e1),max(mix(v1,v2,a1)*step(e1,x_37)*step(x_37,e2),max(mix(v2,v3,a2)*step(e2,x_37)*step(x_37,e3),max(mix(v3,v4,a3)*step(e3,x_37)*step(x_37,e4),max(mix(v4,v5,a4)*step(e4,x_37)*step(x_37,e5),max(mix(v5,v6,a5)*step(e5,x_37)*step(x_37,e6),max(mix(v6,v7,a6)*step(e6,x_37)*step(x_37,e7),max(mix(v7,v8,a7)*step(e7,x_37)*step(x_37,e8),max(mix(v8,v9,a8)*step(e8,x_37)*step(x_37,e9),max(mix(v9,v10,a9)*step(e9,x_37)*step(x_37,e10),max(mix(v10,v11,a10)*step(e10,x_37)*step(x_37,e11),max(mix(v11,v12,a11)*step(e11,x_37)*step(x_37,e12),max(mix(v12,v13,a12)*step(e12,x_37)*step(x_37,e13),max(mix(v13,v14,a13)*step(e13,x_37)*step(x_37,e14),mix(v14,v15,a14)*step(e14,x_37)*step(x_37,e15)))))))))))))));}vec3 hsv_to_rgb(vec3 c){vec4 K=vec4(1.0,2.0/3.0,1.0/3.0,3.0);vec3 p=abs(fract(c.xxx+K.xyz)*6.0-K.www);return c.z*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),c.y);}vec3 rgb_to_hsv(vec3 rgb){float Cmax=max(rgb.r,max(rgb.g,rgb.b));float Cmin=min(rgb.r,min(rgb.g,rgb.b));float delta=Cmax-Cmin;vec3 hsv=vec3(0.,0.,Cmax);if(Cmax>Cmin){hsv.y=delta/Cmax;if(rgb.r==Cmax){hsv.x=(rgb.g-rgb.b)/delta;}else{if(rgb.g==Cmax){hsv.x=2.+(rgb.b-rgb.r)/delta;}else{hsv.x=4.+(rgb.r-rgb.g)/delta;}}hsv.x=fract(hsv.x/6.);}return hsv;}float sample_and_apply_sliders(SAMPLER_TYPE channel,vec3 vTexCoord,vec2 sliderValues){float fragIntensity=float(texture(channel,vTexCoord).r);float slidersAppliedToIntensity=(fragIntensity-sliderValues[0])/max(0.0005,(sliderValues[1]-sliderValues[0]));return max(0.0,slidersAppliedToIntensity);}vec4 colormap(float intensity,float opacity){return vec4(COLORMAP_FUNCTION(min(1.0,intensity)).xyz,opacity);}"};const GV={[yV.MAX_INTENSITY_PROJECTION]:{_BEFORE_RENDER:"      float maxVals[6] = float[6](-1.0, -1.0, -1.0, -1.0, -1.0, -1.0);\n    ",_RENDER:"    \n      float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n\n      for(int i = 0; i < 6; i++) {\n        if(intensityArray[i] > maxVals[i]) {\n          maxVals[i] = intensityArray[i];\n        }\n      }\n    ",_AFTER_RENDER:"      vec3 rgbCombo = vec3(0.0);\n      for(int i = 0; i < 6; i++) {\n        vec3 hsvCombo = rgb2hsv(vec3(colorValues[i]));\n        hsvCombo = vec3(hsvCombo.xy, maxVals[i]);\n        rgbCombo += hsv2rgb(hsvCombo);\n      }\n      color = vec4(rgbCombo, 1.0);\n    "},[yV.MIN_INTENSITY_PROJECTION]:{_BEFORE_RENDER:"      float minVals[6] = float[6](1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0.);\n    ",_RENDER:"    \n      float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n\n      for(int i = 0; i < 6; i++) {\n        if(intensityArray[i] < minVals[i]) {\n          minVals[i] = intensityArray[i];\n        }\n      }\n    ",_AFTER_RENDER:"      vec3 rgbCombo = vec3(0.0);\n      for(int i = 0; i < 6; i++) {\n        vec3 hsvCombo = rgb2hsv(vec3(colorValues[i]));\n        hsvCombo = vec3(hsvCombo.xy, minVals[i]);\n        rgbCombo += hsv2rgb(hsvCombo);\n      }\n      color = vec4(rgbCombo, 1.0);\n    "},[yV.ADDITIVE]:{_BEFORE_RENDER:"",_RENDER:"      vec3 rgbCombo = vec3(0.0);\n      vec3 hsvCombo = vec3(0.0);\n      float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n      float total = 0.0;\n      for(int i = 0; i < 6; i++) {\n        float intensityValue = intensityArray[i];\n        hsvCombo = rgb2hsv(vec3(colorValues[i]));\n        hsvCombo = vec3(hsvCombo.xy, intensityValue);\n        rgbCombo += hsv2rgb(hsvCombo);\n        total += intensityValue;\n      }\n      // Do not go past 1 in opacity.\n      total = min(total, 1.0);\n      vec4 val_color = vec4(rgbCombo, total);\n      // Opacity correction\n      val_color.a = 1.0 - pow(1.0 - val_color.a, 1.0);\n      color.rgb += (1.0 - color.a) * val_color.a * val_color.rgb;\n      color.a += (1.0 - color.a) * val_color.a;\n      if (color.a >= 0.95) {\n        break;\n      }\n    ",_AFTER_RENDER:""}},HV={[yV.MAX_INTENSITY_PROJECTION]:{_BEFORE_RENDER:"      float maxVals[6] = float[6](-1.0, -1.0, -1.0, -1.0, -1.0, -1.0);\n    ",_RENDER:"    \n      float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n\n      for(int i = 0; i < 6; i++) {\n        if(intensityArray[i] > maxVals[i]) {\n          maxVals[i] = intensityArray[i];\n        }\n      }\n    ",_AFTER_RENDER:"      float total = 0.0;\n      for(int i = 0; i < 6; i++) {\n        total += maxVals[i];\n      }\n      // Do not go past 1 in opacity/colormap value.\n      total = min(total, 1.0);\n      color = colormap(total, total);\n    "},[yV.MIN_INTENSITY_PROJECTION]:{_BEFORE_RENDER:"      float minVals[6] = float[6](1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0.);\n    ",_RENDER:"    \n      float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n\n      for(int i = 0; i < 6; i++) {\n        if(intensityArray[i] < minVals[i]) {\n          minVals[i] = intensityArray[i];\n        }\n      }\n    ",_AFTER_RENDER:"      float total = 0.0;\n      for(int i = 0; i < 6; i++) {\n        total += minVals[i];\n      }\n      // Do not go past 1 in opacity/colormap value.\n      total = min(total, 1.0);\n      color = colormap(total, total);\n    "},[yV.ADDITIVE]:{_BEFORE_RENDER:"",_RENDER:"    float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);\n\t\tfloat total = 0.0;\n\n\t\tfor(int i = 0; i < 6; i++) {\n\t\t\ttotal += intensityArray[i];\n\t\t}\n\t\t// Do not go past 1 in opacity/colormap value.\n\t\ttotal = min(total, 1.0);\n\n\t\tvec4 val_color = colormap(total, total);\n\n\t\t// Opacity correction\n\t\tval_color.a = 1.0 - pow(1.0 - val_color.a, 1.0);\n\t\tcolor.rgb += (1.0 - color.a) * val_color.a * val_color.rgb;\n\t\tcolor.a += (1.0 - color.a) * val_color.a;\n\t\tif (color.a >= 0.95) {\n\t\t\tbreak;\n\t\t}\n    p += ray_dir * dt;\n    ",_AFTER_RENDER:""}};function qV(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],o=e[r+1];if(r+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=o(n)):"call"!==i&&"optionalCall"!==i||(n=o(((...e)=>n.call(t,...e))),t=void 0)}return n}const $V=[1,1,0,0,1,0,1,1,1,0,1,1,0,0,1,0,1,0,0,0,0,1,1,0,1,0,0,1,1,1,1,0,1,0,0,1,1,0,0,0,0,0],XV={pickable:!1,coordinateSystem:yC.CARTESIAN,channelData:{type:"object",value:{},compare:!0},colorValues:{type:"array",value:[],compare:!0},sliderValues:{type:"array",value:[],compare:!0},dtype:{type:"string",value:"Uint8",compare:!0},colormap:{type:"string",value:"",compare:!0},xSlice:{type:"array",value:null,compare:!0},ySlice:{type:"array",value:null,compare:!0},zSlice:{type:"array",value:null,compare:!0},clippingPlanes:{type:"array",value:[],compare:!0},renderingMode:{type:"string",value:yV.ADDITIVE,compare:!0},resolutionMatrix:{type:"object",value:new lP,compare:!0}};function YV(){const e=_V("Float32");return l(s({},e),{sampler:e.sampler.replace("2D","3D"),cast:e=>new Float32Array(e)})}const ZV=class extends xM{initializeState(){const{gl:e}=this.context;this.setState({model:this._getModel(e)}),e.pixelStorei(mL,1),e.pixelStorei(gL,1)}getShaders(){const{colormap:e,renderingMode:t,clippingPlanes:n}=this.props,{sampler:r}=YV(),{_BEFORE_RENDER:i,_RENDER:o,_AFTER_RENDER:a}=e?HV[t]:GV[t],u=function(e){const t=gV.filter((t=>t!==(e||"viridis"))).map((e=>e.replace(/-/g,"_"))),n=new RegExp(`vec4 (${t.join("(_([0-9]*))?|")})\\(float x_[0-9]+\\){([^}]+)}`,"g");return l(s({},WV),{fs:WV.fs.replace(n,""),defines:{COLORMAP_FUNCTION:e||"viridis"}})}(e);return super.getShaders({vs:'#version 300 es\n#define GLSLIFY 1\n#define SHADER_NAME xr-layer-vertex-shader\nin vec3 positions;uniform vec3 eye_pos;uniform mat4 proj;uniform mat4 model;uniform mat4 view;uniform mat4 scale;uniform mat4 resolution;out vec3 vray_dir;flat out vec3 transformed_eye;void main(){gl_Position=proj*view*model*scale*resolution*vec4(positions,1.0);/*This first diagram is a skewed volume(i.e a "shear" model matrix applied)top down with the eye marked as #,all in world space^___|__\\|\\\\|\\|____|||\n#\nThis next diagram shows the volume after the inverse model matrix has placed it back in model coordinates,but the eye still in world space.^___|___|||||||__|__||||\n#\nFinally,we apply the inverse model matrix transformation to the eye as well to bring it too into world space.Notice that the ray here matches the "voxels" through which the first ray also passes,as desired.^____/__|/||/||/____|///\n#\n*/transformed_eye=(inverse(resolution)*inverse(scale)*inverse(model)*(vec4(eye_pos,1.0))).xyz;vray_dir=positions-transformed_eye;}',fs:"#version 300 es\nprecision highp int;precision highp float;precision highp SAMPLER_TYPE;\n#define GLSLIFY 1\nuniform highp SAMPLER_TYPE volume0;uniform highp SAMPLER_TYPE volume1;uniform highp SAMPLER_TYPE volume2;uniform highp SAMPLER_TYPE volume3;uniform highp SAMPLER_TYPE volume4;uniform highp SAMPLER_TYPE volume5;uniform vec3 scaledDimensions;uniform mat4 scale;uniform vec3 normals[NUM_PLANES];uniform float distances[NUM_PLANES];uniform vec2 sliderValues[6];uniform vec3 colorValues[6];uniform vec2 xSlice;uniform vec2 ySlice;uniform vec2 zSlice;in vec3 vray_dir;flat in vec3 transformed_eye;out vec4 color;vec2 intersect_box(vec3 orig,vec3 dir){vec3 box_min=vec3(xSlice[0],ySlice[0],zSlice[0]);vec3 box_max=vec3(xSlice[1],ySlice[1],zSlice[1]);vec3 inv_dir=1.0/dir;vec3 tmin_tmp=(box_min-orig)*inv_dir;vec3 tmax_tmp=(box_max-orig)*inv_dir;vec3 tmin=min(tmin_tmp,tmax_tmp);vec3 tmax=max(tmin_tmp,tmax_tmp);float t0=max(tmin.x,max(tmin.y,tmin.z));float t1=min(tmax.x,min(tmax.y,tmax.z));vec2 val=vec2(t0,t1);return val;}float linear_to_srgb(float x){if(x<=0.0031308f){return 12.92f*x;}return 1.055f*pow(x,1.f/2.4f)-0.055f;}vec3 hsv2rgb(vec3 c){vec4 K=vec4(1.0,2.0/3.0,1.0/3.0,3.0);vec3 p=abs(fract(c.xxx+K.xyz)*6.0-K.www);return c.z*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),c.y);}vec3 rgb2hsv(vec3 rgb){float Cmax=max(rgb.r,max(rgb.g,rgb.b));float Cmin=min(rgb.r,min(rgb.g,rgb.b));float delta=Cmax-Cmin;vec3 hsv=vec3(0.,0.,Cmax);if(Cmax>Cmin){hsv.y=delta/Cmax;if(rgb.r==Cmax){hsv.x=(rgb.g-rgb.b)/delta;}else{if(rgb.g==Cmax){hsv.x=2.+(rgb.b-rgb.r)/delta;}else{hsv.x=4.+(rgb.r-rgb.g)/delta;}}hsv.x=fract(hsv.x/6.);}return hsv;}float wang_hash(int seed){seed=(seed ^ 61)^(seed>>16);seed*=9;seed=seed ^(seed>>4);seed*=0x27d4eb2d;seed=seed ^(seed>>15);return float(seed % 2147483647)/float(2147483647);}void main(void){vec3 ray_dir=normalize(vray_dir);vec2 t_hit=intersect_box(transformed_eye,ray_dir);if(t_hit.x>t_hit.y){discard;}t_hit.x=max(t_hit.x,0.0);vec3 dt_vec=1.0/(scale*vec4(abs(ray_dir),1.0)).xyz;float dt=1.0*min(dt_vec.x,min(dt_vec.y,dt_vec.z));float offset=wang_hash(int(gl_FragCoord.x+640.0*gl_FragCoord.y));vec3 p=transformed_eye+(t_hit.x+offset*dt)*ray_dir;_BEFORE_RENDERfor(float t=t_hit.x;t<t_hit.y;t+=dt){float canShow=1.;for(int i=0;i<NUM_PLANES;i+=1){canShow*=max(0.,sign(dot(normals[i],p)+distances[i]));}float canShowXCoordinate=max(p.x-0.0,0.0)*max(1.0-p.x,0.0);float canShowYCoordinate=max(p.y-0.0,0.0)*max(1.0-p.y,0.0);float canShowZCoordinate=max(p.z-0.0,0.0)*max(1.0-p.z,0.0);float canShowCoordinate=float(ceil(canShowXCoordinate*canShowYCoordinate*canShowZCoordinate));canShow=canShowCoordinate*canShow;float intensityValue0=canShow*sample_and_apply_sliders(volume0,p,sliderValues[0]);float intensityValue1=canShow*sample_and_apply_sliders(volume1,p,sliderValues[1]);float intensityValue2=canShow*sample_and_apply_sliders(volume2,p,sliderValues[2]);float intensityValue3=canShow*sample_and_apply_sliders(volume3,p,sliderValues[3]);float intensityValue4=canShow*sample_and_apply_sliders(volume4,p,sliderValues[4]);float intensityValue5=canShow*sample_and_apply_sliders(volume5,p,sliderValues[5]);_RENDERp+=ray_dir*dt;}_AFTER_RENDERcolor.r=linear_to_srgb(color.r);color.g=linear_to_srgb(color.g);color.b=linear_to_srgb(color.b);}".replace("_BEFORE_RENDER",i).replace("_RENDER",o).replace("_AFTER_RENDER",a),defines:{SAMPLER_TYPE:r,COLORMAP_FUNCTION:e||"viridis",NUM_PLANES:String(n.length||1)},modules:[u]})}finalizeState(){super.finalizeState(),this.state.textures&&Object.values(this.state.textures).forEach((e=>e&&e.delete()))}updateState({props:e,oldProps:t,changeFlags:n}){if(n.extensionsChanged||e.colormap!==t.colormap||e.renderingMode!==t.renderingMode||e.clippingPlanes.length!==t.clippingPlanes.length){const{gl:e}=this.context;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(e)})}e.channelData&&qV([e,"optionalAccess",e=>e.channelData,"optionalAccess",e=>e.data])!==qV([t,"optionalAccess",e=>e.channelData,"optionalAccess",e=>e.data])&&this.loadTexture(e.channelData)}_getModel(e){return e?new KP(e,l(s({},this.getShaders()),{geometry:new fC({drawMode:e.TRIANGLE_STRIP,attributes:{positions:new Float32Array($V)}})})):null}draw({uniforms:e}){const{textures:t,model:n,scaleMatrix:r}=this.state,{sliderValues:i,colorValues:o,xSlice:a,ySlice:u,zSlice:c,modelMatrix:f,channelIsOn:h,domain:d,dtype:p,clippingPlanes:v,resolutionMatrix:m}=this.props,{viewMatrix:g,viewMatrixInverse:y,projectionMatrix:x}=this.context.viewport;if(t&&n&&r){const{paddedSliderValues:b,paddedColorValues:_}=wV({sliderValues:i,colorValues:o,channelIsOn:h,domain:d,dtype:p}),w=r.clone().invert(),k=m.clone().invert(),S=bV(v.map((e=>e.clone().transform(w).transform(k))),new HF([1,0,0]),v.length||1),E=S.map((e=>e.normal)).flat(),P=S.map((e=>e.distance));n.setUniforms(l(s(s({},e),t),{sliderValues:b,colorValues:_,xSlice:new Float32Array(a?a.map((e=>e/r[0]/m[0])):[0,1]),ySlice:new Float32Array(u?u.map((e=>e/r[5]/m[5])):[0,1]),zSlice:new Float32Array(c?c.map((e=>e/r[10]/m[10])):[0,1]),eye_pos:new Float32Array([y[12],y[13],y[14]]),view:g,proj:x,scale:r,resolution:m,model:f||new lP,normals:E,distances:P})).draw()}}loadTexture(e){const t={volume0:null,volume1:null,volume2:null,volume3:null,volume4:null,volume5:null};if(this.state.textures&&Object.values(this.state.textures).forEach((e=>e&&e.delete())),e&&Object.keys(e).length>0&&e.data){const{height:n,width:r,depth:i}=e;e.data.forEach(((e,o)=>{t[`volume${o}`]=this.dataToTexture(e,r,n,i)}),this),this.setState({textures:t,scaleMatrix:(new lP).scale(this.props.physicalSizeScalingMatrix.transformPoint([r,n,i]))})}}dataToTexture(e,t,n,r){const i=YV();var o,a;return new X_(this.context.gl,{width:t,height:n,depth:r,data:(o=qV([i,"access",e=>e.cast,"optionalCall",t=>t(e)]),a=()=>e,null!=o?o:a()),format:i.dataFormat,dataFormat:i.format,type:i.type,mipmaps:!1,parameters:{[LL]:RL,[IL]:RL,[jL]:NL,[DL]:NL,[zL]:NL}})}};ZV.layerName="XR3DLayer",ZV.defaultProps=XV;const KV={pickable:!1,coordinateSystem:yC.CARTESIAN,sliderValues:{type:"array",value:[],compare:!0},channelIsOn:{type:"array",value:[],compare:!0},colorValues:{type:"array",value:[],compare:!0},colormap:{type:"string",value:"",compare:!0},loaderSelection:{type:"array",value:[],compare:!0},resolution:{type:"number",value:0,compare:!0},domain:{type:"array",value:[],compare:!0},loader:{type:"object",value:[{getRaster:async()=>({data:[],height:0,width:0}),dtype:"Uint16",shape:[1],labels:["z"]}],compare:!0},xSlice:{type:"array",value:null,compare:!0},ySlice:{type:"array",value:null,compare:!0},zSlice:{type:"array",value:null,compare:!0},clippingPlanes:{type:"array",value:[],compare:!0},renderingMode:{type:"string",value:yV.MAX_INTENSITY_PROJECTION,compare:!0},onUpdate:{type:"function",value:()=>{},compare:!0},useProgressIndicator:{type:"boolean",value:!0,compare:!0}},QV=class extends qI{finalizeState(){this.state.abortController.abort()}updateState({changeFlags:e,oldProps:t,props:n}){const{propsChanged:r}=e,i="string"==typeof r&&r.includes("props.loader"),o="string"==typeof r&&r.includes("props.resolution"),a=n.loaderSelection!==t.loaderSelection;if(i||a||o){const{loader:e,loaderSelection:t=[],resolution:n,onViewportLoad:r}=this.props,i=e[n];let o=0;const a=(i.shape[i.labels.indexOf("z")]>>n)*t.length,u=()=>{o+=.5/a,this.props.onUpdate&&this.props.onUpdate({progress:o}),this.setState({progress:o})},c=new AbortController;this.setState({abortController:c});const{signal:f}=c,h=t.map((e=>async function({source:e,selection:t,onUpdate:n=(()=>{}),downsampleDepth:r=1,signal:i}){const{shape:o,labels:a,dtype:u}=e,{height:c,width:f}=jV(e),h=o[a.indexOf("z")],d=Math.floor(h/r),p=c*f,v=new(0,globalThis[`${u}Array`])(p*d);return await Promise.all(new Array(d).fill(0).map((async(o,a)=>{const u=l(s({},t),{z:a*r}),{data:c}=await e.getRaster({selection:u,signal:i});let h=0;for(n();h<p;){const e=a*p+(p-h-1),t=(f-h-1)%f+f*Math.floor(h/f);v[e]=c[t],h+=1}n()}))),{data:v,height:c,width:f,depth:d}}({selection:e,source:i,onUpdate:u,downsampleDepth:2**n,signal:f}))),d=function(e){const{x:t,y:n,z:r}=(i=xV([e,"optionalAccess",e=>e.meta,"optionalAccess",e=>e.physicalSizes]),o=()=>({}),null!=i?i:o());var i,o;if(xV([t,"optionalAccess",e=>e.size])&&xV([n,"optionalAccess",e=>e.size])&&xV([r,"optionalAccess",e=>e.size])){const e=Math.min(r.size,t.size,n.size),i=[t.size/e,n.size/e,r.size/e];return(new lP).scale(i)}return(new lP).identity()}(e[n]);Promise.all(h).then((e=>{r&&r(e);const t={data:e.map((e=>e.data)),width:e[0].width,height:e[0].height,depth:e[0].depth};this.setState(l(s({},t),{physicalSizeScalingMatrix:d,resolutionMatrix:(new lP).scale(2**n)}))}))}}renderLayers(){const{loader:e,id:t,resolution:n,useProgressIndicator:r}=this.props,{dtype:i}=e[n],{data:o,width:a,height:s,depth:l,progress:u,physicalSizeScalingMatrix:c,resolutionMatrix:f}=this.state;if((!a||!s)&&r){const{viewport:e}=this.context;return new vF({id:`loading-text-layer-${t}`,coordinateSystem:yC.CARTESIAN,data:[{text:`Loading Volume ${String(100*(u||0)).slice(0,5)}%...`,position:e.position}],getColor:[220,220,220,255],getSize:25,sizeUnits:"meters",sizeScale:2**-e.zoom,fontFamily:"Helvetica"})}return new ZV(this.props,{channelData:{data:o,width:a,height:s,depth:l},id:`XR3DLayer-0-${s}-${a}-0-${n}-${t}`,physicalSizeScalingMatrix:c,parameters:{[yL]:!0,[vL]:xL,[bL]:!1,blendFunc:[pL,dL],blend:!0},resolutionMatrix:f,dtype:i})}};var JV,eU;function tU(e){const t=e.length,n=function(e){const t=new Map(e.map(((e,t)=>[e,t])));if(t.size!==e.length)throw Error("Labels must be unique, found duplicated label.");return e=>{const n=t.get(e);if(void 0===n)throw Error("Invalid dimension.");return n}}(e);return e=>{if(Array.isArray(e))return[...e];const r=Array(t).fill(0);for(const[t,i]of Object.entries(e))r[n(t)]=i;return r}}QV.layerName="VolumeLayer",QV.defaultProps=KV,JV=function(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],o=e[r+1];if(r+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=o(n)):"call"!==i&&"optionalCall"!==i||(n=o(((...e)=>n.call(t,...e))),t=void 0)}return n}([globalThis,"optionalAccess",e=>e.navigator,"optionalAccess",e=>e.hardwareConcurrency]),eU=()=>4,null!=JV||eU();const nU={u1:"Uint8",u2:"Uint16",u4:"Uint32",f4:"Float32",f8:"Float64",i1:"Int8",i2:"Int16",i4:"Int32"};class rU{constructor(e,t,n){this.labels=t,this.tileSize=n,this._indexer=tU(t),this._data=e;const r=e.chunks[this._xIndex],i=e.chunks[this._xIndex-1];this._readChunks=n===r&&n===i}get shape(){return this._data.shape}get dtype(){const e=this._data.dtype.slice(1);if(!(e in nU))throw Error(`Zarr dtype not supported, got ${e}.`);return nU[e]}get _xIndex(){const e=LV(this._data.shape);return this._data.shape.length-(e?2:1)}_chunkIndex(e,t,n){const r=this._indexer(e);return r[this._xIndex]=t,r[this._xIndex-1]=n,r}_getSlices(e,t){const{height:n,width:r}=jV(this),[i,o]=[e*this.tileSize,Math.min((e+1)*this.tileSize,r)],[a,s]=[t*this.tileSize,Math.min((t+1)*this.tileSize,n)];if(i===o||a===s)throw new QB("Tile slice is zero-sized.");return[eV(i,o),eV(a,s)]}async getRaster({selection:e}){const t=this._chunkIndex(e,null,null),{data:n,shape:r}=await this._data.getRaw(t),[i,o]=r;return{data:n,width:o,height:i}}async getTile(e){const{x:t,y:n,selection:r,signal:i}=e;let o;if(this._readChunks){const e=this._chunkIndex(r,t,n);o=await this._data.getRawChunk(e,{storeOptions:{signal:i}})}else{const[e,i]=this._getSlices(t,n),a=this._chunkIndex(r,e,i);o=await this._data.getRaw(a)}const{data:a,shape:[s,l]}=o;return{data:a,width:l,height:s}}onTileError(e){if(!(e instanceof QB))throw e}}const iU=new Map;function oU(e,t){iU.set(e,t)}function aU(e){return new Proxy(e,{set:(e,t,n,r)=>e.setItem(t,n),get:(e,t,n)=>e.getItem(t),deleteProperty:(e,t)=>e.deleteItem(t),has:(e,t)=>e.containsItem(t)})}function sU(e){return"object"==typeof(t=e)&&null!==t&&"__zarr__"in t&&"KeyError"===e.__zarr__;var t}class lU extends Error{constructor(e){super(`path ${e} contains an array`),this.__zarr__="ContainsArrayError",Object.setPrototypeOf(this,lU.prototype)}}class uU extends Error{constructor(e){super(`path ${e} contains a group`),this.__zarr__="ContainsGroupError",Object.setPrototypeOf(this,uU.prototype)}}class cU extends Error{constructor(e){super(`array not found at path ${e}`),this.__zarr__="ArrayNotFoundError",Object.setPrototypeOf(this,cU.prototype)}}class fU extends Error{constructor(e){super(`ground not found at path ${e}`),this.__zarr__="GroupNotFoundError",Object.setPrototypeOf(this,fU.prototype)}}class hU extends Error{constructor(e){super(e),this.__zarr__="PermissionError",Object.setPrototypeOf(this,hU.prototype)}}class dU extends Error{constructor(e){super(`key ${e} not present`),this.__zarr__="KeyError",Object.setPrototypeOf(this,dU.prototype)}}class pU extends RangeError{constructor(e,t){super(`too many indices for array; expected ${t.length}, got ${e.length}`),this.__zarr__="TooManyIndicesError",Object.setPrototypeOf(this,pU.prototype)}}class vU extends RangeError{constructor(e){super(e),this.__zarr__="BoundsCheckError",Object.setPrototypeOf(this,vU.prototype)}}class mU extends RangeError{constructor(e,t,n,r){super(`slice arguments slice(${e}, ${t}, ${n}) invalid: ${r}`),this.__zarr__="InvalidSliceError",Object.setPrototypeOf(this,mU.prototype)}}class gU extends Error{constructor(){super("Negative step size is not supported when indexing."),this.__zarr__="NegativeStepError",Object.setPrototypeOf(this,gU.prototype)}}class yU extends Error{constructor(e){super(e),this.__zarr__="ValueError",Object.setPrototypeOf(this,yU.prototype)}}class xU extends Error{constructor(e){super(e),this.__zarr__="HTTPError",Object.setPrototypeOf(this,xU.prototype)}}function bU(e,t,n=null){if(void 0===e)throw new mU(e,t,n,"The first argument must not be undefined");if("string"==typeof e&&":"!==e||"string"==typeof t&&":"!==t)throw new mU(e,t,n,'Arguments can only be integers, ":" or null');return void 0===t&&(t=e,e=null),{start:":"===e?null:e,stop:":"===t?null:t,step:n,_slice:!0}}function _U(e,t){let n,r,i;i=null===e.step?1:e.step,null===e.start?n=i<0?Number.MAX_SAFE_INTEGER:0:(n=e.start,n<0&&(n+=t)),null===e.stop?r=i<0?-Number.MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER:(r=e.stop,r<0&&(r+=t));const o=function(e,t,n,r){if(e<0?(e+=r)<0&&(e=n<0?-1:0):e>=r&&(e=n<0?r-1:r),t<0?(t+=r)<0&&(t=n<0?-1:0):t>=r&&(t=n<0?r-1:r),n<0){if(t<e)return[e,t,n,Math.floor((e-t-1)/-n+1)]}else if(e<t)return[e,t,n,Math.floor((t-e-1)/n+1)];return[e,t,n,0]}(n,r,i,t);if(n=o[0],r=o[1],i=o[2],t=o[3],0===i)throw new Error("Step size 0 is invalid");return[n,r,i,t]}function wU(e){return Array.isArray(e)?e:[e]}function kU(e,t){const n=[],r=[];for(let i=0;i<e.length;i++){const o=e[i];if("number"==typeof o)n.push(o);else{const e=_U(o,t[i]),a=e[3];r.push(a),n.push(e)}}return[n,r]}function SU(e,t,n=!1){e=function(e,t){e=wU(e);let n=-1,r=0;for(let i=0;i<e.length;i++)"..."===e[i]&&(n=i,r+=1);if(r>1)throw new RangeError("an index can only have a single ellipsis ('...')");if(1===r){const r=n,i=e.length-(r+1),o=e.length-1;if(o>=t.length)e=e.filter((e=>"..."!==e));else{const n=t.length-o;let a=e.slice(0,r).concat(new Array(n).fill(null));i>0&&(a=a.concat(e.slice(e.length-i))),e=a}}if(e.length<t.length){const n=t.length-e.length;e=e.concat(new Array(n).fill(null))}return function(e,t){if(e.length>t.length)throw new pU(e,t)}(e,t),e}(e,t);for(let r=0;r<e.length;r++){const i=e[r];if("number"==typeof i)e[r]=n?bU(i,i+1,1):EU(i,t[r]);else{if(PU(i))throw new TypeError("Integer array selections are not supported (yet)");":"!==i&&null!==i||(e[r]=bU(null,null,1))}}return e}function EU(e,t){if(e<0&&(e=t+e),e>=t||e<0)throw new vU(`index out of bounds for dimension with length ${t}`);return e}function PU(e){if(!Array.isArray(e))return!1;for(const t of e)if("number"!=typeof t)return!1;return!0}function CU(e){return null!==e&&!0===e._slice}function AU(e){return CU(e)&&(null===e.step||1===e.step)}class OU{constructor(e,t){e=SU(e,t.shape),this.dimIndexers=[];const n=t.shape;for(let r=0;r<n.length;r++){let i=e[r];const o=n[r],a=t.chunks[r];if(null===i&&(i=bU(null)),"number"==typeof i)this.dimIndexers.push(new TU(i,o,a));else{if(!CU(i))throw new RangeError(`Unspported selection item for basic indexing; expected integer or slice, got ${i}`);this.dimIndexers.push(new MU(i,o,a))}}this.shape=[];for(const r of this.dimIndexers)r instanceof MU&&this.shape.push(r.numItems);this.dropAxes=null}*iter(){const e=function*(...e){if(0===e.length)return;const t=e.map((e=>e())),n=t.map((e=>e.next()));for(let r=0;;){if(n[r].done){if(t[r]=e[r](),n[r]=t[r].next(),++r>=t.length)return}else yield n.map((({value:e})=>e)),r=0;n[r]=t[r].next()}}(...this.dimIndexers.map((e=>()=>e.iter())));for(const t of e){const e=[],n=[],r=[];for(const i of t)e.push(i.dimChunkIndex),n.push(i.dimChunkSelection),null!==i.dimOutSelection&&r.push(i.dimOutSelection);yield{chunkCoords:e,chunkSelection:n,outSelection:r}}}}class TU{constructor(e,t,n){e=EU(e,t),this.dimSelection=e,this.dimLength=t,this.dimChunkLength=n,this.numItems=1}*iter(){const e=Math.floor(this.dimSelection/this.dimChunkLength),t=e*this.dimChunkLength,n=this.dimSelection-t;yield{dimChunkIndex:e,dimChunkSelection:n,dimOutSelection:null}}}class MU{constructor(e,t,n){const[r,i,o]=_U(e,t);if(this.start=r,this.stop=i,this.step=o,this.step<1)throw new gU;this.dimLength=t,this.dimChunkLength=n,this.numItems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.numChunks=Math.ceil(this.dimLength/this.dimChunkLength)}*iter(){const e=Math.floor(this.start/this.dimChunkLength),t=Math.ceil(this.stop/this.dimChunkLength);for(let n=e;n<t;n++){const e=n*this.dimChunkLength,t=Math.min(this.dimLength,(n+1)*this.dimChunkLength),r=t-e;let i,o,a;if(this.start<e){i=0;const t=(e-this.start)%this.step;t>0&&(i+=this.step-t),a=Math.ceil((e-this.start)/this.step)}else i=this.start-e,a=0;o=this.stop>t?r:this.stop-e;const s=bU(i,o,this.step),l=bU(a,a+Math.ceil((o-i)/this.step));yield{dimChunkIndex:n,dimChunkSelection:s,dimOutSelection:l}}}}const RU="undefined"!=typeof process&&process.versions&&process.versions.node;function IU(e){if(null===e)return"";for(e instanceof String&&(e=e.valueOf()),e=e.replace(/\\/g,"/");e.length>0&&"/"===e[0];)e=e.slice(1);for(;e.length>0&&"/"===e[e.length-1];)e=e.slice(0,e.length-1);const t=(e=e.replace(/\/\/+/g,"/")).split("/");for(const n of t)if("."===n||".."===n)throw Error("path containing '.' or '..' segment not allowed");return e}function LU(e){return"number"==typeof e&&(e=[e]),e.map((e=>Math.floor(e)))}function jU(e,t){if(null===e)return!0;Array.isArray(e)||(e=[e]);for(let n=0;n<Math.min(e.length,t.length);n++){const r=e[n];if(null!==r){if(CU(r)){const e=r,i=1===e.step||null===e.step;if(null===e.start&&null===e.stop&&i)continue;if(e.stop-e.start===t[n]&&i)continue;return!1}return!1}}return!0}function DU(...e){return e.map(((e,t)=>0===t?e.trim().replace(/[\/]*$/g,""):e.trim().replace(/(^[\/]*|[\/]*$)/g,""))).filter((e=>e.length)).join("/")}function NU(e){const t=e.BYTES_PER_ELEMENT;if(1===t)return;if(RU){const n=Buffer.from(e.buffer,e.byteOffset,e.length*t);return 2===t&&n.swap16(),4===t&&n.swap32(),void(8===t&&n.swap64())}const n=new Uint8Array(e.buffer,e.byteOffset,e.length*t),r=t/2,i=t-1;let o;for(let a=0;a<n.length;a+=t)for(let e=0;e<r;e++)o=n[a+e],n[a+e]=n[a+i-e],n[a+i-e]=o}async function FU(e,t=null){const n=BU(t=IU(t))+".zarray";return e.containsItem(n)}async function zU(e,t=null){const n=BU(t=IU(t))+".zgroup";return e.containsItem(n)}function BU(e){return e.length>0?e+"/":""}async function VU(e,t,n,r){if(0===t.length)return;const i=t.split("/");let o="";for(const a of i.slice(0,i.length-1))o+=a,await FU(e,o)?await UU(e,o,r):await zU(e,o)||await UU(e,o),o+="/"}async function UU(e,t=null,n=!1){if(t=IU(t),n)throw Error("Group overwriting not implemented yet :(");if(await FU(e,t))throw new lU(t);if(await zU(e,t))throw new uU(t);const r=BU(t)+".zgroup";await e.setItem(r,JSON.stringify({zarr_format:2}))}async function WU(e,t=null,n=null,r=!1){t=IU(t),await VU(e,t,0,r),await UU(e,t,r)}async function GU(e,t,n,r,i,o,a,s,l,u,c,f){if(l)throw Error("Array overwriting not implemented yet :(");if(await FU(e,i))throw new lU(i);if(await zU(e,i))throw new uU(i);if(r=r,n=function(e,t){if(null===e||!0===e)throw new Error("Chunk guessing is not supported yet");return!1===e?t:("number"==typeof e&&(e=[e]),e.length<t.length&&(e=e.concat(t.slice(e.length))),e.map(((e,n)=>-1===e||null===e?t[n]:Math.floor(e))))}(n,t=LU(t)),s=function(e){return e.toUpperCase()}(s),a=a,null!==c&&c.length>0)throw Error("Filters are not supported yet");let h=a;"number"==typeof a&&(Number.isNaN(a)&&(h="NaN"),Number.POSITIVE_INFINITY===a&&(h="Infinity"),Number.NEGATIVE_INFINITY===a&&(h="-Infinity"));const d={zarr_format:2,shape:t,chunks:n,dtype:r,fill_value:h,order:s,compressor:o,filters:c=null};f&&(d.dimension_separator=f);const p=BU(i)+".zarray";await e.setItem(p,JSON.stringify(d))}async function HU(e,t,n,r,i=null,o=null,a=null,s="C",l=!1,u=null,c=null,f){i=IU(i),await VU(e,i,0,l),await GU(e,t,n,r,i,o,a,s,l,0,c,f)}function qU(e){if("string"!=typeof e){if(RU&&Buffer.isBuffer(e))return JSON.parse(e.toString());if(e instanceof ArrayBuffer){const t=new TextDecoder,n=new Uint8Array(e);return JSON.parse(t.decode(n))}return e}return JSON.parse(e)}class $U{constructor(e,t,n,r=!0){this.store=e,this.key=t,this.readOnly=n,this.cache=r,this.cachedValue=null}async asObject(){if(this.cache&&null!==this.cachedValue)return this.cachedValue;const e=await this.getNoSync();return this.cache&&(this.cachedValue=e),e}async getNoSync(){try{return qU(await this.store.getItem(this.key))}catch(e){return{}}}async setNoSync(e,t){const n=await this.getNoSync();return n[e]=t,await this.putNoSync(n),!0}async putNoSync(e){await this.store.setItem(this.key,JSON.stringify(e)),this.cache&&(this.cachedValue=e)}async delNoSync(e){const t=await this.getNoSync();return delete t[e],await this.putNoSync(t),!0}async put(e){if(this.readOnly)throw new hU("attributes are read-only");return this.putNoSync(e)}async setItem(e,t){if(this.readOnly)throw new hU("attributes are read-only");return this.setNoSync(e,t)}async getItem(e){return(await this.asObject())[e]}async deleteItem(e){if(this.readOnly)throw new hU("attributes are read-only");return this.delNoSync(e)}async containsItem(e){return void 0!==(await this.asObject())[e]}proxy(){return aU(this)}}const XU={"|b":Int8Array,"|B":Uint8Array,"|u1":Uint8Array,"|i1":Int8Array,"<b":Int8Array,"<B":Uint8Array,"<u1":Uint8Array,"<i1":Int8Array,"<u2":Uint16Array,"<i2":Int16Array,"<u4":Uint32Array,"<i4":Int32Array,"<f4":Float32Array,"<f8":Float64Array,">b":Int8Array,">B":Uint8Array,">u1":Uint8Array,">i1":Int8Array,">u2":Uint16Array,">i2":Int16Array,">u4":Uint32Array,">i4":Int32Array,">f4":Float32Array,">f8":Float64Array};function YU(e){const t=XU[e];if(!t)throw Error(`Dtype not recognized or not supported in zarr.js, got ${e}.`);return t}function ZU(e){if(e instanceof Uint8Array)return"|u1";if(e instanceof Int8Array)return"|i1";if(e instanceof Uint16Array)return"<u2";if(e instanceof Int16Array)return"<i2";if(e instanceof Uint32Array)return"<u4";if(e instanceof Int32Array)return"<i4";if(e instanceof Float32Array)return"<f4";if(e instanceof Float64Array)return"<f8";throw new yU("Mapping for TypedArray to Dtypestring not known")}function KU(e){return void 0!==e.byteLength?e.constructor:KU(e[0])}function QU(e,t,n){const r=SU(n,t),[i,o]=kU(r,t);return[JU(e,t,i),o]}function JU(e,t,n){const r=n[0];if("number"==typeof r)return 1===t.length?e[r]:JU(e[r],t.slice(1),n.slice(1));const[i,o,a,s]=r;if(0===s)return new(KU(e))(0);if(1===t.length){if(1===a)return e.slice(i,o);const t=new e.constructor(s);for(let n=0;n<s;n++)t[n]=e[i+n*a];return t}let l=new Array(s);for(let u=0;u<s;u++)l[u]=JU(e[i+u*a],t.slice(1),n.slice(1));if(s>0&&"number"==typeof l[0]){l=e[0].constructor.from(l)}return l}function eW(e,t,n,r,i){const o=SU(i,n,!1),[a,s]=kU(o,n);if(JSON.stringify(s)!==JSON.stringify(r))throw new yU(`Shape mismatch in target and source NestedArray: ${s} and ${r}`);tW(e,t,n,a)}function tW(e,t,n,r){const i=r[0];if("number"==typeof t)return void nW(e,t,n,r.map((e=>"number"==typeof e?[e,e+1,1,1]:e)));if("number"==typeof i)return void tW(e[i],t,n.slice(1),r.slice(1));const[o,a,s,l]=i;if(1!==n.length)for(let u=0;u<l;u++)tW(e[o+u*s],t[u],n.slice(1),r.slice(1));else if(1===s)e.set(t,o);else for(let u=0;u<l;u++)e[o+u*s]=t[u]}function nW(e,t,n,r){const i=r[0],[o,a,s,l]=i;if(1!==n.length)for(let u=0;u<l;u++)nW(e[o+u*s],t,n.slice(1),r.slice(1));else if(1===s)e.fill(t,o,a);else for(let u=0;u<l;u++)e[o+u*s]=t}function rW(e,t,n){void 0===n&&(n=KU(e));const r=new n(t.reduce(((e,t)=>e*t),1));return iW(e,t,r,0),r}function iW(e,t,n,r){if(1===t.length)return void n.set(e,r);if(2===t.length){for(let i=0;i<t[0];i++)n.set(e[i],r+t[1]*i);return e}const i=t.slice(1),o=i.reduce(((e,t)=>e*t),1);for(let a=0;a<t[0];a++)iW(e[a],i,n,r+o*a);return e}class oW{constructor(e,t,n){const r=null!==e&&!!e.BYTES_PER_ELEMENT;if(void 0===t){if(!r)throw new yU("Shape argument is required unless you pass in a TypedArray");t=[e.length]}if(void 0===n){if(!r)throw new yU("Dtype argument is required unless you pass in a TypedArray");n=ZU(e)}if(t=LU(t),this.shape=t,this.dtype=n,r&&1!==t.length&&(e=e.buffer),0===this.shape.length)this.data=new(YU(n))(1);else if(RU&&Buffer.isBuffer(e)||e instanceof ArrayBuffer||null===e||e.toString().startsWith("[object ArrayBuffer]")){const r=t.reduce(((e,t)=>e*t),1);null===e&&(e=new ArrayBuffer(r*parseInt(n[n.length-1],10)));const i=e.byteLength/parseInt(n[n.length-1],10);if(r!==i)throw new Error(`Buffer has ${i} of dtype ${n}, shape is too large or small ${t} (flat=${r})`);const o=YU(n);this.data=aW(e,o,t)}else this.data=e}get(e){const[t,n]=QU(this.data,this.shape,e);return 0===n.length?t:new oW(t,n,this.dtype)}set(e=null,t){null===e&&(e=[bU(null)]),"number"==typeof t?0===this.shape.length?this.data[0]=t:function(e,t,n,r){const i=SU(r,n,!0),[o,a]=kU(i,n);nW(e,t,n,o)}(this.data,t,this.shape,e):eW(this.data,t.data,this.shape,t.shape,e)}flatten(){return 1===this.shape.length?this.data:rW(this.data,this.shape,YU(this.dtype))}static arange(e,t="<i4"){const n=function(e,t){const n=e.reduce(((e,t)=>e*t),1),r=new t(n);return r.set([...Array(n).keys()]),r}([e],YU(t));return new oW(n,[e],t)}}function aW(e,t,n,r=0){if(1===n.length)return new t(e.slice(r,r+n[0]*t.BYTES_PER_ELEMENT));const i=new Array(n[0]);if(2===n.length){for(let o=0;o<n[0];o++)i[o]=new t(e.slice(r+n[1]*o*t.BYTES_PER_ELEMENT,r+n[1]*(o+1)*t.BYTES_PER_ELEMENT));return i}const o=n.slice(1),a=o.reduce(((e,t)=>e*t),1);for(let s=0;s<n[0];s++)i[s]=aW(e,t,o,r+a*s*t.BYTES_PER_ELEMENT);return i}function sW(e,t,n,r,i){const o=SU(r,n,!0),[a]=kU(o,n);cW(i,e,t,a)}function lW(e,t,n,r,i,o,a){const s=SU(r,n,!1),[l,u]=kU(s,n);if(JSON.stringify(u)!==JSON.stringify(a))throw new yU(`Shape mismatch in target and source RawArray: ${u} and ${a}`);fW(e,t,l,i,o)}function uW(e,t,n,r,i,o,a,s){const l=SU(r,n,!0),[u]=kU(l,n),c=SU(s,a,!1),[f]=kU(c,a);hW(e,t,u,i,o,f)}function cW(e,t,n,r){const[i,...o]=r,[a,...s]=n,[l,u,c,f]=i;if(1!==n.length)for(let h=0;h<f;h++)cW(e,t.subarray(a*(l+c*h)),s,o);else if(1===c&&1===a)t.fill(e,l,l+f);else for(let h=0;h<f;h++)t[a*(l+c*h)]=e}function fW(e,t,n,r,i){if(0===n.length)return void e.set(r);const[o,...a]=n,[s,...l]=t;if("number"==typeof o)return void fW(e.subarray(o*s),l,a,r,i);const[u,...c]=i,[f,h,d,p]=o;if(1!==t.length)for(let v=0;v<p;v++)fW(e.subarray(s*(f+v*d)),l,a,r.subarray(u*v),c);else if(1===d&&1===s&&1===u)e.set(r.subarray(0,p),f);else for(let v=0;v<p;v++)e[s*(f+d*v)]=r[u*v]}function hW(e,t,n,r,i,o){if(0===o.length)return void e.set(r.subarray(0,e.length));const[a,...s]=n,[l,...u]=o,[c,...f]=t,[h,...d]=i;if("number"==typeof l)return void hW(e,t,n,r.subarray(h*l),d,u);const[p,v,m,g]=a,[y,x,b,_]=l;if(1!==t.length||1!==i.length)for(let w=0;w<g;w++)hW(e.subarray(c*(p+w*m)),f,s,r.subarray(h*(y+w*b)),d,u);else if(1===m&&1===c&&1===b&&1===h)e.set(r.subarray(y,y+g),p);else for(let w=0;w<g;w++)e[c*(p+m*w)]=r[h*(y+b*w)]}class dW{constructor(e,t,n,r){const i=null!==e&&!!e.BYTES_PER_ELEMENT;if(void 0===t){if(!i)throw new yU("Shape argument is required unless you pass in a TypedArray");t=[e.length]}if(t=LU(t),void 0===n){if(!i)throw new yU("Dtype argument is required unless you pass in a TypedArray");n=ZU(e)}if(void 0===r&&(r=function(e){const t=e.length,n=Array(t);let r=1;for(let i=t-1;i>=0;i--)n[i]=r,r*=e[i];return n}(t)),this.shape=t,this.dtype=n,this.strides=r,i&&1!==t.length&&(e=e.buffer),0===this.shape.length)this.data=new(YU(n))(1);else if(RU&&Buffer.isBuffer(e)||e instanceof ArrayBuffer||null===e||e.toString().startsWith("[object ArrayBuffer]")){const r=t.reduce(((e,t)=>e*t),1);null===e&&(e=new ArrayBuffer(r*parseInt(n[n.length-1],10)));const i=e.byteLength/parseInt(n[n.length-1],10);if(r!==i)throw new Error(`Buffer has ${i} of dtype ${n}, shape is too large or small ${t} (flat=${r})`);const o=YU(n);this.data=new o(e)}else this.data=e}set(e=null,t,n){null===e&&(e=[bU(null)]),"number"==typeof t?0===this.shape.length?this.data[0]=t:sW(this.data,this.strides,this.shape,e,t):t instanceof dW&&n?uW(this.data,this.strides,this.shape,e,t.data,t.strides,t.shape,n):lW(this.data,this.strides,this.shape,e,t.data,t.strides,t.shape)}}var pW=function(e){var t={exports:{}};return e(t,t.exports),t.exports}((function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,o),!0;case 6:return c.fn.call(c.context,t,r,i,o,a),!0}for(u=1,l=new Array(f-1);u<f;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,d=c.length;for(u=0;u<d;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),f){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(f-1);h<f;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var l=0,u=[],c=s.length;l<c;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&u.push(s[l]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}));class vW extends Error{constructor(e){super(e),this.name="TimeoutError"}}const mW=(e,t,n)=>new Promise(((r,i)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void r(e);const o=setTimeout((()=>{if("function"==typeof n){try{r(n())}catch(a){i(a)}return}const o=n instanceof Error?n:new vW("string"==typeof n?n:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),i(o)}),t);((e,t)=>{t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e}))))})(e.then(r,i),(()=>{clearTimeout(o)}))}));var gW=mW,yW=mW,xW=vW;gW.default=yW,gW.TimeoutError=xW;var bW=function(e,t,n){let r=0,i=e.length;for(;i>0;){const o=i/2|0;let a=r+o;n(e[a],t)<=0?(r=++a,i-=o+1):i=o}return r},_W=Object.defineProperty({default:bW},"__esModule",{value:!0});var wW=class{constructor(){this._queue=[]}enqueue(e,t){const n={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(n);const r=_W.default(this._queue,n,((e,t)=>t.priority-e.priority));this._queue.splice(r,0,n)}dequeue(){const e=this._queue.shift();return e&&e.run}get size(){return this._queue.length}},kW=Object.defineProperty({default:wW},"__esModule",{value:!0});const SW=()=>{},EW=new gW.default.TimeoutError;var PW,CW=class extends pW{constructor(e){if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=SW,this._resolveIdle=SW,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:kW.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother()}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=SW,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=SW)}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother)return this.emit("active"),this._queue.dequeue()(),e&&this._initializeIntervalIfNeeded(),!0}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise(((n,r)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const i=void 0===this._timeout&&void 0===t.timeout?e():gW.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&r(EW)}));n(await i)}catch(i){r(i)}this._next()}),t),this._tryToStartAnother()}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this._queue.size}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}set timeout(e){this._timeout=e}get timeout(){return this._timeout}};class AW{constructor(e,t=null,n,r=!1,i=null,o=!0,a=!0){this.store=e,this._chunkStore=i,this.path=IU(t),this.keyPrefix=BU(this.path),this.readOnly=r,this.cacheMetadata=o,this.cacheAttrs=a,this.meta=n,null!==this.meta.compressor?this.compressor=async function(e){if(!iU.has(e.id))throw new Error(`Compression codec ${e.id} is not supported by Zarr.js yet.`);return(await iU.get(e.id)()).fromConfig(e)}(this.meta.compressor):this.compressor=null;const s=this.keyPrefix+".zattrs";this.attrs=new $U(this.store,s,this.readOnly,a)}get chunkStore(){return this._chunkStore?this._chunkStore:this.store}get name(){return this.path.length>0?"/"!==this.path[0]?"/"+this.path:this.path:null}get basename(){const e=this.name;if(null===e)return null;const t=e.split("/");return t[t.length-1]}get shape(){return this.meta.shape}get chunks(){return this.meta.chunks}get chunkSize(){return this.chunks.reduce(((e,t)=>e*t),1)}get dtype(){return this.meta.dtype}get fillValue(){const e=this.meta.fill_value;return"NaN"===e?NaN:"Infinity"===e?1/0:"-Infinity"===e?-1/0:this.meta.fill_value}get nDims(){return this.meta.shape.length}get size(){return this.meta.shape.reduce(((e,t)=>e*t),1)}get length(){return this.shape[0]}get _chunkDataShape(){if(this.shape===[])return[1];{const e=[];for(let t=0;t<this.shape.length;t++)e[t]=Math.ceil(this.shape[t]/this.chunks[t]);return e}}get chunkDataShape(){return this._chunkDataShape}get numChunks(){return this.chunkDataShape.reduce(((e,t)=>e*t),1)}static async create(e,t=null,n=!1,r=null,i=!0,o=!0){const a=await this.loadMetadataForConstructor(e,t);return new AW(e,t,a,n,r,i,o)}static async loadMetadataForConstructor(e,t){try{const n=BU(t=IU(t));return qU(await e.getItem(n+".zarray"))}catch(n){if(await zU(e,t))throw new uU(null!=t?t:"");throw new Error("Failed to load metadata for ZarrArray:"+n.toString())}}async reloadMetadata(){const e=this.keyPrefix+".zarray",t=this.store.getItem(e);return this.meta=qU(await t),this.meta}async refreshMetadata(){this.cacheMetadata||await this.reloadMetadata()}get(e=null,t={}){return this.getBasicSelection(e,!1,t)}getRaw(e=null,t={}){return this.getBasicSelection(e,!0,t)}async getBasicSelection(e,t=!1,{concurrencyLimit:n=10,progressCallback:r}={}){if(this.cacheMetadata||await this.reloadMetadata(),this.shape===[])throw new Error("Shape [] indexing is not supported yet");return this.getBasicSelectionND(e,t,n,r)}getBasicSelectionND(e,t,n,r){const i=new OU(e,this);return this.getSelection(i,t,n,r)}async getSelection(e,t,n,r){const i=this.dtype,o=e.shape,a=e.shape.reduce(((e,t)=>e*t),1);if(t&&a===this.chunkSize){const t=e.iter(),n=t.next();if(!1===n.done&&!0===t.next().done){const e=n.value;return await this.decodeDirectToRawArray(e,o,a)}}const s=t?new dW(null,o,i):new oW(null,o,i);if(0===a)return s;const l=new CW({concurrency:n});if(r){let t=0,n=0;for(const r of e.iter())n+=1;r({progress:0,queueSize:n});for(const i of e.iter())(async()=>{await l.add((()=>this.chunkGetItem(i.chunkCoords,i.chunkSelection,s,i.outSelection,e.dropAxes))),t+=1,r({progress:t,queueSize:n})})()}else for(const u of e.iter())l.add((()=>this.chunkGetItem(u.chunkCoords,u.chunkSelection,s,u.outSelection,e.dropAxes)));return await l.onIdle(),0===s.shape.length?s.data[0]:s}async chunkGetItem(e,t,n,r,i){if(e.length!==this._chunkDataShape.length)throw new yU(`Inconsistent shapes: chunkCoordsLength: ${e.length}, cDataShapeLength: ${this.chunkDataShape.length}`);const o=this.chunkKey(e);try{const e=await this.chunkStore.getItem(o),a=await this.decodeChunk(e);if(n instanceof oW){if(function(e){e=wU(e);for(let t=0;t<e.length;t++){const n=e[t];if(!PU(n)&&!AU(n)&&"..."!==n)return!1}return!0}(r)&&jU(t,this.chunks)&&!this.meta.filters)return void n.set(r,this.toNestedArray(a));const e=this.toNestedArray(a).get(t);if(null!==i)throw new Error("Drop axes is not supported yet");n.set(r,e)}else n.set(r,this.chunkBufferToRawArray(a),t)}catch(a){if(!sU(a))throw a;null!==this.fillValue&&n.set(r,this.fillValue)}}async getRawChunk(e,t){if(e.length!==this.shape.length)throw new Error(`Chunk coordinates ${e.join(".")} do not correspond to shape ${this.shape}.`);try{for(let t=0;t<e.length;t++){const n=Math.ceil(this.shape[t]/this.chunks[t]);e[t]=EU(e[t],n)}}catch(a){throw a instanceof vU?new vU(`index ${e.join(".")} is out of bounds for shape: ${this.shape} and chunks ${this.chunks}`):a}const n=this.chunkKey(e),r=this.chunkStore.getItem(n,null==t?void 0:t.storeOptions),i=await this.decodeChunk(await r),o=this.chunks.filter((e=>1!==e));return new dW(i,o,this.dtype)}chunkKey(e){var t;const n=null!==(t=this.meta.dimension_separator)&&void 0!==t?t:".";return this.keyPrefix+e.join(n)}ensureByteArray(e){return"string"==typeof e?new Uint8Array(Buffer.from(e).buffer):new Uint8Array(e)}toTypedArray(e){return new(YU(this.dtype))(e)}toNestedArray(e){const t=this.ensureByteArray(e).buffer;return new oW(t,this.chunks,this.dtype)}async decodeChunk(e){let t=this.ensureByteArray(e);return null!==this.compressor&&(t=await(await this.compressor).decode(t)),this.dtype.includes(">")&&NU(this.toTypedArray(t.buffer)),t.buffer}chunkBufferToRawArray(e){return new dW(e,this.chunks,this.dtype)}async decodeDirectToRawArray({chunkCoords:e},t,n){const r=this.chunkKey(e);try{const e=await this.chunkStore.getItem(r);return new dW(await this.decodeChunk(e),t,this.dtype)}catch(i){if(sU(i)){const e=new(YU(this.dtype))(n);return new dW(e.fill(this.fillValue),t)}throw i}}async set(e=null,t,n={}){await this.setBasicSelection(e,t,n)}async setBasicSelection(e,t,{concurrencyLimit:n=10,progressCallback:r}={}){if(this.readOnly)throw new hU("Object is read only");if(this.cacheMetadata||await this.reloadMetadata(),this.shape===[])throw new Error("Shape [] indexing is not supported yet");await this.setBasicSelectionND(e,t,n,r)}async setBasicSelectionND(e,t,n,r){const i=new OU(e,this);await this.setSelection(i,t,n,r)}getChunkValue(e,t,n,r){let i;if(r===[])i=n;else if("number"==typeof n)i=n;else if(i=n.get(e.outSelection),null!==t.dropAxes)throw new Error("Handling drop axes not supported yet");return i}async setSelection(e,t,n,r){const i=e.shape;if(i===[]);else if("number"==typeof t);else{if(!(t instanceof oW))throw new Error("Unknown data type for setting :(");if(!function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t.shape,i))throw new yU(`Shape mismatch in source NestedArray and set selection: ${t.shape} and ${i}`)}const o=new CW({concurrency:n});if(r){let n=0;for(const t of e.iter())n+=1;let a=0;r({progress:0,queueSize:n});for(const s of e.iter()){const l=this.getChunkValue(s,e,t,i);(async()=>{await o.add((()=>this.chunkSetItem(s.chunkCoords,s.chunkSelection,l))),a+=1,r({progress:a,queueSize:n})})()}}else for(const a of e.iter()){const n=this.getChunkValue(a,e,t,i);o.add((()=>this.chunkSetItem(a.chunkCoords,a.chunkSelection,n)))}await o.onIdle()}async chunkSetItem(e,t,n){const r=this.chunkKey(e);let i=null;const o=YU(this.dtype),a=this.chunkSize;if(jU(t,this.chunks))"number"==typeof n?(i=new o(a),i.fill(n)):i=n.flatten();else{let e;try{const t=await this.chunkStore.getItem(r),n=await this.decodeChunk(t);e=this.toTypedArray(n)}catch(l){if(!sU(l))throw l;e=new o(a),null!==this.fillValue&&e.fill(this.fillValue)}const s=new oW(e,this.chunks,this.dtype);s.set(t,n),i=s.flatten()}const s=await this.encodeChunk(i);this.chunkStore.setItem(r,s)}async encodeChunk(e){if(this.dtype.includes(">")&&(e=function(e){const t=e.slice();return NU(t),t}(e)),null!==this.compressor){const t=new Uint8Array(e.buffer);return(await(await this.compressor).encode(t)).buffer}return e.buffer}}class OW{constructor(e={}){this.root=e}proxy(){return aU(this)}getParent(e){let t=this.root;const n=e.split("/");for(const r of n.slice(0,n.length-1))if(t=t[r],!t)throw Error(e);return[t,n[n.length-1]]}requireParent(e){let t=this.root;const n=e.split("/");for(const r of n.slice(0,n.length-1))void 0===t[r]&&(t[r]={}),t=t[r];return[t,n[n.length-1]]}getItem(e){const[t,n]=this.getParent(e),r=t[n];if(void 0===r)throw new dU(e);return r}setItem(e,t){const[n,r]=this.requireParent(e);return n[r]=t,!0}deleteItem(e){const[t,n]=this.getParent(e);return delete t[n]}containsItem(e){try{return void 0!==this.getItem(e)}catch(t){return!1}}keys(){throw new Error("Method not implemented.")}}!function(e){e.HEAD="HEAD",e.GET="GET",e.PUT="PUT"}(PW||(PW={}));const TW=[PW.HEAD,PW.GET,PW.PUT];class MW{constructor(e,t={}){this.url=e;const{fetchOptions:n={},supportedMethods:r=TW}=t;this.fetchOptions=n,this.supportedMethods=new Set(r)}keys(){throw new Error("Method not implemented.")}async getItem(e,t){const n=DU(this.url,e),r=await fetch(n,s(s({},this.fetchOptions),t));if(404===r.status)throw new dU(e);if(200!==r.status)throw new xU(String(r.status));return RU?Buffer.from(await r.arrayBuffer()):r.arrayBuffer()}async setItem(e,t){if(!this.supportedMethods.has(PW.PUT))throw new Error("HTTP PUT no a supported method for store.");const n=DU(this.url,e);"string"==typeof t&&(t=(new TextEncoder).encode(t).buffer);return"2"===(await fetch(n,l(s({},this.fetchOptions),{method:PW.PUT,body:t}))).status.toString()[0]}deleteItem(e){throw new Error("Method not implemented.")}async containsItem(e){const t=DU(this.url,e),n=this.supportedMethods.has(PW.HEAD)?PW.HEAD:PW.GET;return 200===(await fetch(t,l(s({},this.fetchOptions),{method:n}))).status}}async function RW({shape:e,chunks:t=!0,dtype:n="<i4",compressor:r=null,fillValue:i=null,order:o="C",store:a,overwrite:s=!1,path:l,chunkStore:u,filters:c,cacheMetadata:f=!0,cacheAttrs:h=!0,readOnly:d=!1,dimensionSeparator:p}){a=jW(a),await HU(a,e,t,n,l,r,i,o,s,u,c,p);return await AW.create(a,l,d,u,f,h)}async function IW(e,t={}){let n=null;e instanceof oW?(n=e.shape,t.dtype=void 0===t.dtype?e.dtype:t.dtype):n=e.byteLength;const r=void 0!==t.readOnly&&t.readOnly;t.readOnly=!1;const i=await RW(s({shape:n},t));return await i.set(null,e),i.readOnly=r,i}async function LW({shape:e,mode:t="a",chunks:n=!0,dtype:r="<i4",compressor:i=null,fillValue:o=null,order:a="C",store:s,overwrite:l=!1,path:u=null,chunkStore:c,filters:f,cacheMetadata:h=!0,cacheAttrs:d=!0,dimensionSeparator:p}={}){if(s=jW(s),void 0===c&&(c=jW(s)),u=IU(u),"r"===t||"r+"===t){if(!(await FU(s,u))){if(await zU(s,u))throw new uU(u);throw new cU(u)}}else if("w"===t){if(void 0===e)throw new yU("Shape can not be undefined when creating a new array");await HU(s,e,n,r,u,i,o,a,l,c,f,p)}else if("a"===t){if(!(await FU(s,u))){if(await zU(s,u))throw new uU(u);if(void 0===e)throw new yU("Shape can not be undefined when creating a new array");await HU(s,e,n,r,u,i,o,a,l,c,f,p)}}else{if("w-"!==t&&"x"!==t)throw new yU(`Invalid mode argument: ${t}`);if(await FU(s,u))throw new lU(u);if(await zU(s,u))throw new uU(u);if(void 0===e)throw new yU("Shape can not be undefined when creating a new array");await HU(s,e,n,r,u,i,o,a,l,c,f,p)}const v="r"===t;return AW.create(s,u,v,c,h,d)}function jW(e){return void 0===e?new OW:"string"==typeof e?new MW(e):e}class DW{constructor(e,t=null,n,r=!1,i=null,o=!0){this.store=e,this._chunkStore=i,this.path=IU(t),this.keyPrefix=BU(this.path),this.readOnly=r,this.meta=n;const a=this.keyPrefix+".zattrs";this.attrs=new $U(this.store,a,this.readOnly,o)}get name(){return this.path.length>0?"/"!==this.path[0]?"/"+this.path:this.path:"/"}get basename(){const e=this.name.split("/");return e[e.length-1]}get chunkStore(){return this._chunkStore?this._chunkStore:this.store}static async create(e,t=null,n=!1,r=null,i=!0){const o=await this.loadMetadataForConstructor(e,t);return new DW(e,t,o,n,r,i)}static async loadMetadataForConstructor(e,t){const n=BU(t=IU(t));try{return qU(await e.getItem(n+".zgroup"))}catch(r){if(await FU(e,t))throw new lU(t);throw new fU(t)}}itemPath(e){const t="string"==typeof e&&e.length>0&&"/"===e[0],n=IU(e);return!t&&this.path.length>0?this.keyPrefix+n:n}async createGroup(e,t=!1){if(this.readOnly)throw new hU("group is read only");const n=this.itemPath(e);return await WU(this.store,n,this._chunkStore,t),DW.create(this.store,n,this.readOnly,this._chunkStore,this.attrs.cache)}async requireGroup(e,t=!1){if(this.readOnly)throw new hU("group is read only");const n=this.itemPath(e);return await zU(this.store,n)||await WU(this.store,n,this._chunkStore,t),DW.create(this.store,n,this.readOnly,this._chunkStore,this.attrs.cache)}getOptsForArrayCreation(e,t={}){const n=this.itemPath(e);return t.path=n,void 0===t.cacheAttrs&&(t.cacheAttrs=this.attrs.cache),t.store=this.store,t.chunkStore=this.chunkStore,t}array(e,t,n,r){if(this.readOnly)throw new hU("group is read only");return(n=this.getOptsForArrayCreation(e,n)).overwrite=void 0===r?n.overwrite:r,IW(t,n)}empty(e,t,n={}){if(this.readOnly)throw new hU("group is read only");return async function(e,t={}){return t.fillValue=null,RW(s({shape:e},t))}(t,n=this.getOptsForArrayCreation(e,n))}zeros(e,t,n={}){if(this.readOnly)throw new hU("group is read only");return async function(e,t={}){return t.fillValue=0,RW(s({shape:e},t))}(t,n=this.getOptsForArrayCreation(e,n))}ones(e,t,n={}){if(this.readOnly)throw new hU("group is read only");return async function(e,t={}){return t.fillValue=1,RW(s({shape:e},t))}(t,n=this.getOptsForArrayCreation(e,n))}full(e,t,n,r={}){if(this.readOnly)throw new hU("group is read only");return async function(e,t,n={}){return n.fillValue=t,RW(s({shape:e},n))}(t,n,r=this.getOptsForArrayCreation(e,r))}createDataset(e,t,n,r){if(this.readOnly)throw new hU("group is read only");let i;if(r=this.getOptsForArrayCreation(e,r),void 0===n){if(void 0===t)throw new yU("Shape must be set if no data is passed to CreateDataset");i=RW(s({shape:t},r))}else i=IW(n,r);return i}async getItem(e){const t=this.itemPath(e);if(await FU(this.store,t))return AW.create(this.store,t,this.readOnly,this.chunkStore,void 0,this.attrs.cache);if(await zU(this.store,t))return DW.create(this.store,t,this.readOnly,this._chunkStore,this.attrs.cache);throw new dU(e)}async setItem(e,t){return await this.array(e,t,{},!0),!0}async deleteItem(e){if(this.readOnly)throw new hU("group is read only");throw new Error("Method not implemented.")}async containsItem(e){const t=this.itemPath(e);return await FU(this.store,t)||zU(this.store,t)}proxy(){return aU(this)}}async function NW(e,t=null,n="a",r,i=!0){if(e=jW(e),void 0!==r&&(r=jW(e)),t=IU(t),"r"===n||"r+"===n){if(!(await zU(e,t))){if(await FU(e,t))throw new lU(t);throw new fU(t)}}else if("w"===n)await WU(e,t,r,!0);else if("a"===n){if(!(await zU(e,t))){if(await FU(e,t))throw new lU(t);await WU(e,t,r)}}else{if("w-"!==n&&"x"!==n)throw new yU(`Invalid mode argument: ${n}`);if(await FU(e,t))throw new lU(t);if(await zU(e,t))throw new uU(t);await WU(e,t,r)}const o="r"===n;return DW.create(e,t,o,r,i)}const FW=c(qv),zW=/\s+at.*(?:\(|\s)(.*)\)?/,BW=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,VW=void 0===FW.homedir?"":FW.homedir();const UW=(e,t=1,n)=>{if(n=s({indent:" ",includeEmptyLines:!1},n),"string"!=typeof e)throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof e}\``);if("number"!=typeof t)throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof t}\``);if("string"!=typeof n.indent)throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof n.indent}\``);if(0===t)return e;const r=n.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return e.replace(r,n.indent.repeat(t))},WW=(e,t)=>(t=Object.assign({pretty:!1},t),e.replace(/\\/g,"/").split("\n").filter((e=>{const t=e.match(zW);if(null===t||!t[1])return!0;const n=t[1];return!n.includes(".app/Contents/Resources/electron.asar")&&!n.includes(".app/Contents/Resources/default_app.asar")&&!BW.test(n)})).filter((e=>""!==e.trim())).map((e=>t.pretty?e.replace(zW,((e,t)=>e.replace(t,t.replace(VW,"~")))):e)).join("\n"));class GW extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t=(e=[...e].map((e=>e instanceof Error?e:null!==e&&"object"==typeof e?Object.assign(new Error(e.message),e):new Error(e)))).map((e=>"string"==typeof e.stack?WW(e.stack).replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""):String(e))).join("\n");t="\n"+UW(t,4),super(t),this.name="AggregateError",Object.defineProperty(this,"_errors",{value:e})}*[Symbol.iterator](){for(const e of this._errors)yield e}}const HW=GW;var qW=async(e,t,{concurrency:n=1/0,stopOnError:r=!0}={})=>new Promise(((i,o)=>{if("function"!=typeof t)throw new TypeError("Mapper function is required");if(!Number.isSafeInteger(n)&&n!==1/0||!(n>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${n}\` (${typeof n})`);const a=[],s=[],l=e[Symbol.iterator]();let u=!1,c=!1,f=0,h=0;const d=()=>{if(u)return;const e=l.next(),n=h;if(h++,e.done)return c=!0,void(0===f&&(r||0===s.length?i(a):o(new HW(s))));f++,(async()=>{try{const r=await e.value;a[n]=await t(r,n),f--,d()}catch(i){r?(u=!0,o(i)):(s.push(i),f--,d())}})()};for(let e=0;e<n&&(d(),!c);e++);})),$W={black:"#000",white:"#fff"},XW="#e57373",YW="#f44336",ZW="#d32f2f",KW="#ff4081",QW="#f50057",JW="#c51162",eG="#7986cb",tG="#3f51b5",nG="#303f9f",rG="#64b5f6",iG="#2196f3",oG="#1976d2",aG="#81c784",sG="#4caf50",lG="#388e3c",uG="#ffb74d",cG="#ff9800",fG="#f57c00",hG={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"};function dG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function pG(e){if(e.type)return e;if("#"===e.charAt(0))return pG(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(Jc(3,e));var r=e.substring(t+1,e.length-1).split(",");return{type:n,values:r=r.map((function(e){return parseFloat(e)}))}}function vG(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function mG(e){var t="hsl"===(e=pG(e)).type?pG(function(e){var t=(e=pG(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",l=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(s+="a",l.push(t[3])),vG({type:s,values:l})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function gG(e,t){return e=pG(e),t=dG(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,vG(e)}function yG(e,t){if(e=pG(e),t=dG(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return vG(e)}function xG(e,t){if(e=pG(e),t=dG(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return vG(e)}var bG=["xs","sm","md","lg","xl"];function _G(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,r=e.unit,i=void 0===r?"px":r,o=e.step,a=void 0===o?5:o,s=mp(e,["values","unit","step"]);function l(e){var t="number"==typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function u(e,t){var r=bG.indexOf(t);return r===bG.length-1?l(e):"@media (min-width:".concat("number"==typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"==typeof n[bG[r+1]]?n[bG[r+1]]:t)-a/100).concat(i,")")}return Gc({keys:bG,values:n,up:l,down:function(e){var t=bG.indexOf(e)+1,r=n[bG[t]];return t===bG.length?l("xs"):"@media (max-width:".concat(("number"==typeof r&&t>0?r:e)-a/100).concat(i,")")},between:u,only:function(e){return u(e,e)},width:function(e){return n[e]}},s)}function wG(e,t,n){var r;return Gc({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Gc({paddingLeft:t(2),paddingRight:t(2)},n,Qc({},e.up("sm"),Gc({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(r={minHeight:56},Qc(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),Qc(r,e.up("sm"),{minHeight:64}),r)},n)}var kG={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:$W.white,default:hG[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},SG={text:{primary:$W.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:hG[800],default:"#303030"},action:{active:$W.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function EG(e,t,n,r){var i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=xG(e.main,i):"dark"===t&&(e.dark=yG(e.main,o)))}function PG(e){var t=e.primary,n=void 0===t?{light:eG,main:tG,dark:nG}:t,r=e.secondary,i=void 0===r?{light:KW,main:QW,dark:JW}:r,o=e.error,a=void 0===o?{light:XW,main:YW,dark:ZW}:o,s=e.warning,l=void 0===s?{light:uG,main:cG,dark:fG}:s,u=e.info,c=void 0===u?{light:rG,main:iG,dark:oG}:u,f=e.success,h=void 0===f?{light:aG,main:sG,dark:lG}:f,d=e.type,p=void 0===d?"light":d,v=e.contrastThreshold,m=void 0===v?3:v,g=e.tonalOffset,y=void 0===g?.2:g,x=mp(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function b(e){return function(e,t){var n=mG(e),r=mG(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,SG.text.primary)>=m?SG.text.primary:kG.text.primary}var _=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=Gc({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(Jc(4,t));if("string"!=typeof e.main)throw new Error(Jc(5,JSON.stringify(e.main)));return EG(e,"light",n,y),EG(e,"dark",r,y),e.contrastText||(e.contrastText=b(e.main)),e},w={dark:SG,light:kG};return $c(Gc({common:$W,type:p,primary:_(n),secondary:_(i,"A400","A200","A700"),error:_(a),warning:_(l),info:_(c),success:_(h),grey:hG,contrastThreshold:m,getContrastText:b,augmentColor:_,tonalOffset:y},w[p]),x)}function CG(e){return Math.round(1e5*e)/1e5}var AG={textTransform:"uppercase"};function OG(e,t){var n="function"==typeof t?t(e):t,r=n.fontFamily,i=void 0===r?'"Roboto", "Helvetica", "Arial", sans-serif':r,o=n.fontSize,a=void 0===o?14:o,s=n.fontWeightLight,l=void 0===s?300:s,u=n.fontWeightRegular,c=void 0===u?400:u,f=n.fontWeightMedium,h=void 0===f?500:f,d=n.fontWeightBold,p=void 0===d?700:d,v=n.htmlFontSize,m=void 0===v?16:v,g=n.allVariants,y=n.pxToRem,x=mp(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]),b=a/14,_=y||function(e){return"".concat(e/m*b,"rem")},w=function(e,t,n,r,o){return Gc({fontFamily:i,fontWeight:e,fontSize:_(t),lineHeight:n},'"Roboto", "Helvetica", "Arial", sans-serif'===i?{letterSpacing:"".concat(CG(r/t),"em")}:{},o,g)},k={h1:w(l,96,1.167,-1.5),h2:w(l,60,1.2,-.5),h3:w(c,48,1.167,0),h4:w(c,34,1.235,.25),h5:w(c,24,1.334,0),h6:w(h,20,1.6,.15),subtitle1:w(c,16,1.75,.15),subtitle2:w(h,14,1.57,.1),body1:w(c,16,1.5,.15),body2:w(c,14,1.43,.15),button:w(h,14,1.75,.4,AG),caption:w(c,12,1.66,.4),overline:w(c,12,2.66,1,AG)};return $c(Gc({htmlFontSize:m,pxToRem:_,round:CG,fontFamily:i,fontSize:a,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:h,fontWeightBold:p},k),x,{clone:!1})}function TG(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var MG=["none",TG(0,2,1,-1,0,1,1,0,0,1,3,0),TG(0,3,1,-2,0,2,2,0,0,1,5,0),TG(0,3,3,-2,0,3,4,0,0,1,8,0),TG(0,2,4,-1,0,4,5,0,0,1,10,0),TG(0,3,5,-1,0,5,8,0,0,1,14,0),TG(0,3,5,-1,0,6,10,0,0,1,18,0),TG(0,4,5,-2,0,7,10,1,0,2,16,1),TG(0,5,5,-3,0,8,10,1,0,3,14,2),TG(0,5,6,-3,0,9,12,1,0,3,16,2),TG(0,6,6,-3,0,10,14,1,0,4,18,3),TG(0,6,7,-4,0,11,15,1,0,4,20,3),TG(0,7,8,-4,0,12,17,2,0,5,22,4),TG(0,7,8,-4,0,13,19,2,0,5,24,4),TG(0,7,9,-4,0,14,21,2,0,5,26,4),TG(0,8,9,-5,0,15,22,2,0,6,28,5),TG(0,8,10,-5,0,16,24,2,0,6,30,5),TG(0,8,11,-5,0,17,26,2,0,6,32,5),TG(0,9,11,-5,0,18,28,2,0,7,34,6),TG(0,9,12,-6,0,19,29,2,0,7,36,6),TG(0,10,13,-6,0,20,31,3,0,8,38,7),TG(0,10,13,-6,0,21,33,3,0,8,40,7),TG(0,10,14,-6,0,22,35,3,0,8,42,7),TG(0,11,14,-7,0,23,36,3,0,9,44,8),TG(0,11,15,-7,0,24,38,3,0,9,46,8)],RG={borderRadius:4};function IG(e){var t=e.spacing||8;return"number"==typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"==typeof t?t:function(){}}function LG(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=IG({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"==typeof e)return e;var n=t(e);return"number"==typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}var jG={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},DG={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function NG(e){return"".concat(Math.round(e),"ms")}var FG={easing:jG,duration:DG,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?DG.standard:n,i=t.easing,o=void 0===i?jG.easeInOut:i,a=t.delay,s=void 0===a?0:a;return mp(t,["duration","easing","delay"]),(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"==typeof r?r:NG(r)," ").concat(o," ").concat("string"==typeof s?s:NG(s))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}},zG={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function BG(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,i=void 0===r?{}:r,o=e.palette,a=void 0===o?{}:o,s=e.spacing,l=e.typography,u=void 0===l?{}:l,c=mp(e,["breakpoints","mixins","palette","spacing","typography"]),f=PG(a),h=_G(n),d=LG(s),p=$c({breakpoints:h,direction:"ltr",mixins:wG(h,d,i),overrides:{},palette:f,props:{},shadows:MG,typography:OG(f,u),spacing:d,shape:RG,transitions:FG,zIndex:zG},c),v=arguments.length,m=new Array(v>1?v-1:0),g=1;g<v;g++)m[g-1]=arguments[g];return p=m.reduce((function(e,t){return $c(e,t)}),p)}var VG=BG();function UG(){return wp()||VG}function WG(e,t){return ev(e,Gc({defaultTheme:VG},t))}function GG(e){if("string"!=typeof e)throw new Error(Jc(7));return e.charAt(0).toUpperCase()+e.slice(1)}function HG(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}var qG=f.exports.forwardRef((function(e,t){var n=e.children,r=e.classes,i=e.className,o=e.color,a=void 0===o?"inherit":o,s=e.component,l=void 0===s?"svg":s,u=e.fontSize,c=void 0===u?"default":u,h=e.htmlColor,d=e.titleAccess,p=e.viewBox,v=void 0===p?"0 0 24 24":p,m=mp(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return f.exports.createElement(l,Gc({className:zp(r.root,i,"inherit"!==a&&r["color".concat(GG(a))],"default"!==c&&r["fontSize".concat(GG(c))]),focusable:"false",viewBox:v,color:h,"aria-hidden":!d||void 0,role:d?"img":void 0,ref:t},m),n,d?f.exports.createElement("title",null,d):null)}));qG.muiName="SvgIcon";var $G=WG((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(qG);function XG(e,t){var n=function(t,n){return X.createElement($G,Gc({ref:n},t),e)};return n.muiName=$G.muiName,X.memo(X.forwardRef(n))}function YG(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=this,s=function(){e.apply(a,i)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r}function ZG(e){return e&&e.ownerDocument||document}function KG(e){return ZG(e).defaultView||window}function QG(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function JG(e){var t=e.controlled,n=e.default;e.name,e.state;var r=f.exports.useRef(void 0!==t).current,i=f.exports.useState(n),o=i[0],a=i[1];return[r?t:o,f.exports.useCallback((function(e){r||a(e)}),[])]}var eH="undefined"!=typeof window?f.exports.useLayoutEffect:f.exports.useEffect;function tH(e){var t=f.exports.useRef(e);return eH((function(){t.current=e})),f.exports.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}function nH(e,t){return f.exports.useMemo((function(){return null==e&&null==t?null:function(n){QG(e,n),QG(t,n)}}),[e,t])}var rH=!0,iH=!1,oH=null,aH={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function sH(e){e.metaKey||e.altKey||e.ctrlKey||(rH=!0)}function lH(){rH=!1}function uH(){"hidden"===this.visibilityState&&iH&&(rH=!0)}function cH(e){var t,n,r,i=e.target;try{return i.matches(":focus-visible")}catch(o){}return rH||(n=(t=i).type,!("INPUT"!==(r=t.tagName)||!aH[n]||t.readOnly)||"TEXTAREA"===r&&!t.readOnly||!!t.isContentEditable)}function fH(){iH=!0,window.clearTimeout(oH),oH=window.setTimeout((function(){iH=!1}),100)}function hH(){return{isFocusVisible:cH,onBlurVisible:fH,ref:f.exports.useCallback((function(e){var t,n=Y.exports.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",sH,!0),t.addEventListener("mousedown",lH,!0),t.addEventListener("pointerdown",lH,!0),t.addEventListener("touchstart",lH,!0),t.addEventListener("visibilitychange",uH,!0))}),[])}}var dH=!1,pH=X.createContext(null),vH=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i="exited",r.appearStatus="entering"):i="entered":i=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",r.state={status:i},r.nextCallback=null,r}Rf(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?"entering"!==n&&"entered"!==n&&(t="entering"):"entering"!==n&&"entered"!==n||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),"entering"===t?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[oc.findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||dH?this.safeSetState({status:"entered"},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:"entering"},(function(){t.props.onEntering(o,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:"entered"},(function(){t.props.onEntered(o,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:oc.findDOMNode(this);t&&!dH?(this.props.onExit(r),this.safeSetState({status:"exiting"},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:oc.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,n=t.children;t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef;var r=Lf(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return X.createElement(pH.Provider,{value:null},"function"==typeof n?n(e,r):X.cloneElement(X.Children.only(n),r))},t}(X.Component);function mH(){}function gH(e,t){var n=Object.create(null);return e&&f.exports.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&f.exports.isValidElement(e)?t(e):e}(e)})),n}function yH(e,t,n){return null!=n[t]?n[t]:e.props[t]}function xH(e,t,n){var r=gH(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var u=i[l][r];s[i[l][r]]=n(u)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(t,r);return Object.keys(i).forEach((function(o){var a=i[o];if(f.exports.isValidElement(a)){var s=o in t,l=o in r,u=t[o],c=f.exports.isValidElement(u)&&!u.props.in;!l||s&&!c?l||!s||c?l&&s&&f.exports.isValidElement(u)&&(i[o]=f.exports.cloneElement(a,{onExited:n.bind(null,a),in:u.props.in,exit:yH(a,"exit",e),enter:yH(a,"enter",e)})):i[o]=f.exports.cloneElement(a,{in:!1}):i[o]=f.exports.cloneElement(a,{onExited:n.bind(null,a),in:!0,exit:yH(a,"exit",e),enter:yH(a,"enter",e)})}})),i}vH.contextType=pH,vH.propTypes={},vH.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:mH,onEntering:mH,onEntered:mH,onExit:mH,onExiting:mH,onExited:mH},vH.UNMOUNTED="unmounted",vH.EXITED="exited",vH.ENTERING="entering",vH.ENTERED="entered",vH.EXITING="exiting";var bH=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},_H=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(If(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}Rf(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,r=o,gH(n.children,(function(e){return f.exports.cloneElement(e,{onExited:r.bind(null,e),in:!0,appear:yH(e,"appear",n),enter:yH(e,"enter",n),exit:yH(e,"exit",n)})}))):xH(e,i,o),firstRender:!1}},n.handleExited=function(e,t){var n=gH(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Gc({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=Lf(e,["component","childFactory"]),i=this.state.contextValue,o=bH(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?X.createElement(pH.Provider,{value:i},o):X.createElement(pH.Provider,{value:i},X.createElement(t,r,o))},t}(X.Component);_H.propTypes={},_H.defaultProps={component:"div",childFactory:function(e){return e}};function wH(e,t){var n=e.timeout,r=e.style,i=void 0===r?{}:r;return{duration:i.transitionDuration||"number"==typeof n?n:n[t.mode]||0,delay:i.transitionDelay}}var kH=f.exports.forwardRef((function(e,t){var n=e.children,r=e.classes,i=e.className,o=e.collapsedHeight,a=void 0===o?"0px":o,s=e.component,l=void 0===s?"div":s,u=e.disableStrictModeCompat,c=void 0!==u&&u,h=e.in,d=e.onEnter,p=e.onEntered,v=e.onEntering,m=e.onExit,g=e.onExited,y=e.onExiting,x=e.style,b=e.timeout,_=void 0===b?DG.standard:b,w=e.TransitionComponent,k=void 0===w?vH:w,S=mp(e,["children","classes","className","collapsedHeight","component","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),E=UG(),P=f.exports.useRef(),C=f.exports.useRef(null),A=f.exports.useRef(),O="number"==typeof a?"".concat(a,"px"):a;f.exports.useEffect((function(){return function(){clearTimeout(P.current)}}),[]);var T=E.unstable_strictMode&&!c,M=f.exports.useRef(null),R=nH(t,T?M:void 0),I=function(e){return function(t,n){if(e){var r=ob(T?[M.current,t]:[t,n],2),i=r[0],o=r[1];void 0===o?e(i):e(i,o)}}},L=I((function(e,t){e.style.height=O,d&&d(e,t)})),j=I((function(e,t){var n=C.current?C.current.clientHeight:0,r=wH({style:x,timeout:_},{mode:"enter"}).duration;if("auto"===_){var i=E.transitions.getAutoHeightDuration(n);e.style.transitionDuration="".concat(i,"ms"),A.current=i}else e.style.transitionDuration="string"==typeof r?r:"".concat(r,"ms");e.style.height="".concat(n,"px"),v&&v(e,t)})),D=I((function(e,t){e.style.height="auto",p&&p(e,t)})),N=I((function(e){var t=C.current?C.current.clientHeight:0;e.style.height="".concat(t,"px"),m&&m(e)})),F=I(g),z=I((function(e){var t=C.current?C.current.clientHeight:0,n=wH({style:x,timeout:_},{mode:"exit"}).duration;if("auto"===_){var r=E.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(r,"ms"),A.current=r}else e.style.transitionDuration="string"==typeof n?n:"".concat(n,"ms");e.style.height=O,y&&y(e)}));return f.exports.createElement(k,Gc({in:h,onEnter:L,onEntered:D,onEntering:j,onExit:N,onExited:F,onExiting:z,addEndListener:function(e,t){var n=T?e:t;"auto"===_&&(P.current=setTimeout(n,A.current||0))},nodeRef:T?M:void 0,timeout:"auto"===_?null:_},S),(function(e,t){return f.exports.createElement(l,Gc({className:zp(r.container,i,{entered:r.entered,exited:!h&&"0px"===O&&r.hidden}[e]),style:Gc({minHeight:O},x),ref:R},t),f.exports.createElement("div",{className:r.wrapper,ref:C},f.exports.createElement("div",{className:r.wrapperInner},n)))}))}));kH.muiSupportAuto=!0;var SH=WG((function(e){return{container:{height:0,overflow:"hidden",transition:e.transitions.create("height")},entered:{height:"auto",overflow:"visible"},hidden:{visibility:"hidden"},wrapper:{display:"flex"},wrapperInner:{width:"100%"}}}),{name:"MuiCollapse"})(kH),EH=f.exports.forwardRef((function(e,t){var n=e.classes,r=e.className,i=e.component,o=void 0===i?"div":i,a=e.square,s=void 0!==a&&a,l=e.elevation,u=void 0===l?1:l,c=e.variant,h=void 0===c?"elevation":c,d=mp(e,["classes","className","component","square","elevation","variant"]);return f.exports.createElement(o,Gc({className:zp(n.root,r,"outlined"===h?n.outlined:n["elevation".concat(u)],!s&&n.rounded),ref:t},d))})),PH=WG((function(e){var t={};return e.shadows.forEach((function(e,n){t["elevation".concat(n)]={boxShadow:e}})),Gc({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(EH),CH=f.exports.createContext({}),AH=f.exports.forwardRef((function(e,t){var n,r=e.children,i=e.classes,o=e.className,a=e.defaultExpanded,s=void 0!==a&&a,l=e.disabled,u=void 0!==l&&l,c=e.expanded,h=e.onChange,d=e.square,p=void 0!==d&&d,v=e.TransitionComponent,m=void 0===v?SH:v,g=e.TransitionProps,y=mp(e,["children","classes","className","defaultExpanded","disabled","expanded","onChange","square","TransitionComponent","TransitionProps"]),x=ob(JG({controlled:c,default:s,name:"Accordion",state:"expanded"}),2),b=x[0],_=x[1],w=f.exports.useCallback((function(e){_(!b),h&&h(e,!b)}),[b,h,_]),k=f.exports.Children.toArray(r),S=rb(n=k)||md(n)||gd(n)||ib(),E=S[0],P=S.slice(1),C=f.exports.useMemo((function(){return{expanded:b,disabled:u,toggle:w}}),[b,u,w]);return f.exports.createElement(PH,Gc({className:zp(i.root,o,b&&i.expanded,u&&i.disabled,!p&&i.rounded),ref:t,square:p},y),f.exports.createElement(CH.Provider,{value:C},E),f.exports.createElement(m,Gc({in:b,timeout:"auto"},g),f.exports.createElement("div",{"aria-labelledby":E.props.id,id:E.props["aria-controls"],role:"region"},P)))})),OH=WG((function(e){var t={duration:e.transitions.duration.shortest};return{root:{position:"relative",transition:e.transitions.create(["margin"],t),"&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:e.palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-child":{"&:before":{display:"none"}},"&$expanded":{margin:"16px 0","&:first-child":{marginTop:0},"&:last-child":{marginBottom:0},"&:before":{opacity:0}},"&$expanded + &":{"&:before":{display:"none"}},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},rounded:{borderRadius:0,"&:first-child":{borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},"&:last-child":{borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},expanded:{},disabled:{}}}),{name:"MuiAccordion"})(AH),TH=f.exports.forwardRef((function(e,t){var n=e.classes,r=e.className,i=mp(e,["classes","className"]);return f.exports.createElement("div",Gc({className:zp(n.root,r),ref:t},i))})),MH=WG((function(e){return{root:{display:"flex",padding:e.spacing(1,2,2)}}}),{name:"MuiAccordionDetails"})(TH),RH="undefined"==typeof window?f.exports.useEffect:f.exports.useLayoutEffect;function IH(e){var t=e.classes,n=e.pulsate,r=void 0!==n&&n,i=e.rippleX,o=e.rippleY,a=e.rippleSize,s=e.in,l=e.onExited,u=void 0===l?function(){}:l,c=e.timeout,h=f.exports.useState(!1),d=h[0],p=h[1],v=zp(t.ripple,t.rippleVisible,r&&t.ripplePulsate),m={width:a,height:a,top:-a/2+o,left:-a/2+i},g=zp(t.child,d&&t.childLeaving,r&&t.childPulsate),y=tH(u);return RH((function(){if(!s){p(!0);var e=setTimeout(y,c);return function(){clearTimeout(e)}}}),[y,s,c]),f.exports.createElement("span",{className:v,style:m},f.exports.createElement("span",{className:g}))}var LH=f.exports.forwardRef((function(e,t){var n=e.center,r=void 0!==n&&n,i=e.classes,o=e.className,a=mp(e,["center","classes","className"]),s=f.exports.useState([]),l=s[0],u=s[1],c=f.exports.useRef(0),h=f.exports.useRef(null);f.exports.useEffect((function(){h.current&&(h.current(),h.current=null)}),[l]);var d=f.exports.useRef(!1),p=f.exports.useRef(null),v=f.exports.useRef(null),m=f.exports.useRef(null);f.exports.useEffect((function(){return function(){clearTimeout(p.current)}}),[]);var g=f.exports.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,o=e.rippleSize,a=e.cb;u((function(e){return[].concat(yd(e),[f.exports.createElement(IH,{key:c.current,classes:i,timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:o})])})),c.current+=1,h.current=a}),[i]),y=f.exports.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=t.pulsate,o=void 0!==i&&i,a=t.center,s=void 0===a?r||t.pulsate:a,l=t.fakeElement,u=void 0!==l&&l;if("mousedown"===e.type&&d.current)d.current=!1;else{"touchstart"===e.type&&(d.current=!0);var c,f,h,y=u?null:m.current,x=y?y.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(x.width/2),f=Math.round(x.height/2);else{var b=e.touches?e.touches[0]:e,_=b.clientX,w=b.clientY;c=Math.round(_-x.left),f=Math.round(w-x.top)}if(s)(h=Math.sqrt((2*Math.pow(x.width,2)+Math.pow(x.height,2))/3))%2==0&&(h+=1);else{var k=2*Math.max(Math.abs((y?y.clientWidth:0)-c),c)+2,S=2*Math.max(Math.abs((y?y.clientHeight:0)-f),f)+2;h=Math.sqrt(Math.pow(k,2)+Math.pow(S,2))}e.touches?null===v.current&&(v.current=function(){g({pulsate:o,rippleX:c,rippleY:f,rippleSize:h,cb:n})},p.current=setTimeout((function(){v.current&&(v.current(),v.current=null)}),80)):g({pulsate:o,rippleX:c,rippleY:f,rippleSize:h,cb:n})}}),[r,g]),x=f.exports.useCallback((function(){y({},{pulsate:!0})}),[y]),b=f.exports.useCallback((function(e,t){if(clearTimeout(p.current),"touchend"===e.type&&v.current)return e.persist(),v.current(),v.current=null,void(p.current=setTimeout((function(){b(e,t)})));v.current=null,u((function(e){return e.length>0?e.slice(1):e})),h.current=t}),[]);return f.exports.useImperativeHandle(t,(function(){return{pulsate:x,start:y,stop:b}}),[x,y,b]),f.exports.createElement("span",Gc({className:zp(i.root,o),ref:m},a),f.exports.createElement(_H,{component:null,exit:!0},l))})),jH=WG((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(f.exports.memo(LH)),DH=f.exports.forwardRef((function(e,t){var n=e.action,r=e.buttonRef,i=e.centerRipple,o=void 0!==i&&i,a=e.children,s=e.classes,l=e.className,u=e.component,c=void 0===u?"button":u,h=e.disabled,d=void 0!==h&&h,p=e.disableRipple,v=void 0!==p&&p,m=e.disableTouchRipple,g=void 0!==m&&m,y=e.focusRipple,x=void 0!==y&&y,b=e.focusVisibleClassName,_=e.onBlur,w=e.onClick,k=e.onFocus,S=e.onFocusVisible,E=e.onKeyDown,P=e.onKeyUp,C=e.onMouseDown,A=e.onMouseLeave,O=e.onMouseUp,T=e.onTouchEnd,M=e.onTouchMove,R=e.onTouchStart,I=e.onDragLeave,L=e.tabIndex,j=void 0===L?0:L,D=e.TouchRippleProps,N=e.type,F=void 0===N?"button":N,z=mp(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),B=f.exports.useRef(null);var V=f.exports.useRef(null),U=f.exports.useState(!1),W=U[0],G=U[1];d&&W&&G(!1);var H=hH(),q=H.isFocusVisible,$=H.onBlurVisible,X=H.ref;function Z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return tH((function(r){return t&&t(r),!n&&V.current&&V.current[e](r),!0}))}f.exports.useImperativeHandle(n,(function(){return{focusVisible:function(){G(!0),B.current.focus()}}}),[]),f.exports.useEffect((function(){W&&x&&!v&&V.current.pulsate()}),[v,x,W]);var K=Z("start",C),Q=Z("stop",I),J=Z("stop",O),ee=Z("stop",(function(e){W&&e.preventDefault(),A&&A(e)})),te=Z("start",R),ne=Z("stop",T),re=Z("stop",M),ie=Z("stop",(function(e){W&&($(e),G(!1)),_&&_(e)}),!1),oe=tH((function(e){B.current||(B.current=e.currentTarget),q(e)&&(G(!0),S&&S(e)),k&&k(e)})),ae=function(){var e=Y.exports.findDOMNode(B.current);return c&&"button"!==c&&!("A"===e.tagName&&e.href)},se=f.exports.useRef(!1),le=tH((function(e){x&&!se.current&&W&&V.current&&" "===e.key&&(se.current=!0,e.persist(),V.current.stop(e,(function(){V.current.start(e)}))),e.target===e.currentTarget&&ae()&&" "===e.key&&e.preventDefault(),E&&E(e),e.target===e.currentTarget&&ae()&&"Enter"===e.key&&!d&&(e.preventDefault(),w&&w(e))})),ue=tH((function(e){x&&" "===e.key&&V.current&&W&&!e.defaultPrevented&&(se.current=!1,e.persist(),V.current.stop(e,(function(){V.current.pulsate(e)}))),P&&P(e),w&&e.target===e.currentTarget&&ae()&&" "===e.key&&!e.defaultPrevented&&w(e)})),ce=c;"button"===ce&&z.href&&(ce="a");var fe={};"button"===ce?(fe.type=F,fe.disabled=d):("a"===ce&&z.href||(fe.role="button"),fe["aria-disabled"]=d);var he=nH(r,t),de=nH(X,B),pe=nH(he,de),ve=f.exports.useState(!1),me=ve[0],ge=ve[1];f.exports.useEffect((function(){ge(!0)}),[]);var ye=me&&!v&&!d;return f.exports.createElement(ce,Gc({className:zp(s.root,l,W&&[s.focusVisible,b],d&&s.disabled),onBlur:ie,onClick:w,onFocus:oe,onKeyDown:le,onKeyUp:ue,onMouseDown:K,onMouseLeave:ee,onMouseUp:J,onDragLeave:Q,onTouchEnd:ne,onTouchMove:re,onTouchStart:te,ref:pe,tabIndex:d?-1:j},fe,z),a,ye?f.exports.createElement(jH,Gc({ref:V,center:o},D)):null)})),NH=WG({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(DH),FH=f.exports.forwardRef((function(e,t){var n=e.edge,r=void 0!==n&&n,i=e.children,o=e.classes,a=e.className,s=e.color,l=void 0===s?"default":s,u=e.disabled,c=void 0!==u&&u,h=e.disableFocusRipple,d=void 0!==h&&h,p=e.size,v=void 0===p?"medium":p,m=mp(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return f.exports.createElement(NH,Gc({className:zp(o.root,a,"default"!==l&&o["color".concat(GG(l))],c&&o.disabled,"small"===v&&o["size".concat(GG(v))],{start:o.edgeStart,end:o.edgeEnd}[r]),centerRipple:!0,focusRipple:!d,disabled:c,ref:t},m),f.exports.createElement("span",{className:o.label},i))})),zH=WG((function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:gG(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:gG(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:gG(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(FH),BH=f.exports.forwardRef((function(e,t){var n=e.children,r=e.classes,i=e.className,o=e.expandIcon,a=e.IconButtonProps,s=e.onBlur,l=e.onClick,u=e.onFocusVisible,c=mp(e,["children","classes","className","expandIcon","IconButtonProps","onBlur","onClick","onFocusVisible"]),h=f.exports.useState(!1),d=h[0],p=h[1],v=f.exports.useContext(CH),m=v.disabled,g=void 0!==m&&m,y=v.expanded,x=v.toggle;return f.exports.createElement(NH,Gc({focusRipple:!1,disableRipple:!0,disabled:g,component:"div","aria-expanded":y,className:zp(r.root,i,g&&r.disabled,y&&r.expanded,d&&r.focused),onFocusVisible:function(e){p(!0),u&&u(e)},onBlur:function(e){p(!1),s&&s(e)},onClick:function(e){x&&x(e),l&&l(e)},ref:t},c),f.exports.createElement("div",{className:zp(r.content,y&&r.expanded)},n),o&&f.exports.createElement(zH,Gc({className:zp(r.expandIcon,y&&r.expanded),edge:"end",component:"div",tabIndex:null,role:null,"aria-hidden":!0},a),o))})),VH=WG((function(e){var t={duration:e.transitions.duration.shortest};return{root:{display:"flex",minHeight:48,transition:e.transitions.create(["min-height","background-color"],t),padding:e.spacing(0,2),"&:hover:not($disabled)":{cursor:"pointer"},"&$expanded":{minHeight:64},"&$focused":{backgroundColor:e.palette.action.focus},"&$disabled":{opacity:e.palette.action.disabledOpacity}},expanded:{},focused:{},disabled:{},content:{display:"flex",flexGrow:1,transition:e.transitions.create(["margin"],t),margin:"12px 0","&$expanded":{margin:"20px 0"}},expandIcon:{transform:"rotate(0deg)",transition:e.transitions.create("transform",t),"&:hover":{backgroundColor:"transparent"},"&$expanded":{transform:"rotate(180deg)"}}}}),{name:"MuiAccordionSummary"})(BH),UH={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},WH=f.exports.forwardRef((function(e,t){var n=e.align,r=void 0===n?"inherit":n,i=e.classes,o=e.className,a=e.color,s=void 0===a?"initial":a,l=e.component,u=e.display,c=void 0===u?"initial":u,h=e.gutterBottom,d=void 0!==h&&h,p=e.noWrap,v=void 0!==p&&p,m=e.paragraph,g=void 0!==m&&m,y=e.variant,x=void 0===y?"body1":y,b=e.variantMapping,_=void 0===b?UH:b,w=mp(e,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),k=l||(g?"p":_[x]||UH[x])||"span";return f.exports.createElement(k,Gc({className:zp(i.root,o,"inherit"!==x&&i[x],"initial"!==s&&i["color".concat(GG(s))],v&&i.noWrap,d&&i.gutterBottom,g&&i.paragraph,"inherit"!==r&&i["align".concat(GG(r))],"initial"!==c&&i["display".concat(GG(c))]),ref:t},w))})),GH=WG((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(WH),HH=f.exports.createContext();var qH="undefined"!=typeof window?f.exports.useLayoutEffect:f.exports.useEffect,$H=f.exports.forwardRef((function(e,t){var n=e.children,r=e.container,i=e.disablePortal,o=void 0!==i&&i,a=e.onRendered,s=f.exports.useState(null),l=s[0],u=s[1],c=nH(f.exports.isValidElement(n)?n.ref:null,t);return qH((function(){o||u(function(e){return e="function"==typeof e?e():e,Y.exports.findDOMNode(e)}(r)||document.body)}),[r,o]),qH((function(){if(l&&!o)return QG(t,l),function(){QG(t,null)}}),[t,l,o]),qH((function(){a&&(l||o)&&a()}),[a,l,o]),o?f.exports.isValidElement(n)?f.exports.cloneElement(n,{ref:c}):n:l?Y.exports.createPortal(n,l):l}));function XH(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function YH(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function ZH(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,o=[t,n].concat(yd(r)),a=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){1===e.nodeType&&-1===o.indexOf(e)&&-1===a.indexOf(e.tagName)&&XH(e,i)}))}function KH(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function QH(e,t){var n,r=[],i=[],o=e.container;if(!t.disableScrollLock){if(function(e){var t=ZG(e);return t.body===e?KG(t).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(o)){var a=function(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}();r.push({value:o.style.paddingRight,key:"padding-right",el:o}),o.style["padding-right"]="".concat(YH(o)+a,"px"),n=ZG(o).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(e){i.push(e.style.paddingRight),e.style.paddingRight="".concat(YH(e)+a,"px")}))}var s=o.parentElement,l="HTML"===s.nodeName&&"scroll"===window.getComputedStyle(s)["overflow-y"]?s:o;r.push({value:l.style.overflow,key:"overflow",el:l}),l.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(e,t){i[t]?e.style.paddingRight=i[t]:e.style.removeProperty("padding-right")})),r.forEach((function(e){var t=e.value,n=e.el,r=e.key;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var JH=function(){function e(){Np(this,e),this.modals=[],this.containers=[]}return Tf(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&XH(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){e.getAttribute&&"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);ZH(t,e.mountNode,e.modalRef,r,!0);var i=KH(this.containers,(function(e){return e.container===t}));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblingNodes:r}),n)}},{key:"mount",value:function(e,t){var n=KH(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=QH(r,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=KH(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&XH(e.modalRef,!0),ZH(r.container,e.mountNode,e.modalRef,r.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var i=r.modals[r.modals.length-1];i.modalRef&&XH(i.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}();function eq(e){var t=e.children,n=e.disableAutoFocus,r=void 0!==n&&n,i=e.disableEnforceFocus,o=void 0!==i&&i,a=e.disableRestoreFocus,s=void 0!==a&&a,l=e.getDoc,u=e.isEnabled,c=e.open,h=f.exports.useRef(),d=f.exports.useRef(null),p=f.exports.useRef(null),v=f.exports.useRef(),m=f.exports.useRef(null),g=f.exports.useCallback((function(e){m.current=Y.exports.findDOMNode(e)}),[]),y=nH(t.ref,g),x=f.exports.useRef();return f.exports.useEffect((function(){x.current=c}),[c]),!x.current&&c&&"undefined"!=typeof window&&(v.current=l().activeElement),f.exports.useEffect((function(){if(c){var e=ZG(m.current);r||!m.current||m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex",-1),m.current.focus());var t=function(){null!==m.current&&(e.hasFocus()&&!o&&u()&&!h.current?m.current&&!m.current.contains(e.activeElement)&&m.current.focus():h.current=!1)},n=function(t){!o&&u()&&9===t.keyCode&&e.activeElement===m.current&&(h.current=!0,t.shiftKey?p.current.focus():d.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",n,!0);var i=setInterval((function(){t()}),50);return function(){clearInterval(i),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",n,!0),s||(v.current&&v.current.focus&&v.current.focus(),v.current=null)}}}),[r,o,s,u,c]),f.exports.createElement(f.exports.Fragment,null,f.exports.createElement("div",{tabIndex:0,ref:d,"data-test":"sentinelStart"}),f.exports.cloneElement(t,{ref:y}),f.exports.createElement("div",{tabIndex:0,ref:p,"data-test":"sentinelEnd"}))}var tq={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},nq=f.exports.forwardRef((function(e,t){var n=e.invisible,r=void 0!==n&&n,i=e.open,o=mp(e,["invisible","open"]);return i?f.exports.createElement("div",Gc({"aria-hidden":!0,ref:t},o,{style:Gc({},tq.root,r?tq.invisible:{},o.style)})):null}));var rq=new JH,iq=f.exports.forwardRef((function(e,t){var n=wp(),r=Pf({name:"MuiModal",props:Gc({},e),theme:n}),i=r.BackdropComponent,o=void 0===i?nq:i,a=r.BackdropProps,s=r.children,l=r.closeAfterTransition,u=void 0!==l&&l,c=r.container,h=r.disableAutoFocus,d=void 0!==h&&h,p=r.disableBackdropClick,v=void 0!==p&&p,m=r.disableEnforceFocus,g=void 0!==m&&m,y=r.disableEscapeKeyDown,x=void 0!==y&&y,b=r.disablePortal,_=void 0!==b&&b,w=r.disableRestoreFocus,k=void 0!==w&&w,S=r.disableScrollLock,E=void 0!==S&&S,P=r.hideBackdrop,C=void 0!==P&&P,A=r.keepMounted,O=void 0!==A&&A,T=r.manager,M=void 0===T?rq:T,R=r.onBackdropClick,I=r.onClose,L=r.onEscapeKeyDown,j=r.onRendered,D=r.open,N=mp(r,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),F=f.exports.useState(!0),z=F[0],B=F[1],V=f.exports.useRef({}),U=f.exports.useRef(null),W=f.exports.useRef(null),G=nH(W,t),H=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(r),q=function(){return ZG(U.current)},$=function(){return V.current.modalRef=W.current,V.current.mountNode=U.current,V.current},X=function(){M.mount($(),{disableScrollLock:E}),W.current.scrollTop=0},Z=tH((function(){var e=function(e){return e="function"==typeof e?e():e,Y.exports.findDOMNode(e)}(c)||q().body;M.add($(),e),W.current&&X()})),K=f.exports.useCallback((function(){return M.isTopModal($())}),[M]),Q=tH((function(e){U.current=e,e&&(j&&j(),D&&K()?X():XH(W.current,!0))})),J=f.exports.useCallback((function(){M.remove($())}),[M]);if(f.exports.useEffect((function(){return function(){J()}}),[J]),f.exports.useEffect((function(){D?Z():H&&u||J()}),[D,J,H,u,Z]),!O&&!D&&(!H||z))return null;var ee=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(n||{zIndex:zG}),te={};return void 0===s.props.tabIndex&&(te.tabIndex=s.props.tabIndex||"-1"),H&&(te.onEnter=HG((function(){B(!1)}),s.props.onEnter),te.onExited=HG((function(){B(!0),u&&J()}),s.props.onExited)),f.exports.createElement($H,{ref:Q,container:c,disablePortal:_},f.exports.createElement("div",Gc({ref:G,onKeyDown:function(e){"Escape"===e.key&&K()&&(L&&L(e),x||(e.stopPropagation(),I&&I(e,"escapeKeyDown")))},role:"presentation"},N,{style:Gc({},ee.root,!D&&z?ee.hidden:{},N.style)}),C?null:f.exports.createElement(o,Gc({open:D,onClick:function(e){e.target===e.currentTarget&&(R&&R(e),!v&&I&&I(e,"backdropClick"))}},a)),f.exports.createElement(eq,{disableEnforceFocus:g,disableAutoFocus:d,disableRestoreFocus:k,getDoc:q,isEnabled:K,open:D},f.exports.cloneElement(s,te))))})),oq=f.exports.forwardRef((function(e,t){var n=e.absolute,r=void 0!==n&&n,i=e.classes,o=e.className,a=e.component,s=void 0===a?"hr":a,l=e.flexItem,u=void 0!==l&&l,c=e.light,h=void 0!==c&&c,d=e.orientation,p=void 0===d?"horizontal":d,v=e.role,m=void 0===v?"hr"!==s?"separator":void 0:v,g=e.variant,y=void 0===g?"fullWidth":g,x=mp(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return f.exports.createElement(s,Gc({className:zp(i.root,o,"fullWidth"!==y&&i[y],r&&i.absolute,u&&i.flexItem,h&&i.light,"vertical"===p&&i.vertical),role:m,ref:t},x))})),aq=WG((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:gG(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(oq);function sq(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&void 0===t[n]&&(e[n]=r[n]),e}),{})}function lq(e,t){return parseInt(e[t],10)||0}var uq="undefined"!=typeof window?f.exports.useLayoutEffect:f.exports.useEffect,cq={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},fq=f.exports.forwardRef((function(e,t){var n=e.onChange,r=e.rows,i=e.rowsMax,o=e.rowsMin,a=void 0===o?1:o,s=e.style,l=e.value,u=mp(e,["onChange","rows","rowsMax","rowsMin","style","value"]),c=r||a,h=f.exports.useRef(null!=l).current,d=f.exports.useRef(null),p=nH(t,d),v=f.exports.useRef(null),m=f.exports.useRef(0),g=f.exports.useState({}),y=g[0],x=g[1],b=f.exports.useCallback((function(){var t=d.current,n=window.getComputedStyle(t),r=v.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var o=n["box-sizing"],a=lq(n,"padding-bottom")+lq(n,"padding-top"),s=lq(n,"border-bottom-width")+lq(n,"border-top-width"),l=r.scrollHeight-a;r.value="x";var u=r.scrollHeight-a,f=l;c&&(f=Math.max(Number(c)*u,f)),i&&(f=Math.min(Number(i)*u,f));var h=(f=Math.max(f,u))+("border-box"===o?a+s:0),p=Math.abs(f-l)<=1;x((function(e){return m.current<20&&(h>0&&Math.abs((e.outerHeightStyle||0)-h)>1||e.overflow!==p)?(m.current+=1,{overflow:p,outerHeightStyle:h}):e}))}),[i,c,e.placeholder]);f.exports.useEffect((function(){var e=YG((function(){m.current=0,b()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}),[b]),uq((function(){b()})),f.exports.useEffect((function(){m.current=0}),[l]);return f.exports.createElement(f.exports.Fragment,null,f.exports.createElement("textarea",Gc({value:l,onChange:function(e){m.current=0,h||b(),n&&n(e)},ref:p,rows:c,style:Gc({height:y.outerHeightStyle,overflow:y.overflow?"hidden":null},s)},u)),f.exports.createElement("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:v,tabIndex:-1,style:Gc({},cq,s)}))}));function hq(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}var dq="undefined"==typeof window?f.exports.useEffect:f.exports.useLayoutEffect,pq=f.exports.forwardRef((function(e,t){var n=e["aria-describedby"],r=e.autoComplete,i=e.autoFocus,o=e.classes,a=e.className;e.color;var s=e.defaultValue,l=e.disabled,u=e.endAdornment;e.error;var c=e.fullWidth,h=void 0!==c&&c,d=e.id,p=e.inputComponent,v=void 0===p?"input":p,m=e.inputProps,g=void 0===m?{}:m,y=e.inputRef;e.margin;var x=e.multiline,b=void 0!==x&&x,_=e.name,w=e.onBlur,k=e.onChange,S=e.onClick,E=e.onFocus,P=e.onKeyDown,C=e.onKeyUp,A=e.placeholder,O=e.readOnly,T=e.renderSuffix,M=e.rows,R=e.rowsMax,I=e.rowsMin,L=e.startAdornment,j=e.type,D=void 0===j?"text":j,N=e.value,F=mp(e,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","startAdornment","type","value"]),z=null!=g.value?g.value:N,B=f.exports.useRef(null!=z).current,V=f.exports.useRef(),U=f.exports.useCallback((function(e){}),[]),W=nH(g.ref,U),G=nH(y,W),H=nH(V,G),q=f.exports.useState(!1),$=q[0],X=q[1],Y=f.exports.useContext(HH),Z=sq({props:e,muiFormControl:Y,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});Z.focused=Y?Y.focused:$,f.exports.useEffect((function(){!Y&&l&&$&&(X(!1),w&&w())}),[Y,l,$,w]);var K=Y&&Y.onFilled,Q=Y&&Y.onEmpty,J=f.exports.useCallback((function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(hq(e.value)&&""!==e.value||t&&hq(e.defaultValue)&&""!==e.defaultValue)}(e)?Q&&Q():K&&K()}),[K,Q]);dq((function(){B&&J({value:z})}),[z,J,B]);f.exports.useEffect((function(){J(V.current)}),[]);var ee=v,te=Gc({},g,{ref:H});"string"!=typeof ee?te=Gc({inputRef:H,type:D},te,{ref:null}):b?!M||R||I?(te=Gc({rows:M,rowsMax:R},te),ee=fq):ee="textarea":te=Gc({type:D},te);return f.exports.useEffect((function(){Y&&Y.setAdornedStart(Boolean(L))}),[Y,L]),f.exports.createElement("div",Gc({className:zp(o.root,o["color".concat(GG(Z.color||"primary"))],a,Z.disabled&&o.disabled,Z.error&&o.error,h&&o.fullWidth,Z.focused&&o.focused,Y&&o.formControl,b&&o.multiline,L&&o.adornedStart,u&&o.adornedEnd,"dense"===Z.margin&&o.marginDense),onClick:function(e){V.current&&e.currentTarget===e.target&&V.current.focus(),S&&S(e)},ref:t},F),L,f.exports.createElement(HH.Provider,{value:null},f.exports.createElement(ee,Gc({"aria-invalid":Z.error,"aria-describedby":n,autoComplete:r,autoFocus:i,defaultValue:s,disabled:Z.disabled,id:d,onAnimationStart:function(e){J("mui-auto-fill-cancel"===e.animationName?V.current:{value:"x"})},name:_,placeholder:A,readOnly:O,required:Z.required,rows:M,value:z,onKeyDown:P,onKeyUp:C},te,{className:zp(o.input,g.className,Z.disabled&&o.disabled,b&&o.inputMultiline,Z.hiddenLabel&&o.inputHiddenLabel,L&&o.inputAdornedStart,u&&o.inputAdornedEnd,"search"===D&&o.inputTypeSearch,"dense"===Z.margin&&o.inputMarginDense),onBlur:function(e){w&&w(e),g.onBlur&&g.onBlur(e),Y&&Y.onBlur?Y.onBlur(e):X(!1)},onChange:function(e){if(!B){var t=e.target||V.current;if(null==t)throw new Error(Jc(1));J({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];g.onChange&&g.onChange.apply(g,[e].concat(r)),k&&k.apply(void 0,[e].concat(r))},onFocus:function(e){Z.disabled?e.stopPropagation():(E&&E(e),g.onFocus&&g.onFocus(e),Y&&Y.onFocus?Y.onFocus(e):X(!0))}}))),u,T?T(Gc({},Z,{startAdornment:L})):null)})),vq=WG((function(e){var t="light"===e.palette.type,n={color:"currentColor",opacity:t?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},r={opacity:"0 !important"},i={opacity:t?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:Gc({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px"),"&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus:-ms-input-placeholder":i,"&:focus::-ms-input-placeholder":i},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}}),{name:"MuiInputBase"})(pq),mq=[0,1,2,3,4,5,6,7,8,9,10],gq=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function yq(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseFloat(e);return"".concat(n/t).concat(String(e).replace(String(n),"")||"px")}var xq=f.exports.forwardRef((function(e,t){var n=e.alignContent,r=void 0===n?"stretch":n,i=e.alignItems,o=void 0===i?"stretch":i,a=e.classes,s=e.className,l=e.component,u=void 0===l?"div":l,c=e.container,h=void 0!==c&&c,d=e.direction,p=void 0===d?"row":d,v=e.item,m=void 0!==v&&v,g=e.justify,y=void 0===g?"flex-start":g,x=e.lg,b=void 0!==x&&x,_=e.md,w=void 0!==_&&_,k=e.sm,S=void 0!==k&&k,E=e.spacing,P=void 0===E?0:E,C=e.wrap,A=void 0===C?"wrap":C,O=e.xl,T=void 0!==O&&O,M=e.xs,R=void 0!==M&&M,I=e.zeroMinWidth,L=void 0!==I&&I,j=mp(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),D=zp(a.root,s,h&&[a.container,0!==P&&a["spacing-xs-".concat(String(P))]],m&&a.item,L&&a.zeroMinWidth,"row"!==p&&a["direction-xs-".concat(String(p))],"wrap"!==A&&a["wrap-xs-".concat(String(A))],"stretch"!==o&&a["align-items-xs-".concat(String(o))],"stretch"!==r&&a["align-content-xs-".concat(String(r))],"flex-start"!==y&&a["justify-xs-".concat(String(y))],!1!==R&&a["grid-xs-".concat(String(R))],!1!==S&&a["grid-sm-".concat(String(S))],!1!==w&&a["grid-md-".concat(String(w))],!1!==b&&a["grid-lg-".concat(String(b))],!1!==T&&a["grid-xl-".concat(String(T))]);return f.exports.createElement(u,Gc({className:D,ref:t},j))})),bq=WG((function(e){return Gc({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-xs-center":{justifyContent:"center"},"justify-xs-flex-end":{justifyContent:"flex-end"},"justify-xs-space-between":{justifyContent:"space-between"},"justify-xs-space-around":{justifyContent:"space-around"},"justify-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var n={};return mq.forEach((function(r){var i=e.spacing(r);0!==i&&(n["spacing-".concat(t,"-").concat(r)]={margin:"-".concat(yq(i,2)),width:"calc(100% + ".concat(yq(i),")"),"& > $item":{padding:yq(i,2)}})})),n}(e,"xs"),e.breakpoints.keys.reduce((function(t,n){return function(e,t,n){var r={};gq.forEach((function(e){var t="grid-".concat(n,"-").concat(e);if(!0!==e)if("auto"!==e){var i="".concat(Math.round(e/12*1e8)/1e6,"%");r[t]={flexBasis:i,flexGrow:0,maxWidth:i}}else r[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else r[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===n?Gc(e,r):e[t.breakpoints.up(n)]=r}(t,e,n),t}),{}))}),{name:"MuiGrid"})(xq);function _q(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var wq={entering:{opacity:1,transform:_q(1)},entered:{opacity:1,transform:"none"}},kq=f.exports.forwardRef((function(e,t){var n=e.children,r=e.disableStrictModeCompat,i=void 0!==r&&r,o=e.in,a=e.onEnter,s=e.onEntered,l=e.onEntering,u=e.onExit,c=e.onExited,h=e.onExiting,d=e.style,p=e.timeout,v=void 0===p?"auto":p,m=e.TransitionComponent,g=void 0===m?vH:m,y=mp(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),x=f.exports.useRef(),b=f.exports.useRef(),_=UG(),w=_.unstable_strictMode&&!i,k=f.exports.useRef(null),S=nH(n.ref,t),E=nH(w?k:void 0,S),P=function(e){return function(t,n){if(e){var r=ob(w?[k.current,t]:[t,n],2),i=r[0],o=r[1];void 0===o?e(i):e(i,o)}}},C=P(l),A=P((function(e,t){!function(e){e.scrollTop}(e);var n,r=wH({style:d,timeout:v},{mode:"enter"}),i=r.duration,o=r.delay;"auto"===v?(n=_.transitions.getAutoHeightDuration(e.clientHeight),b.current=n):n=i,e.style.transition=[_.transitions.create("opacity",{duration:n,delay:o}),_.transitions.create("transform",{duration:.666*n,delay:o})].join(","),a&&a(e,t)})),O=P(s),T=P(h),M=P((function(e){var t,n=wH({style:d,timeout:v},{mode:"exit"}),r=n.duration,i=n.delay;"auto"===v?(t=_.transitions.getAutoHeightDuration(e.clientHeight),b.current=t):t=r,e.style.transition=[_.transitions.create("opacity",{duration:t,delay:i}),_.transitions.create("transform",{duration:.666*t,delay:i||.333*t})].join(","),e.style.opacity="0",e.style.transform=_q(.75),u&&u(e)})),R=P(c);return f.exports.useEffect((function(){return function(){clearTimeout(x.current)}}),[]),f.exports.createElement(g,Gc({appear:!0,in:o,nodeRef:w?k:void 0,onEnter:A,onEntered:O,onEntering:C,onExit:M,onExited:R,onExiting:T,addEndListener:function(e,t){var n=w?e:t;"auto"===v&&(x.current=setTimeout(n,b.current||0))},timeout:"auto"===v?null:v},y),(function(e,t){return f.exports.cloneElement(n,Gc({style:Gc({opacity:0,transform:_q(.75),visibility:"exited"!==e||o?void 0:"hidden"},wq[e],d,n.props.style),ref:E},t))}))}));kq.muiSupportAuto=!0;var Sq=f.exports.forwardRef((function(e,t){var n=e.disableUnderline,r=e.classes,i=e.fullWidth,o=void 0!==i&&i,a=e.inputComponent,s=void 0===a?"input":a,l=e.multiline,u=void 0!==l&&l,c=e.type,h=void 0===c?"text":c,d=mp(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return f.exports.createElement(vq,Gc({classes:Gc({},r,{root:zp(r.root,!n&&r.underline),underline:null}),fullWidth:o,inputComponent:s,multiline:u,ref:t,type:h},d))}));Sq.muiName="Input";var Eq=WG((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(t),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(t)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}}),{name:"MuiInput"})(Sq);function Pq(e,t){var n=0;return"number"==typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function Cq(e,t){var n=0;return"number"==typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function Aq(e){return[e.horizontal,e.vertical].map((function(e){return"number"==typeof e?"".concat(e,"px"):e})).join(" ")}function Oq(e){return"function"==typeof e?e():e}var Tq=f.exports.forwardRef((function(e,t){var n=e.action,r=e.anchorEl,i=e.anchorOrigin,o=void 0===i?{vertical:"top",horizontal:"left"}:i,a=e.anchorPosition,s=e.anchorReference,l=void 0===s?"anchorEl":s,u=e.children,c=e.classes,h=e.className,d=e.container,p=e.elevation,v=void 0===p?8:p,m=e.getContentAnchorEl,g=e.marginThreshold,y=void 0===g?16:g,x=e.onEnter,b=e.onEntered,_=e.onEntering,w=e.onExit,k=e.onExited,S=e.onExiting,E=e.open,P=e.PaperProps,C=void 0===P?{}:P,A=e.transformOrigin,O=void 0===A?{vertical:"top",horizontal:"left"}:A,T=e.TransitionComponent,M=void 0===T?kq:T,R=e.transitionDuration,I=void 0===R?"auto":R,L=e.TransitionProps,j=void 0===L?{}:L,D=mp(e,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),N=f.exports.useRef(),F=f.exports.useCallback((function(e){if("anchorPosition"===l)return a;var t=Oq(r),n=(t&&1===t.nodeType?t:ZG(N.current).body).getBoundingClientRect(),i=0===e?o.vertical:"center";return{top:n.top+Pq(n,i),left:n.left+Cq(n,o.horizontal)}}),[r,o.horizontal,o.vertical,a,l]),z=f.exports.useCallback((function(e){var t=0;if(m&&"anchorEl"===l){var n=m(e);if(n&&e.contains(n)){var r=function(e,t){for(var n=t,r=0;n&&n!==e;)r+=(n=n.parentElement).scrollTop;return r}(e,n);t=n.offsetTop+n.clientHeight/2-r||0}}return t}),[o.vertical,l,m]),B=f.exports.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{vertical:Pq(e,O.vertical)+t,horizontal:Cq(e,O.horizontal)}}),[O.horizontal,O.vertical]),V=f.exports.useCallback((function(e){var t=z(e),n={width:e.offsetWidth,height:e.offsetHeight},i=B(n,t);if("none"===l)return{top:null,left:null,transformOrigin:Aq(i)};var o=F(t),a=o.top-i.vertical,s=o.left-i.horizontal,u=a+n.height,c=s+n.width,f=KG(Oq(r)),h=f.innerHeight-y,d=f.innerWidth-y;if(a<y){var p=a-y;a-=p,i.vertical+=p}else if(u>h){var v=u-h;a-=v,i.vertical+=v}if(s<y){var m=s-y;s-=m,i.horizontal+=m}else if(c>d){var g=c-d;s-=g,i.horizontal+=g}return{top:"".concat(Math.round(a),"px"),left:"".concat(Math.round(s),"px"),transformOrigin:Aq(i)}}),[r,l,F,z,B,y]),U=f.exports.useCallback((function(){var e=N.current;if(e){var t=V(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}}),[V]),W=f.exports.useCallback((function(e){N.current=Y.exports.findDOMNode(e)}),[]);f.exports.useEffect((function(){E&&U()})),f.exports.useImperativeHandle(n,(function(){return E?{updatePosition:function(){U()}}:null}),[E,U]),f.exports.useEffect((function(){if(E){var e=YG((function(){U()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[E,U]);var G=I;"auto"!==I||M.muiSupportAuto||(G=void 0);var H=d||(r?ZG(Oq(r)).body:void 0);return f.exports.createElement(iq,Gc({container:H,open:E,ref:t,BackdropProps:{invisible:!0},className:zp(c.root,h)},D),f.exports.createElement(M,Gc({appear:!0,in:E,onEnter:x,onEntered:b,onExit:w,onExited:k,onExiting:S,timeout:G},j,{onEntering:HG((function(e,t){_&&_(e,t),U()}),j.onEntering)}),f.exports.createElement(PH,Gc({elevation:v,ref:W},C,{className:zp(c.paper,C.className)}),u)))})),Mq=WG({root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},{name:"MuiPopover"})(Tq),Rq=f.exports.forwardRef((function(e,t){var n=e.classes,r=e.className,i=e.disabled,o=e.IconComponent,a=e.inputRef,s=e.variant,l=void 0===s?"standard":s,u=mp(e,["classes","className","disabled","IconComponent","inputRef","variant"]);return f.exports.createElement(f.exports.Fragment,null,f.exports.createElement("select",Gc({className:zp(n.root,n.select,n[l],r,i&&n.disabled),disabled:i,ref:a||t},u)),e.multiple?null:f.exports.createElement(o,{className:zp(n.icon,n["icon".concat(GG(l))],i&&n.disabled)}))})),Iq=XG(f.exports.createElement("path",{d:"M7 10l5 5 5-5z"})),Lq=f.exports.createElement(Eq,null),jq=f.exports.forwardRef((function(e,t){var n=e.children,r=e.classes,i=e.IconComponent,o=void 0===i?Iq:i,a=e.input,s=void 0===a?Lq:a,l=e.inputProps;e.variant;var u=mp(e,["children","classes","IconComponent","input","inputProps","variant"]),c=sq({props:e,muiFormControl:f.exports.useContext(HH),states:["variant"]});return f.exports.cloneElement(s,Gc({inputComponent:Rq,inputProps:Gc({children:n,classes:r,IconComponent:o,variant:c.variant,type:void 0},l,s?s.props.inputProps:{}),ref:t},u))}));jq.muiName="Select";var Dq=WG((function(e){return{root:{},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",borderRadius:0,minWidth:16,cursor:"pointer","&:focus":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:e.palette.background.paper},"&&":{paddingRight:24}},filled:{"&&":{paddingRight:32}},outlined:{borderRadius:e.shape.borderRadius,"&&":{paddingRight:32}},selectMenu:{height:"auto",minHeight:"1.1876em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",pointerEvents:"none",color:e.palette.action.active,"&$disabled":{color:e.palette.action.disabled}},iconOpen:{transform:"rotate(180deg)"},iconFilled:{right:7},iconOutlined:{right:7},nativeInput:{bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%"}}}),{name:"MuiNativeSelect"})(jq);var Nq=WG((function(e){return{thumb:{"&$open":{"& $offset":{transform:"scale(1) translateY(-10px)"}}},open:{},offset:Gc({zIndex:1},e.typography.body2,{fontSize:e.typography.pxToRem(12),lineHeight:1.2,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),top:-34,transformOrigin:"bottom center",transform:"scale(0)",position:"absolute"}),circle:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:"50% 50% 50% 0",backgroundColor:"currentColor",transform:"rotate(-45deg)"},label:{color:e.palette.primary.contrastText,transform:"rotate(45deg)"}}}),{name:"PrivateValueLabel"})((function(e){var t=e.children,n=e.classes,r=e.className,i=e.open,o=e.value,a=e.valueLabelDisplay;return"off"===a?t:f.exports.cloneElement(t,{className:zp(t.props.className,(i||"on"===a)&&n.open,n.thumb)},f.exports.createElement("span",{className:zp(n.offset,r)},f.exports.createElement("span",{className:n.circle},f.exports.createElement("span",{className:n.label},o))))}));function Fq(e,t){return e-t}function zq(e,t,n){return Math.min(Math.max(t,e),n)}function Bq(e,t){return e.reduce((function(e,n,r){var i=Math.abs(t-n);return null===e||i<e.distance||i===e.distance?{distance:i,index:r}:e}),null).index}function Vq(e,t){if(void 0!==t.current&&e.changedTouches){for(var n=0;n<e.changedTouches.length;n+=1){var r=e.changedTouches[n];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Uq(e,t,n){return 100*(e-t)/(n-t)}function Wq(e,t,n){var r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(function(e){if(Math.abs(e)<1){var t=e.toExponential().split("e-"),n=t[0].split(".")[1];return(n?n.length:0)+parseInt(t[1],10)}var r=e.toString().split(".")[1];return r?r.length:0}(t)))}function Gq(e){var t=e.values,n=e.source,r=e.newValue,i=e.index;if(t[i]===r)return n;var o=t.slice();return o[i]=r,o}function Hq(e){var t=e.sliderRef,n=e.activeIndex,r=e.setActive;t.current.contains(document.activeElement)&&Number(document.activeElement.getAttribute("data-index"))===n||t.current.querySelector('[role="slider"][data-index="'.concat(n,'"]')).focus(),r&&r(n)}var qq={horizontal:{offset:function(e){return{left:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},"horizontal-reverse":{offset:function(e){return{right:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},vertical:{offset:function(e){return{bottom:"".concat(e,"%")}},leap:function(e){return{height:"".concat(e,"%")}}}},$q=function(e){return e},Xq=f.exports.forwardRef((function(e,t){var n=e["aria-label"],r=e["aria-labelledby"],i=e["aria-valuetext"],o=e.classes,a=e.className,s=e.color,l=void 0===s?"primary":s,u=e.component,c=void 0===u?"span":u,h=e.defaultValue,d=e.disabled,p=void 0!==d&&d,v=e.getAriaLabel,m=e.getAriaValueText,g=e.marks,y=void 0!==g&&g,x=e.max,b=void 0===x?100:x,_=e.min,w=void 0===_?0:_,k=e.name,S=e.onChange,E=e.onChangeCommitted,P=e.onMouseDown,C=e.orientation,A=void 0===C?"horizontal":C,O=e.scale,T=void 0===O?$q:O,M=e.step,R=void 0===M?1:M,I=e.ThumbComponent,L=void 0===I?"span":I,j=e.track,D=void 0===j?"normal":j,N=e.value,F=e.ValueLabelComponent,z=void 0===F?Nq:F,B=e.valueLabelDisplay,V=void 0===B?"off":B,U=e.valueLabelFormat,W=void 0===U?$q:U,G=mp(e,["aria-label","aria-labelledby","aria-valuetext","classes","className","color","component","defaultValue","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","onMouseDown","orientation","scale","step","ThumbComponent","track","value","ValueLabelComponent","valueLabelDisplay","valueLabelFormat"]),H=UG(),q=f.exports.useRef(),$=f.exports.useState(-1),X=$[0],Y=$[1],Z=f.exports.useState(-1),K=Z[0],Q=Z[1],J=ob(JG({controlled:N,default:h,name:"Slider"}),2),ee=J[0],te=J[1],ne=Array.isArray(ee),re=ne?ee.slice().sort(Fq):[ee];re=re.map((function(e){return zq(e,w,b)}));var ie=!0===y&&null!==R?yd(Array(Math.floor((b-w)/R)+1)).map((function(e,t){return{value:w+R*t}})):y||[],oe=hH(),ae=oe.isFocusVisible,se=oe.onBlurVisible,le=oe.ref,ue=f.exports.useState(-1),ce=ue[0],fe=ue[1],he=f.exports.useRef(),de=nH(le,he),pe=nH(t,de),ve=tH((function(e){var t=Number(e.currentTarget.getAttribute("data-index"));ae(e)&&fe(t),Q(t)})),me=tH((function(){-1!==ce&&(fe(-1),se()),Q(-1)})),ge=tH((function(e){var t=Number(e.currentTarget.getAttribute("data-index"));Q(t)})),ye=tH((function(){Q(-1)})),xe="rtl"===H.direction,be=tH((function(e){var t,n=Number(e.currentTarget.getAttribute("data-index")),r=re[n],i=(b-w)/10,o=ie.map((function(e){return e.value})),a=o.indexOf(r),s=xe?"ArrowLeft":"ArrowRight",l=xe?"ArrowRight":"ArrowLeft";switch(e.key){case"Home":t=w;break;case"End":t=b;break;case"PageUp":R&&(t=r+i);break;case"PageDown":R&&(t=r-i);break;case s:case"ArrowUp":t=R?r+R:o[a+1]||o[o.length-1];break;case l:case"ArrowDown":t=R?r-R:o[a-1]||o[0];break;default:return}if(e.preventDefault(),R&&(t=Wq(t,R,w)),t=zq(t,w,b),ne){var u=t;t=Gq({values:re,source:ee,newValue:t,index:n}).sort(Fq),Hq({sliderRef:he,activeIndex:t.indexOf(u)})}te(t),fe(n),S&&S(e,t),E&&E(e,t)})),_e=f.exports.useRef(),we=A;xe&&"vertical"!==A&&(we+="-reverse");var ke=function(e){var t,n,r=e.finger,i=e.move,o=void 0!==i&&i,a=e.values,s=e.source,l=he.current.getBoundingClientRect(),u=l.width,c=l.height,f=l.bottom,h=l.left;if(t=0===we.indexOf("vertical")?(f-r.y)/c:(r.x-h)/u,-1!==we.indexOf("-reverse")&&(t=1-t),n=function(e,t,n){return(n-t)*e+t}(t,w,b),R)n=Wq(n,R,w);else{var d=ie.map((function(e){return e.value}));n=d[Bq(d,n)]}n=zq(n,w,b);var p=0;if(ne){var v=n;p=(n=Gq({values:a,source:s,newValue:n,index:p=o?_e.current:Bq(a,n)}).sort(Fq)).indexOf(v),_e.current=p}return{newValue:n,activeIndex:p}},Se=tH((function(e){var t=Vq(e,q);if(t){var n=ke({finger:t,move:!0,values:re,source:ee}),r=n.newValue,i=n.activeIndex;Hq({sliderRef:he,activeIndex:i,setActive:Y}),te(r),S&&S(e,r)}})),Ee=tH((function(e){var t=Vq(e,q);if(t){var n=ke({finger:t,values:re,source:ee}).newValue;Y(-1),"touchend"===e.type&&Q(-1),E&&E(e,n),q.current=void 0;var r=ZG(he.current);r.removeEventListener("mousemove",Se),r.removeEventListener("mouseup",Ee),r.removeEventListener("touchmove",Se),r.removeEventListener("touchend",Ee)}})),Pe=tH((function(e){e.preventDefault();var t=e.changedTouches[0];null!=t&&(q.current=t.identifier);var n=Vq(e,q),r=ke({finger:n,values:re,source:ee}),i=r.newValue,o=r.activeIndex;Hq({sliderRef:he,activeIndex:o,setActive:Y}),te(i),S&&S(e,i);var a=ZG(he.current);a.addEventListener("touchmove",Se),a.addEventListener("touchend",Ee)}));f.exports.useEffect((function(){var e=he.current;e.addEventListener("touchstart",Pe);var t=ZG(e);return function(){e.removeEventListener("touchstart",Pe),t.removeEventListener("mousemove",Se),t.removeEventListener("mouseup",Ee),t.removeEventListener("touchmove",Se),t.removeEventListener("touchend",Ee)}}),[Ee,Se,Pe]);var Ce=tH((function(e){P&&P(e),e.preventDefault();var t=Vq(e,q),n=ke({finger:t,values:re,source:ee}),r=n.newValue,i=n.activeIndex;Hq({sliderRef:he,activeIndex:i,setActive:Y}),te(r),S&&S(e,r);var o=ZG(he.current);o.addEventListener("mousemove",Se),o.addEventListener("mouseup",Ee)})),Ae=Uq(ne?re[0]:w,w,b),Oe=Uq(re[re.length-1],w,b)-Ae,Te=Gc({},qq[we].offset(Ae),qq[we].leap(Oe));return f.exports.createElement(c,Gc({ref:pe,className:zp(o.root,o["color".concat(GG(l))],a,p&&o.disabled,ie.length>0&&ie.some((function(e){return e.label}))&&o.marked,!1===D&&o.trackFalse,"vertical"===A&&o.vertical,"inverted"===D&&o.trackInverted),onMouseDown:Ce},G),f.exports.createElement("span",{className:o.rail}),f.exports.createElement("span",{className:o.track,style:Te}),f.exports.createElement("input",{value:re.join(","),name:k,type:"hidden"}),ie.map((function(e,t){var n,r=Uq(e.value,w,b),i=qq[we].offset(r);return n=!1===D?-1!==re.indexOf(e.value):"normal"===D&&(ne?e.value>=re[0]&&e.value<=re[re.length-1]:e.value<=re[0])||"inverted"===D&&(ne?e.value<=re[0]||e.value>=re[re.length-1]:e.value>=re[0]),f.exports.createElement(f.exports.Fragment,{key:e.value},f.exports.createElement("span",{style:i,"data-index":t,className:zp(o.mark,n&&o.markActive)}),null!=e.label?f.exports.createElement("span",{"aria-hidden":!0,"data-index":t,style:i,className:zp(o.markLabel,n&&o.markLabelActive)},e.label):null)})),re.map((function(e,t){var a=Uq(e,w,b),s=qq[we].offset(a);return f.exports.createElement(z,{key:t,valueLabelFormat:W,valueLabelDisplay:V,className:o.valueLabel,value:"function"==typeof W?W(T(e),t):W,index:t,open:K===t||X===t||"on"===V,disabled:p},f.exports.createElement(L,{className:zp(o.thumb,o["thumbColor".concat(GG(l))],X===t&&o.active,p&&o.disabled,ce===t&&o.focusVisible),tabIndex:p?null:0,role:"slider",style:s,"data-index":t,"aria-label":v?v(t):n,"aria-labelledby":r,"aria-orientation":A,"aria-valuemax":T(b),"aria-valuemin":T(w),"aria-valuenow":T(e),"aria-valuetext":m?m(T(e),t):i,onKeyDown:be,onFocus:ve,onBlur:me,onMouseOver:ge,onMouseLeave:ye}))})))})),Yq=WG((function(e){return{root:{height:2,width:"100%",boxSizing:"content-box",padding:"13px 0",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:e.palette.primary.main,WebkitTapHighlightColor:"transparent","&$disabled":{pointerEvents:"none",cursor:"default",color:e.palette.grey[400]},"&$vertical":{width:2,height:"100%",padding:"0 13px"},"@media (pointer: coarse)":{padding:"20px 0","&$vertical":{padding:"0 20px"}},"@media print":{colorAdjust:"exact"}},colorPrimary:{},colorSecondary:{color:e.palette.secondary.main},marked:{marginBottom:20,"&$vertical":{marginBottom:"auto",marginRight:20}},vertical:{},disabled:{},rail:{display:"block",position:"absolute",width:"100%",height:2,borderRadius:1,backgroundColor:"currentColor",opacity:.38,"$vertical &":{height:"100%",width:2}},track:{display:"block",position:"absolute",height:2,borderRadius:1,backgroundColor:"currentColor","$vertical &":{width:2}},trackFalse:{"& $track":{display:"none"}},trackInverted:{"& $track":{backgroundColor:"light"===e.palette.type?xG(e.palette.primary.main,.62):yG(e.palette.primary.main,.5)},"& $rail":{opacity:1}},thumb:{position:"absolute",width:12,height:12,marginLeft:-6,marginTop:-5,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow"],{duration:e.transitions.duration.shortest}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",left:-15,top:-15,right:-15,bottom:-15},"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat(gG(e.palette.primary.main,.16)),"@media (hover: none)":{boxShadow:"none"}},"&$active":{boxShadow:"0px 0px 0px 14px ".concat(gG(e.palette.primary.main,.16))},"&$disabled":{width:8,height:8,marginLeft:-4,marginTop:-3,"&:hover":{boxShadow:"none"}},"$vertical &":{marginLeft:-5,marginBottom:-6},"$vertical &$disabled":{marginLeft:-3,marginBottom:-4}},thumbColorPrimary:{},thumbColorSecondary:{"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat(gG(e.palette.secondary.main,.16))},"&$active":{boxShadow:"0px 0px 0px 14px ".concat(gG(e.palette.secondary.main,.16))}},active:{},focusVisible:{},valueLabel:{left:"calc(-50% - 4px)"},mark:{position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},markActive:{backgroundColor:e.palette.background.paper,opacity:.8},markLabel:Gc({},e.typography.body2,{color:e.palette.text.secondary,position:"absolute",top:26,transform:"translateX(-50%)",whiteSpace:"nowrap","$vertical &":{top:"auto",left:26,transform:"translateY(50%)"},"@media (pointer: coarse)":{top:40,"$vertical &":{left:31}}}),markLabelActive:{color:e.palette.text.primary}}}),{name:"MuiSlider"})(Xq),Zq=XG(f.exports.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})),Kq=XG(f.exports.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"})),Qq=XG(f.exports.createElement("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})),Jq=XG(f.exports.createElement("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),e$=XG(f.exports.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),t$=XG(f.exports.createElement("path",{d:"M19 13H5v-2h14v2z"})),n$=XG(f.exports.createElement("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})),r$=XG(f.exports.createElement("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"})),i$={};Object.defineProperty(i$,"__esModule",{value:!0});var o$=i$.default=void 0,a$={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"};o$=i$.default=a$;export{Jp as $,VH as A,t$ as B,qI as C,mV as D,Jq as E,e$ as F,DW as G,MW as H,zV as I,MH as J,OH as K,Kq as L,lP as M,Dq as N,sL as O,Mq as P,tv as Q,X as R,lN as S,vF as T,BG as U,n$ as V,o$ as W,OV as X,oU as Y,AW as Z,oc as _,lU as a,Bc as a0,LW as b,rU as c,BV as d,Uc as e,rv as f,Wc as g,Hz as h,zH as i,r$ as j,ev as k,GH as l,bq as m,Zq as n,NW as o,qW as p,PH as q,f as r,lv as s,aq as t,nv as u,Yq as v,gv as w,Eq as x,Qq as y,Dp as z};
